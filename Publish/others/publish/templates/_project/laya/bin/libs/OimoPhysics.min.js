/* OimoPhysics 1.2.0 (c) 2018 saharan, The MIT License */'use strict';(function(S){function Wa(a){this.Cc=-1;this.ha=new Ja;this.pa=new Ja;this.a=new Ja;var b=a.position;this.ha.v=b.x;this.ha.A=b.y;this.ha.B=b.z;b=a.rotation;this.ha.o=b.e00;this.ha.f=b.e01;this.ha.h=b.e02;this.ha.i=b.e10;this.ha.m=b.e11;this.ha.j=b.e12;this.ha.l=b.e20;this.ha.g=b.e21;this.ha.s=b.e22;var b=this.pa,e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;b=this.a;e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.hk=a.restitution;this.Xj=a.friction;this.Dk=a.density;this.Kb=a.geometry;this.Tj=a.collisionGroup;this.Uj=a.collisionMask;this.yd=a.contactCallback;this.u=new Xa;this.tb=null;this.rc=new t}function Rd(){}function u(a){this.Fi=this.Dc=this.ia=this.M=null;this.zg=0;this.kc=this.Ob=null;this.Ae=0;this.Ze=this.ze=null;this.kh=0;var b=a.linearVelocity;this.gb=b.x;this.hb=b.y;this.ib=b.z;b=a.angularVelocity;this.kb=b.x;this.lb=b.y;this.mb=b.z;this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=0;this.pa=new Ja;this.a=new Ja;b=a.position;this.pa.v=b.x;this.pa.A=b.y;this.pa.B=b.z;b=a.rotation;this.pa.o=b.e00;this.pa.f=b.e01;this.pa.h=b.e02;this.pa.i=b.e10;this.pa.m=b.e11;this.pa.j=b.e12;this.pa.l=b.e20;this.pa.g=b.e21;this.pa.s=b.e22;var b=this.a,e=this.pa;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Lb=a.type;this.yb=0;this.Gb=!1;this.Bk=a.autoSleep;this.Y=this.X=this.W=this.V=this.U=this.T=this.S=this.R=this.P=this.yi=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=this.ri=this.pi=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Id=this.Hd=this.Gd=this.Fd=this.Ed=this.Dd=this.Cd=this.Bd=this.Ad=this.$a=this.Pc=0;this.$j=a.linearDamping;this.Qj=a.angularDamping;this.xf=this.wf=this.vf=this.Oh=this.Nh=this.Mh=0;this.N=new t(1,1,1);this.Nf=!1;this.eh=1;this.oc=null}function ql(){this.mass=0;this.localInertia=new E}function mc(a){Ob.call(this);this.$=a;this.info=new rl;this.ac=Array(G.maxJacobianRows);a=0;for(var b=this.ac.length;a<b;){var e=a++;this.ac[e]=new sl}}function nc(a){Ob.call(this);this.Ji=a;this.info=new Xl;this.ac=Array(G.maxManifoldPoints);a=0;for(var b=this.ac.length;a<b;){var e=a++;this.ac[e]=new Yl}}function tl(a){this.Ag=a;this.wk=Array(this.Ag);this.$a=Array(this.Ag);this.cj=Array(this.Ag);a=0;for(var b=this.Ag;a<b;){var e=a++;this.wk[e]=Array(this.Ag);this.$a[e]=Array(this.Ag);this.cj[e]=Array(this.Ag);for(var c=0,d=this.Ag;c<d;){var f=c++;this.wk[e][f]=0;this.$a[e][f]=0;this.cj[e][f]=0}}this.ak=1<<this.Ag;this.Sj=Array(this.ak);this.Ck=Array(this.ak);a=0;for(b=this.ak;a<b;){for(var c=e=a++,c=(c&85)+(c>>1&85),c=(c&51)+(c>>2&51),c=(c&15)+(c>>4&15),d=Array(c),f=0,h=c;f<h;){var l=f++;d[l]=Array(c);for(var g=0,k=c;g<k;){var m=g++;d[l][m]=0}}this.Sj[e]=!1;this.Ck[e]=d}}function vc(a){Ob.call(this);this.$=a;this.info=new rl;a=G.maxJacobianRows;this.ei=new tl(a);this.Se=new ul(a);this.ac=Array(a);for(var b=0,e=this.ac.length;b<e;){var c=b++;this.ac[c]=new sl}b=this.Se.Th.length;this.Ml=new dl(b);this.Ki=new dl(b);this.Qg=Array(a);this.Yh=Array(a);this.Cf=Array(a);this.Aj=Array(a);for(b=0;b<a;)e=b++,this.Qg[e]=0,this.Yh[e]=0,this.Cf[e]=0,this.Aj[e]=0}function dl(a){this.n=a;this.sc=Array(a);this.kf=Array(a);for(var b=0;b<a;){var e=b++;this.sc[e]=e}}function ul(a){this.Qn=a;this.jf=0;this.Th=Array(1<<a);this.cf=new Zl(a)}function Zl(a){this.size=a;this.Sc=0;this.uh=Array(a);this.zh=Array(a);this.ie=0;this.Mg=Array(a)}function vl(a){this.uh=Array(a);this.Mg=Array(a);this.zh=Array(a);this.il=Array(a);this.ie=this.Sc=0}function sl(){this.Ff=this.mass=this.pd=this.od=this.nd=this.md=this.ld=this.kd=this.vd=this.ud=this.td=this.sd=this.rd=this.qd=0}function Yl(){this.Bm=this.Am=this.zm=this.ym=this.he=this.rk=this.qk=this.pk=this.nk=this.mk=this.lk=this.xl=this.wl=this.vl=this.ul=this.tl=this.sl=this.Jj=this.Ij=this.Hj=this.Gj=this.Fj=this.Ej=this.Dl=this.Cl=this.Bl=this.Al=this.zl=this.yl=this.bg=this.ag=this.$f=this.Zf=this.Yf=this.Xf=this.di=this.ci=this.bi=this.ai=this.$h=this.Zh=0}function Fe(){}function rf(){kc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper1=new Wb;this.springDamper2=new Wb;this.limitMotor1=new ac;this.limitMotor2=new ac}function hb(a){V.call(this,a,rc.UNIVERSAL);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.Mc=b.x;this.Nc=b.y;this.Oc=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.Mc*this.Mc+this.Nc*this.Nc+this.Oc*this.Oc?(b=this.Mc*this.Mc+this.Nc*this.Nc+this.Oc*this.Oc,0<b&&(b=1/Math.sqrt(b)),this.Mc*=b,this.Nc*=b,this.Oc*=b):(this.Nc=this.Mc=0,this.Oc=1);var e=this.C.a,b=this.D.a,c,d,f,h,l,g,k,m,n,q,p,r,v;r=e.o*this.qa+e.f*this.ra+e.h*this.sa;v=e.i*this.qa+e.m*this.ra+e.j*this.sa;c=e.l*this.qa+e.g*this.ra+e.s*this.sa;var R,y;R=b.o*this.Mc+b.f*this.Nc+b.h*this.Oc;y=b.i*this.Mc+b.m*this.Nc+b.j*this.Oc;p=b.l*this.Mc+b.g*this.Nc+b.s*this.Oc;l=y*c-p*v;g=p*r-R*c;k=R*v-y*r;l*l+g*g+k*k||(l=r*r,g=v*v,k=c*c,l<g?l<k?(k=1/Math.sqrt(g+k),l=0,g=c*k,k*=-v):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0):g<k?(k=1/Math.sqrt(k+l),l=-c*k,g=0,k*=r):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0));d=v*k-c*g;f=c*l-r*k;h=r*g-v*l;m=g*p-k*y;n=k*R-l*p;q=l*y-g*R;var L,w;L=e.o*r+e.i*v+e.l*c;w=e.f*r+e.m*v+e.g*c;c=e.h*r+e.j*v+e.s*c;this.qa=L;this.ra=w;this.sa=c;c=e.o*l+e.i*g+e.l*k;r=e.f*l+e.m*g+e.g*k;v=e.h*l+e.j*g+e.s*k;this.Ab=c;this.Bb=r;this.Cb=v;c=e.o*d+e.i*f+e.l*h;r=e.f*d+e.m*f+e.g*h;e=e.h*d+e.j*f+e.s*h;this.lc=c;this.mc=r;this.nc=e;e=b.o*m+b.i*n+b.l*q;d=b.f*m+b.m*n+b.g*q;m=b.h*m+b.j*n+b.s*q;this.nb=e;this.ob=d;this.pb=m;e=b.o*l+b.i*g+b.l*k;m=b.f*l+b.m*g+b.g*k;l=b.h*l+b.j*g+b.s*k;this.gh=e;this.hh=m;this.ih=l;l=b.o*R+b.i*y+b.l*p;g=b.f*R+b.m*y+b.g*p;b=b.h*R+b.j*y+b.s*p;this.Mc=l;this.Nc=g;this.Oc=b;this.Oi=this.Pl=this.Ni=0;this.Lm=this.Km=this.Jm=!1;this.Yk=a.springDamper1.clone();this.Zk=a.springDamper2.clone();this.Qk=a.limitMotor1.clone();this.Rk=a.limitMotor2.clone()}function yd(){this.lowerLimit=1;this.motorForce=this.upperLimit=0}function Wb(){this.dampingRatio=this.frequency=0;this.useSymplecticEuler=!1}function bg(){kc.call(this);this.springDamper=new Wb}function Sd(a){V.call(this,a,0);this.Ce=a.springDamper.clone()}function ac(){this.lowerLimit=1;this.motorTorque=this.upperLimit=0}function Ef(){kc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper=new Wb;this.limitMotor=new ac}function Jb(a){V.call(this,a,1);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(b=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb,0<b&&(b=1/Math.sqrt(b)),this.nb*=b,this.ob*=b,this.pb*=b):(this.nb=1,this.pb=this.ob=0);var e,c,d,f,h,l,g,k;c=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-.999999999>c?(b=this.qa,e=this.ra,d=this.sa,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);l=e;e=d;var m=2*b;h=2*l;d=2*c;k=b*m;var n=l*h;f=c*d;c=b*h;g=l*d;l=b*d;var m=e*m,q=e*h;h=e*d;b=1-n-f;e=c-h;d=l+q;c+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.qa,m=this.ra,q=this.sa,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<v?(p=1/Math.sqrt(v+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab;n=b*this.qa+e*this.ra+d*this.sa;m=c*this.qa+f*this.ra+h*this.sa;q=l*this.qa+g*this.ra+k*this.sa;this.nb=n;this.ob=m;this.pb=q;n=b*this.Ab+e*this.Bb+d*this.Cb;m=c*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.gh=n;this.hh=m;this.ih=q;b=b*this.lc+e*this.mc+d*this.nc;e=c*this.lc+f*this.mc+h*this.nc;d=l*this.lc+g*this.mc+k*this.nc;this.Mc=b;this.Nc=e;this.Oc=d;this.Fe=this.Ee=this.angle=0;this.da=new Ek(this);this.Ce=a.springDamper.clone();this.Rh=a.limitMotor.clone()}function Rf(){kc.call(this);this.localTwistAxis1=new t(1,0,0);this.localTwistAxis2=new t(1,0,0);this.localSwingAxis1=new t(0,1,0);this.twistSpringDamper=new Wb;this.swingSpringDamper=new Wb;this.twistLimitMotor=new ac;this.maxSwingAngle2=this.maxSwingAngle1=3.14159265358979}function ab(a){V.call(this,a,rc.RAGDOLL);var b=a.localTwistAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localSwingAxis1;this.Ab=b.x;this.Bb=b.y;this.Cb=b.z;b=a.localTwistAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab;if(this.lc*this.lc+this.mc*this.mc+this.nc*this.nc)b=this.lc*this.lc+this.mc*this.mc+this.nc*this.nc,0<b&&(b=1/Math.sqrt(b)),this.lc*=b,this.mc*=b,this.nc*=b,this.Ab=this.mc*this.sa-this.nc*this.ra,this.Bb=this.nc*this.qa-this.lc*this.sa,this.Cb=this.lc*this.ra-this.mc*this.qa;else{var b=this.qa,e=this.ra,c=this.sa,d=b*b,f=e*e,h=c*c;d<f?d<h?(d=1/Math.sqrt(f+h),this.Ab=0,this.Bb=c*d,this.Cb=-e*d):(d=1/Math.sqrt(d+f),this.Ab=e*d,this.Bb=-b*d,this.Cb=0):f<h?(d=1/Math.sqrt(h+d),this.Ab=-c*d,this.Bb=0,this.Cb=b*d):(d=1/Math.sqrt(d+f),this.Ab=e*d,this.Bb=-b*d,this.Cb=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab}var l,g,k,m,d=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-.999999999>d?(b=this.qa,e=this.ra,c=this.sa,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);k=e;var h=d,e=c,n=2*b;g=2*k;c=2*h;d=b*n;f=k*g;l=h*c;h=b*g;m=k*c;k=b*c;var n=e*n,q=e*g;g=e*c;b=1-f-l;e=h-g;c=k+q;h+=g;l=1-d-l;g=m-n;k-=q;m+=n;d=1-d-f;f=b*this.qa+e*this.ra+c*this.sa;n=h*this.qa+l*this.ra+g*this.sa;q=k*this.qa+m*this.ra+d*this.sa;this.nb=f;this.ob=n;this.pb=q;f=b*this.Ab+e*this.Bb+c*this.Cb;n=h*this.Ab+l*this.Bb+g*this.Cb;q=k*this.Ab+m*this.Bb+d*this.Cb;this.gh=f;this.hh=n;this.ih=q;b=b*this.lc+e*this.mc+c*this.nc;e=h*this.lc+l*this.mc+g*this.nc;c=k*this.lc+m*this.mc+d*this.nc;this.Mc=b;this.Nc=e;this.Oc=c;this.fl=a.twistSpringDamper.clone();this.el=a.twistLimitMotor.clone();this.$k=a.swingSpringDamper.clone();this.bk=a.maxSwingAngle1;this.ck=a.maxSwingAngle2;this.bk<G.minRagdollMaxSwingAngle&&(this.bk=G.minRagdollMaxSwingAngle);this.ck<G.minRagdollMaxSwingAngle&&(this.ck=G.minRagdollMaxSwingAngle);this.nl=new ac;this.nl.lowerLimit=-1;this.ii=this.hi=this.gi=this.le=this.ke=this.je=this.Nj=this.tj=this.kj=this.nl.upperLimit=0}function cg(){kc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.limitMotor=new yd;this.springDamper=new Wb}function Kb(a){V.call(this,a,rc.PRISMATIC);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(b=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb,0<b&&(b=1/Math.sqrt(b)),this.nb*=b,this.ob*=b,this.pb*=b):(this.nb=1,this.pb=this.ob=0);var e,c,d,f,h,l,g,k;c=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-.999999999>c?(b=this.qa,e=this.ra,d=this.sa,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);l=e;e=d;var m=2*b;h=2*l;d=2*c;k=b*m;var n=l*h;f=c*d;c=b*h;g=l*d;l=b*d;var m=e*m,q=e*h;h=e*d;b=1-n-f;e=c-h;d=l+q;c+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.qa,m=this.ra,q=this.sa,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<v?(p=1/Math.sqrt(v+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab;n=b*this.qa+e*this.ra+d*this.sa;m=c*this.qa+f*this.ra+h*this.sa;q=l*this.qa+g*this.ra+k*this.sa;this.nb=n;this.ob=m;this.pb=q;n=b*this.Ab+e*this.Bb+d*this.Cb;m=c*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.gh=n;this.hh=m;this.ih=q;b=b*this.lc+e*this.mc+d*this.nc;e=c*this.lc+f*this.mc+h*this.nc;d=l*this.lc+g*this.mc+k*this.nc;this.Mc=b;this.Nc=e;this.Oc=d;this.da=new Ek(this);this.Fe=this.Ee=this.rh=this.Ef=this.Df=this.eg=0;this.Ce=a.springDamper.clone();this.Rh=a.limitMotor.clone()}function rc(){}function Xc(a){this.Pk=a}function $l(){this.ub=this.ad=this.ta=0}function Ek(a){this.$=a;this.oe=this.ne=this.me=this.Sd=this.Rd=this.Qd=this.ed=this.dd=this.cd=0}function Ge(){kc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.translationalLimitMotor=new yd;this.translationalSpringDamper=new Wb;this.rotationalLimitMotor=new ac;this.rotationalSpringDamper=new Wb}function kc(){this.rigidBody2=this.rigidBody1=null;this.localAnchor1=new t;this.localAnchor2=new t;this.allowCollision=!1;this.solverType=G.defaultJointConstraintSolverType;this.positionCorrectionAlgorithm=G.defaultJointPositionCorrectionAlgorithm;this.breakTorque=this.breakForce=0}function Cb(a){V.call(this,a,2);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(b=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb,0<b&&(b=1/Math.sqrt(b)),this.nb*=b,this.ob*=b,this.pb*=b):(this.nb=1,this.pb=this.ob=0);var e,c,d,f,h,l,g,k;c=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-.999999999>c?(b=this.qa,e=this.ra,d=this.sa,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);l=e;e=d;var m=2*b;h=2*l;d=2*c;k=b*m;var n=l*h;f=c*d;c=b*h;g=l*d;l=b*d;var m=e*m,q=e*h;h=e*d;b=1-n-f;e=c-h;d=l+q;c+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.qa,m=this.ra,q=this.sa,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<v?(p=1/Math.sqrt(v+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab;n=b*this.qa+e*this.ra+d*this.sa;m=c*this.qa+f*this.ra+h*this.sa;q=l*this.qa+g*this.ra+k*this.sa;this.nb=n;this.ob=m;this.pb=q;n=b*this.Ab+e*this.Bb+d*this.Cb;m=c*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.gh=n;this.hh=m;this.ih=q;b=b*this.lc+e*this.mc+d*this.nc;e=c*this.lc+f*this.mc+h*this.nc;d=l*this.lc+g*this.mc+k*this.nc;this.Mc=b;this.Nc=e;this.Oc=d;this.Ef=this.Df=this.eg=this.Fe=this.Ee=this.angle=0;this.da=new Ek(this);this.dl=a.translationalSpringDamper.clone();this.cl=a.translationalLimitMotor.clone();this.Xk=a.rotationalSpringDamper.clone();this.Wk=a.rotationalLimitMotor.clone()}function V(a,b){this.rb=new Xc(this);this.sb=new Xc(this);this.Hc=G.defaultJointPositionCorrectionAlgorithm;this.Lb=b;this.oc=null;this.C=a.rigidBody1;this.D=a.rigidBody2;this.Ak=a.allowCollision;this.Yi=a.breakForce;this.Zi=a.breakTorque;switch(a.solverType){case 0:this.jk=new mc(this);break;case 1:this.jk=new vc(this)}b=a.localAnchor1;this.dj=b.x;this.ej=b.y;this.fj=b.z;a=a.localAnchor2;this.gj=a.x;this.hj=a.y;this.ij=a.z;this.Oc=this.Nc=this.Mc=this.ih=this.hh=this.gh=this.pb=this.ob=this.nb=this.nc=this.mc=this.lc=this.Cb=this.Bb=this.Ab=this.sa=this.ra=this.qa=this.Tf=this.Sf=this.Rf=this.Qf=this.Pf=this.Of=this.Xb=this.Wb=this.Vb=this.Ub=this.Tb=this.Sb=0;this.Pb=Array(G.maxJacobianRows);a=0;for(b=G.maxJacobianRows;a<b;){var e=a++;this.Pb[e]=new $l}}function am(){this.Aa=new be;this.fb=this.motorSpeed=this.Ha=this.Ia=this.Ma=this.Fa=0;this.ta=null}function rl(){this.Re=this.Qe=null;this.Ka=0;this.rows=Array(G.maxJacobianRows);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new am}}function bm(){this.Ng=new be;this.Lj=new be;this.Kj=new be;this.friction=this.Ma=this.Fa=0;this.ta=null}function Xl(){this.Re=this.Qe=null;this.Ka=0;this.rows=Array(G.maxManifoldPoints);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new bm}}function be(){this.xc=this.ga=this.fa=this.ea=this.ca=this.ba=this.aa=this.Da=this.Ca=this.Ba=this.xa=this.wa=this.va=0}function el(a){this.Ja=a;this.Gl=0;this.Hl=Array(G.maxManifoldPoints);a=0;for(var b=G.maxManifoldPoints;a<b;){var e=a++;this.Hl[e]=new Xb}}function Xb(){this.Gc=this.Od=this.Nd=this.Md=this.Ld=this.Kd=this.Jd=this.gc=this.fc=this.ec=this.Fb=this.Eb=this.Db=this.sf=this.rf=this.qf=this.pf=this.nf=this.mf=0;this.ae=new wl;this.lf=this.Pe=!1;this.Cc=-1}function ic(){this.be=this.Xi=this.Wi=this.Vi=this.nj=this.mj=this.lj=this.yg=this.xg=this.wg=0;this.wc=Array(G.maxManifoldPoints);for(var a=0,b=G.maxManifoldPoints;a<b;){var e=a++;this.wc[e]=new Xb}}function wl(){this.ff=this.ef=this.df=this.ub=this.yc=this.zc=this.bd=0}function zd(a){this.jk=new nc(this);this.Ja=a}function Hb(){}function Ob(){this.D=this.C=null;this.Nf=!1}function Ad(){}function xl(){this.basisColorZ=new t(0,0,1);this.basisColorY=new t(0,1,0);this.basisColorX=new t(1,0,0);this.basisLength=.5;this.jointRotationalConstraintRadius=.3;this.jointErrorColor=new t(1,.1,.1);this.jointLineColor=new t(.8,.8,.8);this.contactNormalLength=this.contactTangentLength=this.contactBinormalLength=.5;this.contactBinormalColor=new t(.2,.2,1);this.contactTangentColor=new t(.1,.8,.1);this.contactNormalColor=new t(1,.1,.1);this.disabledContactColor=new t(.5,.1,.1);this.newContactColor=new t(1,1,.1);this.contactColor4=new t(.8,.1,1);this.contactColor3=new t(.1,.8,.6);this.contactColor2=new t(1,.6,.1);this.contactColor=new t(1,.1,.1);this.pairColor=new t(1,1,.1);this.bvhNodeColor=new t(.4,.4,.4);this.aabbColor=new t(1,.1,.1);this.kinematicShapeColor=new t(1,.5,.1);this.staticShapeColor=new t(.7,.7,.7);this.sleepingShapeColor2=new t(.2,.8,.5);this.sleepingShapeColor1=new t(.3,.3,.8);this.sleepyShapeColor2=new t(.6,.8,.3);this.sleepyShapeColor1=new t(.5,.25,.6);this.shapeColor2=new t(1,.8,.1);this.shapeColor1=new t(.7,.2,.4)}function gf(){this.p=new $b;this.wireframe=!1;this.drawShapes=!0;this.drawBvh=!1;this.drawBvhMinLevel=0;this.drawBvhMaxLevel=65536;this.drawContacts=this.drawPairs=this.drawBases=this.drawAabbs=!1;this.drawJoints=!0;this.drawJointLimits=!1;this.vk=Array(5);this.Fh=Array(5);this.xk=Array(5);for(var a=0;5>a;){var b=a++,e=b&&4!=b?8:1;this.vk[b]=Array(e);this.Fh[b]=Array(e);this.xk[b]=Array(e);for(e=0;8>e;){var c=e++,d=.7853981633974475*b,f=.7853981633974475*c;this.vk[b][c]=new t(Math.sin(d)*Math.cos(f),Math.cos(d),-Math.sin(d)*Math.sin(f));this.Fh[b][c]=new t;this.xk[b][c]=new t}}this.yj=Array(8);this.dm=Array(8);this.fe=Array(8);this.Xd=Array(8);this.Te=Array(8);for(a=0;8>a;)b=a++,this.yj[b]=new t(Math.cos(.7853981633974475*b),0,-Math.sin(.7853981633974475*b)),this.dm[b]=new t(Math.cos(.7853981633974475*(b+.5)),0,-Math.sin(.7853981633974475*(b+.5))),this.fe[b]=new t,this.Xd[b]=new t,this.Te[b]=new t;this.style=new xl}function hf(){this.position=new t;this.normal=new t;this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1}function ej(){}function fl(){}function yl(){}function Wj(){this.u=new Xa;this.Ql=null}function gl(){this.Mi=new fj;this.vj=new Ja;this.eg=new t;this.Z=new t;this.em=this.xj=null}function hl(){this.Mi=new fj;this.vj=new t;this.end=new t;this.xj=null}function Ma(a,b){null==a&&(a=2);switch(a){case 1:this.jc=new oc;break;case 2:this.jc=new hc}this.Kh=new He(this.jc);null==b&&(b=new t(0,-9.80665,0));this.Fk=new t(b.x,b.y,b.z);this.zi=this.Ph=this.Ei=this.uf=null;this.ek=this.Sk=this.zg=this.jj=0;this.Uk=10;this.Tk=5;this.gk=new hl;this.aj=new gl;this.yk=new Wj;this.vg=new zl;this.af=Array(G.islandInitialConstraintArraySize);this.ph=Array(G.islandInitialRigidBodyArraySize);this.Sh=new Al;this.Ga=new $b;this.Xl=0}function Al(){this.invDt=this.dt=0;this.dtRatio=1}function zl(){this.Jf=Array(G.islandInitialRigidBodyArraySize);this.Kf=Array(G.islandInitialConstraintArraySize);this.Eh=Array(G.islandInitialConstraintArraySize);this.Dh=Array(G.islandInitialConstraintArraySize);this.vh=this.wh=this.If=this.Hf=0}function He(a){this.jc=a;this.Xm=new dg;this.Bi=0}function ed(){this.Qc=this.Zd=this.M=this.ia=null}function Rb(){this.ia=this.M=null;this.rb=new ed;this.sb=new ed;this.Lh=this.D=this.C=this.$b=this.Zb=null;this.$i=new Bl;this.Ym=new ce;this.ik=this.Zj=!1;this.Ja=new ic;this.Zl=new el(this.Ja);this.Ye=new zd(this.Ja);this.Td=!1}function ta(a,b,e,c){null==c&&(c=1);null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;this.w=c;ta.numCreations++}function $b(){this.b=Array(256);this.c=0;this.bb=Array(256);this.eb=0;this.Lf=Array(256);this.dg=0;this.Wd=Array(256);this.ee=0}function Oa(){}function O(a,b,e,c,d,f,h,l,g,k,m,n,q,p,r,v){null==v&&(v=1);null==r&&(r=0);null==p&&(p=0);null==q&&(q=0);null==n&&(n=0);null==m&&(m=1);null==k&&(k=0);null==g&&(g=0);null==l&&(l=0);null==h&&(h=0);null==f&&(f=1);null==d&&(d=0);null==c&&(c=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;O.numCreations++}function E(a,b,e,c,d,f,h,l,g){null==g&&(g=1);null==l&&(l=0);null==h&&(h=0);null==f&&(f=0);null==d&&(d=1);null==c&&(c=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;E.numCreations++}function de(){}function Gc(){}function ec(){this.Na=Array(4);this.jb=Array(4);this.qb=Array(4);this.uj=Array(3);this.uj[0]=new t(1,0,0);this.uj[1]=new t(0,1,0);this.uj[2]=new t(0,0,1);this.bo=new t;this.co=new t;this.Vn=new t;this.Un=new t;this.ao=new Ja;for(var a=0;4>a;){var b=a++;this.Na[b]=new t;this.jb[b]=new t;this.qb[b]=new t}this.dir=new t;this.closest=new t;this.closestPoint1=new t;this.closestPoint2=new t;this.Og=new il}function G(){}function Ja(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1}function t(a,b,e){null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;t.numCreations++}function jl(){this.Il=new t}function ke(){this.xd=new t;this.jb=new t;this.qb=new t}function Ie(){this.id=++Ie.Mb;this.ia=this.M=null;this.dk=new t;this.bl=this.Wj=0;this.rj=!1;this.zb=Array(3);this.Ge=Array(3);this.We=Array(3);this.fi=new t;this.Ai=Array(3);this.Ai[0]=1;this.Ai[1]=2;this.Ai[2]=0}function il(){this.zb=Array(G.maxEPAVertices);this.mi=new t;this.Ne=0;this.Rc=this.jd=null;this.lh=0;this.bf=this.De=null}function Fk(){this.Sg=!1}function Sf(a){this.Sg=a}function Sg(a){this.Sg=a}function gj(){this.Sg=!1}function hj(){this.Sg=!1}function Bl(){}function Cl(){this.hc=this.Tc=this.Dj=this.w=0;this.Bc=Array(8);this.ic=Array(8);for(var a=0;8>a;){var b=a++;this.Bc[b]=new kl;this.ic[b]=new kl}}function kl(){this.Qa=this.Pa=this.Oa=this.y=this.x=0}function ij(){this.Sg=!1;this.Dg=new Cl}function Tc(a){this.Sg=a}function ll(){this.position1=new t;this.position2=new t;this.id=this.depth=0}function ce(){this.numPoints=0;this.normal=new t;this.points=Array(G.maxManifoldPoints);this.incremental=!1;for(var a=0,b=G.maxManifoldPoints;a<b;){var e=a++;this.points[e]=new ll}}function dg(){this.Jb=Array(8);for(var a=0;6>a;){var b=a++;this.Jb[b]=Array(8)}a=new gj;this.Jb[0][0]=new Fk;this.Jb[0][1]=new Sg(!1);this.Jb[0][2]=a;this.Jb[0][3]=a;this.Jb[0][4]=new Sf(!1);this.Jb[0][5]=a;this.Jb[1][0]=new Sg(!0);this.Jb[1][1]=new ij;this.Jb[1][2]=a;this.Jb[1][3]=a;this.Jb[1][4]=a;this.Jb[1][5]=a;this.Jb[2][0]=a;this.Jb[2][1]=a;this.Jb[2][2]=a;this.Jb[2][3]=a;this.Jb[2][4]=a;this.Jb[2][5]=a;this.Jb[3][0]=a;this.Jb[3][1]=a;this.Jb[3][2]=a;this.Jb[3][3]=a;this.Jb[3][4]=a;this.Jb[3][5]=a;this.Jb[4][0]=new Sf(!0);this.Jb[4][1]=a;this.Jb[4][2]=a;this.Jb[4][3]=a;this.Jb[4][4]=new hj;this.Jb[4][5]=a;this.Jb[5][0]=a;this.Jb[5][1]=a;this.Jb[5][2]=a;this.Jb[5][3]=a;this.Jb[5][4]=a;this.Jb[5][5]=a}function Td(a){tb.call(this,0);this.Rb=this.ab=a;this.Oe()}function fj(){this.position=new t;this.normal=new t;this.fraction=0}function Uc(){}function Ud(a,b){tb.call(this,2);this.ab=a;this.Ib=b;this.Oe()}function le(a){tb.call(this,5);this.Ne=a.length;this.zb=Array(this.Ne);this.Bg=Array(this.Ne);for(var b=0,e=this.Ne;b<e;){var c=b++;this.zb[c]=a[c];this.Bg[c]=new t}this.$l=!0;this.Oe()}function Vd(a,b){tb.call(this,3);this.ab=a;this.Ib=b;this.uk=a/Math.sqrt(a*a+4*b*b);this.kk=2*b/Math.sqrt(a*a+4*b*b);this.Oe()}function ee(a,b){tb.call(this,4);this.ab=a;this.Ib=b;this.Rb=this.ab;this.Oe()}function me(a){tb.call(this,1);this.Ke=a.x;this.Le=a.y;this.Me=a.z;this.Gk=a.x;this.Jk=this.Ik=this.Hk=0;this.Kk=a.y;this.Nk=this.Mk=this.Lk=0;this.Ok=a.z;this.Oe();a=a.x<a.y?a.z<a.x?a.z:a.x:a.z<a.y?a.z:a.y;this.Rb>.2*a&&(this.Rb=.2*a)}function Xa(){this.la=this.ka=this.ja=this.oa=this.na=this.ma=0}function ml(){this.Qb=null;this.fk=0;this.Gi=new Ql;this.gf=this.cg=this.Xc=null;this.fi=Array(1024)}function Ql(){this.Vl=0;this.Rj=!1}function Xj(a,b){ad.call(this,a,b);this.Qh=null;this.jh=!1}function jj(){this.Uf=this.Vf=this.M=null;this.F=Array(2);this.La=0;this.Ea=null;this.O=0;this.tb=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function hc(){wb.call(this,2);this.Yj=!0;this.ge=new ml;this.hf=Array(1024);this.Gf=0}function oc(){wb.call(this,1);this.Yj=!1}function Be(){this.nh=this.mh=null}function ad(a,b){this.userData=a;this.Cc=b;this.M=this.ia=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function wh(){}function Mc(){}function nl(){tb.call(this,-1);this.min=new t;this.max=new t}function ol(){tb.call(this,-1)}function tb(a){fd.call(this,a);this.Rb=G.defaultGJKMargin;this.$l=!1}function fd(a){this.Lb=a;this.yf=0}function wb(a){this.Lb=a;this.Ci=0;this.ce=this.$e=this.Be=null;this.Yj=!1;this.oj=0;this.oh=null;this.Ul=0;this.Vj=new ol;this.u=new nl;this.Wf=new Ja;this.Z=new t;this.Mi=new fj}function cb(a,b){function e(){}e.prototype=a;a=new e;for(var c in b)a[c]=b[c];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}wb.prototype={Vh:function(){return null},Wh:function(){},wd:function(){},Mb:function(a,b){return a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I?a.I>b.L:!1},Ii:function(){},ua:function(){return this.ce},Hb:function(){return this.Yj},cb:function(){return this.oj},Vd:function(){},Bf:function(){},qh:function(){}};fd.prototype={Oe:function(){},Nb:function(){},Di:function(){return!1},cb:function(){return this.Lb},ua:function(){return this.yf},Vd:function(a,b,e,c){var d,f,h,l;d=a.x;f=a.y;a=a.z;h=b.x;l=b.y;b=b.z;d-=e.v;f-=e.A;a-=e.B;h-=e.v;l-=e.A;b-=e.B;if(this.Di(e.o*d+e.i*f+e.l*a,e.f*d+e.m*f+e.g*a,e.h*d+e.j*f+e.s*a,e.o*h+e.i*l+e.l*b,e.f*h+e.m*l+e.g*b,e.h*h+e.j*l+e.s*b,c)){var g,k;b=c.position;d=b.x;f=b.y;h=b.z;b=c.normal;l=b.x;g=b.y;k=b.z;var m,n;m=e.o*d+e.f*f+e.h*h;n=e.i*d+e.m*f+e.j*h;h=e.l*d+e.g*f+e.s*h;b=e.o*l+e.f*g+e.h*k;a=e.i*l+e.m*g+e.j*k;l=e.l*l+e.g*g+e.s*k;d=m+e.v;f=n+e.A;h+=e.B;e=c.position;e.x=d;e.y=f;e.z=h;c=c.normal;c.x=b;c.y=a;c.z=l;return!0}return!1}};tb.ua=fd;tb.prototype=cb(fd.prototype,{un:function(){return this.Rb},Zn:function(a){0>a&&(a=0);this.Rb=a},Pd:function(){},Vd:function(a,b,e,c){return this.$l?ec.cb.Vd(this,e,a,b,c):fd.prototype.Vd.call(this,a,b,e,c)}});ol.ua=tb;ol.prototype=cb(tb.prototype,{za:function(a,b,e){this.ln=a;var c,d,f;c=e.x;d=e.y;f=e.z;var h;e=b.o*c+b.i*d+b.l*f;h=b.f*c+b.m*d+b.g*f;b=b.h*c+b.j*d+b.s*f;c=this.Fl=new t;c.x=e;c.y=h;c.z=b;this.Rb=a.Rb},Pd:function(a,b){this.ln.Pd(a,b);var e=this.Fl;if(0<a.x*e.x+a.y*e.y+a.z*e.z){a=this.Fl;var e=b.y+a.y,c=b.z+a.z;b.x+=a.x;b.y=e;b.z=c}}});nl.ua=tb;nl.prototype=cb(tb.prototype,{Pd:function(a,b){b.x=0<a.x?this.max.x:this.min.x;b.y=0<a.y?this.max.y:this.min.y;b.z=0<a.z?this.max.z:this.min.z}});Mc.prototype={process:function(){}};ad.prototype={Hb:function(){return this.Cc},ua:function(){var a=new Xa;a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I;return a},cb:function(a){a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I}};Be.prototype={ua:function(){return this.mh},cb:function(){return this.nh},Hb:function(){return this.M}};oc.ua=wb;oc.prototype=cb(wb.prototype,{Vh:function(a,b){a=new ad(a,this.Ul++);this.Ci++;null==this.Be?this.Be=a:(this.$e.M=a,a.ia=this.$e);this.$e=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;return a},Wh:function(a){this.Ci--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Be&&(this.Be=this.Be.M);a==this.$e&&(this.$e=this.$e.ia);a.M=null;a.ia=null;a.userData=null},wd:function(a,b){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la},Ii:function(){var a=this.ce;if(null!=a){for(;a.mh=null,a.nh=null,a=a.M,null!=a;);this.ce.M=this.oh;this.oh=this.ce;this.ce=null}this.oj=0;for(a=this.Be;null!=a;){for(var b=a.M,e=a.M;null!=e;){var c=e.M;this.oj++;if(a.J<e.G&&a.G>e.J&&a.K<e.H&&a.H>e.K&&a.L<e.I&&a.I>e.L){var d=this.oh;null!=d?(this.oh=d.M,d.M=null):d=new Be;null!=this.ce&&(d.M=this.ce);this.ce=d;d.mh=a;d.nh=e}e=c}a=b}},Vd:function(a,b,e){var c,d,f,h;c=a.x;d=a.y;a=a.z;f=b.x;h=b.y;b=b.z;for(var l=this.Be;null!=l;){var g=l.M,k=c,m=d,n=a,q=f,p=h,r=b,v=k<q?k:q,R=m<p?m:p,y=n<r?n:r,L=m>p?m:p,w=n>r?n:r,D=l.J,Sa=l.K,B=l.L,C=l.G,A=l.H,t=l.I;if(D>(k>q?k:q)||C<v||Sa>L||A<R||B>w||t<y)n=!1;else{var q=q-k,p=p-m,I=r-n,r=0>q?-q:q,v=0>p?-p:p,L=0>I?-I:I,R=.5*(C-D),y=.5*(A-Sa),w=.5*(t-B),k=k-.5*(C+D),m=m-.5*(A+Sa),n=n-.5*(t+B),B=m*I-n*p;0<(0>B?-B:B)-(y*L+w*v)?n=!0:(n=n*q-k*I,n=0<(0>n?-n:n)-(w*r+R*L));n?n=!0:(n=k*p-m*q,n=0<(0>n?-n:n)-(R*v+y*r));n=n?!1:!0}n&&e.process(l);l=g}},Bf:function(a,b,e,c){for(var d=this.Be;null!=d;){var f=d.M,h=this.u.min;h.x=d.J;h.y=d.K;h.z=d.L;h=this.u.max;h.x=d.G;h.y=d.H;h.z=d.I;this.Vj.za(a,b,e);h=ec.cb;0==h.zj(this.Vj,this.u,b,this.Wf,null,!1)&&0>=h.distance&&c.process(d);d=f}},qh:function(a,b){for(var e=this.Be;null!=e;){var c=e.M;a.ma<e.G&&a.ja>e.J&&a.na<e.H&&a.ka>e.K&&a.oa<e.I&&a.la>e.L&&b.process(e);e=c}}});hc.ua=wb;hc.prototype=cb(wb.prototype,{sh:function(a,b){this.oj++;var e=0==a.O,c=0==b.O;a==b?e||(this.sh(a.F[0],b),this.sh(a.F[1],b)):a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I&&a.I>b.L&&(e&&c?(a=a.tb,b=b.tb,e=this.oh,null!=e?(this.oh=e.M,e.M=null):e=new Be,null!=this.ce&&(e.M=this.ce),this.ce=e,e.mh=a,e.nh=b):c||a.O>b.O?(this.sh(a.F[0],b),this.sh(a.F[1],b)):(this.sh(b.F[0],a),this.sh(b.F[1],a)))},Jl:function(a,b,e,c,d,f,h,l){var g=a.J,k=a.K,m=a.L,n=a.G,q=a.H,p=a.I,r;if(g>(b>d?b:d)||n<(b<d?b:d)||k>(e>f?e:f)||q<(e<f?e:f)||m>(c>h?c:h)||p<(c<h?c:h))r=!1;else{var v=d-b,R=f-e,y=h-c;r=0>v?-v:v;var L=0>R?-R:R,w=0>y?-y:y,D=.5*(n-g),Sa=.5*(q-k),B=.5*(p-m),g=b-.5*(n+g),k=e-.5*(q+k),m=c-.5*(p+m),p=k*y-m*R;0<(0>p?-p:p)-(Sa*w+B*L)?w=!0:(y=m*v-g*y,w=0<(0>y?-y:y)-(B*r+D*w));w?r=!0:(v=g*R-k*v,r=0<(0>v?-v:v)-(D*L+Sa*r));r=r?!1:!0}r&&(0==a.O?l.process(a.tb):(this.Jl(a.F[0],b,e,c,d,f,h,l),this.Jl(a.F[1],b,e,c,d,f,h,l)))},ml:function(a,b,e,c,d){var f=this.u.min;f.x=a.J;f.y=a.K;f.z=a.L;f=this.u.max;f.x=a.G;f.y=a.H;f.z=a.I;this.Vj.za(b,e,c);f=ec.cb;0==f.zj(this.Vj,this.u,e,this.Wf,null,!1)&&0>=f.distance&&(0==a.O?d.process(a.tb):(this.ml(a.F[0],b,e,c,d),this.ml(a.F[1],b,e,c,d)))},hl:function(a,b,e){a.J<b.ja&&a.G>b.ma&&a.K<b.ka&&a.H>b.na&&a.L<b.la&&a.I>b.oa&&(0==a.O?e.process(a.tb):(this.hl(a.F[0],b,e),this.hl(a.F[1],b,e)))},Vh:function(a,b){a=new Xj(a,this.Ul++);this.Ci++;null==this.Be?this.Be=a:(this.$e.M=a,a.ia=this.$e);this.$e=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=G.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;b=this.ge;var e=b.Xc;null!=e?(b.Xc=e.M,e.M=null):e=new jj;var c=e;c.tb=a;a.Qh=c;c.J=a.J;c.K=a.K;c.L=a.L;c.G=a.G;c.H=a.H;c.I=a.I;b.fk++;null==b.cg?b.cg=c:(b.gf.Uf=c,c.Vf=b.gf);b.gf=c;if(null==b.Qb)b.Qb=c;else{for(var d=b.Qb;0<d.O&&(e=b.Gi.Sl(d,c),-1!=e);)d=d.F[e];var f=d.Ea,e=b.Xc;null!=e?(b.Xc=e.M,e.M=null):e=new jj;if(null==f)b.Qb=e;else{var h=d.La;f.F[h]=e;e.Ea=f;e.La=h}f=d.La;e.F[f]=d;d.Ea=e;d.La=f;d=d.La^1;e.F[d]=c;c.Ea=e;for(c.La=d;null!=e;){if(b.Gi.Rj&&!(2>e.O)){var c=e.Ea,f=e.F[0],h=e.F[1],l=f.O-h.O,d=e.La;1<l?(h=f.F[0],l=f.F[1],h.O>l.O?(f.F[1]=e,e.Ea=f,e.La=1,e.F[0]=l,l.Ea=e,l.La=0):(f.F[0]=e,e.Ea=f,e.La=0,e.F[0]=h,h.Ea=e,h.La=0),h=f.F[0],l=f.F[1],f.J=h.J<l.J?h.J:l.J,f.K=h.K<l.K?h.K:l.K,f.L=h.L<l.L?h.L:l.L,f.G=h.G>l.G?h.G:l.G,f.H=h.H>l.H?h.H:l.H,f.I=h.I>l.I?h.I:l.I,h=f.F[0].O,l=f.F[1].O,f.O=(h>l?h:l)+1,h=e.F[0],l=e.F[1],e.J=h.J<l.J?h.J:l.J,e.K=h.K<l.K?h.K:l.K,e.L=h.L<l.L?h.L:l.L,e.G=h.G>l.G?h.G:l.G,e.H=h.H>l.H?h.H:l.H,e.I=h.I>l.I?h.I:l.I,h=e.F[0].O,l=e.F[1].O,e.O=(h>l?h:l)+1,null!=c?(c.F[d]=f,f.Ea=c,f.La=d):(b.Qb=f,f.Ea=null),e=f):-1>l&&(f=h.F[0],l=h.F[1],f.O>l.O?(h.F[1]=e,e.Ea=h,e.La=1,e.F[1]=l,l.Ea=e,l.La=1):(h.F[0]=e,e.Ea=h,e.La=0,e.F[1]=f,f.Ea=e,f.La=1),f=h.F[0],l=h.F[1],h.J=f.J<l.J?f.J:l.J,h.K=f.K<l.K?f.K:l.K,h.L=f.L<l.L?f.L:l.L,h.G=f.G>l.G?f.G:l.G,h.H=f.H>l.H?f.H:l.H,h.I=f.I>l.I?f.I:l.I,f=h.F[0].O,l=h.F[1].O,h.O=(f>l?f:l)+1,f=e.F[0],l=e.F[1],e.J=f.J<l.J?f.J:l.J,e.K=f.K<l.K?f.K:l.K,e.L=f.L<l.L?f.L:l.L,e.G=f.G>l.G?f.G:l.G,e.H=f.H>l.H?f.H:l.H,e.I=f.I>l.I?f.I:l.I,f=e.F[0].O,l=e.F[1].O,e.O=(f>l?f:l)+1,null!=c?(c.F[d]=h,h.Ea=c,h.La=d):(b.Qb=h,h.Ea=null),e=h)}c=e.F[0].O;d=e.F[1].O;e.O=(c>d?c:d)+1;c=e.F[0];d=e.F[1];e.J=c.J<d.J?c.J:d.J;e.K=c.K<d.K?c.K:d.K;e.L=c.L<d.L?c.L:d.L;e.G=c.G>d.G?c.G:d.G;e.H=c.H>d.H?c.H:d.H;e.I=c.I>d.I?c.I:d.I;e=e.Ea}}if(!a.jh){a.jh=!0;if(this.hf.length==this.Gf){b=Array(this.Gf<<1);e=0;for(c=this.Gf;e<c;)d=e++,b[d]=this.hf[d],this.hf[d]=null;this.hf=b}this.hf[this.Gf++]=a}return a},Wh:function(a){this.Ci--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Be&&(this.Be=this.Be.M);a==this.$e&&(this.$e=this.$e.ia);a.M=null;a.ia=null;b=this.ge;e=a.Qh;b.fk--;var c=e.Vf,d=e.Uf;null!=c&&(c.Uf=d);null!=d&&(d.Vf=c);e==b.cg&&(b.cg=b.cg.Uf);e==b.gf&&(b.gf=b.gf.Vf);e.Uf=null;e.Vf=null;if(b.Qb==e)b.Qb=null;else{var c=e.Ea,d=c.F[e.La^1],f=c.Ea;if(null==f)d.Ea=null,d.La=0,b.Qb=d,c.F[0]=null,c.F[1]=null,c.La=0,c.Ea=null,c.O=0,c.tb=null,c.M=b.Xc,b.Xc=c;else{var h=c.La;f.F[h]=d;d.Ea=f;d.La=h;c.F[0]=null;c.F[1]=null;c.La=0;c.Ea=null;c.O=0;c.tb=null;c.M=b.Xc;b.Xc=c;for(c=f;null!=c;){if(b.Gi.Rj&&!(2>c.O)){var d=c.Ea,h=c.F[0],l=c.F[1],g=h.O-l.O,f=c.La;1<g?(l=h.F[0],g=h.F[1],l.O>g.O?(h.F[1]=c,c.Ea=h,c.La=1,c.F[0]=g,g.Ea=c,g.La=0):(h.F[0]=c,c.Ea=h,c.La=0,c.F[0]=l,l.Ea=c,l.La=0),l=h.F[0],g=h.F[1],h.J=l.J<g.J?l.J:g.J,h.K=l.K<g.K?l.K:g.K,h.L=l.L<g.L?l.L:g.L,h.G=l.G>g.G?l.G:g.G,h.H=l.H>g.H?l.H:g.H,h.I=l.I>g.I?l.I:g.I,l=h.F[0].O,g=h.F[1].O,h.O=(l>g?l:g)+1,l=c.F[0],g=c.F[1],c.J=l.J<g.J?l.J:g.J,c.K=l.K<g.K?l.K:g.K,c.L=l.L<g.L?l.L:g.L,c.G=l.G>g.G?l.G:g.G,c.H=l.H>g.H?l.H:g.H,c.I=l.I>g.I?l.I:g.I,l=c.F[0].O,g=c.F[1].O,c.O=(l>g?l:g)+1,null!=d?(d.F[f]=h,h.Ea=d,h.La=f):(b.Qb=h,h.Ea=null),c=h):-1>g&&(h=l.F[0],g=l.F[1],h.O>g.O?(l.F[1]=c,c.Ea=l,c.La=1,c.F[1]=g,g.Ea=c,g.La=1):(l.F[0]=c,c.Ea=l,c.La=0,c.F[1]=h,h.Ea=c,h.La=1),h=l.F[0],g=l.F[1],l.J=h.J<g.J?h.J:g.J,l.K=h.K<g.K?h.K:g.K,l.L=h.L<g.L?h.L:g.L,l.G=h.G>g.G?h.G:g.G,l.H=h.H>g.H?h.H:g.H,l.I=h.I>g.I?h.I:g.I,h=l.F[0].O,g=l.F[1].O,l.O=(h>g?h:g)+1,h=c.F[0],g=c.F[1],c.J=h.J<g.J?h.J:g.J,c.K=h.K<g.K?h.K:g.K,c.L=h.L<g.L?h.L:g.L,c.G=h.G>g.G?h.G:g.G,c.H=h.H>g.H?h.H:g.H,c.I=h.I>g.I?h.I:g.I,h=c.F[0].O,g=c.F[1].O,c.O=(h>g?h:g)+1,null!=d?(d.F[f]=l,l.Ea=d,l.La=f):(b.Qb=l,l.Ea=null),c=l)}d=c.F[0].O;f=c.F[1].O;c.O=(d>f?d:f)+1;d=c.F[0];f=c.F[1];c.J=d.J<f.J?d.J:f.J;c.K=d.K<f.K?d.K:f.K;c.L=d.L<f.L?d.L:f.L;c.G=d.G>f.G?d.G:f.G;c.H=d.H>f.H?d.H:f.H;c.I=d.I>f.I?d.I:f.I;c=c.Ea}}}a.Qh=null;e.F[0]=null;e.F[1]=null;e.La=0;e.Ea=null;e.O=0;e.tb=null;e.M=b.Xc;b.Xc=e;a.userData=null;a.M=null;a.ia=null;a.jh&&(a.jh=!1)},wd:function(a,b,e){if(!(a.J<=b.ma&&a.G>=b.ja&&a.K<=b.na&&a.H>=b.ka&&a.L<=b.oa&&a.I>=b.la)){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=G.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;if(null!=e){var c;b=e.x;c=e.y;e=e.z;a.J+=0<b?0:b;a.K+=0<c?0:c;a.L+=0<e?0:e;a.G+=0>b?0:b;a.H+=0>c?0:c;a.I+=0>e?0:e}if(!a.jh){a.jh=!0;if(this.hf.length==this.Gf){e=Array(this.Gf<<1);b=0;for(c=this.Gf;b<c;){var d=b++;e[d]=this.hf[d];this.hf[d]=null}this.hf=e}this.hf[this.Gf++]=a}}},Ii:function(){var a=this.ce;if(null!=a){for(;a.mh=null,a.nh=null,a=a.M,null!=a;);this.ce.M=this.oh;this.oh=this.ce;this.ce=null}this.oj=0;if(!(2>this.Ci)){for(var b=this.Gf/this.Ci<G.bvhIncrementalCollisionThreshold,e=0,c=this.Gf;e<c;){var d=e++,f=this.hf[d];if(f.jh){var h=this.ge,l=f.Qh;h.fk--;var g=l.Vf,k=l.Uf;null!=g&&(g.Uf=k);null!=k&&(k.Vf=g);l==h.cg&&(h.cg=h.cg.Uf);l==h.gf&&(h.gf=h.gf.Vf);l.Uf=null;l.Vf=null;if(h.Qb==l)h.Qb=null;else{var m=l.Ea,n=m.F[l.La^1],q=m.Ea;if(null==q)n.Ea=null,n.La=0,h.Qb=n,m.M=null,m.La=0,m.F[0]=null,m.F[1]=null,m.La=0,m.Ea=null,m.O=0,m.tb=null,m.M=h.Xc,h.Xc=m;else{n.Ea=q;var p=m.La;q.F[p]=n;n.Ea=q;n.La=p;m.M=null;m.La=0;m.F[0]=null;m.F[1]=null;m.La=0;m.Ea=null;m.O=0;m.tb=null;m.M=h.Xc;h.Xc=m;for(var r=q;null!=r;){if(h.Gi.Rj&&!(2>r.O)){var v=r.Ea,R=r.F[0],y=r.F[1],L=R.O-y.O,w=r.La;if(1<L){var D=R.F[0],Sa=R.F[1];if(D.O>Sa.O){R.F[1]=r;r.Ea=R;r.La=1;r.F[0]=Sa;Sa.Ea=r;Sa.La=0;var B=R.F[0],C=R.F[1];R.J=B.J<C.J?B.J:C.J;R.K=B.K<C.K?B.K:C.K;R.L=B.L<C.L?B.L:C.L;R.G=B.G>C.G?B.G:C.G;R.H=B.H>C.H?B.H:C.H;R.I=B.I>C.I?B.I:C.I;var A=R.F[0].O,t=R.F[1].O;R.O=(A>t?A:t)+1;var I=r.F[0],J=r.F[1];r.J=I.J<J.J?I.J:J.J;r.K=I.K<J.K?I.K:J.K;r.L=I.L<J.L?I.L:J.L;r.G=I.G>J.G?I.G:J.G;r.H=I.H>J.H?I.H:J.H;r.I=I.I>J.I?I.I:J.I;var Gb=r.F[0].O,Ce=r.F[1].O;r.O=(Gb>Ce?Gb:Ce)+1}else{R.F[0]=r;r.Ea=R;r.La=0;r.F[0]=D;D.Ea=r;D.La=0;var u=R.F[0],da=R.F[1];R.J=u.J<da.J?u.J:da.J;R.K=u.K<da.K?u.K:da.K;R.L=u.L<da.L?u.L:da.L;R.G=u.G>da.G?u.G:da.G;R.H=u.H>da.H?u.H:da.H;R.I=u.I>da.I?u.I:da.I;var Rl=R.F[0].O,Bd=R.F[1].O;R.O=(Rl>Bd?Rl:Bd)+1;var Db=r.F[0],Ia=r.F[1];r.J=Db.J<Ia.J?Db.J:Ia.J;r.K=Db.K<Ia.K?Db.K:Ia.K;r.L=Db.L<Ia.L?Db.L:Ia.L;r.G=Db.G>Ia.G?Db.G:Ia.G;r.H=Db.H>Ia.H?Db.H:Ia.H;r.I=Db.I>Ia.I?Db.I:Ia.I;var Da=r.F[0].O,ma=r.F[1].O;r.O=(Da>ma?Da:ma)+1}null!=v?(v.F[w]=R,R.Ea=v,R.La=w):(h.Qb=R,R.Ea=null);r=R}else if(-1>L){var Q=y.F[0],E=y.F[1];if(Q.O>E.O){y.F[1]=r;r.Ea=y;r.La=1;r.F[1]=E;E.Ea=r;E.La=1;var Ga=y.F[0],Ea=y.F[1];y.J=Ga.J<Ea.J?Ga.J:Ea.J;y.K=Ga.K<Ea.K?Ga.K:Ea.K;y.L=Ga.L<Ea.L?Ga.L:Ea.L;y.G=Ga.G>Ea.G?Ga.G:Ea.G;y.H=Ga.H>Ea.H?Ga.H:Ea.H;y.I=Ga.I>Ea.I?Ga.I:Ea.I;var Ua=y.F[0].O,va=y.F[1].O;y.O=(Ua>va?Ua:va)+1;var oa=r.F[0],Ya=r.F[1];r.J=oa.J<Ya.J?oa.J:Ya.J;r.K=oa.K<Ya.K?oa.K:Ya.K;r.L=oa.L<Ya.L?oa.L:Ya.L;r.G=oa.G>Ya.G?oa.G:Ya.G;r.H=oa.H>Ya.H?oa.H:Ya.H;r.I=oa.I>Ya.I?oa.I:Ya.I;var F=r.F[0].O,Qa=r.F[1].O;r.O=(F>Qa?F:Qa)+1}else{y.F[0]=r;r.Ea=y;r.La=0;r.F[1]=Q;Q.Ea=r;Q.La=1;var X=y.F[0],M=y.F[1];y.J=X.J<M.J?X.J:M.J;y.K=X.K<M.K?X.K:M.K;y.L=X.L<M.L?X.L:M.L;y.G=X.G>M.G?X.G:M.G;y.H=X.H>M.H?X.H:M.H;y.I=X.I>M.I?X.I:M.I;var N=y.F[0].O,ca=y.F[1].O;y.O=(N>ca?N:ca)+1;var Y=r.F[0],T=r.F[1];r.J=Y.J<T.J?Y.J:T.J;r.K=Y.K<T.K?Y.K:T.K;r.L=Y.L<T.L?Y.L:T.L;r.G=Y.G>T.G?Y.G:T.G;r.H=Y.H>T.H?Y.H:T.H;r.I=Y.I>T.I?Y.I:T.I;var aa=r.F[0].O,z=r.F[1].O;r.O=(aa>z?aa:z)+1}null!=v?(v.F[w]=y,y.Ea=v,y.La=w):(h.Qb=y,y.Ea=null);r=y}}var fa=r.F[0].O,U=r.F[1].O;r.O=(fa>U?fa:U)+1;var pa=r.F[0],sa=r.F[1];r.J=pa.J<sa.J?pa.J:sa.J;r.K=pa.K<sa.K?pa.K:sa.K;r.L=pa.L<sa.L?pa.L:sa.L;r.G=pa.G>sa.G?pa.G:sa.G;r.H=pa.H>sa.H?pa.H:sa.H;r.I=pa.I>sa.I?pa.I:sa.I;r=r.Ea}}}f.Qh=null;l.M=null;l.La=0;l.F[0]=null;l.F[1]=null;l.La=0;l.Ea=null;l.O=0;l.tb=null;l.M=h.Xc;h.Xc=l;var wa=this.ge,ra=wa.Xc;null!=ra?(wa.Xc=ra.M,ra.M=null):ra=new jj;var ka=ra;ka.tb=f;f.Qh=ka;ka.J=f.J;ka.K=f.K;ka.L=f.L;ka.G=f.G;ka.H=f.H;ka.I=f.I;wa.fk++;null==wa.cg?wa.cg=ka:(wa.gf.Uf=ka,ka.Vf=wa.gf);wa.gf=ka;if(null==wa.Qb)wa.Qb=ka;else{for(var Z=wa.Qb;0<Z.O;){var na=wa.Gi.Sl(Z,ka);if(-1==na)break;else Z=Z.F[na]}var Aa=Z.Ea,ya=wa.Xc;null!=ya?(wa.Xc=ya.M,ya.M=null):ya=new jj;var K=ya;if(null==Aa)wa.Qb=K;else{var Ba=Z.La;Aa.F[Ba]=K;K.Ea=Aa;K.La=Ba}var ha=Z.La;K.F[ha]=Z;Z.Ea=K;Z.La=ha;var ba=Z.La^1;K.F[ba]=ka;ka.Ea=K;for(ka.La=ba;null!=K;){if(wa.Gi.Rj&&!(2>K.O)){var Va=K.Ea,ga=K.F[0],P=K.F[1],za=ga.O-P.O,xb=K.La;if(1<za){var ja=ga.F[0],V=ga.F[1];if(ja.O>V.O){ga.F[1]=K;K.Ea=ga;K.La=1;K.F[0]=V;V.Ea=K;V.La=0;var O=ga.F[0],gb=ga.F[1];ga.J=O.J<gb.J?O.J:gb.J;ga.K=O.K<gb.K?O.K:gb.K;ga.L=O.L<gb.L?O.L:gb.L;ga.G=O.G>gb.G?O.G:gb.G;ga.H=O.H>gb.H?O.H:gb.H;ga.I=O.I>gb.I?O.I:gb.I;var pb=ga.F[0].O,ua=ga.F[1].O;ga.O=(pb>ua?pb:ua)+1;var xa=K.F[0],Fa=K.F[1];K.J=xa.J<Fa.J?xa.J:Fa.J;K.K=xa.K<Fa.K?xa.K:Fa.K;K.L=xa.L<Fa.L?xa.L:Fa.L;K.G=xa.G>Fa.G?xa.G:Fa.G;K.H=xa.H>Fa.H?xa.H:Fa.H;K.I=xa.I>Fa.I?xa.I:Fa.I;var fb=K.F[0].O,Ha=K.F[1].O;K.O=(fb>Ha?fb:Ha)+1}else{ga.F[0]=K;K.Ea=ga;K.La=0;K.F[0]=ja;ja.Ea=K;ja.La=0;var qb=ga.F[0],Na=ga.F[1];ga.J=qb.J<Na.J?qb.J:Na.J;ga.K=qb.K<Na.K?qb.K:Na.K;ga.L=qb.L<Na.L?qb.L:Na.L;ga.G=qb.G>Na.G?qb.G:Na.G;ga.H=qb.H>Na.H?qb.H:Na.H;ga.I=qb.I>Na.I?qb.I:Na.I;var la=ga.F[0].O,Ca=ga.F[1].O;ga.O=(la>Ca?la:Ca)+1;var Za=K.F[0],Ra=K.F[1];K.J=Za.J<Ra.J?Za.J:Ra.J;K.K=Za.K<Ra.K?Za.K:Ra.K;K.L=Za.L<Ra.L?Za.L:Ra.L;K.G=Za.G>Ra.G?Za.G:Ra.G;K.H=Za.H>Ra.H?Za.H:Ra.H;K.I=Za.I>Ra.I?Za.I:Ra.I;var ib=K.F[0].O,Lb=K.F[1].O;K.O=(ib>Lb?ib:Lb)+1}null!=Va?(Va.F[xb]=ga,ga.Ea=Va,ga.La=xb):(wa.Qb=ga,ga.Ea=null);K=ga}else if(-1>za){var db=P.F[0],Ib=P.F[1];if(db.O>Ib.O){P.F[1]=K;K.Ea=P;K.La=1;K.F[1]=Ib;Ib.Ea=K;Ib.La=1;var kb=P.F[0],nb=P.F[1];P.J=kb.J<nb.J?kb.J:nb.J;P.K=kb.K<nb.K?kb.K:nb.K;P.L=kb.L<nb.L?kb.L:nb.L;P.G=kb.G>nb.G?kb.G:nb.G;P.H=kb.H>nb.H?kb.H:nb.H;P.I=kb.I>nb.I?kb.I:nb.I;var Yb=P.F[0].O,sc=P.F[1].O;P.O=(Yb>sc?Yb:sc)+1;var $a=K.F[0],Ka=K.F[1];K.J=$a.J<Ka.J?$a.J:Ka.J;K.K=$a.K<Ka.K?$a.K:Ka.K;K.L=$a.L<Ka.L?$a.L:Ka.L;K.G=$a.G>Ka.G?$a.G:Ka.G;K.H=$a.H>Ka.H?$a.H:Ka.H;K.I=$a.I>Ka.I?$a.I:Ka.I;var vb=K.F[0].O,H=K.F[1].O;K.O=(vb>H?vb:H)+1}else{P.F[0]=K;K.Ea=P;K.La=0;K.F[1]=db;db.Ea=K;db.La=1;var eb=P.F[0],lb=P.F[1];P.J=eb.J<lb.J?eb.J:lb.J;P.K=eb.K<lb.K?eb.K:lb.K;P.L=eb.L<lb.L?eb.L:lb.L;P.G=eb.G>lb.G?eb.G:lb.G;P.H=eb.H>lb.H?eb.H:lb.H;P.I=eb.I>lb.I?eb.I:lb.I;var yb=P.F[0].O,mb=P.F[1].O;P.O=(yb>mb?yb:mb)+1;var ub=K.F[0],x=K.F[1];K.J=ub.J<x.J?ub.J:x.J;K.K=ub.K<x.K?ub.K:x.K;K.L=ub.L<x.L?ub.L:x.L;K.G=ub.G>x.G?ub.G:x.G;K.H=ub.H>x.H?ub.H:x.H;K.I=ub.I>x.I?ub.I:x.I;var W=K.F[0].O,ea=K.F[1].O;K.O=(W>ea?W:ea)+1}null!=Va?(Va.F[xb]=P,P.Ea=Va,P.La=xb):(wa.Qb=P,P.Ea=null);K=P}}var S=K.F[0].O,xc=K.F[1].O;K.O=(S>xc?S:xc)+1;var Pa=K.F[0],rb=K.F[1];K.J=Pa.J<rb.J?Pa.J:rb.J;K.K=Pa.K<rb.K?Pa.K:rb.K;K.L=Pa.L<rb.L?Pa.L:rb.L;K.G=Pa.G>rb.G?Pa.G:rb.G;K.H=Pa.H>rb.H?Pa.H:rb.H;K.I=Pa.I>rb.I?Pa.I:rb.I;K=K.Ea}}b&&this.sh(this.ge.Qb,f.Qh);f.jh=!1}this.hf[d]=null}b||this.sh(this.ge.Qb,this.ge.Qb);this.Gf=0}},Vd:function(a,b,e){null!=this.ge.Qb&&this.Jl(this.ge.Qb,a.x,a.y,a.z,b.x,b.y,b.z,e)},Bf:function(a,b,e,c){null!=this.ge.Qb&&this.ml(this.ge.Qb,a,b,e,c)},qh:function(a,b){null!=this.ge.Qb&&this.hl(this.ge.Qb,a,b)},Jn:function(){return this.ge.cn()}});Xj.ua=ad;Xj.prototype=cb(ad.prototype,{});Ql.prototype={Sl:function(a,b){switch(this.Vl){case 0:var e,c,d;e=b.J+b.G;c=b.K+b.H;d=b.L+b.I;var f=a.F[0],h=a.F[1],l,g;b=f.J+f.G;a=f.K+f.H;f=f.L+f.I;l=h.J+h.G;g=h.K+h.H;h=h.L+h.I;b-=e;a-=c;f-=d;l-=e;g-=c;h-=d;return b*b+a*a+f*f<l*l+g*g+h*h?0:1;case 1:f=a.F[0];e=a.F[1];c=a.H-a.K;d=a.I-a.L;var h=2*((a.G-a.J)*(c+d)+c*d),k,m;c=a.J<b.J?a.J:b.J;k=a.K<b.K?a.K:b.K;l=a.L<b.L?a.L:b.L;d=a.G>b.G?a.G:b.G;m=a.H>b.H?a.H:b.H;g=a.I>b.I?a.I:b.I;a=m-k;l=g-l;c=2*((d-c)*(a+l)+a*l);a=2*c;var n=2*(c-h),h=n;c=f.J<b.J?f.J:b.J;k=f.K<b.K?f.K:b.K;l=f.L<b.L?f.L:b.L;d=f.G>b.G?f.G:b.G;m=f.H>b.H?f.H:b.H;g=f.I>b.I?f.I:b.I;0==f.O?(f=m-k,l=g-l,h+=2*((d-c)*(f+l)+f*l)):(k=m-k,l=g-l,g=f.H-f.K,m=f.I-f.L,h+=2*((d-c)*(k+l)+k*l)-2*((f.G-f.J)*(g+m)+g*m));f=n;c=e.J<b.J?e.J:b.J;k=e.K<b.K?e.K:b.K;l=e.L<b.L?e.L:b.L;d=e.G>b.G?e.G:b.G;m=e.H>b.H?e.H:b.H;g=e.I>b.I?e.I:b.I;0==e.O?(e=m-k,b=g-l,f+=2*((d-c)*(e+b)+e*b)):(b=m-k,l=g-l,g=e.H-e.K,n=e.I-e.L,f+=2*((d-c)*(b+l)+b*l)-2*((e.G-e.J)*(g+n)+g*n));return a<h?a<f?-1:1:h<f?0:1;default:return console.log("BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this.Vl),-1}}};ml.prototype={cn:function(){return this.pl(this.Qb)},pl:function(a){if(null==a||0==a.O)return 0;var b=a.F[0].O-a.F[1].O;0>b&&(b=-b);return b+this.pl(a.F[0])+this.pl(a.F[1])}};Xa.prototype={za:function(a,b){this.ma=a.x;this.na=a.y;this.oa=a.z;this.ja=b.x;this.ka=b.y;this.la=b.z;return this},Jc:function(){var a=new t;a.x=this.ma;a.y=this.na;a.z=this.oa;return a},Kc:function(a){a.x=this.ma;a.y=this.na;a.z=this.oa},Yd:function(a){this.ma=a.x;this.na=a.y;this.oa=a.z;return this},Ac:function(){var a=new t;a.x=this.ja;a.y=this.ka;a.z=this.la;return a},Ec:function(a){a.x=this.ja;a.y=this.ka;a.z=this.la},fd:function(a){this.ja=a.x;this.ka=a.y;this.la=a.z;return this},Hb:function(){var a=new t,b,e,c;b=this.ma+this.ja;e=this.na+this.ka;c=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*c;return a},Mb:function(a){var b,e,c;b=this.ma+this.ja;e=this.na+this.ka;c=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*c},pc:function(){var a=new t,b,e,c;b=this.ja-this.ma;e=this.ka-this.na;c=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*c;return a},qc:function(a){var b,e,c;b=this.ja-this.ma;e=this.ka-this.na;c=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*c},ua:function(a){this.ma=this.ma<a.ma?this.ma:a.ma;this.na=this.na<a.na?this.na:a.na;this.oa=this.oa<a.oa?this.oa:a.oa;this.ja=this.ja>a.ja?this.ja:a.ja;this.ka=this.ka>a.ka?this.ka:a.ka;this.la=this.la>a.la?this.la:a.la;return this},cb:function(a){var b=new Xa;b.ma=this.ma<a.ma?this.ma:a.ma;b.na=this.na<a.na?this.na:a.na;b.oa=this.oa<a.oa?this.oa:a.oa;b.ja=this.ja>a.ja?this.ja:a.ja;b.ka=this.ka>a.ka?this.ka:a.ka;b.la=this.la>a.la?this.la:a.la;return b},Lc:function(a){return this.ma<a.ja&&this.ja>a.ma&&this.na<a.ka&&this.ka>a.na&&this.oa<a.la?this.la>a.oa:!1},uc:function(a){var b=new Xa;b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;return b},vc:function(a,b){b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la},de:function(a){this.ma=a.ma;this.na=a.na;this.oa=a.oa;this.ja=a.ja;this.ka=a.ka;this.la=a.la;return this},clone:function(){var a=new Xa;a.ma=this.ma;a.na=this.na;a.oa=this.oa;a.ja=this.ja;a.ka=this.ka;a.la=this.la;return a}};me.ua=tb;me.prototype=cb(tb.prototype,{vn:function(){var a=new t;a.x=this.Ke;a.y=this.Le;a.z=this.Me;return a},wn:function(a){a.x=this.Ke;a.y=this.Le;a.z=this.Me},Oe:function(){this.yf=8*this.Ke*this.Le*this.Me;var a,b,e;a=this.Ke*this.Ke;b=this.Le*this.Le;e=this.Me*this.Me;this.mg=.3333333333333333*(b+e);this.pg=this.og=this.ng=0;this.qg=.3333333333333333*(e+a);this.tg=this.sg=this.rg=0;this.ug=.3333333333333333*(a+b)},Nb:function(a,b){var e,c,d,f,h;f=b.o*this.Gk+b.f*this.Hk+b.h*this.Ik;h=b.i*this.Gk+b.m*this.Hk+b.j*this.Ik;e=b.l*this.Gk+b.g*this.Hk+b.s*this.Ik;var l,g;l=b.o*this.Jk+b.f*this.Kk+b.h*this.Lk;g=b.i*this.Jk+b.m*this.Kk+b.j*this.Lk;c=b.l*this.Jk+b.g*this.Kk+b.s*this.Lk;var k,m;k=b.o*this.Mk+b.f*this.Nk+b.h*this.Ok;m=b.i*this.Mk+b.m*this.Nk+b.j*this.Ok;d=b.l*this.Mk+b.g*this.Nk+b.s*this.Ok;f=(0>f?-f:f)+(0>l?-l:l)+(0>k?-k:k);h=(0>h?-h:h)+(0>g?-g:g)+(0>m?-m:m);e=(0>e?-e:e)+(0>c?-c:c)+(0>d?-d:d);a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-e;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+e},Pd:function(a,b){var e,c,d;d=c=e=this.Rb;e=e<this.Ke?e:this.Ke;c=c<this.Le?c:this.Le;d=d<this.Me?d:this.Me;e=this.Ke-e;c=this.Le-c;d=this.Me-d;b.x=0<a.x?e:-e;b.y=0<a.y?c:-c;b.z=0<a.z?d:-d},Di:function(a,b,e,c,d,f,h){var l=this.Ke,g=this.Le,k=this.Me;c-=a;d-=b;f-=e;var m=0,n=0,q=0,p=1,r=1,v=1;if(-1E-6<c&&1E-6>c){if(a<=-l||a>=l)return!1}else{var R=1/c,y=(-l-a)*R,l=(l-a)*R;y>l&&(R=y,y=l,l=R);0<y&&(m=y);1>l&&(p=l)}if(-1E-6<d&&1E-6>d){if(b<=-g||b>=g)return!1}else y=1/d,l=(-g-b)*y,g=(g-b)*y,l>g&&(y=l,l=g,g=y),0<l&&(n=l),1>g&&(r=g);if(-1E-6<f&&1E-6>f){if(e<=-k||e>=k)return!1}else l=1/f,g=(-k-e)*l,k=(k-e)*l,g>k&&(l=g,g=k,k=l),0<g&&(q=g),1>k&&(v=k);if(1<=m||1<=n||1<=q||0>=p||0>=r||0>=v)return!1;k=m;m=0;n>k&&(k=n,m=1);q>k&&(k=q,m=2);r<p&&(p=r);v<p&&(p=v);if(k>p||!k)return!1;switch(m){case 0:h.normal.za(0<c?-1:1,0,0);break;case 1:h.normal.za(0,0<d?-1:1,0);break;case 2:h.normal.za(0,0,0<f?-1:1)}h.position.za(a+k*c,b+k*d,e+k*f);h.fraction=k;return!0}});ee.ua=tb;ee.prototype=cb(tb.prototype,{Xh:function(){return this.ab},Bj:function(){return this.Ib},Oe:function(){var a=this.ab*this.ab,b=this.Ib*this.Ib,e=6.28318530717958*a*this.Ib,c=3.14159265358979*a*this.ab*4/3,d=(this.yf=e+c)?1/this.yf:0;this.mg=b=d*(e*(.25*a+b/3)+c*(.4*a+this.Ib*this.ab*.75+b));this.pg=this.og=this.ng=0;this.qg=d*(e*a*.5+c*a*.4);this.tg=this.sg=this.rg=0;this.ug=b},Nb:function(a,b){var e,c,d;d=c=e=this.ab;var f,h,l;f=b.f;h=b.m;l=b.g;f=(0>f?-f:f)*this.Ib;h=(0>h?-h:h)*this.Ib;l=(0>l?-l:l)*this.Ib;e+=f;c+=h;d+=l;a.ma=b.v-e;a.na=b.A-c;a.oa=b.B-d;a.ja=b.v+e;a.ka=b.A+c;a.la=b.B+d},Pd:function(a,b){0<a.y?b.za(0,this.Ib,0):b.za(0,-this.Ib,0)},Di:function(a,b,e,c,d,f,h){var l=this.Ib,g=c-a,k=f-e,m,n=g*g+k*k,q=a*g+e*k;m=a*a+e*e-this.ab*this.ab;var p=q*q-n*m;if(0>p)return!1;if(0<n){if(p=Math.sqrt(p),m=(-q-p)/n,1<=m||0>=(-q+p)/n)return!1}else{if(0<=m)return!1;m=0}n=b+(d-b)*m;if(n>-l&&n<l)return 0<m?(f=m,q=h.normal.za(a+g*f,0,e+k*f),b=Math.sqrt(q.x*q.x+q.y*q.y+q.z*q.z),0<b&&(b=1/b),d=q.y*b,c=q.z*b,q.x=q.x*b,q.y=d,q.z=c,h.position.za(a+f*g,n,e+f*k),h.fraction=f,!0):!1;var g=0>n?-l:l,r;r=a-0;l=b-g;k=e-0;a=c-a;b=d-b;e=f-e;n=a*a+b*b+e*e;q=r*a+l*b+k*e;m=r*r+l*l+k*k-this.ab*this.ab;p=q*q-n*m;if(0>p)return!1;f=(-q-Math.sqrt(p))/n;if(0>f||1<f)return!1;a=r+a*f;n=l+b*f;e=k+e*f;q=a*a+n*n+e*e;0<q&&(q=1/Math.sqrt(q));b=h.position;b.x=a+0;b.y=n+g;b.z=e+0;g=h.normal;g.x=a*q;g.y=n*q;g.z=e*q;h.fraction=f;return!0}});Vd.ua=tb;Vd.prototype=cb(tb.prototype,{Xh:function(){return this.ab},Bj:function(){return this.Ib},Oe:function(){var a=this.ab*this.ab,b=this.Ib*this.Ib*4;this.yf=3.14159265358979*a*this.Ib*2/3;this.mg=.05*(3*a+2*b);this.pg=this.og=this.ng=0;this.qg=.3*a;this.tg=this.sg=this.rg=0;this.ug=.08333333333333333*(3*a+2*b)},Nb:function(a,b){var e,c,d,f,h,l;e=b.f;c=b.m;d=b.g;f=Math.sqrt(1-e*e);h=Math.sqrt(1-c*c);l=Math.sqrt(1-d*d);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Ib;c*=this.Ib;d*=this.Ib;var g,k,m,n,q,p;g=-e-f;k=-c-h;m=-d-l;n=-e+f;q=-c+h;p=-d+l;l=g>n?g:n;h=k>q?k:q;f=m>p?m:p;g=g<n?g:n;k=k<q?k:q;m=m<p?m:p;a.ma=b.v+(g<e?g:e);a.na=b.A+(k<c?k:c);a.oa=b.B+(m<d?m:d);a.ja=b.v+(l>e?l:e);a.ka=b.A+(h>c?h:c);a.la=b.B+(f>d?f:d)},Pd:function(a,b){var e=a.x,c=a.y,d=a.z;0<c&&c*c>this.uk*this.uk*(e*e+c*c+d*d)?(b.za(0,this.Ib-this.Rb/this.uk,0),0>b.y&&(b.y=0)):(e=a.x,a=a.z,c=e*e+a*a,d=2*this.Ib,d=(d-this.Rb)/d*this.ab-this.Rb/this.kk,0>d&&(d=0),c=0<c?d/Math.sqrt(c):0,d=this.Ib-this.Rb,0>d&&(d=0),b.x=e*c,b.y=-d,b.z=a*c)},Di:function(a,b,e,c,d,f,h){var l=this.Ib;c-=a;d-=b;f-=e;var g=0,k=1;if(-1E-6<d&&1E-6>d){if(b<=-l||b>=l)return!1}else{var m=1/d,n=(-l-b)*m,m=(l-b)*m;if(n>m)var q=n,n=m,m=q;0<n&&(g=n);1>m&&(k=m)}if(1<=g||0>=k)return!1;b-=l;var q=this.kk*this.kk,m=q*(c*c+d*d+f*f)-d*d,n=q*(a*c+b*d+e*f)-b*d,q=q*(a*a+b*b+e*e)-b*b,p=n*n-m*q;if(m){if(0>p)return!1;p=Math.sqrt(p);if(0>m)if(0<d){if(q=0,n=(-n+p)/m,0>=n)return!1}else{if(q=(-n-p)/m,n=1,1<=q)return!1}else if(q=(-n-p)/m,n=(-n+p)/m,1<=q||0>=n)return!1}else if(m=-q/(2*n),0<n){if(q=0,n=m,0>=m)return!1}else if(q=m,n=1,1<=m)return!1;b+=l;if(n<=g||k<=q)return!1;if(q<g){l=g;if(!l)return!1;h.normal.za(0,0<d?-1:1,0)}else{l=q;if(!l)return!1;g=h.normal.za(a+c*l,0,e+f*l);k=Math.sqrt(g.x*g.x+g.y*g.y+g.z*g.z);0<k&&(k=1/k);n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;k=this.kk;n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;h.normal.y+=this.uk}h.position.za(a+l*c,b+l*d,e+l*f);h.fraction=l;return!0}});le.ua=tb;le.prototype=cb(tb.prototype,{Nn:function(){return this.zb},Oe:function(){this.mg=this.yf=1;this.pg=this.og=this.ng=0;this.qg=1;this.tg=this.sg=this.rg=0;this.ug=1;for(var a=this.zb[0].x,b=this.zb[0].y,e=this.zb[0].z,c=this.zb[0].x,d=this.zb[0].y,f=this.zb[0].z,h=1,l=this.Ne;h<l;){var g=h++,k=this.zb[g].x,m=this.zb[g].y,g=this.zb[g].z;k<a?a=k:k>c&&(c=k);m<b?b=m:m>d&&(d=m);g<e?e=g:g>f&&(f=g)}h=c-a;l=d-b;k=f-e;this.yf=h*l*k;a=.25*((a+c)*(a+c)+(b+d)*(b+d)+(e+f)*(e+f));h=h*h*.25;l=l*l*.25;k=k*k*.25;this.mg=.3333333333333333*(l+k)+a;this.pg=this.og=this.ng=0;this.qg=.3333333333333333*(k+h)+a;this.tg=this.sg=this.rg=0;this.ug=.3333333333333333*(h+l)+a},Nb:function(a,b){var e,c,d,f,h,l,g,k,m;m=k=g=this.Rb;var n,q,p;e=this.zb[0];n=e.x;q=e.y;p=e.z;c=b.o*n+b.f*q+b.h*p;e=b.i*n+b.m*q+b.j*p;d=b.l*n+b.g*q+b.s*p;n=c+b.v;q=e+b.A;p=d+b.B;e=n;c=q;d=p;f=n;h=q;l=p;for(var r=1,v=this.Ne;r<v;){n=r++;p=this.zb[n];n=p.x;q=p.y;p=p.z;var R,y;R=b.o*n+b.f*q+b.h*p;y=b.i*n+b.m*q+b.j*p;p=b.l*n+b.g*q+b.s*p;n=R;q=y;n+=b.v;q+=b.A;p+=b.B;e=e<n?e:n;c=c<q?c:q;d=d<p?d:p;f=f>n?f:n;h=h>q?h:q;l=l>p?l:p}a.ma=e-g;a.na=c-k;a.oa=d-m;a.ja=f+g;a.ka=h+k;a.la=l+m},Pd:function(a,b){for(var e=this.zb[0],e=e.x*a.x+e.y*a.y+e.z*a.z,c=0,d=1,f=this.Ne;d<f;){var h=d++,l=this.zb[h],l=l.x*a.x+l.y*a.y+l.z*a.z;l>e&&(e=l,c=h)}a=this.zb[c];b.x=a.x;b.y=a.y;b.z=a.z}});Ud.ua=tb;Ud.prototype=cb(tb.prototype,{Xh:function(){return this.ab},Bj:function(){return this.Ib},Oe:function(){var a=this.ab*this.ab,b=this.Ib*this.Ib*4;this.yf=3.14159265358979*a*this.Ib*2;this.mg=.08333333333333333*(3*a+b);this.pg=this.og=this.ng=0;this.qg=.5*a;this.tg=this.sg=this.rg=0;this.ug=.08333333333333333*(3*a+b)},Nb:function(a,b){var e,c,d,f,h,l;e=b.f;c=b.m;d=b.g;e=0>e?-e:e;c=0>c?-c:c;d=0>d?-d:d;f=Math.sqrt(1-e*e);h=Math.sqrt(1-c*c);l=Math.sqrt(1-d*d);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Ib;c*=this.Ib;d*=this.Ib;f+=e;h+=c;l+=d;a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-l;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+l},Pd:function(a,b){var e=a.x,c=a.z,d=e*e+c*c,f=this.ab-this.Rb;0>f&&(f=0);d=0<d?f/Math.sqrt(d):0;f=this.Ib-this.Rb;0>f&&(f=0);b.x=e*d;b.y=0<a.y?f:-f;b.z=c*d},Di:function(a,b,e,c,d,f,h){var l=this.Ib;c-=a;d-=b;f-=e;var g=0,k=1;if(-1E-6<d&&1E-6>d){if(b<=-l||b>=l)return!1}else{var m=1/d,n=(-l-b)*m,l=(l-b)*m;n>l&&(m=n,n=l,l=m);0<n&&(g=n);1>l&&(k=l)}if(1<=g||0>=k)return!1;var l=c*c+f*f,n=a*c+e*f,m=a*a+e*e-this.ab*this.ab,q=n*n-l*m;if(0>q)return!1;if(0<l){if(q=Math.sqrt(q),m=(-n-q)/l,l=(-n+q)/l,1<=m||0>=l)return!1}else{if(0<=m)return!1;m=0;l=1}if(l<=g||k<=m)return!1;if(m<g){if(!g)return!1;h.normal.za(0,0<d?-1:1,0)}else{g=m;if(!g)return!1;k=h.normal.za(a+c*g,0,e+f*g);l=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z);0<l&&(l=1/l);n=k.y*l;m=k.z*l;k.x=k.x*l;k.y=n;k.z=m}h.position.za(a+g*c,b+g*d,e+g*f);h.fraction=g;return!0}});Td.ua=tb;Td.prototype=cb(tb.prototype,{Xh:function(){return this.ab},Oe:function(){this.yf=4.188790204786386*this.ab*this.ab*this.ab;this.mg=.4*this.ab*this.ab;this.pg=this.og=this.ng=0;this.qg=.4*this.ab*this.ab;this.tg=this.sg=this.rg=0;this.ug=.4*this.ab*this.ab},Nb:function(a,b){var e,c,d;d=c=e=this.ab;a.ma=b.v-e;a.na=b.A-c;a.oa=b.B-d;a.ja=b.v+e;a.ka=b.A+c;a.la=b.B+d},Pd:function(a,b){b.Z()},Di:function(a,b,e,c,d,f,h){var l;c-=a;d-=b;l=f-e;f=c*c+d*d+l*l;var g=a*c+b*d+e*l,k=g*g-f*(a*a+b*b+e*e-this.ab*this.ab);if(0>k)return!1;f=(-g-Math.sqrt(k))/f;if(0>f||1<f)return!1;a+=c*f;b+=d*f;e+=l*f;c=a*a+b*b+e*e;0<c&&(c=1/Math.sqrt(c));d=h.position;d.x=a;d.y=b;d.z=e;d=h.normal;d.x=a*c;d.y=b*c;d.z=e*c;h.fraction=f;return!0}});dg.prototype={ua:function(a,b){return this.Jb[a][b]}};ce.prototype={mm:function(){for(var a=0,b=0,e=this.numPoints;b<e;){var c=b++;this.points[c].depth>a&&(a=this.points[c].depth)}return a},clear:function(){for(var a=this.numPoints=0,b=this.points;a<b.length;){var e=b[a];++a;e.position1.Z();e.position2.Z();e.depth=0;e.id=0}this.normal.Z()}};Tc.prototype={yh:function(a,b,e,c){var d=a.normal;d.x=b;d.y=e;d.z=c;this.Sg&&(a=a.normal,b=-a.y,e=-a.z,a.x=-a.x,a.y=b,a.z=e)},Cg:function(a,b,e,c,d,f,h,l,g){a=a.points[a.numPoints++];a.depth=l;a.id=g;this.Sg?(l=a.position1,l.x=d,l.y=f,l.z=h,d=a.position2,d.x=b,d.y=e,d.z=c):(l=a.position1,l.x=b,l.y=e,l.z=c,b=a.position2,b.x=d,b.y=f,b.z=h)},th:function(){},hm:function(a,b,e,c,d,f){for(var h=a.numPoints=0,l=a.points;h<l.length;){var g=l[h];++h;g.position1.Z();g.position2.Z();g.depth=0;g.id=0}a.normal.Z();this.Sg?this.th(a,e,b,d,c,f):this.th(a,b,e,c,d,f)}};ij.ua=Tc;ij.prototype=cb(Tc.prototype,{th:function(a,b,e,c,d){var f=b,h=e;a.incremental=!1;var l,g,k,m,n,q,p,r,v;l=c.v;g=c.A;k=c.B;m=d.v;n=d.A;q=d.B;p=m-l;r=n-g;v=q-k;var R,y,L,w,D,Sa,B,C,A,t,I,J,Gb,Ce,u,da,E,Bd;R=c.o;y=c.i;L=c.l;w=c.f;D=c.m;Sa=c.g;B=c.h;C=c.j;A=c.s;t=d.o;I=d.i;J=d.l;Gb=d.f;Ce=d.m;u=d.g;da=d.h;E=d.j;Bd=d.s;var Db=f.Ke,Ia=f.Le,Da=f.Me,ma=h.Ke,Q=h.Le,O=h.Me,Ga,Ea,Ua,va,oa,Ya,F,Qa,X,M,N,ca,Y,T,aa,z,fa,U;Ga=R*Db;Ea=y*Db;Ua=L*Db;va=w*Ia;oa=D*Ia;Ya=Sa*Ia;F=B*Da;Qa=C*Da;X=A*Da;M=t*ma;N=I*ma;ca=J*ma;Y=Gb*Q;T=Ce*Q;aa=u*Q;z=da*O;fa=E*O;U=Bd*O;var pa=1/0,sa=-1,wa=0,ra,ka,Z;Z=ka=ra=0;var na=Db,Aa=R*M+y*N+L*ca,ya=R*Y+y*T+L*aa,K=R*z+y*fa+L*U;0>Aa&&(Aa=-Aa);0>ya&&(ya=-ya);0>K&&(K=-K);var Ba=Aa+ya+K,ha=R*p+y*r+L*v,ba=na+Ba,Va=0>ha,ga=Va?-ha:ha;if(ga<ba){var P=ba-ga;P<pa&&(pa=P,sa=0,ra=R,ka=y,Z=L,wa=Va?-1:1);var na=Ia,za=w*M+D*N+Sa*ca,xb=w*Y+D*T+Sa*aa,ja=w*z+D*fa+Sa*U;0>za&&(za=-za);0>xb&&(xb=-xb);0>ja&&(ja=-ja);var Ba=za+xb+ja,ha=w*p+D*r+Sa*v,V=na+Ba,S=0>ha,gb=S?-ha:ha;if(gb<V){var pb=V-gb;pb<pa&&(pa=pb,sa=1,ra=w,ka=D,Z=Sa,wa=S?-1:1);var na=Da,ua=B*M+C*N+A*ca,xa=B*Y+C*T+A*aa,Fa=B*z+C*fa+A*U;0>ua&&(ua=-ua);0>xa&&(xa=-xa);0>Fa&&(Fa=-Fa);var Ba=ua+xa+Fa,ha=B*p+C*r+A*v,fb=na+Ba,Ha=0>ha,qb=Ha?-ha:ha;if(qb<fb){var Na=fb-qb;Na<pa&&(pa=Na,sa=2,ra=B,ka=C,Z=A,wa=Ha?-1:1);var pa=pa>G.linearSlop?pa-G.linearSlop:0,la=t*Ga+I*Ea+J*Ua,Ca=t*va+I*oa+J*Ya,Za=t*F+I*Qa+J*X;0>la&&(la=-la);0>Ca&&(Ca=-Ca);0>Za&&(Za=-Za);var na=la+Ca+Za,Ba=ma,ha=t*p+I*r+J*v,Ra=na+Ba,ib=0>ha,Lb=ib?-ha:ha;if(Lb<Ra){var db=Ra-Lb;db<pa&&(pa=db,sa=3,ra=t,ka=I,Z=J,wa=ib?-1:1);var Ib=Gb*Ga+Ce*Ea+u*Ua,kb=Gb*va+Ce*oa+u*Ya,nb=Gb*F+Ce*Qa+u*X;0>Ib&&(Ib=-Ib);0>kb&&(kb=-kb);0>nb&&(nb=-nb);var na=Ib+kb+nb,Ba=Q,ha=Gb*p+Ce*r+u*v,Yb=na+Ba,sc=0>ha,$a=sc?-ha:ha;if($a<Yb){var Ka=Yb-$a;Ka<pa&&(pa=Ka,sa=4,ra=Gb,ka=Ce,Z=u,wa=sc?-1:1);var vb=da*Ga+E*Ea+Bd*Ua,H=da*va+E*oa+Bd*Ya,eb=da*F+E*Qa+Bd*X;0>vb&&(vb=-vb);0>H&&(H=-H);0>eb&&(eb=-eb);var na=vb+H+eb,Ba=O,ha=da*p+E*r+Bd*v,lb=na+Ba,yb=0>ha,mb=yb?-ha:ha;if(mb<lb){var ub=lb-mb;ub<pa&&(pa=ub,sa=5,ra=da,ka=E,Z=Bd,wa=yb?-1:1);var pa=pa>G.linearSlop?pa-G.linearSlop:0,x,W,ea;x=y*J-L*I;W=L*t-R*J;ea=R*I-y*t;if(x||W||ea){var Nc=x*x+W*W+ea*ea;0<Nc&&(Nc=1/Math.sqrt(Nc));x*=Nc;W*=Nc;ea*=Nc;var xc=x*va+W*oa+ea*Ya,Pa=x*F+W*Qa+ea*X;0>xc&&(xc=-xc);0>Pa&&(Pa=-Pa);var na=xc+Pa,rb=x*Y+W*T+ea*aa,ob=x*z+W*fa+ea*U;0>rb&&(rb=-rb);0>ob&&(ob=-ob);var Ba=rb+ob,ha=x*p+W*r+ea*v,zb=na+Ba,Ab=0>ha,ia=Ab?-ha:ha;if(ia<zb){var Ta=zb-ia;Ta<pa&&(pa=Ta,sa=6,ra=x,ka=W,Z=ea,wa=Ab?-1:1)}else return}x=y*u-L*Ce;W=L*Gb-R*u;ea=R*Ce-y*Gb;if(x||W||ea){var bb=x*x+W*W+ea*ea;0<bb&&(bb=1/Math.sqrt(bb));x*=bb;W*=bb;ea*=bb;var jb=x*va+W*oa+ea*Ya,Bb=x*F+W*Qa+ea*X;0>jb&&(jb=-jb);0>Bb&&(Bb=-Bb);var na=jb+Bb,La=x*M+W*N+ea*ca,Eb=x*z+W*fa+ea*U;0>La&&(La=-La);0>Eb&&(Eb=-Eb);var Ba=La+Eb,ha=x*p+W*r+ea*v,Cd=na+Ba,qa=0>ha,Bc=qa?-ha:ha;if(Bc<Cd){var Mb=Cd-Bc;Mb<pa&&(pa=Mb,sa=7,ra=x,ka=W,Z=ea,wa=qa?-1:1)}else return}x=y*Bd-L*E;W=L*da-R*Bd;ea=R*E-y*da;if(x||W||ea){var Sb=x*x+W*W+ea*ea;0<Sb&&(Sb=1/Math.sqrt(Sb));x*=Sb;W*=Sb;ea*=Sb;var sf=x*va+W*oa+ea*Ya,Je=x*F+W*Qa+ea*X;0>sf&&(sf=-sf);0>Je&&(Je=-Je);var na=sf+Je,Yj=x*M+W*N+ea*ca,Zb=x*Y+W*T+ea*aa;0>Yj&&(Yj=-Yj);0>Zb&&(Zb=-Zb);var Ba=Yj+Zb,ha=x*p+W*r+ea*v,Sl=na+Ba,xh=0>ha,Tl=xh?-ha:ha;if(Tl<Sl){var ta=Sl-Tl;ta<pa&&(pa=ta,sa=8,ra=x,ka=W,Z=ea,wa=xh?-1:1)}else return}x=D*J-Sa*I;W=Sa*t-w*J;ea=w*I-D*t;if(x||W||ea){var Ub=x*x+W*W+ea*ea;0<Ub&&(Ub=1/Math.sqrt(Ub));x*=Ub;W*=Ub;ea*=Ub;var gc=x*Ga+W*Ea+ea*Ua,fc=x*F+W*Qa+ea*X;0>gc&&(gc=-gc);0>fc&&(fc=-fc);var na=gc+fc,Pb=x*Y+W*T+ea*aa,cc=x*z+W*fa+ea*U;0>Pb&&(Pb=-Pb);0>cc&&(cc=-cc);var Ba=Pb+cc,ha=x*p+W*r+ea*v,Fb=na+Ba,lc=0>ha,bc=lc?-ha:ha;if(bc<Fb){var Qb=Fb-bc;Qb<pa&&(pa=Qb,sa=9,ra=x,ka=W,Z=ea,wa=lc?-1:1)}else return}x=D*u-Sa*Ce;W=Sa*Gb-w*u;ea=w*Ce-D*Gb;if(x||W||ea){var dc=x*x+W*W+ea*ea;0<dc&&(dc=1/Math.sqrt(dc));x*=dc;W*=dc;ea*=dc;var Vb=x*Ga+W*Ea+ea*Ua,Nb=x*F+W*Qa+ea*X;0>Vb&&(Vb=-Vb);0>Nb&&(Nb=-Nb);var na=Vb+Nb,Tb=x*M+W*N+ea*ca,sb=x*z+W*fa+ea*U;0>Tb&&(Tb=-Tb);0>sb&&(sb=-sb);var Ba=Tb+sb,ha=x*p+W*r+ea*v,Oa=na+Ba,qc=0>ha,Ma=qc?-ha:ha;if(Ma<Oa){var Zc=Oa-Ma;Zc<pa&&(pa=Zc,sa=10,ra=x,ka=W,Z=ea,wa=qc?-1:1)}else return}x=D*Bd-Sa*E;W=Sa*da-w*Bd;ea=w*E-D*da;if(x||W||ea){var jc=x*x+W*W+ea*ea;0<jc&&(jc=1/Math.sqrt(jc));x*=jc;W*=jc;ea*=jc;var Hc=x*Ga+W*Ea+ea*Ua,pc=x*F+W*Qa+ea*X;0>Hc&&(Hc=-Hc);0>pc&&(pc=-pc);var na=Hc+pc,Wa=x*M+W*N+ea*ca,$c=x*Y+W*T+ea*aa;0>Wa&&(Wa=-Wa);0>$c&&($c=-$c);var Ba=Wa+$c,ha=x*p+W*r+ea*v,tc=na+Ba,Ja=0>ha,Yc=Ja?-ha:ha;if(Yc<tc){var Xa=tc-Yc;Xa<pa&&(pa=Xa,sa=11,ra=x,ka=W,Z=ea,wa=Ja?-1:1)}else return}x=C*J-A*I;W=A*t-B*J;ea=B*I-C*t;if(x||W||ea){var mg=x*x+W*W+ea*ea;0<mg&&(mg=1/Math.sqrt(mg));x*=mg;W*=mg;ea*=mg;var Cc=x*Ga+W*Ea+ea*Ua,Dl=x*va+W*oa+ea*Ya;0>Cc&&(Cc=-Cc);0>Dl&&(Dl=-Dl);var na=Cc+Dl,wc=x*Y+W*T+ea*aa,cb=x*z+W*fa+ea*U;0>wc&&(wc=-wc);0>cb&&(cb=-cb);var Ba=wc+cb,ha=x*p+W*r+ea*v,tb=na+Ba,Ff=0>ha,jf=Ff?-ha:ha;if(jf<tb){var Dd=tb-jf;Dd<pa&&(pa=Dd,sa=12,ra=x,ka=W,Z=ea,wa=Ff?-1:1)}else return}x=C*u-A*Ce;W=A*Gb-B*u;ea=B*Ce-C*Gb;if(x||W||ea){var ab=x*x+W*W+ea*ea;0<ab&&(ab=1/Math.sqrt(ab));x*=ab;W*=ab;ea*=ab;var Oc=x*Ga+W*Ea+ea*Ua,Zj=x*va+W*oa+ea*Ya;0>Oc&&(Oc=-Oc);0>Zj&&(Zj=-Zj);var na=Oc+Zj,hb=x*M+W*N+ea*ca,Ec=x*z+W*fa+ea*U;0>hb&&(hb=-hb);0>Ec&&(Ec=-Ec);var Ba=hb+Ec,ha=x*p+W*r+ea*v,Cb=na+Ba,yh=0>ha,wb=yh?-ha:ha;if(wb<Cb){var Ob=Cb-wb;Ob<pa&&(pa=Ob,sa=13,ra=x,ka=W,Z=ea,wa=yh?-1:1)}else return}x=C*Bd-A*E;W=A*da-B*Bd;ea=B*E-C*da;if(x||W||ea){var Pc=x*x+W*W+ea*ea;0<Pc&&(Pc=1/Math.sqrt(Pc));x*=Pc;W*=Pc;ea*=Pc;var Hb=x*Ga+W*Ea+ea*Ua,Jb=x*va+W*oa+ea*Ya;0>Hb&&(Hb=-Hb);0>Jb&&(Jb=-Jb);var na=Hb+Jb,Wd=x*M+W*N+ea*ca,Kb=x*Y+W*T+ea*aa;0>Wd&&(Wd=-Wd);0>Kb&&(Kb=-Kb);var Ba=Wd+Kb,ha=x*p+W*r+ea*v,Xb=na+Ba,$b=0>ha,ec=$b?-ha:ha;if(ec<Xb){var Ul=Xb-ec;Ul<pa&&(pa=Ul,sa=14,ra=x,ka=W,Z=ea,wa=$b?-1:1)}else return}if(6<=sa){ra*=wa;ka*=wa;Z*=wa;var mc=(sa-6)/3|0,eg=sa-6-3*mc,Wc,Qc,Dc,Lc,yc,uc,sd,Bg,Gk,Xd,od,Hd;switch(mc){case 0:sd=R;Bg=y;Gk=L;var ne=0<F*ra+Qa*ka+X*Z;0<va*ra+oa*ka+Ya*Z?ne?(Wc=va+F,Qc=oa+Qa,Dc=Ya+X):(Wc=va-F,Qc=oa-Qa,Dc=Ya-X):ne?(Wc=F-va,Qc=Qa-oa,Dc=X-Ya):(Wc=va+F,Qc=oa+Qa,Dc=Ya+X,Wc=-Wc,Qc=-Qc,Dc=-Dc);break;case 1:sd=w;Bg=D;Gk=Sa;var Vl=0<F*ra+Qa*ka+X*Z;0<Ga*ra+Ea*ka+Ua*Z?Vl?(Wc=Ga+F,Qc=Ea+Qa,Dc=Ua+X):(Wc=Ga-F,Qc=Ea-Qa,Dc=Ua-X):Vl?(Wc=F-Ga,Qc=Qa-Ea,Dc=X-Ua):(Wc=Ga+F,Qc=Ea+Qa,Dc=Ua+X,Wc=-Wc,Qc=-Qc,Dc=-Dc);break;default:sd=B;Bg=C;Gk=A;var vc=0<va*ra+oa*ka+Ya*Z;0<Ga*ra+Ea*ka+Ua*Z?vc?(Wc=Ga+va,Qc=Ea+oa,Dc=Ua+Ya):(Wc=Ga-va,Qc=Ea-oa,Dc=Ua-Ya):vc?(Wc=va-Ga,Qc=oa-Ea,Dc=Ya-Ua):(Wc=Ga+va,Qc=Ea+oa,Dc=Ua+Ya,Wc=-Wc,Qc=-Qc,Dc=-Dc)}Wc=l+Wc;Qc=g+Qc;Dc=k+Dc;switch(eg){case 0:Xd=t;od=I;Hd=J;var rd=0<z*ra+fa*ka+U*Z;0<Y*ra+T*ka+aa*Z?rd?(Lc=Y+z,yc=T+fa,uc=aa+U):(Lc=Y-z,yc=T-fa,uc=aa-U):rd?(Lc=z-Y,yc=fa-T,uc=U-aa):(Lc=Y+z,yc=T+fa,uc=aa+U,Lc=-Lc,yc=-yc,uc=-uc);break;case 1:Xd=Gb;od=Ce;Hd=u;var oe=0<z*ra+fa*ka+U*Z;0<M*ra+N*ka+ca*Z?oe?(Lc=M+z,yc=N+fa,uc=ca+U):(Lc=M-z,yc=N-fa,uc=ca-U):oe?(Lc=z-M,yc=fa-N,uc=U-ca):(Lc=M+z,yc=N+fa,uc=ca+U,Lc=-Lc,yc=-yc,uc=-uc);break;default:Xd=da;od=E;Hd=Bd;var pe=0<Y*ra+T*ka+aa*Z;0<M*ra+N*ka+ca*Z?pe?(Lc=M+Y,yc=N+T,uc=ca+aa):(Lc=M-Y,yc=N-T,uc=ca-aa):pe?(Lc=Y-M,yc=T-N,uc=aa-ca):(Lc=M+Y,yc=N+T,uc=ca+aa,Lc=-Lc,yc=-yc,uc=-uc)}Lc=m-Lc;yc=n-yc;uc=q-uc;var qe,re,td;qe=Wc-Lc;re=Qc-yc;td=Dc-uc;var se=sd*Xd+Bg*od+Gk*Hd,kc=sd*qe+Bg*re+Gk*td,hc=Xd*qe+od*re+Hd*td,tf=1/(1-se*se),Rc=(se*hc-kc)*tf,md=(hc-se*kc)*tf,pd,ic,nc,cd,dd,gd;pd=Wc+sd*Rc;ic=Qc+Bg*Rc;nc=Dc+Gk*Rc;cd=Lc+Xd*md;dd=yc+od*md;gd=uc+Hd*md;this.yh(a,-ra,-ka,-Z);this.Cg(a,pd,ic,nc,cd,dd,gd,pa,4)}else{var Fc,Ac,zc,Yd;if(3<=sa){wa=-wa;p=-p;r=-r;v=-v;var kf=f,f=h,h=kf,Gf=Db,Db=ma,ma=Gf,Ed=Ia,Ia=Q,Q=Ed,Wb=Da,Da=O,O=Wb;Fc=l;Ac=g;zc=k;l=m;g=n;k=q;m=Fc;n=Ac;q=zc;Fc=R;Ac=y;zc=L;R=t;y=I;L=J;t=Fc;I=Ac;J=zc;Fc=w;Ac=D;zc=Sa;w=Gb;D=Ce;Sa=u;Gb=Fc;Ce=Ac;u=zc;Fc=B;Ac=C;zc=A;B=da;C=E;A=Bd;da=Fc;E=Ac;Bd=zc;Fc=Ga;Ac=Ea;zc=Ua;Ga=M;Ea=N;Ua=ca;M=Fc;N=Ac;ca=zc;Fc=va;Ac=oa;zc=Ya;va=Y;oa=T;Ya=aa;Y=Fc;T=Ac;aa=zc;Fc=F;Ac=Qa;zc=X;F=z;Qa=fa;X=U;z=Fc;fa=Ac;U=zc;sa-=3;Yd=!0}else Yd=!1;var Id,Jd,te,ud,vd,wd,Kd,ue,fe,Ld,Zd,Fd,ve,Ke;switch(sa){case 0:Id=Ga;Jd=Ea;te=Ua;ud=R;vd=y;wd=L;Kd=w;ue=D;fe=Sa;Ld=B;Zd=C;Fd=A;ve=Ia;Ke=Da;break;case 1:Id=va;Jd=oa;te=Ya;ud=w;vd=D;wd=Sa;Kd=B;ue=C;fe=A;Ld=R;Zd=y;Fd=L;ve=Da;Ke=Db;break;default:Id=F,Jd=Qa,te=X,ud=B,vd=C,wd=A,Kd=R,ue=y,fe=L,Ld=w,Zd=D,Fd=Sa,ve=Db,Ke=Ia}if(0>wa){Id=-Id;Jd=-Jd;te=-te;ud=-ud;vd=-vd;wd=-wd;Fc=Kd;Ac=ue;zc=fe;Kd=Ld;ue=Zd;fe=Fd;Ld=Fc;Zd=Ac;Fd=zc;var oc=ve;ve=Ke;Ke=oc}Id+=l;Jd+=g;te+=k;var we=1,Le=0,Md=ud*t+vd*I+wd*J;Md<we&&(we=Md,Le=0);-Md<we&&(we=-Md,Le=1);Md=ud*Gb+vd*Ce+wd*u;Md<we&&(we=Md,Le=2);-Md<we&&(we=-Md,Le=3);Md=ud*da+vd*E+wd*Bd;Md<we&&(we=Md,Le=4);-Md<we&&(we=-Md,Le=5);var hd,xd,qd,id,jd,kd,Ic,Jc,Kc,Sc,ld,nd;switch(Le){case 0:hd=M+Y;xd=N+T;qd=ca+aa;hd+=z;xd+=fa;qd+=U;id=M-Y;jd=N-T;kd=ca-aa;id+=z;jd+=fa;kd+=U;Ic=M-Y;Jc=N-T;Kc=ca-aa;Ic-=z;Jc-=fa;Kc-=U;Sc=M+Y;ld=N+T;nd=ca+aa;Sc-=z;ld-=fa;nd-=U;break;case 1:hd=Y-M;xd=T-N;qd=aa-ca;hd+=z;xd+=fa;qd+=U;id=Y-M;jd=T-N;kd=aa-ca;id-=z;jd-=fa;kd-=U;Ic=M+Y;Jc=N+T;Kc=ca+aa;Ic=-Ic;Jc=-Jc;Kc=-Kc;Ic-=z;Jc-=fa;Kc-=U;Sc=M+Y;ld=N+T;nd=ca+aa;Sc=-Sc;ld=-ld;nd=-nd;Sc+=z;ld+=fa;nd+=U;break;case 2:hd=M+Y;xd=N+T;qd=ca+aa;hd+=z;xd+=fa;qd+=U;id=M+Y;jd=N+T;kd=ca+aa;id-=z;jd-=fa;kd-=U;Ic=Y-M;Jc=T-N;Kc=aa-ca;Ic-=z;Jc-=fa;Kc-=U;Sc=Y-M;ld=T-N;nd=aa-ca;Sc+=z;ld+=fa;nd+=U;break;case 3:hd=M-Y;xd=N-T;qd=ca-aa;hd+=z;xd+=fa;qd+=U;id=M+Y;jd=N+T;kd=ca+aa;id=-id;jd=-jd;kd=-kd;id+=z;jd+=fa;kd+=U;Ic=M+Y;Jc=N+T;Kc=ca+aa;Ic=-Ic;Jc=-Jc;Kc=-Kc;Ic-=z;Jc-=fa;Kc-=U;Sc=M-Y;ld=N-T;nd=ca-aa;Sc-=z;ld-=fa;nd-=U;break;case 4:hd=M+Y;xd=N+T;qd=ca+aa;hd+=z;xd+=fa;qd+=U;id=Y-M;jd=T-N;kd=aa-ca;id+=z;jd+=fa;kd+=U;Ic=M+Y;Jc=N+T;Kc=ca+aa;Ic=-Ic;Jc=-Jc;Kc=-Kc;Ic+=z;Jc+=fa;Kc+=U;Sc=M-Y;ld=N-T;nd=ca-aa;Sc+=z;ld+=fa;nd+=U;break;default:hd=M+Y,xd=N+T,qd=ca+aa,hd-=z,xd-=fa,qd-=U,id=M-Y,jd=N-T,kd=ca-aa,id-=z,jd-=fa,kd-=U,Ic=M+Y,Jc=N+T,Kc=ca+aa,Ic=-Ic,Jc=-Jc,Kc=-Kc,Ic-=z,Jc-=fa,Kc-=U,Sc=Y-M,ld=T-N,nd=aa-ca,Sc-=z,ld-=fa,nd-=U}hd+=p;xd+=r;qd+=v;id+=p;jd+=r;kd+=v;Ic+=p;Jc+=r;Kc+=v;Sc+=p;ld+=r;nd+=v;var Gc=this.Dg;Gc.w=ve;Gc.Dj=Ke;Gc.Tc=0;Gc.hc=0;var Rb=this.Dg,Me=Rb.Bc[Rb.Tc++];Me.x=hd*Kd+xd*ue+qd*fe;Me.y=hd*Ld+xd*Zd+qd*Fd;Me.Oa=hd;Me.Pa=xd;Me.Qa=qd;var rc=this.Dg,Ne=rc.Bc[rc.Tc++];Ne.x=id*Kd+jd*ue+kd*fe;Ne.y=id*Ld+jd*Zd+kd*Fd;Ne.Oa=id;Ne.Pa=jd;Ne.Qa=kd;var Tc=this.Dg,uf=Tc.Bc[Tc.Tc++];uf.x=Ic*Kd+Jc*ue+Kc*fe;uf.y=Ic*Ld+Jc*Zd+Kc*Fd;uf.Oa=Ic;uf.Pa=Jc;uf.Qa=Kc;var ac=this.Dg,We=ac.Bc[ac.Tc++];We.x=Sc*Kd+ld*ue+nd*fe;We.y=Sc*Ld+ld*Zd+nd*Fd;We.Oa=Sc;We.Pa=ld;We.Qa=nd;this.Dg.clip();this.Dg.reduce();var Oe,vf,lf;Yd?(Oe=ud,vf=vd,lf=wd):(Oe=-ud,vf=-vd,lf=-wd);this.yh(a,Oe,vf,lf);for(var De=0,mf=this.Dg.Tc;De<mf;){var wf=De++,xf=this.Dg.Bc[wf],Pe,Qe,ge;Pe=xf.Oa;Qe=xf.Pa;ge=xf.Qa;Pe+=l;Qe+=g;ge+=k;var he=(Id-Pe)*ud+(Jd-Qe)*vd+(te-ge)*wd,Re,yf,Xe;Re=Pe+ud*he;yf=Qe+vd*he;Xe=ge+wd*he;he>-G.contactPersistenceThreshold&&(Yd?this.Cg(a,Pe,Qe,ge,Re,yf,Xe,he,wf):this.Cg(a,Re,yf,Xe,Pe,Qe,ge,he,wf))}}}}}}}}}});Cl.prototype={clip:function(){for(var a=0,b=this.Tc;a<b;){var e=a++,c=this.Bc[e],e=this.Bc[(e+1)%this.Tc],d=this.w+c.x,f=this.w+e.x;if(0<d&&0<f)e=this.ic[this.hc++],e.x=c.x,e.y=c.y,e.Oa=c.Oa,e.Pa=c.Pa,e.Qa=c.Qa;else if(0<d&&0>=f){var h=this.ic[this.hc++];h.x=c.x;h.y=c.y;h.Oa=c.Oa;h.Pa=c.Pa;h.Qa=c.Qa;d/=d-f;f=this.ic[this.hc++];f.x=c.x+(e.x-c.x)*d;f.y=c.y+(e.y-c.y)*d;f.Oa=c.Oa+(e.Oa-c.Oa)*d;f.Pa=c.Pa+(e.Pa-c.Pa)*d;f.Qa=c.Qa+(e.Qa-c.Qa)*d}else 0>=d&&0<f&&(d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d)}a=this.Bc;this.Bc=this.ic;this.ic=a;this.Tc=this.hc;a=this.hc=0;for(b=this.Tc;a<b;)e=a++,c=this.Bc[e],e=this.Bc[(e+1)%this.Tc],d=this.w-c.x,f=this.w-e.x,0<d&&0<f?(e=this.ic[this.hc++],e.x=c.x,e.y=c.y,e.Oa=c.Oa,e.Pa=c.Pa,e.Qa=c.Qa):0<d&&0>=f?(h=this.ic[this.hc++],h.x=c.x,h.y=c.y,h.Oa=c.Oa,h.Pa=c.Pa,h.Qa=c.Qa,d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d):0>=d&&0<f&&(d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d);a=this.Bc;this.Bc=this.ic;this.ic=a;this.Tc=this.hc;a=this.hc=0;for(b=this.Tc;a<b;)e=a++,c=this.Bc[e],e=this.Bc[(e+1)%this.Tc],d=this.Dj+c.y,f=this.Dj+e.y,0<d&&0<f?(e=this.ic[this.hc++],e.x=c.x,e.y=c.y,e.Oa=c.Oa,e.Pa=c.Pa,e.Qa=c.Qa):0<d&&0>=f?(h=this.ic[this.hc++],h.x=c.x,h.y=c.y,h.Oa=c.Oa,h.Pa=c.Pa,h.Qa=c.Qa,d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d):0>=d&&0<f&&(d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d);a=this.Bc;this.Bc=this.ic;this.ic=a;this.Tc=this.hc;a=this.hc=0;for(b=this.Tc;a<b;)e=a++,c=this.Bc[e],e=this.Bc[(e+1)%this.Tc],d=this.Dj-c.y,f=this.Dj-e.y,0<d&&0<f?(e=this.ic[this.hc++],e.x=c.x,e.y=c.y,e.Oa=c.Oa,e.Pa=c.Pa,e.Qa=c.Qa):0<d&&0>=f?(h=this.ic[this.hc++],h.x=c.x,h.y=c.y,h.Oa=c.Oa,h.Pa=c.Pa,h.Qa=c.Qa,d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d):0>=d&&0<f&&(d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d);a=this.Bc;this.Bc=this.ic;this.ic=a;this.Tc=this.hc;this.hc=0},reduce:function(){if(!(4>this.Tc)){for(var a=-1/0,b=1/0,e=-1/0,c=1/0,d=null,f=null,h=null,l=null,g=0,k=this.Tc;g<k;){var m=g++,m=this.Bc[m],n=1*m.x+1*m.y,q=-1*m.x+1*m.y;n>a&&(a=n,d=m);n<b&&(b=n,f=m);q>e&&(e=q,h=m);q<c&&(c=q,l=m)}a=this.ic[this.hc++];a.x=d.x;a.y=d.y;a.Oa=d.Oa;a.Pa=d.Pa;a.Qa=d.Qa;d=this.ic[this.hc++];d.x=h.x;d.y=h.y;d.Oa=h.Oa;d.Pa=h.Pa;d.Qa=h.Qa;h=this.ic[this.hc++];h.x=f.x;h.y=f.y;h.Oa=f.Oa;h.Pa=f.Pa;h.Qa=f.Qa;f=this.ic[this.hc++];f.x=l.x;f.y=l.y;f.Oa=l.Oa;f.Pa=l.Pa;f.Qa=l.Qa;l=this.Bc;this.Bc=this.ic;this.ic=l;this.Tc=this.hc;this.hc=0}}};Bl.prototype={Xe:function(){null!=this.oi&&this.oi.clear()}};hj.ua=Tc;hj.prototype=cb(Tc.prototype,{th:function(a,b,e,c,d){a.incremental=!1;var f,h,l,g,k,m;f=c.f;h=c.m;l=c.g;g=d.f;k=d.m;m=d.g;var n=b.Ib,q=e.Ib;b=b.ab;e=e.ab;var p,r,v,R,y,L;p=c.v+f*-n;r=c.A+h*-n;v=c.B+l*-n;f=c.v+f*n;R=c.A+h*n;y=c.B+l*n;h=d.v+g*-q;l=d.A+k*-q;c=d.B+m*-q;g=d.v+g*q;k=d.A+k*q;L=d.B+m*q;var w,D,t;w=p-h;D=r-l;t=v-c;f-=p;R-=r;d=y-v;m=g-h;y=k-l;g=L-c;k=-(w*f+D*R+t*d);w=w*m+D*y+t*g;D=n*n*4;t=f*m+R*y+d*g;L=q*q*4;D||L?D?L?((q=D*L-t*t)?(n=t*w+L*k,n=0>n?0:n>q?1:n/q):n=0,q=n*t+w,0>q?(q=0,n=k,n=0>n?0:n>D?1:n/D):q>L?(q=1,n=t+k,n=0>n?0:n>D?1:n/D):q/=L):(q=0,n=k,n=0>n?0:n>D?1:n/D):(n=0,q=w,q=0>q?0:q>L?1:q/L):q=n=0;p+=f*n;r+=R*n;v+=d*n;h+=m*q;l+=y*q;c+=g*q;R=p-h;f=r-l;q=v-c;n=R*R+f*f+q*q;n>=(b+e)*(b+e)||(n=Math.sqrt(n),0<n?(R*=1/n,f*=1/n,q*=1/n):(R=1,q=f=0),this.yh(a,R,f,q),this.Cg(a,p+R*-b,r+f*-b,v+q*-b,h+R*e,l+f*e,c+q*e,b+e-n,0))}});gj.ua=Tc;gj.prototype=cb(Tc.prototype,{th:function(a,b,e,c,d,f){var h=ec.cb;c=h.zj(b,e,c,d,G.enableGJKCaching?f:null,!0);a.incremental=!0;if(c!=Gc.SUCCEEDED)console.log("GjkEpaDetector.hx:28:","GJK/EPA failed: status="+c);else if(!(h.distance>b.Rb+e.Rb)){var l,g,k;f=h.closestPoint1;c=f.x;d=f.y;f=f.z;k=h.closestPoint2;l=k.x;g=k.y;k=k.z;var m,n,q;m=c-l;n=d-g;q=f-k;if(m*m+n*n+q*q){0>h.distance&&(m=-m,n=-n,q=-q);var p=m*m+n*n+q*q;0<p&&(p=1/Math.sqrt(p));m*=p;n*=p;q*=p;this.yh(a,m,n,q);c+=m*-b.Rb;d+=n*-b.Rb;f+=q*-b.Rb;l+=m*e.Rb;g+=n*e.Rb;k+=q*e.Rb;this.Cg(a,c,d,f,l,g,k,b.Rb+e.Rb-h.distance,0)}}}});Sg.ua=Tc;Sg.prototype=cb(Tc.prototype,{th:function(a,b,e,c,d){a.incremental=!1;var f,h,l,g,k;f=e.Ke;h=e.Le;e=e.Me;l=-f;g=-h;k=-e;b=b.ab;var m,n,q;m=c.v-d.v;n=c.A-d.A;q=c.B-d.B;var p,r;p=d.o*m+d.i*n+d.l*q;r=d.f*m+d.m*n+d.g*q;m=d.h*m+d.j*n+d.s*q;if(l<p&&f>p&&g<r&&h>r&&k<m&&e>m){var v;n=f-(0>p?-p:p);v=h-(0>r?-r:r);var R=e-(0>m?-m:m),y,L;n<v?n<R?(l=0<p?1:-1,y=k=g=0,q=L=1):(0<m?(g=l=0,k=1):(g=l=0,k=-1),L=y=1,q=0,n=R):v<R?(0<r?(l=0,g=1):(l=0,g=-1),k=0,y=1,L=0,q=1,n=v):(0<m?(g=l=0,k=1):(g=l=0,k=-1),L=y=1,q=0,n=R);p=l*f+y*p;h=g*h+L*r;m=k*e+q*m;e=d.o*p+d.f*h+d.h*m;r=d.i*p+d.m*h+d.j*m;h=d.l*p+d.g*h+d.s*m;m=d.o*l+d.f*g+d.h*k;p=d.i*l+d.m*g+d.j*k;f=d.l*l+d.g*g+d.s*k;this.yh(a,m,p,f);this.Cg(a,c.v+m*-b,c.A+p*-b,c.B+f*-b,d.v+e,d.A+r,d.B+h,n,0)}else f-=1E-9,h-=1E-9,e-=1E-9,l+=1E-9,g+=1E-9,k+=1E-9,f=p<f?p:f,n=r<h?r:h,q=m<e?m:e,f=f>l?f:l,n=n>g?n:g,q=q>k?q:k,p-=f,l=r-n,g=m-q,e=p*p+l*l+g*g,e>=b*b||(e=Math.sqrt(e),r=d.o*f+d.f*n+d.h*q,h=d.i*f+d.m*n+d.j*q,m=d.l*f+d.g*n+d.s*q,k=d.o*p+d.f*l+d.h*g,f=d.i*p+d.m*l+d.j*g,p=d.l*p+d.g*l+d.s*g,g=k*k+f*f+p*p,0<g&&(g=1/Math.sqrt(g)),l=k*g,f*=g,p*=g,this.yh(a,l,f,p),this.Cg(a,c.v+l*-b,c.A+f*-b,c.B+p*-b,d.v+r,d.A+h,d.B+m,b-e,0))}});Sf.ua=Tc;Sf.prototype=cb(Tc.prototype,{th:function(a,b,e,c,d){a.incremental=!1;var f=e.Ib;b=b.ab;e=e.ab;var h,l,g;h=d.f;l=d.m;g=d.g;var k,m;k=c.v;m=c.A;c=c.B;var n,q,p,r;n=d.v+h*-f;q=d.A+l*-f;p=d.B+g*-f;h=d.v+h*f;l=d.A+l*f;r=d.B+g*f;d=h-n;g=l-q;l=r-p;f=f*f*4;h=(k-n)*d+(m-q)*g+(c-p)*l;h=0>h?0:h>f?1:h/f;f=n+d*h;q+=g*h;p+=l*h;l=k-f;g=m-q;n=c-p;d=l*l+g*g+n*n;d>=(b+e)*(b+e)||(d=Math.sqrt(d),0<d?(l*=1/d,g*=1/d,n*=1/d):(l=1,n=g=0),this.yh(a,l,g,n),this.Cg(a,k+l*-b,m+g*-b,c+n*-b,f+l*e,q+g*e,p+n*e,b+e-d,0))}});Fk.ua=Tc;Fk.prototype=cb(Tc.prototype,{th:function(a,b,e,c,d){a.incremental=!1;var f,h,l;f=c.v-d.v;h=c.A-d.A;l=c.B-d.B;b=b.ab;e=e.ab;var g=f*f+h*h+l*l;g>=(b+e)*(b+e)||(g=Math.sqrt(g),0<g?(f*=1/g,h*=1/g,l*=1/g):(f=1,l=h=0),this.yh(a,f,h,l),this.Cg(a,c.v+f*-b,c.A+h*-b,c.B+l*-b,d.v+f*e,d.A+h*e,d.B+l*e,b+e-g,0))}});il.prototype={io:function(){for(var a=this.jd;null!=a;){for(var b=a.M,e=0;3>e;){var c=e++;a.zb[c].sj=null;a.zb[c].Hi=null;if(-1==a.We[c])return this.Fc=2,!1;if(null==a.Ge[c])return this.Fc=3,!1}a=b}return!0},km:function(a,b,e){if(b.bl!=a){b.bl=a;var c=b.fi;c.x=e.x;c.y=e.y;c.z=e.z;var d=b.zb[0].xd,f=c.y-d.y,h=c.z-d.z;c.x=c.x-d.x;c.y=f;c.z=h;c=b.fi;d=b.dk;b.rj=0<c.x*d.x+c.y*d.y+c.z*d.z;if(b.rj){for(c=0;3>c;)if(d=c++,f=b.Ge[d],null!=f){h=f.fi;h.x=e.x;h.y=e.y;h.z=e.z;var l=f.zb[0].xd,g=h.y-l.y,k=h.z-l.z;h.x=h.x-l.x;h.y=g;h.z=k;h=f.fi;l=f.dk;f.rj=0<h.x*l.x+h.y*l.y+h.z*l.z;f.rj?this.km(a,f,e):(h=b.zb[d],h.Hi=b.zb[b.Ai[d]],h.sj=f)}for(a=0;3>a;)e=a++,c=b.Ge[e],null!=c&&(d=b.We[e],c.Ge[d]=null,c.We[d]=-1,b.Ge[e]=null,b.We[e]=-1);this.lh--;a=b.ia;e=b.M;null!=a&&(a.M=e);null!=e&&(e.ia=a);b==this.jd&&(this.jd=this.jd.M);b==this.Rc&&(this.Rc=this.Rc.ia);b.M=null;b.ia=null;b.tk();b.M=this.De;this.De=b}else this.Fc=6}},fh:function(a,b,e,c){this.Fc=0;this.Ne=4;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;this.zb[3]=c;var d=this.mi,f=a.xd;d.x=f.x;d.y=f.y;d.z=f.z;var f=b.xd,h=d.y+f.y,l=d.z+f.z;d.x+=f.x;d.y=h;d.z=l;f=e.xd;h=d.y+f.y;l=d.z+f.z;d.x+=f.x;d.y=h;d.z=l;f=c.xd;h=d.y+f.y;l=d.z+f.z;d.x+=f.x;d.y=h;d.z=l;f=.25*d.y;h=.25*d.z;d.x=.25*d.x;d.y=f;d.z=h;d=this.De;null!=d?(this.De=d.M,d.M=null):d=new Ie;f=this.De;null!=f?(this.De=f.M,f.M=null):f=new Ie;h=this.De;null!=h?(this.De=h.M,h.M=null):h=new Ie;l=this.De;null!=l?(this.De=l.M,l.M=null):l=new Ie;d.za(a,b,e,this.mi,!0)||(this.Fc=1);f.za(a,b,c,this.mi,!0)||(this.Fc=1);h.za(a,e,c,this.mi,!0)||(this.Fc=1);l.za(b,e,c,this.mi,!0)||(this.Fc=1);d.Rg(f)||(this.Fc=1);d.Rg(h)||(this.Fc=1);d.Rg(l)||(this.Fc=1);f.Rg(h)||(this.Fc=1);f.Rg(l)||(this.Fc=1);h.Rg(l)||(this.Fc=1);this.lh++;null==this.jd?this.jd=d:(this.Rc.M=d,d.ia=this.Rc);this.Rc=d;this.lh++;null==this.jd?this.jd=f:(this.Rc.M=f,f.ia=this.Rc);this.Rc=f;this.lh++;null==this.jd?this.jd=h:(this.Rc.M=h,h.ia=this.Rc);this.Rc=h;this.lh++;null==this.jd?this.jd=l:(this.Rc.M=l,l.ia=this.Rc);this.Rc=l;return!this.Fc},Vm:function(a,b){this.zb[this.Ne++]=a;var e=b.zb[0];this.km(this.Ne,b,a.xd);if(0!=this.Fc)return!1;b=e;for(var c=null,d=null;;){if(null==b.Hi)return this.Fc=4,!1;if(null==b.sj)return this.Fc=5,!1;var f=this.De;null!=f?(this.De=f.M,f.M=null):f=new Ie;null==d&&(d=f);f.za(b,b.Hi,a,this.mi,!1)||(this.Fc=1);if(0!=this.Fc)return!1;this.lh++;null==this.jd?this.jd=f:(this.Rc.M=f,f.ia=this.Rc);this.Rc=f;f.Rg(b.sj)||(this.Fc=1);null==c||f.Rg(c)||(this.Fc=1);c=f;b=b.Hi;if(b==e)break}c.Rg(d)||(this.Fc=1);return 0==this.Fc?this.io():!1}};Ie.prototype={za:function(a,b,e,c,d){null==d&&(d=!1);var f,h,l,g,k,m,n,q,p,r,v,R,y=a.xd;f=y.x;h=y.y;l=y.z;var L=b.xd;g=L.x;k=L.y;m=L.z;var w=e.xd;n=w.x;q=w.y;p=w.z;r=c.x;v=c.y;R=c.z;var D,t,B,C,A,Vc,I,J,Gb;D=g-f;t=k-h;B=m-l;C=n-f;A=q-h;Vc=p-l;I=f-r;J=h-v;Gb=l-R;var u,G,da;u=t*Vc-B*A;G=B*C-D*Vc;da=D*A-t*C;var E=!1;if(0>I*u+J*G+Gb*da)if(d){var Bd=b;b=e;e=Bd;u*=-1;G*=-1;da*=-1}else E=!0;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;var Db=this.dk;Db.x=u;Db.y=G;Db.z=da;var Ia=a.xd,Da=b.xd,ma=e.xd,Q=this.fi,O,Ga,Ea,Ua,va,oa,Ya,F,Qa,X,M,N,ca,Y,T,aa,z,fa;O=Ia.x;Ga=Ia.y;Ea=Ia.z;Ua=Da.x;va=Da.y;oa=Da.z;Ya=ma.x;F=ma.y;Qa=ma.z;X=Ua-O;M=va-Ga;N=oa-Ea;ca=Ya-Ua;Y=F-va;T=Qa-oa;aa=O-Ya;z=Ga-F;fa=Ea-Qa;var U,pa,sa;U=M*T-N*Y;pa=N*ca-X*T;sa=X*Y-M*ca;var wa=O*(M*sa-N*pa)+Ga*(N*U-X*sa)+Ea*(X*pa-M*U),ra=Ua*(Y*sa-T*pa)+va*(T*U-ca*sa)+oa*(ca*pa-Y*U),ka=Ya*(z*sa-fa*pa)+F*(fa*U-aa*sa)+Qa*(aa*pa-z*U),Z=-1,na,Aa,ya;ya=Aa=na=0;if(0>wa){var K,Ba,ha,ba,Va,ga;K=Ia.x;Ba=Ia.y;ha=Ia.z;ba=Da.x;Va=Da.y;ga=Da.z;var P,za,xb;P=ba-K;za=Va-Ba;xb=ga-ha;var ja=P*K+za*Ba+xb*ha,ja=-ja/(P*P+za*za+xb*xb);if(0>ja)Q.x=K,Q.y=Ba,Q.z=ha;else if(1<ja)Q.x=ba,Q.y=Va,Q.z=ga;else{var V,S,gb;V=K+P*ja;S=Ba+za*ja;gb=ha+xb*ja;Q.x=V;Q.y=S;Q.z=gb}Z=Q.x*Q.x+Q.y*Q.y+Q.z*Q.z;na=Q.x;Aa=Q.y;ya=Q.z}if(0>ra){var pb,ua,xa,Fa,fb,Ha;pb=Da.x;ua=Da.y;xa=Da.z;Fa=ma.x;fb=ma.y;Ha=ma.z;var qb,Na,la;qb=Fa-pb;Na=fb-ua;la=Ha-xa;var Ca=qb*pb+Na*ua+la*xa,Ca=-Ca/(qb*qb+Na*Na+la*la);if(0>Ca)Q.x=pb,Q.y=ua,Q.z=xa;else if(1<Ca)Q.x=Fa,Q.y=fb,Q.z=Ha;else{var Za,Ra,ib;Za=pb+qb*Ca;Ra=ua+Na*Ca;ib=xa+la*Ca;Q.x=Za;Q.y=Ra;Q.z=ib}var Lb=Q.x*Q.x+Q.y*Q.y+Q.z*Q.z;if(0>Z||Lb<Z)Z=Lb,na=Q.x,Aa=Q.y,ya=Q.z}if(0>ka){var db,Ib,kb,nb,Yb,sc;db=Ia.x;Ib=Ia.y;kb=Ia.z;nb=ma.x;Yb=ma.y;sc=ma.z;var $a,Ka,vb;$a=nb-db;Ka=Yb-Ib;vb=sc-kb;var H=$a*db+Ka*Ib+vb*kb,H=-H/($a*$a+Ka*Ka+vb*vb);if(0>H)Q.x=db,Q.y=Ib,Q.z=kb;else if(1<H)Q.x=nb,Q.y=Yb,Q.z=sc;else{var eb,lb,yb;eb=db+$a*H;lb=Ib+Ka*H;yb=kb+vb*H;Q.x=eb;Q.y=lb;Q.z=yb}var mb=Q.x*Q.x+Q.y*Q.y+Q.z*Q.z;if(0>Z||mb<Z)Z=mb,na=Q.x,Aa=Q.y,ya=Q.z}if(0<Z)Q.x=na,Q.y=Aa,Q.z=ya;else{var ub=U*U+pa*pa+sa*sa;0<ub&&(ub=1/Math.sqrt(ub));U*=ub;pa*=ub;sa*=ub;var x=U*U+pa*pa+sa*sa,x=(O*U+Ga*pa+Ea*sa)/x;na=U*x;Aa=pa*x;ya=sa*x;Q.x=na;Q.y=Aa;Q.z=ya}var W=this.fi;this.Wj=W.x*W.x+W.y*W.y+W.z*W.z;this.Ge[0]=null;this.Ge[1]=null;this.Ge[2]=null;this.We[0]=-1;this.We[1]=-1;this.We[2]=-1;return!E},Rg:function(a){for(var b=0,e=0;3>e;)for(var c=e++,d=0;3>d;){var f=d++,h=this.Ai[c];this.zb[c]==a.zb[this.Ai[f]]&&this.zb[h]==a.zb[f]&&(this.Ge[c]=a,this.We[c]=f,a.Ge[f]=this,a.We[f]=c,++b)}return 1!=b?!1:!0},tk:function(){this.ia=this.M=null;this.bl=0;this.rj=!1;this.Wj=0;this.zb[0]=null;this.zb[1]=null;this.zb[2]=null;this.Ge[0]=null;this.Ge[1]=null;this.Ge[2]=null;this.We[0]=0;this.We[1]=0;this.We[2]=0}};ke.prototype={za:function(a,b,e){var c=this.xd;c.x=a.x;c.y=a.y;c.z=a.z;a=this.jb;a.x=b.x;a.y=b.y;a.z=b.z;b=this.qb;b.x=e.x;b.y=e.y;b.z=e.z;this.sj=this.Hi=this.M=null;return this},tk:function(){this.sj=this.Hi=this.M=null}};jl.prototype={clear:function(){this.Il.Z()}};t.prototype={za:function(a,b,e){this.x=a;this.y=b;this.z=e;return this},Z:function(){this.z=this.y=this.x=0;return this},Lc:function(a){return new t(this.x+a.x,this.y+a.y,this.z+a.z)},ua:function(a,b){return new t(this.x+a.x*b,this.y+a.y*b,this.z+a.z*b)},ue:function(a){return new t(this.x-a.x,this.y-a.y,this.z-a.z)},se:function(a){return new t(this.x*a,this.y*a,this.z*a)},Ve:function(a,b,e){return new t(this.x*a,this.y*b,this.z*e)},Yd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Hb:function(a){return new t(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},fd:function(a){var b=this.y+a.y,e=this.z+a.z;this.x+=a.x;this.y=b;this.z=e;return this},cb:function(a,b){var e=this.y+a.y*b,c=this.z+a.z*b;this.x+=a.x*b;this.y=e;this.z=c;return this},Ue:function(a){var b=this.y-a.y,e=this.z-a.z;this.x=this.x-a.x;this.y=b;this.z=e;return this},te:function(a){var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Mf:function(a,b,e){b=this.y*b;e=this.z*e;this.x=this.x*a;this.y=b;this.z=e;return this},Mb:function(a){var b=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;this.x=this.y*a.z-this.z*a.y;this.y=b;this.z=e;return this},pc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02,this.x*a.e10+this.y*a.e11+this.z*a.e12,this.x*a.e20+this.y*a.e21+this.z*a.e22)},uc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03,this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23)},Ac:function(a){var b,e,c;b=this.x;e=this.y;c=this.z;var d,f;d=a.o*b+a.f*e+a.h*c;f=a.i*b+a.m*e+a.j*c;c=a.l*b+a.g*e+a.s*c;b=d+a.v;e=f+a.A;c+=a.B;a=new t;a.x=b;a.y=e;a.z=c;return a},qc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12,e=this.x*a.e20+this.y*a.e21+this.z*a.e22;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02;this.y=b;this.z=e;return this},vc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,e=this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03;this.y=b;this.z=e;return this},Ec:function(a){var b,e,c;b=this.x;e=this.y;c=this.z;var d,f;d=a.o*b+a.f*e+a.h*c;f=a.i*b+a.m*e+a.j*c;c=a.l*b+a.g*e+a.s*c;b=d+a.v;e=f+a.A;c+=a.B;this.x=b;this.y=e;this.z=c;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},pe:function(){return this.x*this.x+this.y*this.y+this.z*this.z},re:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);return new t(this.x*a,this.y*a,this.z*a)},qe:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Jc:function(){return new t(-this.x,-this.y,-this.z)},Kc:function(){var a=-this.y,b=-this.z;this.x=-this.x;this.y=a;this.z=b;return this},de:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new t(this.x,this.y,this.z)},toString:function(){return"Vec3["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+", "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+", "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+"]"}};Ja.prototype={Wf:function(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1;return this},Hb:function(){var a=new t;a.x=this.v;a.y=this.A;a.z=this.B;return a},Mb:function(a){a.x=this.v;a.y=this.A;a.z=this.B},Ec:function(a){this.v=a.x;this.A=a.y;this.B=a.z;return this},Lc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.v+=b;this.A+=e;this.B+=a},pc:function(){var a=new E;a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s;return a},qc:function(a){a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s},Jc:function(a){this.o=a.e00;this.f=a.e01;this.h=a.e02;this.i=a.e10;this.m=a.e11;this.j=a.e12;this.l=a.e20;this.g=a.e21;this.s=a.e22;return this},Kc:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;a=Math.sin(b);var d=Math.sin(e),f=Math.sin(c);b=Math.cos(b);e=Math.cos(e);c=Math.cos(c);this.o=e*c;this.f=-e*f;this.h=d;this.i=b*f+c*a*d;this.m=b*c-a*d*f;this.j=-e*a;this.l=a*f-b*c*d;this.g=c*a+b*d*f;this.s=b*e},uc:function(a){var b,e,c,d,f,h,l,g,k;b=a.e00;e=a.e01;c=a.e02;d=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.o+e*this.i+c*this.l;m=b*this.f+e*this.m+c*this.g;b=b*this.h+e*this.j+c*this.s;e=d*this.o+f*this.i+h*this.l;c=d*this.f+f*this.m+h*this.g;d=d*this.h+f*this.j+h*this.s;f=l*this.o+g*this.i+k*this.l;h=l*this.f+g*this.m+k*this.g;l=l*this.h+g*this.j+k*this.s;this.o=a;this.f=m;this.h=b;this.i=e;this.m=c;this.j=d;this.l=f;this.g=h;this.s=l},vc:function(a){var b,e,c,d,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);c=l*n;d=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=c*this.o+d*this.i+g*this.l;m=c*this.f+d*this.m+g*this.g;g=c*this.h+d*this.j+g*this.s;c=a*this.o+b*this.i+f*this.l;d=a*this.f+b*this.m+f*this.g;a=a*this.h+b*this.j+f*this.s;b=e*this.o+h*this.i+l*this.l;f=e*this.f+h*this.m+l*this.g;e=e*this.h+h*this.j+l*this.s;this.o=k;this.f=m;this.h=g;this.i=c;this.m=d;this.j=a;this.l=b;this.g=f;this.s=e},ua:function(){var a=new ta,b,e,c,d;b=this.o;e=this.m;c=this.s;d=b+e+c;var f;0<d?(f=Math.sqrt(d+1),d=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,c=(this.i-this.f)*f):b>e?b>c?(f=Math.sqrt(b-e-c+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,c=(this.h+this.l)*f,d=(this.g-this.j)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,d=(this.i-this.f)*f):e>c?(f=Math.sqrt(e-c-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,c=(this.j+this.g)*f,d=(this.h-this.l)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,d=(this.i-this.f)*f);a.x=b;a.y=e;a.z=c;a.w=d;return a},cb:function(a){var b,e,c,d;b=this.o;e=this.m;c=this.s;d=b+e+c;var f;0<d?(f=Math.sqrt(d+1),d=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,c=(this.i-this.f)*f):b>e?b>c?(f=Math.sqrt(b-e-c+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,c=(this.h+this.l)*f,d=(this.g-this.j)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,d=(this.i-this.f)*f):e>c?(f=Math.sqrt(e-c-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,c=(this.j+this.g)*f,d=(this.h-this.l)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,d=(this.i-this.f)*f);a.x=b;a.y=e;a.z=c;a.w=d},Ac:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;var d=a.w,f=2*b,h=2*e,l=2*c;a=b*f;var g=e*h;c*=l;var k=b*h;e*=l;b*=l;f*=d;h*=d;d*=l;this.o=1-g-c;this.f=k-d;this.h=b+h;this.i=k+d;this.m=1-a-c;this.j=e-f;this.l=b-h;this.g=e+f;this.s=1-a-g;return this},clone:function(){var a=new Ja;a.v=this.v;a.A=this.A;a.B=this.B;a.o=this.o;a.f=this.f;a.h=this.h;a.i=this.i;a.m=this.m;a.j=this.j;a.l=this.l;a.g=this.g;a.s=this.s;return a},de:function(a){this.v=a.v;this.A=a.A;this.B=a.B;this.o=a.o;this.f=a.f;this.h=a.h;this.i=a.i;this.m=a.m;this.j=a.j;this.l=a.l;this.g=a.g;this.s=a.s;return this}};ec.pc=function(){return ec.cb};ec.prototype={zj:function(a,b,e,c,d,f){this.wj=a;this.jl=b;this.tc=e;this.Ic=c;var h=this.Na,l=this.jb,g=this.qb,k=this.closest,m=this.dir;null!=d?(null==d.oi&&(d.oi=new jl),this.Pn(d.oi)):m.Z();if(!(m.x*m.x+m.y*m.y+m.z*m.z)){var n,q,p;n=c.v-e.v;q=c.A-e.A;p=c.B-e.B;m.x=n;m.y=q;m.z=p;1E-6>m.x*m.x+m.y*m.y+m.z*m.z&&m.za(1,0,0)}this.ya=0;this.zf(!1);this.Af(!1);var r=this.Na[this.ya],v=this.jb[this.ya];r.x=v.x;r.y=v.y;r.z=v.z;var R=this.qb[this.ya],y=r.y-R.y,L=r.z-R.z;r.x=r.x-R.x;r.y=y;r.z=L;this.ya=1;for(var w=0;40>w;){var D=0;switch(this.ya){case 1:var t=h[0];k.x=t.x;k.y=t.y;k.z=t.z;D=1;break;case 2:var B,C,A,Vc,I,J,Gb=h[0];B=Gb.x;C=Gb.y;A=Gb.z;var u=h[1];Vc=u.x;I=u.y;J=u.z;var G,da,E;G=Vc-B;da=I-C;E=J-A;var O=G*B+da*C+E*A,O=-O/(G*G+da*da+E*E);if(0>O){var Db=k;Db.x=B;Db.y=C;Db.z=A;D=1}else if(1<O){var Ia=k;Ia.x=Vc;Ia.y=I;Ia.z=J;D=2}else{var Da,ma,Q;Da=B+G*O;ma=C+da*O;Q=A+E*O;var V=k;V.x=Da;V.y=ma;V.z=Q;D=3}break;case 3:var Ga=h[0],Ea=h[1],Ua=h[2],va,oa,Ya,F,Qa,X,M,N,ca,Y,T,aa,z,fa,U,pa,sa,wa,ra=Ga;va=ra.x;oa=ra.y;Ya=ra.z;var ka=Ea;F=ka.x;Qa=ka.y;X=ka.z;var Z=Ua;M=Z.x;N=Z.y;ca=Z.z;Y=F-va;T=Qa-oa;aa=X-Ya;z=M-F;fa=N-Qa;U=ca-X;pa=va-M;sa=oa-N;wa=Ya-ca;var na,Aa,ya;na=T*U-aa*fa;Aa=aa*z-Y*U;ya=Y*fa-T*z;var K=va*(T*ya-aa*Aa)+oa*(aa*na-Y*ya)+Ya*(Y*Aa-T*na),Ba=F*(fa*ya-U*Aa)+Qa*(U*na-z*ya)+X*(z*Aa-fa*na),ha=M*(sa*ya-wa*Aa)+N*(wa*na-pa*ya)+ca*(pa*Aa-sa*na),ba=-1,Va,ga,P,za=0;P=ga=Va=0;if(0>K){var xb,ja,S,bd,gb,pb,ua=Ga;xb=ua.x;ja=ua.y;S=ua.z;var xa=Ea;bd=xa.x;gb=xa.y;pb=xa.z;var Fa,fb,Ha;Fa=bd-xb;fb=gb-ja;Ha=pb-S;var qb=Fa*xb+fb*ja+Ha*S,qb=-qb/(Fa*Fa+fb*fb+Ha*Ha),Na;if(0>qb){var la=k;la.x=xb;la.y=ja;la.z=S;Na=1}else if(1<qb){var Ca=k;Ca.x=bd;Ca.y=gb;Ca.z=pb;Na=2}else{var Za,Ra,ib;Za=xb+Fa*qb;Ra=ja+fb*qb;ib=S+Ha*qb;var Lb=k;Lb.x=Za;Lb.y=Ra;Lb.z=ib;Na=3}var db=k.x*k.x+k.y*k.y+k.z*k.z,za=Na,ba=db,Ib=k;Va=Ib.x;ga=Ib.y;P=Ib.z}if(0>Ba){var kb,nb,Yb,sc,$a,Ka,vb=Ea;kb=vb.x;nb=vb.y;Yb=vb.z;var H=Ua;sc=H.x;$a=H.y;Ka=H.z;var eb,lb,yb;eb=sc-kb;lb=$a-nb;yb=Ka-Yb;var mb=eb*kb+lb*nb+yb*Yb,mb=-mb/(eb*eb+lb*lb+yb*yb),ub;if(0>mb){var x=k;x.x=kb;x.y=nb;x.z=Yb;ub=1}else if(1<mb){var W=k;W.x=sc;W.y=$a;W.z=Ka;ub=2}else{var ea,Nc,xc;ea=kb+eb*mb;Nc=nb+lb*mb;xc=Yb+yb*mb;var Pa=k;Pa.x=ea;Pa.y=Nc;Pa.z=xc;ub=3}var rb=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ba||rb<ba){var za=ub<<1,ba=rb,ob=k;Va=ob.x;ga=ob.y;P=ob.z}}if(0>ha){var zb,Ab,ia,Ta,bb,jb,Bb=Ga;zb=Bb.x;Ab=Bb.y;ia=Bb.z;var La=Ua;Ta=La.x;bb=La.y;jb=La.z;var Eb,Cd,qa;Eb=Ta-zb;Cd=bb-Ab;qa=jb-ia;var Bc=Eb*zb+Cd*Ab+qa*ia,Bc=-Bc/(Eb*Eb+Cd*Cd+qa*qa),Mb;if(0>Bc){var Sb=k;Sb.x=zb;Sb.y=Ab;Sb.z=ia;Mb=1}else if(1<Bc){var sf=k;sf.x=Ta;sf.y=bb;sf.z=jb;Mb=2}else{var Je,Yj,Zb;Je=zb+Eb*Bc;Yj=Ab+Cd*Bc;Zb=ia+qa*Bc;var ta=k;ta.x=Je;ta.y=Yj;ta.z=Zb;Mb=3}var xh=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ba||xh<ba){var za=Mb&1|(Mb&2)<<1,ba=xh,Oa=k;Va=Oa.x;ga=Oa.y;P=Oa.z}}if(0<ba){var Ma=k;Ma.x=Va;Ma.y=ga;Ma.z=P;D=za}else{var Ub=na*na+Aa*Aa+ya*ya;0<Ub&&(Ub=1/Math.sqrt(Ub));na*=Ub;Aa*=Ub;ya*=Ub;var gc=na*na+Aa*Aa+ya*ya,gc=(va*na+oa*Aa+Ya*ya)/gc;Va=na*gc;ga=Aa*gc;P=ya*gc;var fc=k;fc.x=Va;fc.y=ga;fc.z=P;D=7}break;case 4:var Pb=h[0],cc=h[1],Fb=h[2],lc=h[3],bc,Qb,dc,Vb,Nb,Tb,sb,Wa,qc,Ja,Zc,jc,Hc,pc,Xa,$c,tc,cb,Yc,ab,mg,Cc,tb,wc,hb,Cb,Ff,jf=Pb;bc=jf.x;Qb=jf.y;dc=jf.z;var Dd=cc;Vb=Dd.x;Nb=Dd.y;Tb=Dd.z;var wb=Fb;sb=wb.x;Wa=wb.y;qc=wb.z;var Oc=lc;Ja=Oc.x;Zc=Oc.y;jc=Oc.z;Hc=Vb-bc;pc=Nb-Qb;Xa=Tb-dc;$c=sb-bc;tc=Wa-Qb;cb=qc-dc;Yc=Ja-bc;ab=Zc-Qb;mg=jc-dc;Cc=sb-Vb;tb=Wa-Nb;wc=qc-Tb;hb=Ja-Vb;Cb=Zc-Nb;Ff=jc-Tb;var Zj,Hb,Ec,Ob,yh,Jb,Kb,Pc,Xb,$b,Wd,ec;Zj=pc*cb-Xa*tc;Hb=Xa*$c-Hc*cb;Ec=Hc*tc-pc*$c;Ob=tc*mg-cb*ab;yh=cb*Yc-$c*mg;Jb=$c*ab-tc*Yc;Kb=ab*Xa-mg*pc;Pc=mg*Hc-Yc*Xa;Xb=Yc*pc-ab*Hc;$b=Cb*wc-Ff*tb;Wd=Ff*Cc-hb*wc;ec=hb*tb-Cb*Cc;var mc=0<Hc*$b+pc*Wd+Xa*ec?1:-1,vc=bc*Zj+Qb*Hb+dc*Ec,kc=bc*Ob+Qb*yh+dc*Jb,hc=bc*Kb+Qb*Pc+dc*Xb,Gc=Vb*$b+Nb*Wd+Tb*ec,eg=-1,Wc,Qc,Dc,Lc=0;Dc=Qc=Wc=0;if(0>vc*mc){var yc,uc,sd,Bg,ic,Xd,od,Hd,ne,nc,Wb,rd,oe,pe,qe,re,td,se,oc=Pb;yc=oc.x;uc=oc.y;sd=oc.z;var Rb=cc;Bg=Rb.x;ic=Rb.y;Xd=Rb.z;var tf=Fb;od=tf.x;Hd=tf.y;ne=tf.z;nc=Bg-yc;Wb=ic-uc;rd=Xd-sd;oe=od-Bg;pe=Hd-ic;qe=ne-Xd;re=yc-od;td=uc-Hd;se=sd-ne;var Rc,md,pd;Rc=Wb*qe-rd*pe;md=rd*oe-nc*qe;pd=nc*pe-Wb*oe;var rc=yc*(Wb*pd-rd*md)+uc*(rd*Rc-nc*pd)+sd*(nc*md-Wb*Rc),Tc=Bg*(pe*pd-qe*md)+ic*(qe*Rc-oe*pd)+Xd*(oe*md-pe*Rc),cd=od*(td*pd-se*md)+Hd*(se*Rc-re*pd)+ne*(re*md-td*Rc),dd=-1,gd,Fc,Ac,zc=0;Ac=Fc=gd=0;if(0>rc){var Yd,kf,Gf,Ed,ac,Id,Jd=Pb;Yd=Jd.x;kf=Jd.y;Gf=Jd.z;var te=cc;Ed=te.x;ac=te.y;Id=te.z;var ud,vd,wd;ud=Ed-Yd;vd=ac-kf;wd=Id-Gf;var Kd=ud*Yd+vd*kf+wd*Gf,Kd=-Kd/(ud*ud+vd*vd+wd*wd),ue;if(0>Kd){var fe=k;fe.x=Yd;fe.y=kf;fe.z=Gf;ue=1}else if(1<Kd){var Ld=k;Ld.x=Ed;Ld.y=ac;Ld.z=Id;ue=2}else{var Zd,Fd,ve;Zd=Yd+ud*Kd;Fd=kf+vd*Kd;ve=Gf+wd*Kd;var Ke=k;Ke.x=Zd;Ke.y=Fd;Ke.z=ve;ue=3}var Uc=k.x*k.x+k.y*k.y+k.z*k.z,zc=ue,dd=Uc,we=k;gd=we.x;Fc=we.y;Ac=we.z}if(0>Tc){var Le,Md,hd,xd,qd,id,jd=cc;Le=jd.x;Md=jd.y;hd=jd.z;var kd=Fb;xd=kd.x;qd=kd.y;id=kd.z;var Ic,Jc,Kc;Ic=xd-Le;Jc=qd-Md;Kc=id-hd;var Sc=Ic*Le+Jc*Md+Kc*hd,Sc=-Sc/(Ic*Ic+Jc*Jc+Kc*Kc),ld;if(0>Sc){var nd=k;nd.x=Le;nd.y=Md;nd.z=hd;ld=1}else if(1<Sc){var Xc=k;Xc.x=xd;Xc.y=qd;Xc.z=id;ld=2}else{var ed,Me,Wl;ed=Le+Ic*Sc;Me=Md+Jc*Sc;Wl=hd+Kc*Sc;var Ne=k;Ne.x=ed;Ne.y=Me;Ne.z=Wl;ld=3}var ad=k.x*k.x+k.y*k.y+k.z*k.z;if(0>dd||ad<dd){var zc=ld<<1,dd=ad,uf=k;gd=uf.x;Fc=uf.y;Ac=uf.z}}if(0>cd){var fd,We,Oe,vf,lf,De,mf=Pb;fd=mf.x;We=mf.y;Oe=mf.z;var wf=Fb;vf=wf.x;lf=wf.y;De=wf.z;var xf,Pe,Qe;xf=vf-fd;Pe=lf-We;Qe=De-Oe;var ge=xf*fd+Pe*We+Qe*Oe,ge=-ge/(xf*xf+Pe*Pe+Qe*Qe),he;if(0>ge){var Re=k;Re.x=fd;Re.y=We;Re.z=Oe;he=1}else if(1<ge){var yf=k;yf.x=vf;yf.y=lf;yf.z=De;he=2}else{var Xe,zf,kj;Xe=fd+xf*ge;zf=We+Pe*ge;kj=Oe+Qe*ge;var Gl=k;Gl.x=Xe;Gl.y=zf;Gl.z=kj;he=3}var yd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>dd||yd<dd){var zc=he&1|(he&2)<<1,dd=yd,zd=k;gd=zd.x;Fc=zd.y;Ac=zd.z}}var Hl;if(0<dd){var Il=k;Il.x=gd;Il.y=Fc;Il.z=Ac;Hl=zc}else{var Hf=Rc*Rc+md*md+pd*pd;0<Hf&&(Hf=1/Math.sqrt(Hf));Rc*=Hf;md*=Hf;pd*=Hf;var lj=Rc*Rc+md*md+pd*pd,lj=(yc*Rc+uc*md+sd*pd)/lj;gd=Rc*lj;Fc=md*lj;Ac=pd*lj;var ak=k;ak.x=gd;ak.y=Fc;ak.z=Ac;Hl=7}var cm=k.x*k.x+k.y*k.y+k.z*k.z,Lc=Hl,eg=cm,bk=k;Wc=bk.x;Qc=bk.y;Dc=bk.z}if(0>kc*mc){var Ye,nf,zh,de,ng,Nd,Od,Pd,El,og,pg,Se,Ze,$e,Te,Tf,If,Jf,Kf=Pb;Ye=Kf.x;nf=Kf.y;zh=Kf.z;var fg=Fb;de=fg.x;ng=fg.y;Nd=fg.z;var Jl=lc;Od=Jl.x;Pd=Jl.y;El=Jl.z;og=de-Ye;pg=ng-nf;Se=Nd-zh;Ze=Od-de;$e=Pd-ng;Te=El-Nd;Tf=Ye-Od;If=nf-Pd;Jf=zh-El;var xe,$d,ae;xe=pg*Te-Se*$e;$d=Se*Ze-og*Te;ae=og*$e-pg*Ze;var dm=Ye*(pg*ae-Se*$d)+nf*(Se*xe-og*ae)+zh*(og*$d-pg*xe),gg=de*($e*ae-Te*$d)+ng*(Te*xe-Ze*ae)+Nd*(Ze*$d-$e*xe),Ae=Od*(If*ae-Jf*$d)+Pd*(Jf*xe-Tf*ae)+El*(Tf*$d-If*xe),Gd=-1,Qd,qg,Ah,rg=0;Ah=qg=Qd=0;if(0>dm){var Ee,Ue,of,Lf,sg,Mf,Nf=Pb;Ee=Nf.x;Ue=Nf.y;of=Nf.z;var Of=Fb;Lf=Of.x;sg=Of.y;Mf=Of.z;var pf,Uf,tg;pf=Lf-Ee;Uf=sg-Ue;tg=Mf-of;var Vf=pf*Ee+Uf*Ue+tg*of,Vf=-Vf/(pf*pf+Uf*Uf+tg*tg),mj;if(0>Vf){var ug=k;ug.x=Ee;ug.y=Ue;ug.z=of;mj=1}else if(1<Vf){var Pf=k;Pf.x=Lf;Pf.y=sg;Pf.z=Mf;mj=2}else{var Wf,Af,Cg;Wf=Ee+pf*Vf;Af=Ue+Uf*Vf;Cg=of+tg*Vf;var Dg=k;Dg.x=Wf;Dg.y=Af;Dg.z=Cg;mj=3}var Be=k.x*k.x+k.y*k.y+k.z*k.z,rg=mj,Gd=Be,vg=k;Qd=vg.x;qg=vg.y;Ah=vg.z}if(0>gg){var Xf,Yf,qf,Eg,Mc,wg,xg=Fb;Xf=xg.x;Yf=xg.y;qf=xg.z;var yg=lc;Eg=yg.x;Mc=yg.y;wg=yg.z;var hg,Bf,Qf;hg=Eg-Xf;Bf=Mc-Yf;Qf=wg-qf;var Zf=hg*Xf+Bf*Yf+Qf*qf,Zf=-Zf/(hg*hg+Bf*Bf+Qf*Qf),Ad;if(0>Zf){var Ud=k;Ud.x=Xf;Ud.y=Yf;Ud.z=qf;Ad=1}else if(1<Zf){var Vd=k;Vd.x=Eg;Vd.y=Mc;Vd.z=wg;Ad=2}else{var ee,Tg,me;ee=Xf+hg*Zf;Tg=Yf+Bf*Zf;me=qf+Qf*Zf;var Ie=k;Ie.x=ee;Ie.y=Tg;Ie.z=me;Ad=3}var Rd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Gd||Rd<Gd){var rg=Ad<<1,Gd=Rd,be=k;Qd=be.x;qg=be.y;Ah=be.z}}if(0>Ae){var nj,oj,Bh,hf,He,Ch,Dh=Pb;nj=Dh.x;oj=Dh.y;Bh=Dh.z;var Eh=lc;hf=Eh.x;He=Eh.y;Ch=Eh.z;var Fh,Gh,Hh;Fh=hf-nj;Gh=He-oj;Hh=Ch-Bh;var Fg=Fh*nj+Gh*oj+Hh*Bh,Fg=-Fg/(Fh*Fh+Gh*Gh+Hh*Hh),Ih;if(0>Fg){var Jh=k;Jh.x=nj;Jh.y=oj;Jh.z=Bh;Ih=1}else if(1<Fg){var Kh=k;Kh.x=hf;Kh.y=He;Kh.z=Ch;Ih=2}else{var pj,Ug,qj;pj=nj+Fh*Fg;Ug=oj+Gh*Fg;qj=Bh+Hh*Fg;var ce=k;ce.x=pj;ce.y=Ug;ce.z=qj;Ih=3}var Td=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Gd||Td<Gd){var rg=Ih&1|(Ih&2)<<1,Gd=Td,le=k;Qd=le.x;qg=le.y;Ah=le.z}}var ck;if(0<Gd){var ke=k;ke.x=Qd;ke.y=qg;ke.z=Ah;ck=rg}else{var Vg=xe*xe+$d*$d+ae*ae;0<Vg&&(Vg=1/Math.sqrt(Vg));xe*=Vg;$d*=Vg;ae*=Vg;var rj=xe*xe+$d*$d+ae*ae,rj=(Ye*xe+nf*$d+zh*ae)/rj;Qd=xe*rj;qg=$d*rj;Ah=ae*rj;var dk=k;dk.x=Qd;dk.y=qg;dk.z=Ah;ck=7}var ek=k.x*k.x+k.y*k.y+k.z*k.z;if(0>eg||ek<eg){var Lc=ck&1|(ck&6)<<1,eg=ek,fk=k;Wc=fk.x;Qc=fk.y;Dc=fk.z}}if(0>hc*mc){var zg,Gg,Lh,gk,sj,Wg,Xg,Yg,Mh,Zg,$g,ah,bh,ch,Hg,Nh,Oh,Ph,Qh=Pb;zg=Qh.x;Gg=Qh.y;Lh=Qh.z;var Rh=cc;gk=Rh.x;sj=Rh.y;Wg=Rh.z;var hk=lc;Xg=hk.x;Yg=hk.y;Mh=hk.z;Zg=gk-zg;$g=sj-Gg;ah=Wg-Lh;bh=Xg-gk;ch=Yg-sj;Hg=Mh-Wg;Nh=zg-Xg;Oh=Gg-Yg;Ph=Lh-Mh;var af,bf,cf;af=$g*Hg-ah*ch;bf=ah*bh-Zg*Hg;cf=Zg*ch-$g*bh;var Fe=zg*($g*cf-ah*bf)+Gg*(ah*af-Zg*cf)+Lh*(Zg*bf-$g*af),rf=gk*(ch*cf-Hg*bf)+sj*(Hg*af-bh*cf)+Wg*(bh*bf-ch*af),Cf=Xg*(Oh*cf-Ph*bf)+Yg*(Ph*af-Nh*cf)+Mh*(Nh*bf-Oh*af),ie=-1,ye,Sh,Th,Hk=0;Th=Sh=ye=0;if(0>Fe){var $f,ig,jg,Ig,tj,Uh,Vh=Pb;$f=Vh.x;ig=Vh.y;jg=Vh.z;var Wh=cc;Ig=Wh.x;tj=Wh.y;Uh=Wh.z;var Xh,Yh,Zh;Xh=Ig-$f;Yh=tj-ig;Zh=Uh-jg;var Jg=Xh*$f+Yh*ig+Zh*jg,Jg=-Jg/(Xh*Xh+Yh*Yh+Zh*Zh),uj;if(0>Jg){var $h=k;$h.x=$f;$h.y=ig;$h.z=jg;uj=1}else if(1<Jg){var ai=k;ai.x=Ig;ai.y=tj;ai.z=Uh;uj=2}else{var vj,dh,ik;vj=$f+Xh*Jg;dh=ig+Yh*Jg;ik=jg+Zh*Jg;var jk=k;jk.x=vj;jk.y=dh;jk.z=ik;uj=3}var bg=k.x*k.x+k.y*k.y+k.z*k.z,Hk=uj,ie=bg,Ik=k;ye=Ik.x;Sh=Ik.y;Th=Ik.z}if(0>rf){var wj,xj,bi,Sd,kk,ci,di=cc;wj=di.x;xj=di.y;bi=di.z;var ei=lc;Sd=ei.x;kk=ei.y;ci=ei.z;var fi,gi,hi;fi=Sd-wj;gi=kk-xj;hi=ci-bi;var Kg=fi*wj+gi*xj+hi*bi,Kg=-Kg/(fi*fi+gi*gi+hi*hi),yj;if(0>Kg){var ii=k;ii.x=wj;ii.y=xj;ii.z=bi;yj=1}else if(1<Kg){var ji=k;ji.x=Sd;ji.y=kk;ji.z=ci;yj=2}else{var zj,eh,lk;zj=wj+fi*Kg;eh=xj+gi*Kg;lk=bi+hi*Kg;var mk=k;mk.x=zj;mk.y=eh;mk.z=lk;yj=3}var Jk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ie||Jk<ie){var Hk=yj<<1,ie=Jk,Kk=k;ye=Kk.x;Sh=Kk.y;Th=Kk.z}}if(0>Cf){var Aj,Bj,ki,Lk,nk,li,mi=Pb;Aj=mi.x;Bj=mi.y;ki=mi.z;var ni=lc;Lk=ni.x;nk=ni.y;li=ni.z;var oi,pi,qi;oi=Lk-Aj;pi=nk-Bj;qi=li-ki;var Lg=oi*Aj+pi*Bj+qi*ki,Lg=-Lg/(oi*oi+pi*pi+qi*qi),ri;if(0>Lg){var si=k;si.x=Aj;si.y=Bj;si.z=ki;ri=1}else if(1<Lg){var ti=k;ti.x=Lk;ti.y=nk;ti.z=li;ri=2}else{var Cj,fh,Dj;Cj=Aj+oi*Lg;fh=Bj+pi*Lg;Dj=ki+qi*Lg;var ok=k;ok.x=Cj;ok.y=fh;ok.z=Dj;ri=3}var Mk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ie||Mk<ie){var Hk=ri&1|(ri&2)<<1,ie=Mk,Nk=k;ye=Nk.x;Sh=Nk.y;Th=Nk.z}}var pk;if(0<ie){var Ok=k;Ok.x=ye;Ok.y=Sh;Ok.z=Th;pk=Hk}else{var gh=af*af+bf*bf+cf*cf;0<gh&&(gh=1/Math.sqrt(gh));af*=gh;bf*=gh;cf*=gh;var Ej=af*af+bf*bf+cf*cf,Ej=(zg*af+Gg*bf+Lh*cf)/Ej;ye=af*Ej;Sh=bf*Ej;Th=cf*Ej;var qk=k;qk.x=ye;qk.y=Sh;qk.z=Th;pk=7}var rk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>eg||rk<eg){var Lc=pk&3|(pk&4)<<1,eg=rk,sk=k;Wc=sk.x;Qc=sk.y;Dc=sk.z}}if(0>Gc*mc){var Ag,Mg,ui,tk,Fj,hh,ih,jh,vi,kh,lh,mh,nh,oh,Ng,wi,xi,yi,zi=cc;Ag=zi.x;Mg=zi.y;ui=zi.z;var Ai=Fb;tk=Ai.x;Fj=Ai.y;hh=Ai.z;var uk=lc;ih=uk.x;jh=uk.y;vi=uk.z;kh=tk-Ag;lh=Fj-Mg;mh=hh-ui;nh=ih-tk;oh=jh-Fj;Ng=vi-hh;wi=Ag-ih;xi=Mg-jh;yi=ui-vi;var df,ef,ff;df=lh*Ng-mh*oh;ef=mh*nh-kh*Ng;ff=kh*oh-lh*nh;var Ef=Ag*(lh*ff-mh*ef)+Mg*(mh*df-kh*ff)+ui*(kh*ef-lh*df),Rf=tk*(oh*ff-Ng*ef)+Fj*(Ng*df-nh*ff)+hh*(nh*ef-oh*df),Df=ih*(xi*ff-yi*ef)+jh*(yi*df-wi*ff)+vi*(wi*ef-xi*df),je=-1,ze,Bi,Ci,Pk=0;Ci=Bi=ze=0;if(0>Ef){var ag,kg,lg,Og,Gj,Di,Ei=cc;ag=Ei.x;kg=Ei.y;lg=Ei.z;var Fi=Fb;Og=Fi.x;Gj=Fi.y;Di=Fi.z;var Gi,Hi,Ii;Gi=Og-ag;Hi=Gj-kg;Ii=Di-lg;var Pg=Gi*ag+Hi*kg+Ii*lg,Pg=-Pg/(Gi*Gi+Hi*Hi+Ii*Ii),Hj;if(0>Pg){var Ji=k;Ji.x=ag;Ji.y=kg;Ji.z=lg;Hj=1}else if(1<Pg){var Ki=k;Ki.x=Og;Ki.y=Gj;Ki.z=Di;Hj=2}else{var Ij,ph,vk;Ij=ag+Gi*Pg;ph=kg+Hi*Pg;vk=lg+Ii*Pg;var wk=k;wk.x=Ij;wk.y=ph;wk.z=vk;Hj=3}var cg=k.x*k.x+k.y*k.y+k.z*k.z,Pk=Hj,je=cg,Qk=k;ze=Qk.x;Bi=Qk.y;Ci=Qk.z}if(0>Rf){var Jj,Kj,Li,Ge,xk,Mi,Ni=Fb;Jj=Ni.x;Kj=Ni.y;Li=Ni.z;var Oi=lc;Ge=Oi.x;xk=Oi.y;Mi=Oi.z;var Pi,Qi,Ri;Pi=Ge-Jj;Qi=xk-Kj;Ri=Mi-Li;var Qg=Pi*Jj+Qi*Kj+Ri*Li,Qg=-Qg/(Pi*Pi+Qi*Qi+Ri*Ri),Lj;if(0>Qg){var Si=k;Si.x=Jj;Si.y=Kj;Si.z=Li;Lj=1}else if(1<Qg){var Ti=k;Ti.x=Ge;Ti.y=xk;Ti.z=Mi;Lj=2}else{var Mj,qh,yk;Mj=Jj+Pi*Qg;qh=Kj+Qi*Qg;yk=Li+Ri*Qg;var zk=k;zk.x=Mj;zk.y=qh;zk.z=yk;Lj=3}var Rk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>je||Rk<je){var Pk=Lj<<1,je=Rk,Sk=k;ze=Sk.x;Bi=Sk.y;Ci=Sk.z}}if(0>Df){var Nj,Oj,Ui,Tk,Ak,Vi,Wi=cc;Nj=Wi.x;Oj=Wi.y;Ui=Wi.z;var Xi=lc;Tk=Xi.x;Ak=Xi.y;Vi=Xi.z;var Yi,Zi,$i;Yi=Tk-Nj;Zi=Ak-Oj;$i=Vi-Ui;var Rg=Yi*Nj+Zi*Oj+$i*Ui,Rg=-Rg/(Yi*Yi+Zi*Zi+$i*$i),aj;if(0>Rg){var bj=k;bj.x=Nj;bj.y=Oj;bj.z=Ui;aj=1}else if(1<Rg){var cj=k;cj.x=Tk;cj.y=Ak;cj.z=Vi;aj=2}else{var Pj,rh,Qj;Pj=Nj+Yi*Rg;rh=Oj+Zi*Rg;Qj=Ui+$i*Rg;var Bk=k;Bk.x=Pj;Bk.y=rh;Bk.z=Qj;aj=3}var Uk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>je||Uk<je){var Pk=aj&1|(aj&2)<<1,je=Uk,Vk=k;ze=Vk.x;Bi=Vk.y;Ci=Vk.z}}var Wk;if(0<je){var Xk=k;Xk.x=ze;Xk.y=Bi;Xk.z=Ci;Wk=Pk}else{var sh=df*df+ef*ef+ff*ff;0<sh&&(sh=1/Math.sqrt(sh));df*=sh;ef*=sh;ff*=sh;var Rj=df*df+ef*ef+ff*ff,Rj=(Ag*df+Mg*ef+ui*ff)/Rj;ze=df*Rj;Bi=ef*Rj;Ci=ff*Rj;var Ck=k;Ck.x=ze;Ck.y=Bi;Ck.z=Ci;Wk=7}var Yk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>eg||Yk<eg){var Lc=Wk<<1,eg=Yk,Dk=k;Wc=Dk.x;Qc=Dk.y;Dc=Dk.z}}if(0<eg){var th=k;th.x=Wc;th.y=Qc;th.z=Dc;D=Lc}else k.Z(),D=15}if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z){if(!f)return this.distance=0;switch(this.ya){case 1:this.Rn();break;case 2:this.El();break;case 3:this.Ll()}if(4==this.ya){var Sj=this.mn(a,b,e,c,h,l,g);if(0!=Sj)return this.distance=0,Sj;this.distance=-this.depth;return 0}this.distance=0;return 1}this.Hm(D);m.x=k.x;m.y=k.y;m.z=k.z;var uh=m,gf=-uh.y,dg=-uh.z;uh.x=-uh.x;uh.y=gf;uh.z=dg;this.zf(!1);this.Af(!1);var Tj=this.Na[this.ya],Uj=this.jb[this.ya];Tj.x=Uj.x;Tj.y=Uj.y;Tj.z=Uj.z;var Ve=Tj,vh=this.qb[this.ya],Sf=Ve.y-vh.y,Sg=Ve.z-vh.z;Ve.x=Ve.x-vh.x;Ve.y=Sf;Ve.z=Sg;if(1E-8>m.x*m.x+m.y*m.y+m.z*m.z)throw Error("!?");var Vj=h[this.ya];if(1E-8>Vj.x*m.x+Vj.y*m.y+Vj.z*m.z-(k.x*m.x+k.y*m.y+k.z*m.z))return this.sm(),this.distance=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z),null!=d&&null!=d.oi&&this.Yn(d.oi),0;this.ya++;++w}return 2},fm:function(a,b,e,c,d,f,h){this.wj=a;this.jl=b;this.tc=e;this.Ic=c;var l=this.Na,g=this.closest,k=this.dir,m,n,q;m=c.v-e.v;n=c.A-e.A;q=c.B-e.B;k.x=m;k.y=n;k.z=q;1E-6>k.x*k.x+k.y*k.y+k.z*k.z&&k.za(1,0,0);this.ya=0;if(null!=this.wj)this.zf(!0);else{var p=this.jb[this.ya];p.x=this.tc.v;p.y=this.tc.A;p.z=this.tc.B}this.Af(!0);var r=this.Na[this.ya],v=this.jb[this.ya];r.x=v.x;r.y=v.y;r.z=v.z;var R=this.qb[this.ya],y=r.y-R.y,L=r.z-R.z;r.x=r.x-R.x;r.y=y;r.z=L;this.ya=1;var w=0,D=0,t=this.Vn,B=this.Un;t.Z();B.x=f.x;B.y=f.y;B.z=f.z;var C=B.y-d.y,A=B.z-d.z;B.x=B.x-d.x;B.y=C;for(B.z=A;40>w;){var Vc=0;switch(this.ya){case 1:var I=l[0];g.x=I.x;g.y=I.y;g.z=I.z;Vc=1;break;case 2:var J,Gb,u,G,da,E,O=l[0];J=O.x;Gb=O.y;u=O.z;var Db=l[1];G=Db.x;da=Db.y;E=Db.z;var Ia,Da,ma;Ia=G-J;Da=da-Gb;ma=E-u;var Q=Ia*J+Da*Gb+ma*u,Q=-Q/(Ia*Ia+Da*Da+ma*ma);if(0>Q){var V=g;V.x=J;V.y=Gb;V.z=u;Vc=1}else if(1<Q){var Ga=g;Ga.x=G;Ga.y=da;Ga.z=E;Vc=2}else{var Ea,Ua,va;Ea=J+Ia*Q;Ua=Gb+Da*Q;va=u+ma*Q;var oa=g;oa.x=Ea;oa.y=Ua;oa.z=va;Vc=3}break;case 3:var Ya=l[0],F=l[1],Qa=l[2],X,M,N,ca,Y,T,aa,z,fa,U,pa,sa,wa,ra,ka,Z,na,Aa,ya=Ya;X=ya.x;M=ya.y;N=ya.z;var K=F;ca=K.x;Y=K.y;T=K.z;var Ba=Qa;aa=Ba.x;z=Ba.y;fa=Ba.z;U=ca-X;pa=Y-M;sa=T-N;wa=aa-ca;ra=z-Y;ka=fa-T;Z=X-aa;na=M-z;Aa=N-fa;var ha,ba,Va;ha=pa*ka-sa*ra;ba=sa*wa-U*ka;Va=U*ra-pa*wa;var ga=X*(pa*Va-sa*ba)+M*(sa*ha-U*Va)+N*(U*ba-pa*ha),P=ca*(ra*Va-ka*ba)+Y*(ka*ha-wa*Va)+T*(wa*ba-ra*ha),za=aa*(na*Va-Aa*ba)+z*(Aa*ha-Z*Va)+fa*(Z*ba-na*ha),xb=-1,ja,S,bd,gb=0;bd=S=ja=0;if(0>ga){var pb,ua,xa,Fa,fb,Ha,qb=Ya;pb=qb.x;ua=qb.y;xa=qb.z;var Na=F;Fa=Na.x;fb=Na.y;Ha=Na.z;var la,Ca,Za;la=Fa-pb;Ca=fb-ua;Za=Ha-xa;var Ra=la*pb+Ca*ua+Za*xa,Ra=-Ra/(la*la+Ca*Ca+Za*Za),ib;if(0>Ra){var Lb=g;Lb.x=pb;Lb.y=ua;Lb.z=xa;ib=1}else if(1<Ra){var db=g;db.x=Fa;db.y=fb;db.z=Ha;ib=2}else{var Ib,kb,nb;Ib=pb+la*Ra;kb=ua+Ca*Ra;nb=xa+Za*Ra;var Yb=g;Yb.x=Ib;Yb.y=kb;Yb.z=nb;ib=3}var sc=g.x*g.x+g.y*g.y+g.z*g.z,gb=ib,xb=sc,$a=g;ja=$a.x;S=$a.y;bd=$a.z}if(0>P){var Ka,vb,H,eb,lb,yb,mb=F;Ka=mb.x;vb=mb.y;H=mb.z;var ub=Qa;eb=ub.x;lb=ub.y;yb=ub.z;var x,W,ea;x=eb-Ka;W=lb-vb;ea=yb-H;var Nc=x*Ka+W*vb+ea*H,Nc=-Nc/(x*x+W*W+ea*ea),xc;if(0>Nc){var Pa=g;Pa.x=Ka;Pa.y=vb;Pa.z=H;xc=1}else if(1<Nc){var rb=g;rb.x=eb;rb.y=lb;rb.z=yb;xc=2}else{var ob,zb,Ab;ob=Ka+x*Nc;zb=vb+W*Nc;Ab=H+ea*Nc;var ia=g;ia.x=ob;ia.y=zb;ia.z=Ab;xc=3}var Ta=g.x*g.x+g.y*g.y+g.z*g.z;if(0>xb||Ta<xb){var gb=xc<<1,xb=Ta,bb=g;ja=bb.x;S=bb.y;bd=bb.z}}if(0>za){var jb,Bb,La,Eb,Cd,qa,Bc=Ya;jb=Bc.x;Bb=Bc.y;La=Bc.z;var Mb=Qa;Eb=Mb.x;Cd=Mb.y;qa=Mb.z;var Sb,sf,Je;Sb=Eb-jb;sf=Cd-Bb;Je=qa-La;var ta=Sb*jb+sf*Bb+Je*La,ta=-ta/(Sb*Sb+sf*sf+Je*Je),Zb;if(0>ta){var Oa=g;Oa.x=jb;Oa.y=Bb;Oa.z=La;Zb=1}else if(1<ta){var xh=g;xh.x=Eb;xh.y=Cd;xh.z=qa;Zb=2}else{var Ma,Wa,Ub;Ma=jb+Sb*ta;Wa=Bb+sf*ta;Ub=La+Je*ta;var gc=g;gc.x=Ma;gc.y=Wa;gc.z=Ub;Zb=3}var fc=g.x*g.x+g.y*g.y+g.z*g.z;if(0>xb||fc<xb){var gb=Zb&1|(Zb&2)<<1,xb=fc,Pb=g;ja=Pb.x;S=Pb.y;bd=Pb.z}}if(0<xb){var cc=g;cc.x=ja;cc.y=S;cc.z=bd;Vc=gb}else{var Fb=ha*ha+ba*ba+Va*Va;0<Fb&&(Fb=1/Math.sqrt(Fb));ha*=Fb;ba*=Fb;Va*=Fb;var lc=ha*ha+ba*ba+Va*Va,lc=(X*ha+M*ba+N*Va)/lc;ja=ha*lc;S=ba*lc;bd=Va*lc;var bc=g;bc.x=ja;bc.y=S;bc.z=bd;Vc=7}break;case 4:var Qb=l[0],dc=l[1],Vb=l[2],Nb=l[3],Tb,sb,Xa,qc,Ja,Zc,jc,Hc,pc,cb,$c,tc,ab,Yc,tb,hb,Cc,Cb,wc,wb,Hb,Ff,jf,Dd,Ob,Oc,Jb,Kb=Qb;Tb=Kb.x;sb=Kb.y;Xa=Kb.z;var Ec=dc;qc=Ec.x;Ja=Ec.y;Zc=Ec.z;var Xb=Vb;jc=Xb.x;Hc=Xb.y;pc=Xb.z;var yh=Nb;cb=yh.x;$c=yh.y;tc=yh.z;ab=qc-Tb;Yc=Ja-sb;tb=Zc-Xa;hb=jc-Tb;Cc=Hc-sb;Cb=pc-Xa;wc=cb-Tb;wb=$c-sb;Hb=tc-Xa;Ff=jc-qc;jf=Hc-Ja;Dd=pc-Zc;Ob=cb-qc;Oc=$c-Ja;Jb=tc-Zc;var $b,mc,Pc,ec,nc,Wd,ic,Wb,vc,kc,hc,Gc;$b=Yc*Cb-tb*Cc;mc=tb*hb-ab*Cb;Pc=ab*Cc-Yc*hb;ec=Cc*Hb-Cb*wb;nc=Cb*wc-hb*Hb;Wd=hb*wb-Cc*wc;ic=wb*tb-Hb*Yc;Wb=Hb*ab-wc*tb;vc=wc*Yc-wb*ab;kc=Oc*Dd-Jb*jf;hc=Jb*Ff-Ob*Dd;Gc=Ob*jf-Oc*Ff;var oc=0<ab*kc+Yc*hc+tb*Gc?1:-1,Wc=Tb*$b+sb*mc+Xa*Pc,Qc=Tb*ec+sb*nc+Xa*Wd,Dc=Tb*ic+sb*Wb+Xa*vc,Lc=qc*kc+Ja*hc+Zc*Gc,yc=-1,uc,sd,Rb,ac=0;Rb=sd=uc=0;if(0>Wc*oc){var Xd,od,Hd,ne,rc,Tc,rd,oe,pe,qe,re,td,se,fd,Uc,tf,Rc,md,pd=Qb;Xd=pd.x;od=pd.y;Hd=pd.z;var Xc=dc;ne=Xc.x;rc=Xc.y;Tc=Xc.z;var zd=Vb;rd=zd.x;oe=zd.y;pe=zd.z;qe=ne-Xd;re=rc-od;td=Tc-Hd;se=rd-ne;fd=oe-rc;Uc=pe-Tc;tf=Xd-rd;Rc=od-oe;md=Hd-pe;var cd,dd,gd;cd=re*Uc-td*fd;dd=td*se-qe*Uc;gd=qe*fd-re*se;var Fc=Xd*(re*gd-td*dd)+od*(td*cd-qe*gd)+Hd*(qe*dd-re*cd),Ac=ne*(fd*gd-Uc*dd)+rc*(Uc*cd-se*gd)+Tc*(se*dd-fd*cd),zc=rd*(Rc*gd-md*dd)+oe*(md*cd-tf*gd)+pe*(tf*dd-Rc*cd),Yd=-1,kf,Gf,Ed,ed=0;Ed=Gf=kf=0;if(0>Fc){var Id,Jd,te,ud,vd,wd,Kd=Qb;Id=Kd.x;Jd=Kd.y;te=Kd.z;var ue=dc;ud=ue.x;vd=ue.y;wd=ue.z;var fe,Ld,Zd;fe=ud-Id;Ld=vd-Jd;Zd=wd-te;var Fd=fe*Id+Ld*Jd+Zd*te,Fd=-Fd/(fe*fe+Ld*Ld+Zd*Zd),ve;if(0>Fd){var Ke=g;Ke.x=Id;Ke.y=Jd;Ke.z=te;ve=1}else if(1<Fd){var de=g;de.x=ud;de.y=vd;de.z=wd;ve=2}else{var we,Le,Md;we=Id+fe*Fd;Le=Jd+Ld*Fd;Md=te+Zd*Fd;var hd=g;hd.x=we;hd.y=Le;hd.z=Md;ve=3}var xd=g.x*g.x+g.y*g.y+g.z*g.z,ed=ve,Yd=xd,qd=g;kf=qd.x;Gf=qd.y;Ed=qd.z}if(0>Ac){var id,jd,kd,Ic,Jc,Kc,Sc=dc;id=Sc.x;jd=Sc.y;kd=Sc.z;var ld=Vb;Ic=ld.x;Jc=ld.y;Kc=ld.z;var nd,ad,yd;nd=Ic-id;ad=Jc-jd;yd=Kc-kd;var Me=nd*id+ad*jd+yd*kd,Me=-Me/(nd*nd+ad*ad+yd*yd),Ad;if(0>Me){var Ne=g;Ne.x=id;Ne.y=jd;Ne.z=kd;Ad=1}else if(1<Me){var Mc=g;Mc.x=Ic;Mc.y=Jc;Mc.z=Kc;Ad=2}else{var uf,Ud,We;uf=id+nd*Me;Ud=jd+ad*Me;We=kd+yd*Me;var Oe=g;Oe.x=uf;Oe.y=Ud;Oe.z=We;Ad=3}var vf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Yd||vf<Yd){var ed=Ad<<1,Yd=vf,lf=g;kf=lf.x;Gf=lf.y;Ed=lf.z}}if(0>zc){var De,mf,wf,xf,Pe,Qe,ge=Qb;De=ge.x;mf=ge.y;wf=ge.z;var he=Vb;xf=he.x;Pe=he.y;Qe=he.z;var Re,yf,Xe;Re=xf-De;yf=Pe-mf;Xe=Qe-wf;var zf=Re*De+yf*mf+Xe*wf,zf=-zf/(Re*Re+yf*yf+Xe*Xe),kj;if(0>zf){var Vd=g;Vd.x=De;Vd.y=mf;Vd.z=wf;kj=1}else if(1<zf){var Ie=g;Ie.x=xf;Ie.y=Pe;Ie.z=Qe;kj=2}else{var ee,me,Be;ee=De+Re*zf;me=mf+yf*zf;Be=wf+Xe*zf;var Hf=g;Hf.x=ee;Hf.y=me;Hf.z=Be;kj=3}var lj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Yd||lj<Yd){var ed=kj&1|(kj&2)<<1,Yd=lj,ak=g;kf=ak.x;Gf=ak.y;Ed=ak.z}}var be;if(0<Yd){var bk=g;bk.x=kf;bk.y=Gf;bk.z=Ed;be=ed}else{var Ye=cd*cd+dd*dd+gd*gd;0<Ye&&(Ye=1/Math.sqrt(Ye));cd*=Ye;dd*=Ye;gd*=Ye;var nf=cd*cd+dd*dd+gd*gd,nf=(Xd*cd+od*dd+Hd*gd)/nf;kf=cd*nf;Gf=dd*nf;Ed=gd*nf;var zh=g;zh.x=kf;zh.y=Gf;zh.z=Ed;be=7}var hf=g.x*g.x+g.y*g.y+g.z*g.z,ac=be,yc=hf,ng=g;uc=ng.x;sd=ng.y;Rb=ng.z}if(0>Qc*oc){var Nd,Od,Pd,He,og,pg,Se,Ze,$e,Te,Tf,If,Jf,Kf,fg,ce,xe,$d,ae=Qb;Nd=ae.x;Od=ae.y;Pd=ae.z;var le=Vb;He=le.x;og=le.y;pg=le.z;var gg=Nb;Se=gg.x;Ze=gg.y;$e=gg.z;Te=He-Nd;Tf=og-Od;If=pg-Pd;Jf=Se-He;Kf=Ze-og;fg=$e-pg;ce=Nd-Se;xe=Od-Ze;$d=Pd-$e;var Ae,Gd,Qd;Ae=Tf*fg-If*Kf;Gd=If*Jf-Te*fg;Qd=Te*Kf-Tf*Jf;var qg=Nd*(Tf*Qd-If*Gd)+Od*(If*Ae-Te*Qd)+Pd*(Te*Gd-Tf*Ae),Ah=He*(Kf*Qd-fg*Gd)+og*(fg*Ae-Jf*Qd)+pg*(Jf*Gd-Kf*Ae),rg=Se*(xe*Qd-$d*Gd)+Ze*($d*Ae-ce*Qd)+$e*(ce*Gd-xe*Ae),Ee=-1,Ue,of,Lf,sg=0;Lf=of=Ue=0;if(0>qg){var Mf,Nf,Of,pf,Uf,tg,Vf=Qb;Mf=Vf.x;Nf=Vf.y;Of=Vf.z;var mj=Vb;pf=mj.x;Uf=mj.y;tg=mj.z;var ug,Pf,Wf;ug=pf-Mf;Pf=Uf-Nf;Wf=tg-Of;var Af=ug*Mf+Pf*Nf+Wf*Of,Af=-Af/(ug*ug+Pf*Pf+Wf*Wf),Cg;if(0>Af){var Dg=g;Dg.x=Mf;Dg.y=Nf;Dg.z=Of;Cg=1}else if(1<Af){var Rd=g;Rd.x=pf;Rd.y=Uf;Rd.z=tg;Cg=2}else{var vg,Xf,Yf;vg=Mf+ug*Af;Xf=Nf+Pf*Af;Yf=Of+Wf*Af;var qf=g;qf.x=vg;qf.y=Xf;qf.z=Yf;Cg=3}var Eg=g.x*g.x+g.y*g.y+g.z*g.z,sg=Cg,Ee=Eg,ke=g;Ue=ke.x;of=ke.y;Lf=ke.z}if(0>Ah){var wg,xg,yg,hg,Bf,Qf,Zf=Vb;wg=Zf.x;xg=Zf.y;yg=Zf.z;var Td=Nb;hg=Td.x;Bf=Td.y;Qf=Td.z;var Sd,Ge,Fe;Sd=hg-wg;Ge=Bf-xg;Fe=Qf-yg;var Tg=Sd*wg+Ge*xg+Fe*yg,Tg=-Tg/(Sd*Sd+Ge*Ge+Fe*Fe),rf;if(0>Tg){var bg=g;bg.x=wg;bg.y=xg;bg.z=yg;rf=1}else if(1<Tg){var Ef=g;Ef.x=hg;Ef.y=Bf;Ef.z=Qf;rf=2}else{var Rf,nj,oj;Rf=wg+Sd*Tg;nj=xg+Ge*Tg;oj=yg+Fe*Tg;var Bh=g;Bh.x=Rf;Bh.y=nj;Bh.z=oj;rf=3}var cg=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Ee||cg<Ee){var sg=rf<<1,Ee=cg,gf=g;Ue=gf.x;of=gf.y;Lf=gf.z}}if(0>rg){var Ch,Dh,Eh,Fh,Gh,Hh,Fg=Qb;Ch=Fg.x;Dh=Fg.y;Eh=Fg.z;var Ih=Nb;Fh=Ih.x;Gh=Ih.y;Hh=Ih.z;var Jh,Kh,pj;Jh=Fh-Ch;Kh=Gh-Dh;pj=Hh-Eh;var Ug=Jh*Ch+Kh*Dh+pj*Eh,Ug=-Ug/(Jh*Jh+Kh*Kh+pj*pj),qj;if(0>Ug){var dg=g;dg.x=Ch;dg.y=Dh;dg.z=Eh;qj=1}else if(1<Ug){var Sf=g;Sf.x=Fh;Sf.y=Gh;Sf.z=Hh;qj=2}else{var Sg,ck,ij;Sg=Ch+Jh*Ug;ck=Dh+Kh*Ug;ij=Eh+pj*Ug;var Vg=g;Vg.x=Sg;Vg.y=ck;Vg.z=ij;qj=3}var rj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Ee||rj<Ee){var sg=qj&1|(qj&2)<<1,Ee=rj,dk=g;Ue=dk.x;of=dk.y;Lf=dk.z}}var ek;if(0<Ee){var fk=g;fk.x=Ue;fk.y=of;fk.z=Lf;ek=sg}else{var zg=Ae*Ae+Gd*Gd+Qd*Qd;0<zg&&(zg=1/Math.sqrt(zg));Ae*=zg;Gd*=zg;Qd*=zg;var Gg=Ae*Ae+Gd*Gd+Qd*Qd,Gg=(Nd*Ae+Od*Gd+Pd*Qd)/Gg;Ue=Ae*Gg;of=Gd*Gg;Lf=Qd*Gg;var Lh=g;Lh.x=Ue;Lh.y=of;Lh.z=Lf;ek=7}var gk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>yc||gk<yc){var ac=ek&1|(ek&6)<<1,yc=gk,sj=g;uc=sj.x;sd=sj.y;Rb=sj.z}}if(0>Dc*oc){var Wg,Xg,Yg,Mh,Zg,$g,ah,bh,ch,Hg,Nh,Oh,Ph,Qh,Rh,hk,af,bf,cf=Qb;Wg=cf.x;Xg=cf.y;Yg=cf.z;var wh=dc;Mh=wh.x;Zg=wh.y;$g=wh.z;var ej=Nb;ah=ej.x;bh=ej.y;ch=ej.z;Hg=Mh-Wg;Nh=Zg-Xg;Oh=$g-Yg;Ph=ah-Mh;Qh=bh-Zg;Rh=ch-$g;hk=Wg-ah;af=Xg-bh;bf=Yg-ch;var Cf,ie,ye;Cf=Nh*Rh-Oh*Qh;ie=Oh*Ph-Hg*Rh;ye=Hg*Qh-Nh*Ph;var Sh=Wg*(Nh*ye-Oh*ie)+Xg*(Oh*Cf-Hg*ye)+Yg*(Hg*ie-Nh*Cf),Th=Mh*(Qh*ye-Rh*ie)+Zg*(Rh*Cf-Ph*ye)+$g*(Ph*ie-Qh*Cf),Hk=ah*(af*ye-bf*ie)+bh*(bf*Cf-hk*ye)+ch*(hk*ie-af*Cf),$f=-1,ig,jg,Ig,tj=0;Ig=jg=ig=0;if(0>Sh){var Uh,Vh,Wh,Xh,Yh,Zh,Jg=Qb;Uh=Jg.x;Vh=Jg.y;Wh=Jg.z;var uj=dc;Xh=uj.x;Yh=uj.y;Zh=uj.z;var $h,ai,vj;$h=Xh-Uh;ai=Yh-Vh;vj=Zh-Wh;var dh=$h*Uh+ai*Vh+vj*Wh,dh=-dh/($h*$h+ai*ai+vj*vj),ik;if(0>dh){var jk=g;jk.x=Uh;jk.y=Vh;jk.z=Wh;ik=1}else if(1<dh){var fj=g;fj.x=Xh;fj.y=Yh;fj.z=Zh;ik=2}else{var Ik,wj,xj;Ik=Uh+$h*dh;wj=Vh+ai*dh;xj=Wh+vj*dh;var bi=g;bi.x=Ik;bi.y=wj;bi.z=xj;ik=3}var Fk=g.x*g.x+g.y*g.y+g.z*g.z,tj=ik,$f=Fk,kk=g;ig=kk.x;jg=kk.y;Ig=kk.z}if(0>Th){var ci,di,ei,fi,gi,hi,Kg=dc;ci=Kg.x;di=Kg.y;ei=Kg.z;var yj=Nb;fi=yj.x;gi=yj.y;hi=yj.z;var ii,ji,zj;ii=fi-ci;ji=gi-di;zj=hi-ei;var eh=ii*ci+ji*di+zj*ei,eh=-eh/(ii*ii+ji*ji+zj*zj),lk;if(0>eh){var mk=g;mk.x=ci;mk.y=di;mk.z=ei;lk=1}else if(1<eh){var Jk=g;Jk.x=fi;Jk.y=gi;Jk.z=hi;lk=2}else{var Kk,Aj,Bj;Kk=ci+ii*eh;Aj=di+ji*eh;Bj=ei+zj*eh;var ki=g;ki.x=Kk;ki.y=Aj;ki.z=Bj;lk=3}var Lk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>$f||Lk<$f){var tj=lk<<1,$f=Lk,nk=g;ig=nk.x;jg=nk.y;Ig=nk.z}}if(0>Hk){var li,mi,ni,oi,pi,qi,Lg=Qb;li=Lg.x;mi=Lg.y;ni=Lg.z;var ri=Nb;oi=ri.x;pi=ri.y;qi=ri.z;var si,ti,Cj;si=oi-li;ti=pi-mi;Cj=qi-ni;var fh=si*li+ti*mi+Cj*ni,fh=-fh/(si*si+ti*ti+Cj*Cj),Dj;if(0>fh){var ok=g;ok.x=li;ok.y=mi;ok.z=ni;Dj=1}else if(1<fh){var Mk=g;Mk.x=oi;Mk.y=pi;Mk.z=qi;Dj=2}else{var Nk,pk,Ok;Nk=li+si*fh;pk=mi+ti*fh;Ok=ni+Cj*fh;var gh=g;gh.x=Nk;gh.y=pk;gh.z=Ok;Dj=3}var Ej=g.x*g.x+g.y*g.y+g.z*g.z;if(0>$f||Ej<$f){var tj=Dj&1|(Dj&2)<<1,$f=Ej,qk=g;ig=qk.x;jg=qk.y;Ig=qk.z}}var rk;if(0<$f){var sk=g;sk.x=ig;sk.y=jg;sk.z=Ig;rk=tj}else{var Ag=Cf*Cf+ie*ie+ye*ye;0<Ag&&(Ag=1/Math.sqrt(Ag));Cf*=Ag;ie*=Ag;ye*=Ag;var Mg=Cf*Cf+ie*ie+ye*ye,Mg=(Wg*Cf+Xg*ie+Yg*ye)/Mg;ig=Cf*Mg;jg=ie*Mg;Ig=ye*Mg;var ui=g;ui.x=ig;ui.y=jg;ui.z=Ig;rk=7}var tk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>yc||tk<yc){var ac=rk&3|(rk&4)<<1,yc=tk,Fj=g;uc=Fj.x;sd=Fj.y;Rb=Fj.z}}if(0>Lc*oc){var hh,ih,jh,vi,kh,lh,mh,nh,oh,Ng,wi,xi,yi,zi,Ai,uk,df,ef,ff=dc;hh=ff.x;ih=ff.y;jh=ff.z;var gj=Vb;vi=gj.x;kh=gj.y;lh=gj.z;var hj=Nb;mh=hj.x;nh=hj.y;oh=hj.z;Ng=vi-hh;wi=kh-ih;xi=lh-jh;yi=mh-vi;zi=nh-kh;Ai=oh-lh;uk=hh-mh;df=ih-nh;ef=jh-oh;var Df,je,ze;Df=wi*Ai-xi*zi;je=xi*yi-Ng*Ai;ze=Ng*zi-wi*yi;var Bi=hh*(wi*ze-xi*je)+ih*(xi*Df-Ng*ze)+jh*(Ng*je-wi*Df),Ci=vi*(zi*ze-Ai*je)+kh*(Ai*Df-yi*ze)+lh*(yi*je-zi*Df),Pk=mh*(df*ze-ef*je)+nh*(ef*Df-uk*ze)+oh*(uk*je-df*Df),ag=-1,kg,lg,Og,Gj=0;Og=lg=kg=0;if(0>Bi){var Di,Ei,Fi,Gi,Hi,Ii,Pg=dc;Di=Pg.x;Ei=Pg.y;Fi=Pg.z;var Hj=Vb;Gi=Hj.x;Hi=Hj.y;Ii=Hj.z;var Ji,Ki,Ij;Ji=Gi-Di;Ki=Hi-Ei;Ij=Ii-Fi;var ph=Ji*Di+Ki*Ei+Ij*Fi,ph=-ph/(Ji*Ji+Ki*Ki+Ij*Ij),vk;if(0>ph){var wk=g;wk.x=Di;wk.y=Ei;wk.z=Fi;vk=1}else if(1<ph){var jj=g;jj.x=Gi;jj.y=Hi;jj.z=Ii;vk=2}else{var Qk,Jj,Kj;Qk=Di+Ji*ph;Jj=Ei+Ki*ph;Kj=Fi+Ij*ph;var Li=g;Li.x=Qk;Li.y=Jj;Li.z=Kj;vk=3}var dl=g.x*g.x+g.y*g.y+g.z*g.z,Gj=vk,ag=dl,xk=g;kg=xk.x;lg=xk.y;Og=xk.z}if(0>Ci){var Mi,Ni,Oi,Pi,Qi,Ri,Qg=Vb;Mi=Qg.x;Ni=Qg.y;Oi=Qg.z;var Lj=Nb;Pi=Lj.x;Qi=Lj.y;Ri=Lj.z;var Si,Ti,Mj;Si=Pi-Mi;Ti=Qi-Ni;Mj=Ri-Oi;var qh=Si*Mi+Ti*Ni+Mj*Oi,qh=-qh/(Si*Si+Ti*Ti+Mj*Mj),yk;if(0>qh){var zk=g;zk.x=Mi;zk.y=Ni;zk.z=Oi;yk=1}else if(1<qh){var Rk=g;Rk.x=Pi;Rk.y=Qi;Rk.z=Ri;yk=2}else{var Sk,Nj,Oj;Sk=Mi+Si*qh;Nj=Ni+Ti*qh;Oj=Oi+Mj*qh;var Ui=g;Ui.x=Sk;Ui.y=Nj;Ui.z=Oj;yk=3}var Tk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>ag||Tk<ag){var Gj=yk<<1,ag=Tk,Ak=g;kg=Ak.x;lg=Ak.y;Og=Ak.z}}if(0>Pk){var Vi,Wi,Xi,Yi,Zi,$i,Rg=dc;Vi=Rg.x;Wi=Rg.y;Xi=Rg.z;var aj=Nb;Yi=aj.x;Zi=aj.y;$i=aj.z;var bj,cj,Pj;bj=Yi-Vi;cj=Zi-Wi;Pj=$i-Xi;var rh=bj*Vi+cj*Wi+Pj*Xi,rh=-rh/(bj*bj+cj*cj+Pj*Pj),Qj;if(0>rh){var Bk=g;Bk.x=Vi;Bk.y=Wi;Bk.z=Xi;Qj=1}else if(1<rh){var Uk=g;Uk.x=Yi;Uk.y=Zi;Uk.z=$i;Qj=2}else{var Vk,Wk,Xk;Vk=Vi+bj*rh;Wk=Wi+cj*rh;Xk=Xi+Pj*rh;var sh=g;sh.x=Vk;sh.y=Wk;sh.z=Xk;Qj=3}var Rj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>ag||Rj<ag){var Gj=Qj&1|(Qj&2)<<1,ag=Rj,Ck=g;kg=Ck.x;lg=Ck.y;Og=Ck.z}}var Yk;if(0<ag){var Dk=g;Dk.x=kg;Dk.y=lg;Dk.z=Og;Yk=Gj}else{var th=Df*Df+je*je+ze*ze;0<th&&(th=1/Math.sqrt(th));Df*=th;je*=th;ze*=th;var Sj=Df*Df+je*je+ze*ze,Sj=(hh*Df+ih*je+jh*ze)/Sj;kg=Df*Sj;lg=je*Sj;Og=ze*Sj;var uh=g;uh.x=kg;uh.y=lg;uh.z=Og;Yk=7}var Ek=g.x*g.x+g.y*g.y+g.z*g.z;if(0>yc||Ek<yc){var ac=Yk<<1,yc=Ek,Wj=g;uc=Wj.x;sd=Wj.y;Rb=Wj.z}}if(0<yc){var Tj=g;Tj.x=uc;Tj.y=sd;Tj.z=Rb;Vc=ac}else g.Z(),Vc=15}this.Hm(Vc);if(1E-8>g.x*g.x+g.y*g.y+g.z*g.z){if(!D||4==this.ya){h.fraction=D;break}this.sm();h.fraction=D;var Uj=h.normal;Uj.x=k.x;Uj.y=k.y;Uj.z=k.z;var Ve=Uj,vh=Math.sqrt(Ve.x*Ve.x+Ve.y*Ve.y+Ve.z*Ve.z);0<vh&&(vh=1/vh);var gl=Ve.y*vh,hl=Ve.z*vh;Ve.x=Ve.x*vh;Ve.y=gl;Ve.z=hl;var Vj=h.position,Xj=this.closestPoint1;Vj.x=Xj.x;Vj.y=Xj.y;Vj.z=Xj.z;var Zk=Vj,nl=Zk.y+d.y*D,ol=Zk.z+d.z*D;Zk.x+=d.x*D;Zk.y=nl;Zk.z=ol;return!0}k.x=g.x;k.y=g.y;k.z=g.z;var $k=k,ql=-$k.y,rl=-$k.z;$k.x=-$k.x;$k.y=ql;$k.z=rl;if(null!=this.wj)this.zf(!0);else{var Kl=this.jb[this.ya];Kl.x=this.tc.v;Kl.y=this.tc.A;Kl.z=this.tc.B}this.Af(!0);var Fl=this.Na[this.ya],Ll=this.jb[this.ya];Fl.x=Ll.x;Fl.y=Ll.y;Fl.z=Ll.z;var al=Fl,Ml=this.qb[this.ya],sl=al.y-Ml.y,tl=al.z-Ml.z;al.x=al.x-Ml.x;al.y=sl;al.z=tl;var bl=l[this.ya],ul=bl.y-t.y,vl=bl.z-t.z;bl.x=bl.x-t.x;bl.y=ul;bl.z=vl;if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z)throw Error("!?");var Nl=l[this.ya],dj=k,el=Nl.x*dj.x+Nl.y*dj.y+Nl.z*dj.z;if(0>el){if(0<=B.x*dj.x+B.y*dj.y+B.z*dj.z)break;var pl=el/(B.x*dj.x+B.y*dj.y+B.z*dj.z),D=D+pl;if(1<=D)break;var wl=t.y+B.y*pl,xl=t.z+B.z*pl;t.x=t.x+B.x*pl;t.y=wl;t.z=xl;for(var fl=0,yl=this.ya+1;fl<yl;){var zl=fl++,cl=l[zl],Ol=-pl,Al=cl.y+B.y*Ol,Bl=cl.z+B.z*Ol;cl.x=cl.x+B.x*Ol;cl.y=Al;cl.z=Bl}}for(var il=!1,jl=0,Cl=this.ya;jl<Cl;){var Pl=jl++,kl=l[Pl].x-l[this.ya].x,ll=l[Pl].y-l[this.ya].y,ml=l[Pl].z-l[this.ya].z;if(1E-8>kl*kl+ll*ll+ml*ml){il=!0;break}}il||this.ya++;++w}return!1},sm:function(){switch(this.ya){case 1:var a=this.closestPoint1,b=this.jb[0];a.x=b.x;a.y=b.y;a.z=b.z;var e=this.closestPoint2,c=this.qb[0];e.x=c.x;e.y=c.y;e.z=c.z;break;case 2:var d,f,h,l=this.closest;d=l.x;f=l.y;h=l.z;var g,k,m,n,q,p,r,v,R,y,L,w,D,t,B,C,A,Vc,I=this.Na[0];g=I.x;k=I.y;m=I.z;var J=this.jb[0];n=J.x;q=J.y;p=J.z;var Gb=this.qb[0];r=Gb.x;v=Gb.y;R=Gb.z;var u=this.Na[1];y=u.x;L=u.y;w=u.z;var G=this.jb[1];D=G.x;t=G.y;B=G.z;var da=this.qb[1];C=da.x;A=da.y;Vc=da.z;var E,O,Db;E=y-g;O=L-k;Db=w-m;var Ia=E*E+O*O+Db*Db;Ia&&(Ia=1/Ia);var Da=((d-g)*E+(f-k)*O+(h-m)*Db)*Ia,ma,Q,V,Ga,Ea,Ua,va,oa,Ya;ma=D-n;Q=t-q;V=B-p;Ga=n+ma*Da;Ea=q+Q*Da;Ua=p+V*Da;ma=C-r;Q=A-v;V=Vc-R;va=r+ma*Da;oa=v+Q*Da;Ya=R+V*Da;var F=this.closestPoint1;F.x=Ga;F.y=Ea;F.z=Ua;var Qa=this.closestPoint2;Qa.x=va;Qa.y=oa;Qa.z=Ya;break;case 3:var X,M,N,ca=this.closest;X=ca.x;M=ca.y;N=ca.z;var Y,T,aa,z,fa,U,pa,sa,wa,ra,ka,Z,na,Aa,ya,K,Ba,ha,ba,Va,ga,P,za,S,ja,ta,bd,gb=this.Na[0];Y=gb.x;T=gb.y;aa=gb.z;var pb=this.jb[0];z=pb.x;fa=pb.y;U=pb.z;var ua=this.qb[0];pa=ua.x;sa=ua.y;wa=ua.z;var xa=this.Na[1];ra=xa.x;ka=xa.y;Z=xa.z;var Fa=this.jb[1];na=Fa.x;Aa=Fa.y;ya=Fa.z;var fb=this.qb[1];K=fb.x;Ba=fb.y;ha=fb.z;var Ha=this.Na[2];ba=Ha.x;Va=Ha.y;ga=Ha.z;var qb=this.jb[2];P=qb.x;za=qb.y;S=qb.z;var Na=this.qb[2];ja=Na.x;ta=Na.y;bd=Na.z;var la,Ca,Za,Ra,ib,Lb,db,Ib,kb;la=ra-Y;Ca=ka-T;Za=Z-aa;Ra=ba-Y;ib=Va-T;Lb=ga-aa;db=X-Y;Ib=M-T;kb=N-aa;var nb=la*la+Ca*Ca+Za*Za,Yb=la*Ra+Ca*ib+Za*Lb,sc=Ra*Ra+ib*ib+Lb*Lb,$a=la*db+Ca*Ib+Za*kb,Ka=Ra*db+ib*Ib+Lb*kb,vb=nb*sc-Yb*Yb;vb&&(vb=1/vb);var H=($a*sc-Ka*Yb)*vb,eb=(-$a*Yb+Ka*nb)*vb,lb,yb,mb,ub,x,W,ea,Nc,xc;lb=na-z;yb=Aa-fa;mb=ya-U;ub=z+lb*H;x=fa+yb*H;W=U+mb*H;lb=P-z;yb=za-fa;mb=S-U;ub+=lb*eb;x+=yb*eb;W+=mb*eb;lb=K-pa;yb=Ba-sa;mb=ha-wa;ea=pa+lb*H;Nc=sa+yb*H;xc=wa+mb*H;lb=ja-pa;yb=ta-sa;mb=bd-wa;ea+=lb*eb;Nc+=yb*eb;xc+=mb*eb;var Pa=this.closestPoint1;Pa.x=ub;Pa.y=x;Pa.z=W;var rb=this.closestPoint2;rb.x=ea;rb.y=Nc;rb.z=xc;break;default:throw Error("!?");}},Pn:function(a){var b=this.dir;a=a.Il;b.x=a.x;b.y=a.y;b.z=a.z},Yn:function(a){a=a.Il;var b=this.closest;a.x=b.x;a.y=b.y;a.z=b.z;var b=-a.y,e=-a.z;a.x=-a.x;a.y=b;a.z=e},Hm:function(a){this.ya=a;this.ya=(this.ya&5)+(this.ya>>1&5);this.ya=(this.ya&3)+(this.ya>>2&3);switch(a){case 2:a=this.Na[0];var b=this.Na[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[1];a.x=b.x;a.y=b.y;a.z=b.z;break;case 4:a=this.Na[0];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 5:a=this.Na[1];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 6:a=this.Na[0];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 8:a=this.Na[0];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 9:a=this.Na[1];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 10:a=this.Na[0];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 11:a=this.Na[2];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[2];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[2];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 12:a=this.Na[0];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.Na[1];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 13:a=this.Na[1];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 14:a=this.Na[0],b=this.Na[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.jb[0],b=this.jb[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.qb[0],b=this.qb[3],a.x=b.x,a.y=b.y,a.z=b.z}},zf:function(a){var b,e,c,d,f,h;h=this.dir;d=h.x;f=h.y;h=h.z;var l;e=this.tc.o*d+this.tc.i*f+this.tc.l*h;l=this.tc.f*d+this.tc.m*f+this.tc.g*h;b=this.tc.h*d+this.tc.j*f+this.tc.s*h;c=this.dir;c.x=e;c.y=l;c.z=b;this.wj.Pd(this.dir,this.jb[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.jb[this.ya],b=this.dir,e=this.wj.Rb,l=a.y+b.y*e,c=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=c);a=this.jb[this.ya];b=a.x;e=a.y;c=a.z;l=this.tc.o*b+this.tc.f*e+this.tc.h*c;a=this.tc.i*b+this.tc.m*e+this.tc.j*c;e=this.tc.l*b+this.tc.g*e+this.tc.s*c;b=l+this.tc.v;a+=this.tc.A;e+=this.tc.B;l=this.jb[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=d;a.y=f;a.z=h},Af:function(a){var b,e,c,d,f,h;h=this.dir;d=h.x;f=h.y;h=h.z;var l;b=this.Ic.o*d+this.Ic.i*f+this.Ic.l*h;e=this.Ic.f*d+this.Ic.m*f+this.Ic.g*h;l=this.Ic.h*d+this.Ic.j*f+this.Ic.s*h;c=this.dir;c.x=-b;c.y=-e;c.z=-l;this.jl.Pd(this.dir,this.qb[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.qb[this.ya],b=this.dir,e=this.jl.Rb,l=a.y+b.y*e,c=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=c);a=this.qb[this.ya];b=a.x;e=a.y;c=a.z;l=this.Ic.o*b+this.Ic.f*e+this.Ic.h*c;a=this.Ic.i*b+this.Ic.m*e+this.Ic.j*c;e=this.Ic.l*b+this.Ic.g*e+this.Ic.s*c;b=l+this.Ic.v;a+=this.Ic.A;e+=this.Ic.B;l=this.qb[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=d;a.y=f;a.z=h},Rn:function(){for(var a=0;3>a;){var b=a++,e=this.dir,b=this.uj[b];e.x=b.x;e.y=b.y;e.z=b.z;this.zf(!1);this.Af(!1);e=this.Na[this.ya];b=this.jb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;var b=this.qb[this.ya],c=e.y-b.y,d=e.z-b.z;e.x=e.x-b.x;e.y=c;e.z=d;this.ya++;this.El();if(4==this.ya)break;this.ya--;e=this.dir;b=-e.y;c=-e.z;e.x=-e.x;e.y=b;e.z=c;this.zf(!1);this.Af(!1);e=this.Na[this.ya];b=this.jb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;b=this.qb[this.ya];c=e.y-b.y;d=e.z-b.z;e.x=e.x-b.x;e.y=c;e.z=d;this.ya++;this.El();if(4==this.ya)break;this.ya--}},El:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;e=e.z;var c,d,f,h,l,g;f=this.Na[0];c=f.x;d=f.y;f=f.z;g=this.Na[1];h=g.x;l=g.y;g=g.z;c-=h;d-=l;f-=g;for(l=0;3>l;){g=l++;var k,m;g=this.uj[g];h=g.x;k=g.y;m=g.z;g=d*m-f*k;m=f*h-c*m;h=c*k-d*h;k=this.dir;k.x=g;k.y=m;k.z=h;this.zf(!1);this.Af(!1);g=this.Na[this.ya];h=this.jb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.qb[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.Ll();if(4==this.ya)break;this.ya--;g=this.dir;h=-g.y;k=-g.z;g.x=-g.x;g.y=h;g.z=k;this.zf(!1);this.Af(!1);g=this.Na[this.ya];h=this.jb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.qb[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.Ll();if(4==this.ya)break;this.ya--}c=this.dir;c.x=a;c.y=b;c.z=e},Ll:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;for(e=e.z;;){var c,d,f,h,l,g,k,m,n;f=this.Na[0];c=f.x;d=f.y;f=f.z;m=this.Na[1];h=m.x;l=m.y;g=m.z;n=this.Na[2];k=n.x;m=n.y;n=n.z;h-=c;l-=d;g-=f;c=k-c;d=m-d;m=n-f;f=l*m-g*d;m=g*c-h*m;d=h*d-l*c;h=this.dir;h.x=f;h.y=m;h.z=d;this.zf(!1);this.Af(!1);d=this.Na[this.ya];f=this.jb[this.ya];d.x=f.x;d.y=f.y;d.z=f.z;f=this.qb[this.ya];h=d.y-f.y;c=d.z-f.z;d.x=d.x-f.x;d.y=h;d.z=c;this.ya++;if(this.tm())break;this.ya--;d=this.dir;f=-d.y;h=-d.z;d.x=-d.x;d.y=f;d.z=h;this.zf(!1);this.Af(!1);d=this.Na[this.ya];f=this.jb[this.ya];d.x=f.x;d.y=f.y;d.z=f.z;f=this.qb[this.ya];h=d.y-f.y;c=d.z-f.z;d.x=d.x-f.x;d.y=h;d.z=c;this.ya++;if(this.tm())break;this.ya--;break}d=this.dir;d.x=a;d.y=b;d.z=e},tm:function(){var a=this.Na[2].x-this.Na[0].x,b=this.Na[2].y-this.Na[0].y,e=this.Na[2].z-this.Na[0].z,c=this.Na[3].x-this.Na[0].x,d=this.Na[3].y-this.Na[0].y,f=this.Na[3].z-this.Na[0].z,a=(this.Na[1].x-this.Na[0].x)*(b*f-e*d)-(this.Na[1].y-this.Na[0].y)*(a*f-e*c)+(this.Na[1].z-this.Na[0].z)*(a*d-b*c);return 1E-12<a?!0:-1E-12>a},mn:function(a,b,e,c,d,f,h){for(var l=this.Og;0<l.lh;){var g=l.jd;l.lh--;var k=g.ia,m=g.M;null!=k&&(k.M=m);null!=m&&(m.ia=k);g==l.jd&&(l.jd=l.jd.M);g==l.Rc&&(l.Rc=l.Rc.ia);g.M=null;g.ia=null;g.tk();g.M=l.De;l.De=g}for(;0<l.Ne;){var n=l.zb[--l.Ne];n.tk();n.M=l.bf;l.bf=n}var q=this.Og,p=this.Og,r=p.bf;null!=r?(p.bf=r.M,r.M=null):r=new ke;var v=r.za(d[0],f[0],h[0]),R=this.Og,y=R.bf;null!=y?(R.bf=y.M,y.M=null):y=new ke;var L=y.za(d[1],f[1],h[1]),w=this.Og,D=w.bf;null!=D?(w.bf=D.M,D.M=null):D=new ke;var t=D.za(d[2],f[2],h[2]),B=this.Og,C=B.bf;null!=C?(B.bf=C.M,C.M=null):C=new ke;if(!q.fh(v,L,t,C.za(d[3],f[3],h[3])))return Gc.EPA_FAILED_TO_INIT;this.ya=0;for(var A=this.Na[0],Vc=this.jb[0],I=this.qb[0],J=0;40>J;){for(var Gb=this.Og.jd,u=1/0,G=null;null!=Gb;){var da=Gb.M;Gb.Wj<u&&(u=Gb.Wj,G=Gb);Gb=da}var E=G,O=this.dir,V=E.dk;O.x=V.x;O.y=V.y;O.z=V.z;var Ia=O,Da=Math.sqrt(Ia.x*Ia.x+Ia.y*Ia.y+Ia.z*Ia.z);0<Da&&(Da=1/Da);var ma=Ia.y*Da,Q=Ia.z*Da;Ia.x=Ia.x*Da;Ia.y=ma;Ia.z=Q;this.zf(!1);this.Af(!1);var S=this.Na[this.ya],Ga=this.jb[this.ya];S.x=Ga.x;S.y=Ga.y;S.z=Ga.z;var Ea=S,Ua=this.qb[this.ya],va=Ea.y-Ua.y,oa=Ea.z-Ua.z;Ea.x=Ea.x-Ua.x;Ea.y=va;Ea.z=oa;var Ya=E.zb[0],F=E.zb[1],Qa=E.zb[2],X=Ya.xd,M=this.dir,N=this.dir;if(1E-6>A.x*N.x+A.y*N.y+A.z*N.z-(X.x*M.x+X.y*M.y+X.z*M.z)||39==J){var ca=this.closest,Y=this.dir;ca.x=Y.x;ca.y=Y.y;ca.z=Y.z;var T=ca,aa=this.dir,z=Ya.xd,fa=this.dir,U=(aa.x*z.x+aa.y*z.y+aa.z*z.z)/(fa.x*fa.x+fa.y*fa.y+fa.z*fa.z),pa=T.y*U,sa=T.z*U;T.x=T.x*U;T.y=pa;T.z=sa;var wa,ra,ka,Z=this.closest;wa=Z.x;ra=Z.y;ka=Z.z;var na,Aa,ya,K,Ba,ha,ba,Va,ga,P,za,xb,ja,ta,bd,gb,pb,ua,xa,Fa,fb,Ha,qb,Na,la,Ca,Za,Ra=Ya.xd;na=Ra.x;Aa=Ra.y;ya=Ra.z;var ib=Ya.jb;K=ib.x;Ba=ib.y;ha=ib.z;var Lb=Ya.qb;ba=Lb.x;Va=Lb.y;ga=Lb.z;var db=F.xd;P=db.x;za=db.y;xb=db.z;var Ib=F.jb;ja=Ib.x;ta=Ib.y;bd=Ib.z;var kb=F.qb;gb=kb.x;pb=kb.y;ua=kb.z;var nb=Qa.xd;xa=nb.x;Fa=nb.y;fb=nb.z;var Yb=Qa.jb;Ha=Yb.x;qb=Yb.y;Na=Yb.z;var sc=Qa.qb;la=sc.x;Ca=sc.y;Za=sc.z;var $a,Ka,vb,H,eb,lb,yb,mb,ub;$a=P-na;Ka=za-Aa;vb=xb-ya;H=xa-na;eb=Fa-Aa;lb=fb-ya;yb=wa-na;mb=ra-Aa;ub=ka-ya;var x=$a*$a+Ka*Ka+vb*vb,W=$a*H+Ka*eb+vb*lb,ea=H*H+eb*eb+lb*lb,Nc=$a*yb+Ka*mb+vb*ub,xc=H*yb+eb*mb+lb*ub,Pa=x*ea-W*W;Pa&&(Pa=1/Pa);var rb=(Nc*ea-xc*W)*Pa,ob=(-Nc*W+xc*x)*Pa,zb,Ab,ia,Ta,bb,jb,Bb,La,Eb;zb=ja-K;Ab=ta-Ba;ia=bd-ha;Ta=K+zb*rb;bb=Ba+Ab*rb;jb=ha+ia*rb;zb=Ha-K;Ab=qb-Ba;ia=Na-ha;Ta+=zb*ob;bb+=Ab*ob;jb+=ia*ob;zb=gb-ba;Ab=pb-Va;ia=ua-ga;Bb=ba+zb*rb;La=Va+Ab*rb;Eb=ga+ia*rb;zb=la-ba;Ab=Ca-Va;ia=Za-ga;Bb+=zb*ob;La+=Ab*ob;Eb+=ia*ob;var Cd=this.closestPoint1;Cd.x=Ta;Cd.y=bb;Cd.z=jb;var qa=this.closestPoint2;qa.x=Bb;qa.y=La;qa.z=Eb;var Bc=this.closest;this.depth=Math.sqrt(Bc.x*Bc.x+Bc.y*Bc.y+Bc.z*Bc.z);return Gc.SUCCEEDED}var Mb=this.Og,Sb=Mb.bf;null!=Sb?(Mb.bf=Sb.M,Sb.M=null):Sb=new ke;var Oa=Sb.za(A,Vc,I);if(!this.Og.Vm(Oa,E))return Gc.EPA_FAILED_TO_ADD_VERTEX;++J}return Gc.EPA_DID_NOT_CONVERGE},ua:function(a,b,e,c,d){return this.zj(a,b,e,c,d,!0)},cb:function(a,b,e,c,d){return this.zj(a,b,e,c,d,!1)},Bf:function(a,b,e,c,d,f,h){return this.fm(a,b,e,c,d,f,h)},Vd:function(a,b,e,c,d){var f=this.ao;f.v=e.x;f.A=e.y;f.B=e.z;var h=this.bo,l=this.co;h.x=c.x;h.y=c.y;h.z=c.z;c=h.y-e.y;var g=h.z-e.z;h.x=h.x-e.x;h.y=c;h.z=g;l.Z();return this.fm(null,a,f,b,h,l,d)}};de.qc=function(a,b,e){var c,d,f,h;c=a.x;d=a.y;a=a.z;f=b.x;h=b.y;b=b.z;var l,g,k;l=f-c;g=h-d;k=b-a;var m;m=-(l*c+g*d+k*a)/(l*l+g*g+k*k);if(0>m)return e.x=c,e.y=d,e.z=a,1;if(1<m)return e.x=f,e.y=h,e.z=b,2;e.x=c+l*m;e.y=d+g*m;e.z=a+k*m;return 3};de.uc=function(a,b,e,c){var d,f,h,l,g,k,m,n,q,p,r,v,R,y,L,w,D,t;d=a.x;f=a.y;h=a.z;l=b.x;g=b.y;k=b.z;m=e.x;n=e.y;q=e.z;p=l-d;r=g-f;v=k-h;R=m-l;y=n-g;L=q-k;w=d-m;D=f-n;t=h-q;var B,C,A;B=r*L-v*y;C=v*R-p*L;A=p*y-r*R;var Vc=-1,I,J,Gb,u=0;Gb=J=I=0;if(0>d*(r*A-v*C)+f*(v*B-p*A)+h*(p*C-r*B)){var G;p=a.x;Vc=a.y;I=a.z;r=b.x;v=b.y;G=b.z;var da;da=r-p;Gb=v-Vc;J=G-I;u=-(da*p+Gb*Vc+J*I)/(da*da+Gb*Gb+J*J);0>u?(c.x=p,c.y=Vc,c.z=I,J=1):1<u?(c.x=r,c.y=v,c.z=G,J=2):(p+=da*u,Vc+=Gb*u,I+=J*u,c.x=p,c.y=Vc,c.z=I,J=3);I=c.x*c.x+c.y*c.y+c.z*c.z;u=J;Vc=I;I=c.x;J=c.y;Gb=c.z}0>l*(y*A-L*C)+g*(L*B-R*A)+k*(R*C-y*B)&&(R=b.x,l=b.y,b=b.z,L=e.x,p=e.y,r=e.z,v=L-R,y=p-l,g=r-b,k=-(v*R+y*l+g*b)/(v*v+y*y+g*g),0>k?(c.x=R,c.y=l,c.z=b,b=1):1<k?(c.x=L,c.y=p,c.z=r,b=2):(R+=v*k,l+=y*k,b+=g*k,c.x=R,c.y=l,c.z=b,b=3),l=c.x*c.x+c.y*c.y+c.z*c.z,0>Vc||l<Vc)&&(u=b<<1,Vc=l,I=c.x,J=c.y,Gb=c.z);0>m*(D*A-t*C)+n*(t*B-w*A)+q*(w*C-D*B)&&(n=a.x,m=a.y,a=a.z,w=e.x,D=e.y,b=e.z,l=w-n,t=D-m,e=b-a,q=-(l*n+t*m+e*a)/(l*l+t*t+e*e),0>q?(c.x=n,c.y=m,c.z=a,e=1):1<q?(c.x=w,c.y=D,c.z=b,e=2):(n+=l*q,m+=t*q,e=a+e*q,c.x=n,c.y=m,c.z=e,e=3),a=c.x*c.x+c.y*c.y+c.z*c.z,0>Vc||a<Vc)&&(u=e&1|(e&2)<<1,Vc=a,I=c.x,J=c.y,Gb=c.z);if(0<Vc)return c.x=I,c.y=J,c.z=Gb,u;e=B*B+C*C+A*A;0<e&&(e=1/Math.sqrt(e));B*=e;C*=e;A*=e;d=(d*B+f*C+h*A)/(B*B+C*C+A*A);I=B*d;J=C*d;Gb=A*d;c.x=I;c.y=J;c.z=Gb;return 7};de.vc=function(a,b,e,c,d){var f,h,l,g,k,m,n,q,p,r,v,R,y,L,w,D,t,B,C,A,u,I,J,Gb,G,E,da;f=a.x;h=a.y;l=a.z;g=b.x;k=b.y;m=b.z;n=e.x;q=e.y;p=e.z;r=c.x;v=c.y;R=c.z;y=g-f;L=k-h;w=m-l;D=n-f;t=q-h;B=p-l;C=r-f;A=v-h;u=R-l;I=n-g;J=q-k;Gb=p-m;G=r-g;E=v-k;da=R-m;var O,V,S,Ia,Da,ma,Q,ta,Ga,Ea,Ua,va;O=L*B-w*t;V=w*D-y*B;S=y*t-L*D;Ia=t*u-B*A;Da=B*C-D*u;ma=D*A-t*C;Q=A*w-u*L;ta=u*y-C*w;Ga=C*L-A*y;Ea=E*Gb-da*J;Ua=da*I-G*Gb;va=G*J-E*I;var oa=0<y*Ea+L*Ua+w*va?1:-1,Ya=f*O+h*V+l*S,F=f*Ia+h*Da+l*ma,Qa=f*Q+h*ta+l*Ga,X=g*Ea+k*Ua+m*va,M=-1,N,ca,Y,T=0;Y=ca=N=0;if(0>Ya*oa){var aa,z,fa,U,pa,sa,wa,ra,ka,Z,na,Aa,ya,K,Ba,ha,ba,Va;aa=a.x;z=a.y;fa=a.z;U=b.x;pa=b.y;sa=b.z;wa=e.x;ra=e.y;ka=e.z;Z=U-aa;na=pa-z;Aa=sa-fa;ya=wa-U;K=ra-pa;Ba=ka-sa;ha=aa-wa;ba=z-ra;Va=fa-ka;var ga,P,za;ga=na*Ba-Aa*K;P=Aa*ya-Z*Ba;za=Z*K-na*ya;var xb=aa*(na*za-Aa*P)+z*(Aa*ga-Z*za)+fa*(Z*P-na*ga),ja=U*(K*za-Ba*P)+pa*(Ba*ga-ya*za)+sa*(ya*P-K*ga),Oa=wa*(ba*za-Va*P)+ra*(Va*ga-ha*za)+ka*(ha*P-ba*ga),bd=-1,gb,pb,ua,xa=0;ua=pb=gb=0;if(0>xb){var Fa,fb,Ha,qb,Na,la;Fa=a.x;fb=a.y;Ha=a.z;qb=b.x;Na=b.y;la=b.z;var Ca,Za,Ra;Ca=qb-Fa;Za=Na-fb;Ra=la-Ha;var ib=Ca*Fa+Za*fb+Ra*Ha,ib=-ib/(Ca*Ca+Za*Za+Ra*Ra),Lb;if(0>ib)d.x=Fa,d.y=fb,d.z=Ha,Lb=1;else if(1<ib)d.x=qb,d.y=Na,d.z=la,Lb=2;else{var db,Ib,kb;db=Fa+Ca*ib;Ib=fb+Za*ib;kb=Ha+Ra*ib;d.x=db;d.y=Ib;d.z=kb;Lb=3}var nb=d.x*d.x+d.y*d.y+d.z*d.z,xa=Lb,bd=nb;gb=d.x;pb=d.y;ua=d.z}if(0>ja){var Yb,sc,$a,Ka,vb,H;Yb=b.x;sc=b.y;$a=b.z;Ka=e.x;vb=e.y;H=e.z;var eb,lb,yb;eb=Ka-Yb;lb=vb-sc;yb=H-$a;var mb=eb*Yb+lb*sc+yb*$a,mb=-mb/(eb*eb+lb*lb+yb*yb),ub;if(0>mb)d.x=Yb,d.y=sc,d.z=$a,ub=1;else if(1<mb)d.x=Ka,d.y=vb,d.z=H,ub=2;else{var x,W,ea;x=Yb+eb*mb;W=sc+lb*mb;ea=$a+yb*mb;d.x=x;d.y=W;d.z=ea;ub=3}var Nc=d.x*d.x+d.y*d.y+d.z*d.z;if(0>bd||Nc<bd)xa=ub<<1,bd=Nc,gb=d.x,pb=d.y,ua=d.z}if(0>Oa){var xc,Pa,rb,ob,zb,Ab;xc=a.x;Pa=a.y;rb=a.z;ob=e.x;zb=e.y;Ab=e.z;var ia,Ta,bb;ia=ob-xc;Ta=zb-Pa;bb=Ab-rb;var jb=ia*xc+Ta*Pa+bb*rb,jb=-jb/(ia*ia+Ta*Ta+bb*bb),Bb;if(0>jb)d.x=xc,d.y=Pa,d.z=rb,Bb=1;else if(1<jb)d.x=ob,d.y=zb,d.z=Ab,Bb=2;else{var La,Eb,Cd;La=xc+ia*jb;Eb=Pa+Ta*jb;Cd=rb+bb*jb;d.x=La;d.y=Eb;d.z=Cd;Bb=3}var qa=d.x*d.x+d.y*d.y+d.z*d.z;if(0>bd||qa<bd)xa=Bb&1|(Bb&2)<<1,bd=qa,gb=d.x,pb=d.y,ua=d.z}var Bc;if(0<bd)d.x=gb,d.y=pb,d.z=ua,Bc=xa;else{var Mb=ga*ga+P*P+za*za;0<Mb&&(Mb=1/Math.sqrt(Mb));ga*=Mb;P*=Mb;za*=Mb;var Sb=ga*ga+P*P+za*za,Sb=(aa*ga+z*P+fa*za)/Sb;gb=ga*Sb;pb=P*Sb;ua=za*Sb;d.x=gb;d.y=pb;d.z=ua;Bc=7}var sf=d.x*d.x+d.y*d.y+d.z*d.z,T=Bc,M=sf;N=d.x;ca=d.y;Y=d.z}if(0>F*oa){var Je,Xa,Zb,Ma,Wa,Ja,ab,Ub,gc,fc,Pb,cc,Fb,lc,bc,Qb,dc,Vb;Je=a.x;Xa=a.y;Zb=a.z;Ma=e.x;Wa=e.y;Ja=e.z;ab=c.x;Ub=c.y;gc=c.z;fc=Ma-Je;Pb=Wa-Xa;cc=Ja-Zb;Fb=ab-Ma;lc=Ub-Wa;bc=gc-Ja;Qb=Je-ab;dc=Xa-Ub;Vb=Zb-gc;var Nb,Tb,sb;Nb=Pb*bc-cc*lc;Tb=cc*Fb-fc*bc;sb=fc*lc-Pb*Fb;var cb=Je*(Pb*sb-cc*Tb)+Xa*(cc*Nb-fc*sb)+Zb*(fc*Tb-Pb*Nb),qc=Ma*(lc*sb-bc*Tb)+Wa*(bc*Nb-Fb*sb)+Ja*(Fb*Tb-lc*Nb),tb=ab*(dc*sb-Vb*Tb)+Ub*(Vb*Nb-Qb*sb)+gc*(Qb*Tb-dc*Nb),Zc=-1,jc,Hc,pc,hb=0;pc=Hc=jc=0;if(0>cb){var $c,tc,Cb,Yc,wb,Hb;$c=a.x;tc=a.y;Cb=a.z;Yc=e.x;wb=e.y;Hb=e.z;var Cc,Ob,wc;Cc=Yc-$c;Ob=wb-tc;wc=Hb-Cb;var Jb=Cc*$c+Ob*tc+wc*Cb,Jb=-Jb/(Cc*Cc+Ob*Ob+wc*wc),Kb;if(0>Jb)d.x=$c,d.y=tc,d.z=Cb,Kb=1;else if(1<Jb)d.x=Yc,d.y=wb,d.z=Hb,Kb=2;else{var Ff,jf,Dd;Ff=$c+Cc*Jb;jf=tc+Ob*Jb;Dd=Cb+wc*Jb;d.x=Ff;d.y=jf;d.z=Dd;Kb=3}var Xb=d.x*d.x+d.y*d.y+d.z*d.z,hb=Kb,Zc=Xb;jc=d.x;Hc=d.y;pc=d.z}if(0>qc){var Oc,$b,mc,Ec,Rb,ec;Oc=e.x;$b=e.y;mc=e.z;Ec=c.x;Rb=c.y;ec=c.z;var nc,ic,Pc;nc=Ec-Oc;ic=Rb-$b;Pc=ec-mc;var kc=nc*Oc+ic*$b+Pc*mc,kc=-kc/(nc*nc+ic*ic+Pc*Pc),Wb;if(0>kc)d.x=Oc,d.y=$b,d.z=mc,Wb=1;else if(1<kc)d.x=Ec,d.y=Rb,d.z=ec,Wb=2;else{var Wd,oc,hc;Wd=Oc+nc*kc;oc=$b+ic*kc;hc=mc+Pc*kc;d.x=Wd;d.y=oc;d.z=hc;Wb=3}var Gc=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Zc||Gc<Zc)hb=Wb<<1,Zc=Gc,jc=d.x,Hc=d.y,pc=d.z}if(0>tb){var vc,ac,rc,Tc,Wc,Qc;vc=a.x;ac=a.y;rc=a.z;Tc=c.x;Wc=c.y;Qc=c.z;var Dc,Lc,yc;Dc=Tc-vc;Lc=Wc-ac;yc=Qc-rc;var uc=Dc*vc+Lc*ac+yc*rc,uc=-uc/(Dc*Dc+Lc*Lc+yc*yc),sd;if(0>uc)d.x=vc,d.y=ac,d.z=rc,sd=1;else if(1<uc)d.x=Tc,d.y=Wc,d.z=Qc,sd=2;else{var fd,Uc,Xd;fd=vc+Dc*uc;Uc=ac+Lc*uc;Xd=rc+yc*uc;d.x=fd;d.y=Uc;d.z=Xd;sd=3}var od=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Zc||od<Zc)hb=sd&1|(sd&2)<<1,Zc=od,jc=d.x,Hc=d.y,pc=d.z}var Hd;if(0<Zc)d.x=jc,d.y=Hc,d.z=pc,Hd=hb;else{var ne=Nb*Nb+Tb*Tb+sb*sb;0<ne&&(ne=1/Math.sqrt(ne));Nb*=ne;Tb*=ne;sb*=ne;var ad=Nb*Nb+Tb*Tb+sb*sb,ad=(Je*Nb+Xa*Tb+Zb*sb)/ad;jc=Nb*ad;Hc=Tb*ad;pc=sb*ad;d.x=jc;d.y=Hc;d.z=pc;Hd=7}var yd=d.x*d.x+d.y*d.y+d.z*d.z;if(0>M||yd<M)T=Hd&1|(Hd&6)<<1,M=yd,N=d.x,ca=d.y,Y=d.z}if(0>Qa*oa){var rd,oe,pe,qe,re,td,se,Xc,ed,tf,Rc,md,pd,zd,Ad,cd,dd,gd;rd=a.x;oe=a.y;pe=a.z;qe=b.x;re=b.y;td=b.z;se=c.x;Xc=c.y;ed=c.z;tf=qe-rd;Rc=re-oe;md=td-pe;pd=se-qe;zd=Xc-re;Ad=ed-td;cd=rd-se;dd=oe-Xc;gd=pe-ed;var Fc,Ac,zc;Fc=Rc*Ad-md*zd;Ac=md*pd-tf*Ad;zc=tf*zd-Rc*pd;var Yd=rd*(Rc*zc-md*Ac)+oe*(md*Fc-tf*zc)+pe*(tf*Ac-Rc*Fc),kf=qe*(zd*zc-Ad*Ac)+re*(Ad*Fc-pd*zc)+td*(pd*Ac-zd*Fc),de=se*(dd*zc-gd*Ac)+Xc*(gd*Fc-cd*zc)+ed*(cd*Ac-dd*Fc),Ed=-1,Mc,Id,Jd,te=0;Jd=Id=Mc=0;if(0>Yd){var ud,vd,wd,Kd,ue,fe;ud=a.x;vd=a.y;wd=a.z;Kd=b.x;ue=b.y;fe=b.z;var Ld,Zd,Fd;Ld=Kd-ud;Zd=ue-vd;Fd=fe-wd;var ve=Ld*ud+Zd*vd+Fd*wd,ve=-ve/(Ld*Ld+Zd*Zd+Fd*Fd),Ke;if(0>ve)d.x=ud,d.y=vd,d.z=wd,Ke=1;else if(1<ve)d.x=Kd,d.y=ue,d.z=fe,Ke=2;else{var Vd,we,Le;Vd=ud+Ld*ve;we=vd+Zd*ve;Le=wd+Fd*ve;d.x=Vd;d.y=we;d.z=Le;Ke=3}var Md=d.x*d.x+d.y*d.y+d.z*d.z,te=Ke,Ed=Md;Mc=d.x;Id=d.y;Jd=d.z}if(0>kf){var hd,xd,qd,id,jd,kd;hd=b.x;xd=b.y;qd=b.z;id=c.x;jd=c.y;kd=c.z;var Ic,Jc,Kc;Ic=id-hd;Jc=jd-xd;Kc=kd-qd;var Sc=Ic*hd+Jc*xd+Kc*qd,Sc=-Sc/(Ic*Ic+Jc*Jc+Kc*Kc),ld;if(0>Sc)d.x=hd,d.y=xd,d.z=qd,ld=1;else if(1<Sc)d.x=id,d.y=jd,d.z=kd,ld=2;else{var nd,He,Ie;nd=hd+Ic*Sc;He=xd+Jc*Sc;Ie=qd+Kc*Sc;d.x=nd;d.y=He;d.z=Ie;ld=3}var Me=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Ed||Me<Ed)te=ld<<1,Ed=Me,Mc=d.x,Id=d.y,Jd=d.z}if(0>de){var Ud,Ne,Sd,uf,Ge,We;Ud=a.x;Ne=a.y;Sd=a.z;uf=c.x;Ge=c.y;We=c.z;var Oe,vf,lf;Oe=uf-Ud;vf=Ge-Ne;lf=We-Sd;var De=Oe*Ud+vf*Ne+lf*Sd,De=-De/(Oe*Oe+vf*vf+lf*lf),mf;if(0>De)d.x=Ud,d.y=Ne,d.z=Sd,mf=1;else if(1<De)d.x=uf,d.y=Ge,d.z=We,mf=2;else{var wf,xf,Pe;wf=Ud+Oe*De;xf=Ne+vf*De;Pe=Sd+lf*De;d.x=wf;d.y=xf;d.z=Pe;mf=3}var Qe=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Ed||Qe<Ed)te=mf&1|(mf&2)<<1,Ed=Qe,Mc=d.x,Id=d.y,Jd=d.z}var ge;if(0<Ed)d.x=Mc,d.y=Id,d.z=Jd,ge=te;else{var he=Fc*Fc+Ac*Ac+zc*zc;0<he&&(he=1/Math.sqrt(he));Fc*=he;Ac*=he;zc*=he;var Re=Fc*Fc+Ac*Ac+zc*zc,Re=(rd*Fc+oe*Ac+pe*zc)/Re;Mc=Fc*Re;Id=Ac*Re;Jd=zc*Re;d.x=Mc;d.y=Id;d.z=Jd;ge=7}var yf=d.x*d.x+d.y*d.y+d.z*d.z;if(0>M||yf<M)T=ge&3|(ge&4)<<1,M=yf,N=d.x,ca=d.y,Y=d.z}if(0>X*oa){var Xe,zf,be,ce,le,ee,me,Be,Hf,Rd,ke,Td,Fe,Ye,nf,hf,rf,ng;Xe=b.x;zf=b.y;be=b.z;ce=e.x;le=e.y;ee=e.z;me=c.x;Be=c.y;Hf=c.z;Rd=ce-Xe;ke=le-zf;Td=ee-be;Fe=me-ce;Ye=Be-le;nf=Hf-ee;hf=Xe-me;rf=zf-Be;ng=be-Hf;var Nd,Od,Pd;Nd=ke*nf-Td*Ye;Od=Td*Fe-Rd*nf;Pd=Rd*Ye-ke*Fe;var bg=Xe*(ke*Pd-Td*Od)+zf*(Td*Nd-Rd*Pd)+be*(Rd*Od-ke*Nd),og=ce*(Ye*Pd-nf*Od)+le*(nf*Nd-Fe*Pd)+ee*(Fe*Od-Ye*Nd),pg=me*(rf*Pd-ng*Od)+Be*(ng*Nd-hf*Pd)+Hf*(hf*Od-rf*Nd),Se=-1,Ze,$e,Te,Tf=0;Te=$e=Ze=0;if(0>bg){var If,Jf,Kf,fg,Ef,xe;If=b.x;Jf=b.y;Kf=b.z;fg=e.x;Ef=e.y;xe=e.z;var $d,ae,gf;$d=fg-If;ae=Ef-Jf;gf=xe-Kf;var gg=$d*If+ae*Jf+gf*Kf,gg=-gg/($d*$d+ae*ae+gf*gf),Ae;if(0>gg)d.x=If,d.y=Jf,d.z=Kf,Ae=1;else if(1<gg)d.x=fg,d.y=Ef,d.z=xe,Ae=2;else{var Gd,Qd,qg;Gd=If+$d*gg;Qd=Jf+ae*gg;qg=Kf+gf*gg;d.x=Gd;d.y=Qd;d.z=qg;Ae=3}var dg=d.x*d.x+d.y*d.y+d.z*d.z,Tf=Ae,Se=dg;Ze=d.x;$e=d.y;Te=d.z}if(0>og){var rg,Ee,Ue,of,Lf,sg;rg=e.x;Ee=e.y;Ue=e.z;of=c.x;Lf=c.y;sg=c.z;var Mf,Nf,Of;Mf=of-rg;Nf=Lf-Ee;Of=sg-Ue;var pf=Mf*rg+Nf*Ee+Of*Ue,pf=-pf/(Mf*Mf+Nf*Nf+Of*Of),Uf;if(0>pf)d.x=rg,d.y=Ee,d.z=Ue,Uf=1;else if(1<pf)d.x=of,d.y=Lf,d.z=sg,Uf=2;else{var tg,Vf,Sf;tg=rg+Mf*pf;Vf=Ee+Nf*pf;Sf=Ue+Of*pf;d.x=tg;d.y=Vf;d.z=Sf;Uf=3}var ug=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Se||ug<Se)Tf=Uf<<1,Se=ug,Ze=d.x,$e=d.y,Te=d.z}if(0>pg){var Pf,Wf,Af,Cg,Dg,Rf;Pf=b.x;Wf=b.y;Af=b.z;Cg=c.x;Dg=c.y;Rf=c.z;var vg,Xf,Yf;vg=Cg-Pf;Xf=Dg-Wf;Yf=Rf-Af;var qf=vg*Pf+Xf*Wf+Yf*Af,qf=-qf/(vg*vg+Xf*Xf+Yf*Yf),Eg;if(0>qf)d.x=Pf,d.y=Wf,d.z=Af,Eg=1;else if(1<qf)d.x=Cg,d.y=Dg,d.z=Rf,Eg=2;else{var cg,wg,xg;cg=Pf+vg*qf;wg=Wf+Xf*qf;xg=Af+Yf*qf;d.x=cg;d.y=wg;d.z=xg;Eg=3}var yg=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Se||yg<Se)Tf=Eg&1|(Eg&2)<<1,Se=yg,Ze=d.x,$e=d.y,Te=d.z}var hg;if(0<Se)d.x=Ze,d.y=$e,d.z=Te,hg=Tf;else{var Bf=Nd*Nd+Od*Od+Pd*Pd;0<Bf&&(Bf=1/Math.sqrt(Bf));Nd*=Bf;Od*=Bf;Pd*=Bf;var Qf=Nd*Nd+Od*Od+Pd*Pd,Qf=(Xe*Nd+zf*Od+be*Pd)/Qf;Ze=Nd*Qf;$e=Od*Qf;Te=Pd*Qf;d.x=Ze;d.y=$e;d.z=Te;hg=7}var Zf=d.x*d.x+d.y*d.y+d.z*d.z;if(0>M||Zf<M)T=hg<<1,M=Zf,N=d.x,ca=d.y,Y=d.z}if(0<M)return d.x=N,d.y=ca,d.z=Y,T;d.Z();return 15};E.prototype={za:function(a,b,e,c,d,f,h,l,g){this.e00=a;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Wf:function(){this.e00=1;this.e10=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e12=0;this.e22=1;return this},Ac:function(a){return new E(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22)},Ug:function(a){return new E(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22)},Mf:function(a){return new E(this.e00*a,this.e01*a,this.e02*a,this.e10*a,this.e11*a,this.e12*a,this.e20*a,this.e21*a,this.e22*a)},re:function(a){return new E(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22)},Ec:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,c=this.e10+a.e10,d=this.e11+a.e11,f=this.e12+a.e12,h=this.e20+a.e20,l=this.e21+a.e21,g=this.e22+a.e22;this.e00+=a.e00;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Vg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,c=this.e10-a.e10,d=this.e11-a.e11,f=this.e12-a.e12,h=this.e20-a.e20,l=this.e21-a.e21,g=this.e22-a.e22;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Tg:function(a){var b=this.e01*a,e=this.e02*a,c=this.e10*a,d=this.e11*a,f=this.e12*a,h=this.e20*a,l=this.e21*a,g=this.e22*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},se:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,c=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,d=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,f=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,h=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,l=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,g=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Ue:function(a,b,e){return new E(this.e00*a,this.e01*a,this.e02*a,this.e10*b,this.e11*b,this.e12*b,this.e20*e,this.e21*e,this.e22*e)},Lc:function(a,b,e){return new E(this.e00*a,this.e01*b,this.e02*e,this.e10*a,this.e11*b,this.e12*e,this.e20*a,this.e21*b,this.e22*e)},te:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;c=c*c*h+f;return new E(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,q*this.e00+b*this.e10+c*this.e20,q*this.e01+b*this.e11+c*this.e21,q*this.e02+b*this.e12+c*this.e22)},Jc:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;c=c*c*h+f;return new E(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*c,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*c,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*c)},Ve:function(a,b,e){var c=this.e01*a,d=this.e02*a,f=this.e10*b,h=this.e11*b;b=this.e12*b;var l=this.e20*e,g=this.e21*e;e=this.e22*e;this.e00=this.e00*a;this.e01=c;this.e02=d;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},fd:function(a,b,e){var c=this.e01*b,d=this.e02*e,f=this.e10*a,h=this.e11*b,l=this.e12*e,g=this.e20*a;b=this.e21*b;e=this.e22*e;this.e00=this.e00*a;this.e01=c;this.e02=d;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},ue:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;h=c*c*h+f;c=a*this.e01+l*this.e11+g*this.e21;e=a*this.e02+l*this.e12+g*this.e22;d=k*this.e00+m*this.e10+n*this.e20;f=k*this.e01+m*this.e11+n*this.e21;k=k*this.e02+m*this.e12+n*this.e22;m=q*this.e00+b*this.e10+h*this.e20;n=q*this.e01+b*this.e11+h*this.e21;q=q*this.e02+b*this.e12+h*this.e22;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=c;this.e02=e;this.e10=d;this.e11=f;this.e12=k;this.e20=m;this.e21=n;this.e22=q;return this},Kc:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;var p=c*c*h+f;c=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var d=this.e10*a+this.e11*k+this.e12*q,f=this.e10*l+this.e11*m+this.e12*b,h=this.e10*g+this.e11*n+this.e12*p,r=this.e20*a+this.e21*k+this.e22*q,l=this.e20*l+this.e21*m+this.e22*b,g=this.e20*g+this.e21*n+this.e22*p;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=c;this.e02=e;this.e10=d;this.e11=f;this.e12=h;this.e20=r;this.e21=l;this.e22=g;return this},ji:function(){return new E(this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22)},ki:function(){var a=this.e10,b=this.e20,e=this.e01,c=this.e11,d=this.e21,f=this.e02,h=this.e12,l=this.e22;this.e00=this.e00;this.e01=a;this.e02=b;this.e10=e;this.e11=c;this.e12=d;this.e20=f;this.e21=h;this.e22=l;return this},Yd:function(){return this.e00*(this.e11*this.e22-this.e12*this.e21)-this.e01*(this.e10*this.e22-this.e12*this.e20)+this.e02*(this.e10*this.e21-this.e11*this.e20)},Xg:function(){return this.e00+this.e11+this.e22},pe:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,c=this.e01*this.e22-this.e02*this.e21,d=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);return new E(a*k,-c*k,h*k,-b*k,d*k,-l*k,e*k,-f*k,g*k)},qe:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,c=this.e01*this.e22-this.e02*this.e21,d=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);this.e00=a*k;this.e01=-c*k;this.e02=h*k;this.e10=-b*k;this.e11=d*k;this.e12=-l*k;this.e20=e*k;this.e21=-f*k;this.e22=g*k;return this},Wg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22]:[this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22]},de:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;return this},clone:function(){return new E(this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22)},Hb:function(a){var b=a.x,e=a.y,c=a.z,d=a.w,f=2*b,h=2*e,l=2*c;a=b*f;var g=e*h,c=c*l,k=b*h,e=e*l,b=b*l,f=d*f,h=d*h,d=d*l;this.e00=1-g-c;this.e01=k-d;this.e02=b+h;this.e10=k+d;this.e11=1-a-c;this.e12=e-f;this.e20=b-h;this.e21=e+f;this.e22=1-a-g;return this},Pj:function(){var a=new ta,b=this.e00,e=this.e11,c=this.e22,d=b+e+c;0<d?(b=Math.sqrt(d+1),a.w=.5*b,b=.5/b,a.x=(this.e21-this.e12)*b,a.y=(this.e02-this.e20)*b,a.z=(this.e10-this.e01)*b):b>e?b>c?(b=Math.sqrt(b-e-c+1),a.x=.5*b,b=.5/b,a.y=(this.e01+this.e10)*b,a.z=(this.e02+this.e20)*b,a.w=(this.e21-this.e12)*b):(b=Math.sqrt(c-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b):e>c?(b=Math.sqrt(e-c-b+1),a.y=.5*b,b=.5/b,a.x=(this.e01+this.e10)*b,a.z=(this.e12+this.e21)*b,a.w=(this.e02-this.e20)*b):(b=Math.sqrt(c-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b);return a},cb:function(a){var b=Math.sin(a.x),e=Math.sin(a.y),c=Math.sin(a.z),d=Math.cos(a.x),f=Math.cos(a.y);a=Math.cos(a.z);this.e00=f*a;this.e01=-f*c;this.e02=e;this.e10=d*c+a*b*e;this.e11=d*a-b*e*c;this.e12=-f*b;this.e20=b*c-d*a*e;this.e21=a*b+d*e*c;this.e22=d*f;return this},li:function(){var a=this.e02;return-1>=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,-1.570796326794895,.5*-a)):1<=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,1.570796326794895,.5*a)):new t(Math.atan2(-this.e12,this.e22),Math.asin(a),Math.atan2(-this.e01,this.e00))},uc:function(a){return 0==a?new t(this.e00,this.e01,this.e02):1==a?new t(this.e10,this.e11,this.e12):2==a?new t(this.e20,this.e21,this.e22):null},pc:function(a){return 0==a?new t(this.e00,this.e10,this.e20):1==a?new t(this.e01,this.e11,this.e21):2==a?new t(this.e02,this.e12,this.e22):null},vc:function(a,b){0==a?b.za(this.e00,this.e01,this.e02):1==a?b.za(this.e10,this.e11,this.e12):2==a?b.za(this.e20,this.e21,this.e22):b.Z()},qc:function(a,b){0==a?b.za(this.e00,this.e10,this.e20):1==a?b.za(this.e01,this.e11,this.e21):2==a?b.za(this.e02,this.e12,this.e22):b.Z()},Mb:function(a,b,e){var c=a.y,d=a.z,f=b.x,h=b.y;b=b.z;var l=e.x,g=e.y;e=e.z;this.e00=a.x;this.e01=c;this.e02=d;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},ua:function(a,b,e){var c=b.x,d=e.x,f=a.y,h=b.y,l=e.y,g=a.z;b=b.z;e=e.z;this.e00=a.x;this.e01=c;this.e02=d;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},toString:function(){return"Mat3["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+",\n     "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+",\n     "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+"]"}};O.prototype={za:function(a,b,e,c,d,f,h,l,g,k,m,n,q,p,r,v){this.e00=a;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Wf:function(){this.e00=1;this.e10=this.e03=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e13=this.e12=0;this.e22=1;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},pc:function(a){return new O(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e03+a.e03,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e13+a.e13,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22,this.e23+a.e23,this.e30+a.e30,this.e31+a.e31,this.e32+a.e32,this.e33+a.e33)},Mf:function(a){return new O(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e03-a.e03,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e13-a.e13,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22,this.e23-a.e23,this.e30-a.e30,this.e31-a.e31,this.e32-a.e32,this.e33-a.e33)},Ue:function(a){return new O(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*a,this.e11*a,this.e12*a,this.e13*a,this.e20*a,this.e21*a,this.e22*a,this.e23*a,this.e30*a,this.e31*a,this.e32*a,this.e33*a)},Yd:function(a){return new O(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33)},qc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,c=this.e03+a.e03,d=this.e10+a.e10,f=this.e11+a.e11,h=this.e12+a.e12,l=this.e13+a.e13,g=this.e20+a.e20,k=this.e21+a.e21,m=this.e22+a.e22,n=this.e23+a.e23,q=this.e30+a.e30,p=this.e31+a.e31,r=this.e32+a.e32,v=this.e33+a.e33;this.e00+=a.e00;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Tg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,c=this.e03-a.e03,d=this.e10-a.e10,f=this.e11-a.e11,h=this.e12-a.e12,l=this.e13-a.e13,g=this.e20-a.e20,k=this.e21-a.e21,m=this.e22-a.e22,n=this.e23-a.e23,q=this.e30-a.e30,p=this.e31-a.e31,r=this.e32-a.e32,v=this.e33-a.e33;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Ve:function(a){var b=this.e01*a,e=this.e02*a,c=this.e03*a,d=this.e10*a,f=this.e11*a,h=this.e12*a,l=this.e13*a,g=this.e20*a,k=this.e21*a,m=this.e22*a,n=this.e23*a,q=this.e30*a,p=this.e31*a,r=this.e32*a,v=this.e33*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},pe:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,c=this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,d=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,f=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,h=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,l=this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,g=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,k=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,m=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,n=this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,q=this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,p=this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,r=this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,v=this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},te:function(a,b,e){return new O(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*b,this.e11*b,this.e12*b,this.e13*b,this.e20*e,this.e21*e,this.e22*e,this.e23*e,this.e30,this.e31,this.e32,this.e33)},Ac:function(a,b,e){return new O(this.e00*a,this.e01*b,this.e02*e,this.e03,this.e10*a,this.e11*b,this.e12*e,this.e13,this.e20*a,this.e21*b,this.e22*e,this.e23,this.e30*a,this.e31*b,this.e32*e,this.e33)},re:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;c=c*c*h+f;return new O(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,a*this.e03+l*this.e13+g*this.e23,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,k*this.e03+m*this.e13+n*this.e23,q*this.e00+b*this.e10+c*this.e20,q*this.e01+b*this.e11+c*this.e21,q*this.e02+b*this.e12+c*this.e22,q*this.e03+b*this.e13+c*this.e23,this.e30,this.e31,this.e32,this.e33)},uc:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;c=c*c*h+f;return new O(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*c,this.e03,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*c,this.e13,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*c,this.e23,this.e30*a+this.e31*k+this.e32*q,this.e30*l+this.e31*m+this.e32*b,this.e30*g+this.e31*n+this.e32*c,this.e33)},ki:function(a,b,e){return new O(this.e00+a*this.e30,this.e01+a*this.e31,this.e02+a*this.e32,this.e03+a*this.e33,this.e10+b*this.e30,this.e11+b*this.e31,this.e12+b*this.e32,this.e13+b*this.e33,this.e20+e*this.e30,this.e21+e*this.e31,this.e22+e*this.e32,this.e23+e*this.e33,this.e30,this.e31,this.e32,this.e33)},ua:function(a,b,e){return new O(this.e00,this.e01,this.e02,this.e00*a+this.e01*b+this.e02*e+this.e03,this.e10,this.e11,this.e12,this.e10*a+this.e11*b+this.e12*e+this.e13,this.e20,this.e21,this.e22,this.e20*a+this.e21*b+this.e22*e+this.e23,this.e30,this.e31,this.e32,this.e30*a+this.e31*b+this.e32*e+this.e33)},ue:function(a,b,e){var c=this.e01*a,d=this.e02*a,f=this.e03*a,h=this.e10*b,l=this.e11*b,g=this.e12*b;b=this.e13*b;var k=this.e20*e,m=this.e21*e,n=this.e22*e;e=this.e23*e;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00=this.e00*a;this.e01=c;this.e02=d;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Ec:function(a,b,e){var c=this.e01*b,d=this.e02*e,f=this.e03,h=this.e10*a,l=this.e11*b,g=this.e12*e,k=this.e13,m=this.e20*a,n=this.e21*b,q=this.e22*e,p=this.e23,r=this.e30*a;b=this.e31*b;e=this.e32*e;var v=this.e33;this.e00=this.e00*a;this.e01=c;this.e02=d;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=b;this.e32=e;this.e33=v;return this},se:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d,p=c*e*h+b*d,r=c*c*h+f;c=a*this.e01+l*this.e11+g*this.e21;b=a*this.e02+l*this.e12+g*this.e22;e=a*this.e03+l*this.e13+g*this.e23;var d=k*this.e00+m*this.e10+n*this.e20,f=k*this.e01+m*this.e11+n*this.e21,h=k*this.e02+m*this.e12+n*this.e22,k=k*this.e03+m*this.e13+n*this.e23,m=q*this.e00+p*this.e10+r*this.e20,n=q*this.e01+p*this.e11+r*this.e21,v=q*this.e02+p*this.e12+r*this.e22,q=q*this.e03+p*this.e13+r*this.e23,p=this.e30,r=this.e31,R=this.e32,y=this.e33;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=c;this.e02=b;this.e03=e;this.e10=d;this.e11=f;this.e12=h;this.e13=k;this.e20=m;this.e21=n;this.e22=v;this.e23=q;this.e30=p;this.e31=r;this.e32=R;this.e33=y;return this},vc:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;var p=c*c*h+f;c=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var d=this.e03,f=this.e10*a+this.e11*k+this.e12*q,h=this.e10*l+this.e11*m+this.e12*b,r=this.e10*g+this.e11*n+this.e12*p,v=this.e13,R=this.e20*a+this.e21*k+this.e22*q,y=this.e20*l+this.e21*m+this.e22*b,L=this.e20*g+this.e21*n+this.e22*p,w=this.e23,D=this.e30*a+this.e31*k+this.e32*q,l=this.e30*l+this.e31*m+this.e32*b,g=this.e30*g+this.e31*n+this.e32*p,n=this.e33;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=c;this.e02=e;this.e03=d;this.e10=f;this.e11=h;this.e12=r;this.e13=v;this.e20=R;this.e21=y;this.e22=L;this.e23=w;this.e30=D;this.e31=l;this.e32=g;this.e33=n;return this},li:function(a,b,e){var c=this.e01+a*this.e31,d=this.e02+a*this.e32,f=this.e03+a*this.e33,h=this.e10+b*this.e30,l=this.e11+b*this.e31,g=this.e12+b*this.e32;b=this.e13+b*this.e33;var k=this.e20+e*this.e30,m=this.e21+e*this.e31,n=this.e22+e*this.e32;e=this.e23+e*this.e33;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00+=a*this.e30;this.e01=c;this.e02=d;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},cb:function(a,b,e){var c=this.e01,d=this.e02,f=this.e00*a+this.e01*b+this.e02*e+this.e03,h=this.e10,l=this.e11,g=this.e12,k=this.e10*a+this.e11*b+this.e12*e+this.e13,m=this.e20,n=this.e21,q=this.e22,p=this.e20*a+this.e21*b+this.e22*e+this.e23,r=this.e30,v=this.e31,R=this.e32;a=this.e30*a+this.e31*b+this.e32*e+this.e33;this.e00=this.e00;this.e01=c;this.e02=d;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=v;this.e32=R;this.e33=a;return this},Wg:function(){return new O(this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33)},Xg:function(){var a=this.e10,b=this.e20,e=this.e30,c=this.e01,d=this.e11,f=this.e21,h=this.e31,l=this.e02,g=this.e12,k=this.e22,m=this.e32,n=this.e03,q=this.e13,p=this.e23,r=this.e33;this.e00=this.e00;this.e01=a;this.e02=b;this.e03=e;this.e10=c;this.e11=d;this.e12=f;this.e13=h;this.e20=l;this.e21=g;this.e22=k;this.e23=m;this.e30=n;this.e31=q;this.e32=p;this.e33=r;return this},Jc:function(){var a=this.e20*this.e31-this.e21*this.e30,b=this.e20*this.e32-this.e22*this.e30,e=this.e20*this.e33-this.e23*this.e30,c=this.e21*this.e32-this.e22*this.e31,d=this.e21*this.e33-this.e23*this.e31,f=this.e22*this.e33-this.e23*this.e32;return this.e00*(this.e11*f-this.e12*d+this.e13*c)-this.e01*(this.e10*f-this.e12*e+this.e13*b)+this.e02*(this.e10*d-this.e11*e+this.e13*a)-this.e03*(this.e10*c-this.e11*b+this.e12*a)},Vg:function(){return this.e00+this.e11+this.e22+this.e33},Lc:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,c=this.e01*this.e12-this.e02*this.e11,d=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,R=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*d+this.e33*c,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*d-this.e31*e+this.e33*a,y=this.e30*c-this.e31*b+this.e32*a,L=this.e21*f-this.e22*d+this.e23*c,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*d-this.e21*e+this.e23*a,a=this.e20*c-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);return new O(q*b,-R*b,l*b,-L*b,-p*b,n*b,-k*b,f*b,r*b,-g*b,m*b,-e*b,-v*b,h*b,-y*b,a*b)},fd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,c=this.e01*this.e12-this.e02*this.e11,d=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,R=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*d+this.e33*c,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*d-this.e31*e+this.e33*a,y=this.e30*c-this.e31*b+this.e32*a,L=this.e21*f-this.e22*d+this.e23*c,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*d-this.e21*e+this.e23*a,a=this.e20*c-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);this.e00=q*b;this.e01=-R*b;this.e02=l*b;this.e03=-L*b;this.e10=-p*b;this.e11=n*b;this.e12=-k*b;this.e13=f*b;this.e20=r*b;this.e21=-g*b;this.e22=m*b;this.e23=-e*b;this.e30=-v*b;this.e31=h*b;this.e32=-y*b;this.e33=a*b;return this},Mb:function(a,b,e,c,d,f,h,l,g){c=a-c;d=b-d;f=e-f;var k=1/Math.sqrt(c*c+d*d+f*f);c*=k;d*=k;f*=k;var m=l*f-g*d;g=g*c-h*f;h=h*d-l*c;k=1/Math.sqrt(m*m+g*g+h*h);m*=k;g*=k;h*=k;l=d*h-f*g;var k=f*m-c*h,n=c*g-d*m;this.e00=m;this.e01=g;this.e02=h;this.e03=-(m*a+g*b+h*e);this.e10=l;this.e11=k;this.e12=n;this.e13=-(l*a+k*b+n*e);this.e20=c;this.e21=d;this.e22=f;this.e23=-(c*a+d*b+f*e);this.e32=this.e31=this.e30=0;this.e33=1;return this},qe:function(a,b,e,c){a=1/Math.tan(.5*a);c/=e-c;this.e00=a/b;this.e10=this.e03=this.e02=this.e01=0;this.e11=a;this.e21=this.e20=this.e13=this.e12=0;this.e22=c;this.e23=e*c;this.e31=this.e30=0;this.e32=-1;this.e33=0;return this},ji:function(a,b,e,c){c=1/(e-c);this.e00=2/a;this.e10=this.e03=this.e02=this.e01=0;this.e11=2/b;this.e21=this.e20=this.e13=this.e12=0;this.e22=c;this.e23=e*c;this.e32=this.e31=this.e30=0;this.e33=1;return this},Ug:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33]:[this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33]},de:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e03=a.e03;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e13=a.e13;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;this.e23=a.e23;this.e30=a.e30;this.e31=a.e31;this.e32=a.e32;this.e33=a.e33;return this},Kc:function(a){var b=a.e01,e=a.e02,c=a.e10,d=a.e11,f=a.e12,h=a.e20,l=a.e21,g=a.e22;this.e00=a.e00;this.e01=b;this.e02=e;this.e03=0;this.e10=c;this.e11=d;this.e12=f;this.e13=0;this.e20=h;this.e21=l;this.e22=g;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},Hb:function(a){this.e00=a.o;this.e01=a.f;this.e02=a.h;this.e10=a.i;this.e11=a.m;this.e12=a.j;this.e20=a.l;this.e21=a.g;this.e22=a.s;this.e03=a.v;this.e13=a.A;this.e23=a.B;this.e32=this.e31=this.e30=0;this.e33=1;return this},clone:function(){return new O(this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33)},toString:function(){return"Mat4["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+", "+(0<this.e03?(1E7*this.e03+.5|0)/1E7:(1E7*this.e03-.5|0)/1E7)+",\n    "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+", "+(0<this.e13?(1E7*this.e13+.5|0)/1E7:(1E7*this.e13-.5|0)/1E7)+",\n    "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+", "+(0<this.e23?(1E7*this.e23+.5|0)/1E7:(1E7*this.e23-.5|0)/1E7)+",\n    "+(0<this.e30?(1E7*this.e30+.5|0)/1E7:(1E7*this.e30-.5|0)/1E7)+", "+(0<this.e31?(1E7*this.e31+.5|0)/1E7:(1E7*this.e31-.5|0)/1E7)+", "+(0<this.e32?(1E7*this.e32+.5|0)/1E7:(1E7*this.e32-.5|0)/1E7)+", "+(0<this.e33?(1E7*this.e33+.5|0)/1E7:(1E7*this.e33-.5|0)/1E7)+"]"}};Oa.abs=function(a){return 0<a?a:-a};Oa.sin=function(a){return Math.sin(a)};Oa.cos=function(a){return Math.cos(a)};Oa.tan=function(a){return Math.tan(a)};Oa.asin=function(a){return Math.asin(a)};Oa.acos=function(a){return Math.acos(a)};Oa.atan=function(a){return Math.atan(a)};Oa.fd=function(a){return-1>=a?-1.570796326794895:1<=a?1.570796326794895:Math.asin(a)};Oa.Lc=function(a){return-1>=a?3.14159265358979:1<=a?0:Math.acos(a)};Oa.atan2=function(a,b){return Math.atan2(a,b)};Oa.sqrt=function(a){return Math.sqrt(a)};Oa.Hb=function(a,b,e){return a<b?b:a>e?e:a};Oa.Ac=function(){return Math.random()};Oa.Ec=function(a,b){return a+Math.random()*(b-a)};Oa.Kc=function(a,b){return new t(a+Math.random()*(b-a),a+Math.random()*(b-a),a+Math.random()*(b-a))};Oa.Jc=function(){return new t(-1+2*Math.random(),-1+2*Math.random(),-1+2*Math.random())};$b.prototype={Ac:function(){return 0==this.c?new t:this.b[--this.c]},qc:function(){return 0==this.eb?new E:this.bb[--this.eb]},uc:function(){return 0==this.dg?new O:this.Lf[--this.dg]},vc:function(){return 0==this.ee?new ta:this.Wd[--this.ee]},ua:function(a,b,e,c){if(null!=a){a.Z();if(this.c==this.b.length){for(var d=Array(this.c<<1),f=0,h=this.c;f<h;){var l=f++;d[l]=this.b[l];this.b[l]=null}this.b=d}this.b[this.c++]=a}if(null!=b){b.e00=1;b.e01=0;b.e02=0;b.e10=0;b.e11=1;b.e12=0;b.e20=0;b.e21=0;b.e22=1;if(this.eb==this.bb.length){a=Array(this.eb<<1);d=0;for(f=this.eb;d<f;)h=d++,a[h]=this.bb[h],this.bb[h]=null;this.bb=a}this.bb[this.eb++]=b}if(null!=e){e.e00=1;e.e01=0;e.e02=0;e.e03=0;e.e10=0;e.e11=1;e.e12=0;e.e13=0;e.e20=0;e.e21=0;e.e22=1;e.e23=0;e.e30=0;e.e31=0;e.e32=0;e.e33=1;if(this.dg==this.Lf.length){b=Array(this.dg<<1);a=0;for(d=this.dg;a<d;)f=a++,b[f]=this.Lf[f],this.Lf[f]=null;this.Lf=b}this.Lf[this.dg++]=e}if(null!=c){c.x=0;c.y=0;c.z=0;c.w=1;if(this.ee==this.Wd.length){e=Array(this.ee<<1);b=0;for(a=this.ee;b<a;)d=b++,e[d]=this.Wd[d],this.Wd[d]=null;this.Wd=e}this.Wd[this.ee++]=c}},pc:function(a){a.Z();if(this.c==this.b.length){for(var b=Array(this.c<<1),e=0,c=this.c;e<c;){var d=e++;b[d]=this.b[d];this.b[d]=null}this.b=b}this.b[this.c++]=a},cb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e10=0;a.e11=1;a.e12=0;a.e20=0;a.e21=0;a.e22=1;if(this.eb==this.bb.length){for(var b=Array(this.eb<<1),e=0,c=this.eb;e<c;){var d=e++;b[d]=this.bb[d];this.bb[d]=null}this.bb=b}this.bb[this.eb++]=a},Hb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e03=0;a.e10=0;a.e11=1;a.e12=0;a.e13=0;a.e20=0;a.e21=0;a.e22=1;a.e23=0;a.e30=0;a.e31=0;a.e32=0;a.e33=1;if(this.dg==this.Lf.length){for(var b=Array(this.dg<<1),e=0,c=this.dg;e<c;){var d=e++;b[d]=this.Lf[d];this.Lf[d]=null}this.Lf=b}this.Lf[this.dg++]=a},Mb:function(a){a.x=0;a.y=0;a.z=0;a.w=1;if(this.ee==this.Wd.length){for(var b=Array(this.ee<<1),e=0,c=this.ee;e<c;){var d=e++;b[d]=this.Wd[d];this.Wd[d]=null}this.Wd=b}this.Wd[this.ee++]=a}};ta.prototype={Wf:function(){this.z=this.y=this.x=0;this.w=1;return this},za:function(a,b,e,c){this.x=a;this.y=b;this.z=e;this.w=c;return this},ua:function(a){return new ta(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},Ec:function(a){return new ta(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},vc:function(a){return new ta(this.x*a,this.y*a,this.z*a,this.w*a)},cb:function(a){var b=this.y+a.y,e=this.z+a.z,c=this.w+a.w;this.x+=a.x;this.y=b;this.z=e;this.w=c;return this},Jc:function(a){var b=this.y-a.y,e=this.z-a.z,c=this.w-a.w;this.x=this.x-a.x;this.y=b;this.z=e;this.w=c;return this},Ac:function(a){var b=this.y*a,e=this.z*a,c=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=c;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},pc:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Hb:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},uc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);return new ta(this.x*a,this.y*a,this.z*a,this.w*a)},qc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);var b=this.y*a,e=this.z*a,c=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=c;return this},Kc:function(a,b){var e=a.x,c=a.y;a=a.z;var d=b.x,f=b.y;b=b.z;var h;this.w=Math.sqrt(.5*(1+(e*d+c*f+a*b)));if(!this.w)return d=e*e,f=c*c,b=a*a,d<f?d<b?(h=1/Math.sqrt(f+b),this.x=0,this.y=a*h,this.z=-c*h):(h=1/Math.sqrt(d+f),this.z=0,this.x=c*h,this.y=-e*h):f<b?(h=1/Math.sqrt(b+d),this.y=0,this.z=e*h,this.x=-a*h):(h=1/Math.sqrt(d+f),this.z=0,this.x=c*h,this.y=-e*h),this;h=.5/this.w;this.x=(c*b-a*f)*h;this.y=(a*d-e*b)*h;this.z=(e*f-c*d)*h;return this},Lc:function(a,b){var e,c,d,f=this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w;0>f?(f=-f,e=-a.x,c=-a.y,d=-a.z,a=-a.w):(e=a.x,c=a.y,d=a.z,a=a.w);if(.999999<f)return e=new ta(this.x+(e-this.x)*b,this.y+(c-this.y)*b,this.z+(d-this.z)*b,this.w+(a-this.w)*b),c=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),0<c&&(c=1/c),d=e.y*c,a=e.z*c,f=e.w*c,e.x=e.x*c,e.y=d,e.z=a,e.w=f,e;b*=Math.acos(f);e-=this.x*f;c-=this.y*f;d-=this.z*f;a-=this.w*f;var f=1/Math.sqrt(e*e+c*c+d*d+a*a),h=Math.sin(b);b=Math.cos(b);return new ta(this.x*b+e*f*h,this.y*b+c*f*h,this.z*b+d*f*h,this.w*b+a*f*h)},de:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},clone:function(){return new ta(this.x,this.y,this.z,this.w)},Mb:function(a){var b=a.e00,e=a.e11,c=a.e22,d=b+e+c;0<d?(b=Math.sqrt(d+1),this.w=.5*b,b=.5/b,this.x=(a.e21-a.e12)*b,this.y=(a.e02-a.e20)*b,this.z=(a.e10-a.e01)*b):b>e?b>c?(b=Math.sqrt(b-e-c+1),this.x=.5*b,b=.5/b,this.y=(a.e01+a.e10)*b,this.z=(a.e02+a.e20)*b,this.w=(a.e21-a.e12)*b):(b=Math.sqrt(c-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b):e>c?(b=Math.sqrt(e-c-b+1),this.y=.5*b,b=.5/b,this.x=(a.e01+a.e10)*b,this.z=(a.e12+a.e21)*b,this.w=(a.e02-a.e20)*b):(b=Math.sqrt(c-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b);return this},fd:function(){var a=new E,b=this.x,e=this.y,c=this.z,d=this.w,f=2*b,h=2*e,l=2*c,g=b*f,k=e*h,c=c*l,m=b*h,e=e*l,b=b*l,f=d*f,h=d*h,d=d*l;a.e00=1-k-c;a.e01=m-d;a.e02=b+h;a.e10=m+d;a.e11=1-g-c;a.e12=e-f;a.e20=b-h;a.e21=e+f;a.e22=1-g-k;return a},toString:function(){return"Quat["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+" i,\n    "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+" j,\n    "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+" k,\n    "+(0<this.w?(1E7*this.w+.5|0)/1E7:(1E7*this.w-.5|0)/1E7)+"]"}};Rb.prototype={hn:function(){if(null!=this.Lh){var a=this.Td,b=this.Ym;this.Lh.hm(b,this.Zb.Kb,this.$b.Kb,this.Zb.a,this.$b.a,this.$i);(this.Td=0<b.numPoints)?(this.Ja.Wm(b.normal),this.Ye.Hc=b.mm()>G.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?G.alternativeContactPositionCorrectionAlgorithm:G.defaultContactPositionCorrectionAlgorithm,b.incremental?this.Zl.On(b,this.C.a,this.D.a):this.Zl.eo(b,this.C.a,this.D.a)):this.Ja.Xe();if(this.Td&&!a){var b=this.Zb.yd,e=this.$b.yd;b==e&&(e=null);null!=b&&b.beginContact(this);null!=e&&e.beginContact(this)}!this.Td&&a&&(a=this.Zb.yd,b=this.$b.yd,a==b&&(b=null),null!=a&&a.endContact(this),null!=b&&b.endContact(this));this.Td&&(a=this.Zb.yd,b=this.$b.yd,a==b&&(b=null),null!=a&&a.preSolve(this),null!=b&&b.preSolve(this))}},Vk:function(){var a=this.Zb.yd,b=this.$b.yd;a==b&&(b=null);null!=a&&a.postSolve(this);null!=b&&b.postSolve(this)},pc:function(){return this.Zb},qc:function(){return this.$b},sk:function(){return this.Td},cb:function(){return this.Ja},ua:function(){return this.Ye},Mb:function(){return this.ia},Hb:function(){return this.M}};ed.prototype={ua:function(){return this.Zd},Hb:function(){return this.Qc},Mb:function(){return this.ia},cb:function(){return this.M}};He.prototype={pn:function(){for(var a=this.jc.ce;null!=a;){for(var b=a.M;;){var e;a.mh.Cc<a.nh.Cc?(e=a.mh.userData,a=a.nh.userData):(e=a.nh.userData,a=a.mh.userData);if(!this.Gm(e,a))break;var c=e.Yb,d=a.Yb,f;f=c.Ae<d.Ae?c.Ob:d.Ob;for(var c=e.Cc,d=a.Cc,h=!1;null!=f;){var l=f.M;f=f.Zd;if(f.Zb.Cc==c&&f.$b.Cc==d){h=f.Zj=!0;break}f=l}h||(c=this.lg,null!=c?(this.lg=c.M,c.M=null):c=new Rb,null==this.zd?this.zd=c:(this.ye.M=c,c.ia=this.ye),this.ye=c,c.Zj=!0,d=this.Xm.Jb[e.Kb.Lb][a.Kb.Lb],c.Zb=e,c.$b=a,c.C=e.Yb,c.D=a.Yb,c.Td=!1,null==c.C.Ob?c.C.Ob=c.rb:(c.C.kc.M=c.rb,c.rb.ia=c.C.kc),c.C.kc=c.rb,null==c.D.Ob?c.D.Ob=c.sb:(c.D.kc.M=c.sb,c.sb.ia=c.D.kc),c.D.kc=c.sb,c.C.Ae++,c.D.Ae++,c.rb.Qc=c.D,c.sb.Qc=c.C,c.rb.Zd=c,c.sb.Zd=c,c.Lh=d,c=c.Ye,c.Zb=e,c.$b=a,c.C=c.Zb.Yb,c.D=c.$b.Yb,c.pj=c.C.a,c.qj=c.D.a,this.Bi++);break}a=b}},qn:function(){for(var a=this.jc.Yj,b=this.zd;null!=b;){for(var e=b.M;;){if(b.Zj){b.Zj=!1;b.ik=!1;break}if(!a){var c=b.ia,d=b.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b==this.zd&&(this.zd=this.zd.M);b==this.ye&&(this.ye=this.ye.ia);b.M=null;b.ia=null;b.Td&&(c=b.Zb.yd,d=b.$b.yd,c==d&&(d=null),null!=c&&c.endContact(b),null!=d&&d.endContact(b));c=b.rb.ia;d=b.rb.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b.rb==b.C.Ob&&(b.C.Ob=b.C.Ob.M);b.rb==b.C.kc&&(b.C.kc=b.C.kc.ia);b.rb.M=null;b.rb.ia=null;c=b.sb.ia;d=b.sb.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b.sb==b.D.Ob&&(b.D.Ob=b.D.Ob.M);b.sb==b.D.kc&&(b.D.kc=b.D.kc.ia);b.sb.M=null;b.sb.ia=null;b.C.Ae--;b.D.Ae--;b.rb.Qc=null;b.sb.Qc=null;b.rb.Zd=null;b.sb.Zd=null;b.Zb=null;b.$b=null;b.C=null;b.D=null;b.Td=!1;b.$i.Xe();b.Ja.Xe();b.Lh=null;c=b.Ye;c.Zb=null;c.$b=null;c.C=null;c.D=null;c.pj=null;c.qj=null;b.M=this.lg;this.lg=b;this.Bi--;break}var c=b.Zb,d=b.$b,f=c.Yb,h=d.Yb,h=!h.Gb&&1!=h.Lb;if((f.Gb||1==f.Lb)&&!h){b.ik=!0;break}var f=c.u,h=d.u,l=c.tb,g=d.tb;if(!(l.J<g.G&&l.G>g.J&&l.K<g.H&&l.H>g.K&&l.L<g.I&&l.I>g.L&&this.Gm(c,d))){c=b.ia;d=b.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b==this.zd&&(this.zd=this.zd.M);b==this.ye&&(this.ye=this.ye.ia);b.M=null;b.ia=null;b.Td&&(c=b.Zb.yd,d=b.$b.yd,c==d&&(d=null),null!=c&&c.endContact(b),null!=d&&d.endContact(b));c=b.rb.ia;d=b.rb.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b.rb==b.C.Ob&&(b.C.Ob=b.C.Ob.M);b.rb==b.C.kc&&(b.C.kc=b.C.kc.ia);b.rb.M=null;b.rb.ia=null;c=b.sb.ia;d=b.sb.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b.sb==b.D.Ob&&(b.D.Ob=b.D.Ob.M);b.sb==b.D.kc&&(b.D.kc=b.D.kc.ia);b.sb.M=null;b.sb.ia=null;b.C.Ae--;b.D.Ae--;b.rb.Qc=null;b.sb.Qc=null;b.rb.Zd=null;b.sb.Zd=null;b.Zb=null;b.$b=null;b.C=null;b.D=null;b.Td=!1;b.$i.Xe();b.Ja.Xe();b.Lh=null;c=b.Ye;c.Zb=null;c.$b=null;c.C=null;c.D=null;c.pj=null;c.qj=null;b.M=this.lg;this.lg=b;this.Bi--;break}b.ik=!(f.ma<h.ja&&f.ja>h.ma&&f.na<h.ka&&f.ka>h.na&&f.oa<h.la&&f.la>h.oa);break}b=e}},Gm:function(a,b){var e=a.Yb,c=b.Yb;if(e==c||0!=e.Lb&&0!=c.Lb||!(a.Tj&b.Uj&&b.Tj&a.Uj))return!1;e.kh<c.kh?(a=e.ze,e=c):a=c.ze;for(;null!=a;){if(a.Qc==e&&!a.Pk.Ak)return!1;a=a.M}return!0},gl:function(){this.jc.Ii();this.pn();this.qn()},Vk:function(){for(var a=this.zd;null!=a;){var b=a.M;a.Td&&a.Vk();a=b}},cb:function(){return this.Bi},ua:function(){return this.zd}};zl.prototype={Xe:function(){for(;0<this.Hf;)this.Jf[--this.Hf]=null;for(;0<this.If;)this.Kf[--this.If]=null;for(;0<this.wh;)this.Eh[--this.wh]=null;for(;0<this.vh;)this.Dh[--this.vh]=null},zk:function(a){if(this.Hf==this.Jf.length){for(var b=Array(this.Hf<<1),e=0,c=this.Hf;e<c;){var d=e++;b[d]=this.Jf[d];this.Jf[d]=null}this.Jf=b}a.Nf=!0;this.Jf[this.Hf++]=a},Ol:function(a,b){if(this.If==this.Kf.length){for(var e=Array(this.If<<1),c=0,d=this.If;c<d;){var f=c++;e[f]=this.Kf[f];this.Kf[f]=null}this.Kf=e}a.Nf=!0;this.Kf[this.If++]=a;if(b==Hb.SPLIT_IMPULSE){if(this.wh==this.Eh.length){e=Array(this.wh<<1);c=0;for(d=this.wh;c<d;)f=c++,e[f]=this.Eh[f],this.Eh[f]=null;this.Eh=e}this.Eh[this.wh++]=a}if(b==Hb.NGS){if(this.vh==this.Dh.length){b=Array(this.vh<<1);e=0;for(c=this.vh;e<c;)d=e++,b[d]=this.Dh[d],this.Dh[d]=null;this.Dh=b}this.Dh[this.vh++]=a}},gn:function(a,b){a=a.dt;var e=b.pa,c=b.a;e.v=c.v;e.A=c.A;e.B=c.B;e.o=c.o;e.f=c.f;e.h=c.h;e.i=c.i;e.m=c.m;e.j=c.j;e.l=c.l;e.g=c.g;e.s=c.s;b.Bk&&b.gb*b.gb+b.hb*b.hb+b.ib*b.ib<G.sleepingVelocityThreshold*G.sleepingVelocityThreshold&&b.kb*b.kb+b.lb*b.lb+b.mb*b.mb<G.sleepingAngularVelocityThreshold*G.sleepingAngularVelocityThreshold?(b.yb+=a,b.yb>G.sleepingTimeThreshold&&(b.Gb=!0,b.yb=0)):b.yb=0;if(!b.Gb){if(0==b.Lb){var e=a*b.$j,c=e*e,e=1/(1+e+c*(.5+.16666666666666666*e+.041666666666666664*c)),c=a*b.Qj,d=c*c,c=1/(1+c+d*(.5+.16666666666666666*c+.041666666666666664*d)),f,h,l,d=this.nm*b.eh;f=this.om*b.eh;h=this.pm*b.eh;d+=b.Mh*b.$a;f+=b.Nh*b.$a;h+=b.Oh*b.$a;var g,k;g=b.P*b.vf+b.R*b.wf+b.S*b.xf;k=b.T*b.vf+b.U*b.wf+b.V*b.xf;l=b.W*b.vf+b.X*b.wf+b.Y*b.xf;b.gb+=d*a;b.hb+=f*a;b.ib+=h*a;b.gb*=e;b.hb*=e;b.ib*=e;b.kb+=g*a;b.lb+=k*a;b.mb+=l*a;b.kb*=c;b.lb*=c;b.mb*=c}b.Wl(a);for(a=b.Dc;null!=a;){e=a.M;c=a.pa;f=a.ha;var d=b.pa,m,n,q,p,r;h=d.o*f.o+d.f*f.i+d.h*f.l;l=d.o*f.f+d.f*f.m+d.h*f.g;g=d.o*f.h+d.f*f.j+d.h*f.s;k=d.i*f.o+d.m*f.i+d.j*f.l;m=d.i*f.f+d.m*f.m+d.j*f.g;n=d.i*f.h+d.m*f.j+d.j*f.s;q=d.l*f.o+d.g*f.i+d.s*f.l;p=d.l*f.f+d.g*f.m+d.s*f.g;r=d.l*f.h+d.g*f.j+d.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=d.o*f.v+d.f*f.A+d.h*f.B;l=d.i*f.v+d.m*f.A+d.j*f.B;f=d.l*f.v+d.g*f.A+d.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=d.v;c.A+=d.A;c.B+=d.B;c=a.a;f=a.ha;d=b.a;h=d.o*f.o+d.f*f.i+d.h*f.l;l=d.o*f.f+d.f*f.m+d.h*f.g;g=d.o*f.h+d.f*f.j+d.h*f.s;k=d.i*f.o+d.m*f.i+d.j*f.l;m=d.i*f.f+d.m*f.m+d.j*f.g;n=d.i*f.h+d.m*f.j+d.j*f.s;q=d.l*f.o+d.g*f.i+d.s*f.l;p=d.l*f.f+d.g*f.m+d.s*f.g;r=d.l*f.h+d.g*f.j+d.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=d.o*f.v+d.f*f.A+d.h*f.B;l=d.i*f.v+d.m*f.A+d.j*f.B;f=d.l*f.v+d.g*f.A+d.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=d.v;c.A+=d.A;c.B+=d.B;a.Kb.Nb(a.u,a.pa);c=a.u.ma;d=a.u.na;f=a.u.oa;h=a.u.ja;l=a.u.ka;g=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=c<a.u.ma?c:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=f<a.u.oa?f:a.u.oa;a.u.ja=h>a.u.ja?h:a.u.ja;a.u.ka=l>a.u.ka?l:a.u.ka;a.u.la=g>a.u.la?g:a.u.la;null!=a.tb&&(c=a.a.v-a.pa.v,d=a.a.A-a.pa.A,f=a.a.B-a.pa.B,h=a.rc,h.x=c,h.y=d,h.z=f,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=e}}},fn:function(a,b,e){for(var c=a.dt,d=!0,f=0,h=this.Hf;f<h;){var l=f++,g=this.Jf[l],k=g.pa,m=g.a;k.v=m.v;k.A=m.A;k.B=m.B;k.o=m.o;k.f=m.f;k.h=m.h;k.i=m.i;k.m=m.m;k.j=m.j;k.l=m.l;k.g=m.g;k.s=m.s;g.Gb=!1;g.Bk&&g.gb*g.gb+g.hb*g.hb+g.ib*g.ib<G.sleepingVelocityThreshold*G.sleepingVelocityThreshold&&g.kb*g.kb+g.lb*g.lb+g.mb*g.mb<G.sleepingAngularVelocityThreshold*G.sleepingAngularVelocityThreshold?g.yb+=c:g.yb=0;g.yb<G.sleepingTimeThreshold&&(d=!1);if(0==g.Lb){var n=c*g.$j,q=n*n,p=1/(1+n+q*(.5+.16666666666666666*n+.041666666666666664*q)),r=c*g.Qj,v=r*r,R=1/(1+r+v*(.5+.16666666666666666*r+.041666666666666664*v)),y,L,w,D,t,B;y=this.nm*g.eh;L=this.om*g.eh;w=this.pm*g.eh;y+=g.Mh*g.$a;L+=g.Nh*g.$a;w+=g.Oh*g.$a;var C,A,u;C=g.P*g.vf+g.R*g.wf+g.S*g.xf;A=g.T*g.vf+g.U*g.wf+g.V*g.xf;u=g.W*g.vf+g.X*g.wf+g.Y*g.xf;D=C;t=A;B=u;g.gb+=y*c;g.hb+=L*c;g.ib+=w*c;g.gb*=p;g.hb*=p;g.ib*=p;g.kb+=D*c;g.lb+=t*c;g.mb+=B*c;g.kb*=R;g.lb*=R;g.mb*=R}}if(d)for(var I=0,J=this.Hf;I<J;){var Gb=I++,E=this.Jf[Gb];E.Gb=!0;E.yb=0}else{for(var O=0,da=this.If;O<da;){var V=O++;this.Kf[V].xh(a)}for(var S=0,Db=this.If;S<Db;){var Ia=S++;this.Kf[Ia].Gh(a)}for(var Da=0;Da<b;){Da++;for(var ma=0,Q=this.If;ma<Q;){var ta=ma++;this.Kf[ta].Ch()}}for(var Ga=0,Ea=this.If;Ga<Ea;){var Ua=Ga++;this.Kf[Ua].Li(a)}for(var va=0,oa=this.Hf;va<oa;){var Ya=va++;this.Jf[Ya].Wl(c)}for(var F=0,Qa=this.wh;F<Qa;){var X=F++;this.Eh[X].Pg(a)}for(var M=0;M<e;){M++;for(var N=0,ca=this.wh;N<ca;){var Y=N++;this.Eh[Y].Bh()}}for(var T=0,aa=this.Hf;T<aa;){var z=T++;this.Jf[z].dn()}for(var fa=0,U=this.vh;fa<U;){var pa=fa++;this.Dh[pa].Pg(a)}for(var sa=0;sa<e;){sa++;for(var wa=0,ra=this.vh;wa<ra;){var ka=wa++;this.Dh[ka].Ah(a)}}for(var Z=0,na=this.If;Z<na;){var Aa=Z++;this.Kf[Aa].postSolve()}for(var ya=0,K=this.Hf;ya<K;)for(var Ba=ya++,ha=this.Jf[Ba],ba=ha.Dc;null!=ba;){var Va=ba.M,ga=ba.pa,P=ba.ha,za=ha.pa,xb,ja,Oa,bd,gb,pb,ua,xa,Fa;xb=za.o*P.o+za.f*P.i+za.h*P.l;ja=za.o*P.f+za.f*P.m+za.h*P.g;Oa=za.o*P.h+za.f*P.j+za.h*P.s;bd=za.i*P.o+za.m*P.i+za.j*P.l;gb=za.i*P.f+za.m*P.m+za.j*P.g;pb=za.i*P.h+za.m*P.j+za.j*P.s;ua=za.l*P.o+za.g*P.i+za.s*P.l;xa=za.l*P.f+za.g*P.m+za.s*P.g;Fa=za.l*P.h+za.g*P.j+za.s*P.s;ga.o=xb;ga.f=ja;ga.h=Oa;ga.i=bd;ga.m=gb;ga.j=pb;ga.l=ua;ga.g=xa;ga.s=Fa;var fb,Ha,qb;fb=za.o*P.v+za.f*P.A+za.h*P.B;Ha=za.i*P.v+za.m*P.A+za.j*P.B;qb=za.l*P.v+za.g*P.A+za.s*P.B;ga.v=fb;ga.A=Ha;ga.B=qb;ga.v+=za.v;ga.A+=za.A;ga.B+=za.B;var Na=ba.a,la=ba.ha,Ca=ha.a,Za,Ra,ib,Lb,db,Ib,kb,nb,Yb;Za=Ca.o*la.o+Ca.f*la.i+Ca.h*la.l;Ra=Ca.o*la.f+Ca.f*la.m+Ca.h*la.g;ib=Ca.o*la.h+Ca.f*la.j+Ca.h*la.s;Lb=Ca.i*la.o+Ca.m*la.i+Ca.j*la.l;db=Ca.i*la.f+Ca.m*la.m+Ca.j*la.g;Ib=Ca.i*la.h+Ca.m*la.j+Ca.j*la.s;kb=Ca.l*la.o+Ca.g*la.i+Ca.s*la.l;nb=Ca.l*la.f+Ca.g*la.m+Ca.s*la.g;Yb=Ca.l*la.h+Ca.g*la.j+Ca.s*la.s;Na.o=Za;Na.f=Ra;Na.h=ib;Na.i=Lb;Na.m=db;Na.j=Ib;Na.l=kb;Na.g=nb;Na.s=Yb;var sc,$a,Ka;sc=Ca.o*la.v+Ca.f*la.A+Ca.h*la.B;$a=Ca.i*la.v+Ca.m*la.A+Ca.j*la.B;Ka=Ca.l*la.v+Ca.g*la.A+Ca.s*la.B;Na.v=sc;Na.A=$a;Na.B=Ka;Na.v+=Ca.v;Na.A+=Ca.A;Na.B+=Ca.B;var vb,H,eb,lb,yb,mb;ba.Kb.Nb(ba.u,ba.pa);vb=ba.u.ma;H=ba.u.na;eb=ba.u.oa;lb=ba.u.ja;yb=ba.u.ka;mb=ba.u.la;ba.Kb.Nb(ba.u,ba.a);ba.u.ma=vb<ba.u.ma?vb:ba.u.ma;ba.u.na=H<ba.u.na?H:ba.u.na;ba.u.oa=eb<ba.u.oa?eb:ba.u.oa;ba.u.ja=lb>ba.u.ja?lb:ba.u.ja;ba.u.ka=yb>ba.u.ka?yb:ba.u.ka;ba.u.la=mb>ba.u.la?mb:ba.u.la;if(null!=ba.tb){var ub,x,W;ub=ba.a.v-ba.pa.v;x=ba.a.A-ba.pa.A;W=ba.a.B-ba.pa.B;var ea=ba.rc;ea.x=ub;ea.y=x;ea.z=W;ba.Yb.oc.jc.wd(ba.tb,ba.u,ba.rc)}ba=Va}}}};Ma.prototype={gl:function(){var a=(new Date).getTime()/1E3;this.Kh.gl();Ad.broadPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a);for(var a=(new Date).getTime()/1E3,b=this.Kh.zd;null!=b;){var e=b.M;b.ik||b.hn();b=e}Ad.narrowPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a)},en:function(){var a=(new Date).getTime()/1E3;if(G.disableSleeping)for(var b=this.uf;null!=b;){var e=b.M;b.Gb=!1;b.yb=0;b=e}if(this.ph.length<this.jj){for(b=this.ph.length<<1;b<this.jj;)b<<=1;this.ph=Array(b)}this.ek=0;b=this.vg;e=this.Fk;b.nm=e.x;b.om=e.y;b.pm=e.z;b=this.uf;for(this.tf=0;null!=b;){for(e=b.M;!b.Nf&&!b.Gb&&1!=b.Lb;){if(0==b.Ae&&0==b.kh){this.vg.gn(this.Sh,b);this.ek++;break}this.kn(b);this.vg.fn(this.Sh,this.Uk,this.Tk);this.vg.Xe();this.ek++;break}b=e}this.Kh.Vk();for(b=this.uf;null!=b;)e=b.M,b.Nf=!1,b=e;for(b=this.uf;null!=b;)e=b.M,b.Mh=0,b.Nh=0,b.Oh=0,b.vf=0,b.wf=0,b.xf=0,b=e;for(;0<this.tf;)this.af[--this.tf].Nf=!1,this.af[this.tf]=null;Ad.dynamicsTime=1E3*((new Date).getTime()/1E3-a)},kn:function(a){var b=1;this.vg.zk(a);for(this.ph[0]=a;0<b;)if(a=this.ph[--b],this.ph[b]=null,1!=a.Lb){for(var e=a.Ob;null!=e;){var c=e.M,d=e.Zd.Ye,f=e.Zd.Ye.jk;if(d.sk()&&!f.Nf){if(this.af.length==this.tf){for(var h=Array(this.tf<<1),l=0,g=this.tf;l<g;){var k=l++;h[k]=this.af[k];this.af[k]=null}this.af=h}this.af[this.tf++]=f;this.vg.Ol(f,d.Hc);e=e.Qc;e.Nf||(this.vg.zk(e),this.ph[b++]=e)}e=c}for(c=a.ze;null!=c;){a=c.M;e=c.Pk;d=e.jk;if(!d.Nf){if(this.af.length==this.tf){f=Array(this.tf<<1);h=0;for(l=this.tf;h<l;)g=h++,f[g]=this.af[g],this.af[g]=null;this.af=f}this.af[this.tf++]=d;this.vg.Ol(d,e.Hc);c=c.Qc;c.Nf||(this.vg.zk(c),this.ph[b++]=c)}c=a}}},Zm:function(a,b){a.drawBvh&&this.Ek(a,b.Qb,0,a.style.bvhNodeColor)},Ek:function(a,b,e,c){if(null!=b){if(e>=a.drawBvhMinLevel&&e<=a.drawBvhMaxLevel){var d=this.Ga,f=0==d.c?new t:d.b[--d.c],d=this.Ga,d=0==d.c?new t:d.b[--d.c];f.x=b.J;f.y=b.K;f.z=b.L;d.x=b.G;d.y=b.H;d.z=b.I;a.aabb(f,d,c);var h=this.Ga;if(null!=f){f.Z();if(h.c==h.b.length){for(var l=Array(h.c<<1),g=0,k=h.c;g<k;){var m=g++;l[m]=h.b[m];h.b[m]=null}h.b=l}h.b[h.c++]=f}f=this.Ga;if(null!=d){d.Z();if(f.c==f.b.length){h=Array(f.c<<1);l=0;for(g=f.c;l<g;)k=l++,h[k]=f.b[k],f.b[k]=null;f.b=h}f.b[f.c++]=d}}this.Ek(a,b.F[0],e+1,c);this.Ek(a,b.F[1],e+1,c)}},bn:function(a){for(var b=a.style,e=this.uf;null!=e;){var c=e.M;if(a.drawBases){var d=a.style;a.basis(e.a,d.basisLength,d.basisColorX,d.basisColorY,d.basisColorZ)}var f=null,h=0==e.Lb;h||(f=2==e.Lb?b.kinematicShapeColor:b.staticShapeColor);for(var l=e.Dc;null!=l;){var g=l.M;h&&(f=l.Cc&1?e.Gb?b.sleepingShapeColor2:e.yb>G.sleepingTimeThreshold?b.sleepyShapeColor2:b.shapeColor2:e.Gb?b.sleepingShapeColor1:e.yb>G.sleepingTimeThreshold?b.sleepyShapeColor1:b.shapeColor1);if(a.drawShapes){var k=l.Kb,m=l.a;switch(k.Lb){case 0:a.sphere(m,k.ab,f);break;case 1:var n=k,q=this.Ga,p=0==q.c?new t:q.b[--q.c],r=p;r.x=n.Ke;r.y=n.Le;r.z=n.Me;a.box(m,p,f);var v=this.Ga;if(null!=p){p.Z();if(v.c==v.b.length){for(var R=Array(v.c<<1),y=0,L=v.c;y<L;){var w=y++;R[w]=v.b[w];v.b[w]=null}v.b=R}v.b[v.c++]=p}break;case 2:var D=k;a.cylinder(m,D.ab,D.Ib,f);break;case 3:var Sa=k;a.cone(m,Sa.ab,Sa.Ib,f);break;case 4:var B=k;a.capsule(m,B.ab,B.Ib,f);break;case 5:var C=k,A=C.Ne,u=this.Ga,I=0==u.c?new t:u.b[--u.c],J=this.Ga,Gb=0==J.c?new t:J.b[--J.c],O=this.Ga,V=0==O.c?new t:O.b[--O.c],da=this.Ga,S=0==da.c?new t:da.b[--da.c],Bd=this.Ga,Db=0==Bd.c?new t:Bd.b[--Bd.c],Ia=this.Ga,Da=0==Ia.c?new t:Ia.b[--Ia.c],ma=this.Ga,Q=0==ma.eb?new E:ma.bb[--ma.eb],ta=this.Ga,Ga=0==ta.c?new t:ta.b[--ta.c],Ea=Q;Ea.e00=m.o;Ea.e01=m.f;Ea.e02=m.h;Ea.e10=m.i;Ea.e11=m.m;Ea.e12=m.j;Ea.e20=m.l;Ea.e21=m.g;Ea.e22=m.s;var Ua=Ga;Ua.x=m.v;Ua.y=m.A;Ua.z=m.B;for(var va=0,oa=A;va<oa;){var Ya=va++,F=C.Bg[Ya],Qa=C.zb[Ya];F.x=Qa.x;F.y=Qa.y;F.z=Qa.z;var X=F,M=X.x*Q.e10+X.y*Q.e11+X.z*Q.e12,N=X.x*Q.e20+X.y*Q.e21+X.z*Q.e22;X.x=X.x*Q.e00+X.y*Q.e01+X.z*Q.e02;X.y=M;X.z=N;var ca=X,Y=ca.y+Ga.y,T=ca.z+Ga.z;ca.x=ca.x+Ga.x;ca.y=Y;ca.z=T}if(30<A)for(var aa=0,z=A;aa<z;){var fa=aa++,U=C.Bg[fa];I.x=U.x;I.y=U.y;I.z=U.z;var pa=C.Bg[(fa+1)%A];Gb.x=pa.x;Gb.y=pa.y;Gb.z=pa.z;a.line(I,Gb,f)}else if(this.ni.wireframe||10<A)for(var sa=0,wa=A;sa<wa;){var ra=sa++,ka=C.Bg[ra];I.x=ka.x;I.y=ka.y;I.z=ka.z;for(var Z=0,na=ra;Z<na;){var Aa=Z++,ya=C.Bg[Aa];Gb.x=ya.x;Gb.y=ya.y;Gb.z=ya.z;a.line(I,Gb,f)}}else for(var K=0,Ba=A;K<Ba;){var ha=K++,ba=C.Bg[ha];I.x=ba.x;I.y=ba.y;I.z=ba.z;for(var Va=0,ga=ha;Va<ga;){var P=Va++,za=C.Bg[P];Gb.x=za.x;Gb.y=za.y;Gb.z=za.z;for(var xb=0,ja=P;xb<ja;){var Oa=xb++,bd=C.Bg[Oa];V.x=bd.x;V.y=bd.y;V.z=bd.z;S.x=Gb.x;S.y=Gb.y;S.z=Gb.z;var gb=S,pb=gb.y-I.y,ua=gb.z-I.z;gb.x=gb.x-I.x;gb.y=pb;gb.z=ua;Db.x=V.x;Db.y=V.y;Db.z=V.z;var xa=Db,Fa=xa.y-I.y,fb=xa.z-I.z;xa.x=xa.x-I.x;xa.y=Fa;xa.z=fb;Da.x=S.x;Da.y=S.y;Da.z=S.z;var Ha=Da,qb=Ha.z*Db.x-Ha.x*Db.z,Na=Ha.x*Db.y-Ha.y*Db.x;Ha.x=Ha.y*Db.z-Ha.z*Db.y;Ha.y=qb;Ha.z=Na;var la=Ha,Ca=Math.sqrt(la.x*la.x+la.y*la.y+la.z*la.z);0<Ca&&(Ca=1/Ca);var Za=la.y*Ca,Ra=la.z*Ca;la.x=la.x*Ca;la.y=Za;la.z=Ra;a.triangle(I,Gb,V,Da,Da,Da,f);var ib=-Da.y,Lb=-Da.z;Da.x=-Da.x;Da.y=ib;Da.z=Lb;a.triangle(I,V,Gb,Da,Da,Da,f)}}}var db=this.Ga;if(null!=I){I.Z();if(db.c==db.b.length){for(var Ib=Array(db.c<<1),kb=0,nb=db.c;kb<nb;){var Yb=kb++;Ib[Yb]=db.b[Yb];db.b[Yb]=null}db.b=Ib}db.b[db.c++]=I}var sc=this.Ga;if(null!=Gb){Gb.Z();if(sc.c==sc.b.length){for(var $a=Array(sc.c<<1),Ka=0,vb=sc.c;Ka<vb;){var H=Ka++;$a[H]=sc.b[H];sc.b[H]=null}sc.b=$a}sc.b[sc.c++]=Gb}var eb=this.Ga;if(null!=V){V.Z();if(eb.c==eb.b.length){for(var lb=Array(eb.c<<1),yb=0,mb=eb.c;yb<mb;){var ub=yb++;lb[ub]=eb.b[ub];eb.b[ub]=null}eb.b=lb}eb.b[eb.c++]=V}var x=this.Ga;if(null!=S){S.Z();if(x.c==x.b.length){for(var W=Array(x.c<<1),ea=0,Nc=x.c;ea<Nc;){var xc=ea++;W[xc]=x.b[xc];x.b[xc]=null}x.b=W}x.b[x.c++]=S}var Pa=this.Ga;if(null!=Db){Db.Z();if(Pa.c==Pa.b.length){for(var rb=Array(Pa.c<<1),ob=0,zb=Pa.c;ob<zb;){var Ab=ob++;rb[Ab]=Pa.b[Ab];Pa.b[Ab]=null}Pa.b=rb}Pa.b[Pa.c++]=Db}var ia=this.Ga;if(null!=Da){Da.Z();if(ia.c==ia.b.length){for(var Ta=Array(ia.c<<1),bb=0,jb=ia.c;bb<jb;){var Bb=bb++;Ta[Bb]=ia.b[Bb];ia.b[Bb]=null}ia.b=Ta}ia.b[ia.c++]=Da}var La=this.Ga;if(null!=Q){Q.e00=1;Q.e01=0;Q.e02=0;Q.e10=0;Q.e11=1;Q.e12=0;Q.e20=0;Q.e21=0;Q.e22=1;if(La.eb==La.bb.length){for(var Eb=Array(La.eb<<1),Cd=0,qa=La.eb;Cd<qa;){var Bc=Cd++;Eb[Bc]=La.bb[Bc];La.bb[Bc]=null}La.bb=Eb}La.bb[La.eb++]=Q}var Mb=this.Ga;if(null!=Ga){Ga.Z();if(Mb.c==Mb.b.length){for(var Sb=Array(Mb.c<<1),Xa=0,Ma=Mb.c;Xa<Ma;){var Wa=Xa++;Sb[Wa]=Mb.b[Wa];Mb.b[Wa]=null}Mb.b=Sb}Mb.b[Mb.c++]=Ga}}}if(a.drawAabbs){var Zb=l.u,Ja=b.aabbColor,ab=this.Ga,cb=0==ab.c?new t:ab.b[--ab.c],hb=this.Ga,Ub=0==hb.c?new t:hb.b[--hb.c],gc=cb;gc.x=Zb.ma;gc.y=Zb.na;gc.z=Zb.oa;var fc=Ub;fc.x=Zb.ja;fc.y=Zb.ka;fc.z=Zb.la;a.aabb(cb,Ub,Ja);var Pb=this.Ga;if(null!=cb){cb.Z();if(Pb.c==Pb.b.length){for(var cc=Array(Pb.c<<1),Fb=0,lc=Pb.c;Fb<lc;){var bc=Fb++;cc[bc]=Pb.b[bc];Pb.b[bc]=null}Pb.b=cc}Pb.b[Pb.c++]=cb}var Qb=this.Ga;if(null!=Ub){Ub.Z();if(Qb.c==Qb.b.length){for(var dc=Array(Qb.c<<1),Vb=0,Nb=Qb.c;Vb<Nb;){var Tb=Vb++;dc[Tb]=Qb.b[Tb];Qb.b[Tb]=null}Qb.b=dc}Qb.b[Qb.c++]=Ub}}l=g}e=c}},$m:function(a){var b=a.style;if(a.drawPairs||a.drawContacts)for(var e=this.Kh.zd;null!=e;){var c=e.M;if(a.drawPairs){var d=b.pairColor,f=this.Ga,h=0==f.c?new t:f.b[--f.c],l=this.Ga,g=0==l.c?new t:l.b[--l.c],k=h;k.x=e.Zb.a.v;k.y=e.Zb.a.A;k.z=e.Zb.a.B;var m=g;m.x=e.$b.a.v;m.y=e.$b.a.A;m.z=e.$b.a.B;a.line(h,g,d);var n=this.Ga;if(null!=h){h.Z();if(n.c==n.b.length){for(var q=Array(n.c<<1),p=0,r=n.c;p<r;){var v=p++;q[v]=n.b[v];n.b[v]=null}n.b=q}n.b[n.c++]=h}var R=this.Ga;if(null!=g){g.Z();if(R.c==R.b.length){for(var y=Array(R.c<<1),L=0,w=R.c;L<w;){var D=L++;y[D]=R.b[D];R.b[D]=null}R.b=y}R.b[R.c++]=g}}if(a.drawContacts)for(var Sa=e.Ye,B=e.Ye.Ja.wc,C=0,A=e.Ye.Ja.be;C<A;){var u=C++,I=B[u],J=a.style,Gb=this.Ga,G=0==Gb.c?new t:Gb.b[--Gb.c],E=this.Ga,da=0==E.c?new t:E.b[--E.c],O=this.Ga,V=0==O.c?new t:O.b[--O.c],S=this.Ga,Ia=0==S.c?new t:S.b[--S.c],Da=this.Ga,ma=0==Da.c?new t:Da.b[--Da.c],Q=G;Q.x=I.Jd;Q.y=I.Kd;Q.z=I.Ld;var ta=da;ta.x=I.Md;ta.y=I.Nd;ta.z=I.Od;var Ga=V;Ga.x=Sa.Ja.wg;Ga.y=Sa.Ja.xg;Ga.z=Sa.Ja.yg;var Ea=Ia;Ea.x=Sa.Ja.lj;Ea.y=Sa.Ja.mj;Ea.z=Sa.Ja.nj;var Ua=ma;Ua.x=Sa.Ja.Vi;Ua.y=Sa.Ja.Wi;Ua.z=Sa.Ja.Xi;if(I.lf)a.point(G,J.disabledContactColor),a.point(da,J.disabledContactColor),a.line(G,da,J.disabledContactColor);else if(I.Pe){var va;switch(I.Cc&3){case 0:va=J.contactColor;break;case 1:va=J.contactColor2;break;case 2:va=J.contactColor3;break;default:va=J.contactColor4}a.point(G,va);a.point(da,va);a.line(G,da,J.contactColor)}else a.point(G,J.newContactColor),a.point(da,J.newContactColor),a.line(G,da,J.newContactColor);da.x=G.x;da.y=G.y;da.z=G.z;var oa=da,Ya=J.contactNormalLength,F=oa.y+V.y*Ya,Qa=oa.z+V.z*Ya;oa.x=oa.x+V.x*Ya;oa.y=F;oa.z=Qa;a.line(G,da,J.contactNormalColor);if(a.drawContactBases){da.x=G.x;da.y=G.y;da.z=G.z;var X=da,M=J.contactTangentLength,N=X.y+Ia.y*M,ca=X.z+Ia.z*M;X.x=X.x+Ia.x*M;X.y=N;X.z=ca;a.line(G,da,J.contactTangentColor);da.x=G.x;da.y=G.y;da.z=G.z;var Y=da,T=J.contactBinormalLength,aa=Y.y+ma.y*T,z=Y.z+ma.z*T;Y.x=Y.x+ma.x*T;Y.y=aa;Y.z=z;a.line(G,da,J.contactBinormalColor)}var fa=this.Ga;if(null!=G){G.Z();if(fa.c==fa.b.length){for(var U=Array(fa.c<<1),pa=0,sa=fa.c;pa<sa;){var wa=pa++;U[wa]=fa.b[wa];fa.b[wa]=null}fa.b=U}fa.b[fa.c++]=G}var ra=this.Ga;if(null!=da){da.Z();if(ra.c==ra.b.length){for(var ka=Array(ra.c<<1),Z=0,na=ra.c;Z<na;){var Aa=Z++;ka[Aa]=ra.b[Aa];ra.b[Aa]=null}ra.b=ka}ra.b[ra.c++]=da}var ya=this.Ga;if(null!=V){V.Z();if(ya.c==ya.b.length){for(var K=Array(ya.c<<1),Ba=0,ha=ya.c;Ba<ha;){var ba=Ba++;K[ba]=ya.b[ba];ya.b[ba]=null}ya.b=K}ya.b[ya.c++]=V}var Va=this.Ga;if(null!=Ia){Ia.Z();if(Va.c==Va.b.length){for(var ga=Array(Va.c<<1),P=0,za=Va.c;P<za;){var xb=P++;ga[xb]=Va.b[xb];Va.b[xb]=null}Va.b=ga}Va.b[Va.c++]=Ia}var ja=this.Ga;if(null!=ma){ma.Z();if(ja.c==ja.b.length){for(var Oa=Array(ja.c<<1),Xa=0,gb=ja.c;Xa<gb;){var pb=Xa++;Oa[pb]=ja.b[pb];ja.b[pb]=null}ja.b=Oa}ja.b[ja.c++]=ma}}e=c}if(a.drawJoints)for(var ua=this.Ph;null!=ua;){var xa=ua.M,Fa=this.Ga,fb=0==Fa.c?new t:Fa.b[--Fa.c],Ha=this.Ga,qb=0==Ha.c?new t:Ha.b[--Ha.c],Na=fb;Na.x=ua.C.a.v;Na.y=ua.C.a.A;Na.z=ua.C.a.B;var la=qb;la.x=ua.D.a.v;la.y=ua.D.a.A;la.z=ua.D.a.B;var Ca=this.Ga,Za=0==Ca.c?new t:Ca.b[--Ca.c],Ra=this.Ga,ib=0==Ra.c?new t:Ra.b[--Ra.c],Lb=this.Ga,db=0==Lb.c?new t:Lb.b[--Lb.c],Ib=this.Ga,kb=0==Ib.c?new t:Ib.b[--Ib.c],nb=this.Ga,Yb=0==nb.c?new t:nb.b[--nb.c],sc=this.Ga,$a=0==sc.c?new t:sc.b[--sc.c],Ka=this.Ga,vb=0==Ka.c?new t:Ka.b[--Ka.c],H=this.Ga,eb=0==H.c?new t:H.b[--H.c],lb=Za;lb.x=ua.Of;lb.y=ua.Pf;lb.z=ua.Qf;var yb=ib;yb.x=ua.Rf;yb.y=ua.Sf;yb.z=ua.Tf;var mb=db;mb.x=ua.vb;mb.y=ua.wb;mb.z=ua.xb;var ub=kb;ub.x=ua.He;ub.y=ua.Ie;ub.z=ua.Je;var x=Yb;x.x=ua.Hh;x.y=ua.Ih;x.z=ua.Jh;var W=$a;W.x=ua.bc;W.y=ua.cc;W.z=ua.dc;var ea=vb;ea.x=ua.ve;ea.y=ua.we;ea.z=ua.xe;var Nc=eb;Nc.x=ua.ah;Nc.y=ua.bh;Nc.z=ua.dh;a.line(fb,Za,a.style.jointLineColor);a.line(qb,ib,a.style.jointLineColor);if(a.drawJointLimits)switch(ua.Lb){case 1:var xc=ua.Rh;this.bj(a,Za,kb,Yb,vb,a.style.jointRotationalConstraintRadius,xc.lowerLimit,xc.upperLimit,a.style.jointLineColor);break;case 2:var Pa=ua,rb=a.style.jointLineColor,ob=Pa.Wk,zb=Pa.cl;this.bj(a,ib,kb,Yb,vb,a.style.jointRotationalConstraintRadius,ob.lowerLimit,ob.upperLimit,rb);this.Tl(a,Za,db,zb.lowerLimit,zb.upperLimit,rb);break;case 3:var Ab=ua.Rh;this.Tl(a,Za,db,Ab.lowerLimit,Ab.upperLimit,a.style.jointLineColor);break;case 4:var ia=ua,Ta=a.style.jointRotationalConstraintRadius,bb=a.style.jointLineColor,jb=ia.Qk,Bb=ia.Rk;this.bj(a,Za,kb,Yb,kb,Ta,ia.Ni-jb.upperLimit,ia.Ni-jb.lowerLimit,bb);this.bj(a,ib,$a,vb,$a,Ta,Bb.lowerLimit-ia.Oi,Bb.upperLimit-ia.Oi,bb);break;case 5:var La=ua,Eb=a.style.jointRotationalConstraintRadius,Cd=a.style.jointLineColor,qa=La.el;this.bj(a,ib,vb,eb,vb,Eb,qa.lowerLimit-La.tj,qa.upperLimit-La.tj,Cd);this.an(a,Za,db,kb,Yb,La.bk,La.ck,Eb,Cd);var Bc=this.Ga,Mb=0==Bc.c?new t:Bc.b[--Bc.c];Mb.x=ib.x;Mb.y=ib.y;Mb.z=ib.z;var Sb=Mb,Wa=Sb.y+$a.y*Eb,Ma=Sb.z+$a.z*Eb;Sb.x=Sb.x+$a.x*Eb;Sb.y=Wa;Sb.z=Ma;var Ja=Sb;a.line(ib,Ja,Cd);var Zb=this.Ga;if(null!=Ja){Ja.Z();if(Zb.c==Zb.b.length){for(var ab=Array(Zb.c<<1),cb=0,hb=Zb.c;cb<hb;){var tb=cb++;ab[tb]=Zb.b[tb];Zb.b[tb]=null}Zb.b=ab}Zb.b[Zb.c++]=Ja}}a.line(Za,ib,a.style.jointErrorColor);var Ub=this.Ga;if(null!=fb){fb.Z();if(Ub.c==Ub.b.length){for(var gc=Array(Ub.c<<1),fc=0,Pb=Ub.c;fc<Pb;){var cc=fc++;gc[cc]=Ub.b[cc];Ub.b[cc]=null}Ub.b=gc}Ub.b[Ub.c++]=fb}var Fb=this.Ga;if(null!=qb){qb.Z();if(Fb.c==Fb.b.length){for(var lc=Array(Fb.c<<1),bc=0,Qb=Fb.c;bc<Qb;){var dc=bc++;lc[dc]=Fb.b[dc];Fb.b[dc]=null}Fb.b=lc}Fb.b[Fb.c++]=qb}var Vb=this.Ga;if(null!=Za){Za.Z();if(Vb.c==Vb.b.length){for(var Nb=Array(Vb.c<<1),Tb=0,sb=Vb.c;Tb<sb;){var Cb=Tb++;Nb[Cb]=Vb.b[Cb];Vb.b[Cb]=null}Vb.b=Nb}Vb.b[Vb.c++]=Za}var qc=this.Ga;if(null!=ib){ib.Z();if(qc.c==qc.b.length){for(var wb=Array(qc.c<<1),Zc=0,jc=qc.c;Zc<jc;){var Hc=Zc++;wb[Hc]=qc.b[Hc];qc.b[Hc]=null}qc.b=wb}qc.b[qc.c++]=ib}var pc=this.Ga;if(null!=db){db.Z();if(pc.c==pc.b.length){for(var Jb=Array(pc.c<<1),$c=0,tc=pc.c;$c<tc;){var Hb=$c++;Jb[Hb]=pc.b[Hb];pc.b[Hb]=null}pc.b=Jb}pc.b[pc.c++]=db}var Yc=this.Ga;if(null!=kb){kb.Z();if(Yc.c==Yc.b.length){for(var Ob=Array(Yc.c<<1),Kb=0,Cc=Yc.c;Kb<Cc;){var $b=Kb++;Ob[$b]=Yc.b[$b];Yc.b[$b]=null}Yc.b=Ob}Yc.b[Yc.c++]=kb}var wc=this.Ga;if(null!=Yb){Yb.Z();if(wc.c==wc.b.length){for(var mc=Array(wc.c<<1),kc=0,Ff=wc.c;kc<Ff;){var jf=kc++;mc[jf]=wc.b[jf];wc.b[jf]=null}wc.b=mc}wc.b[wc.c++]=Yb}var Dd=this.Ga;if(null!=$a){$a.Z();if(Dd.c==Dd.b.length){for(var nc=Array(Dd.c<<1),Oc=0,Xb=Dd.c;Oc<Xb;){var ic=Oc++;nc[ic]=Dd.b[ic];Dd.b[ic]=null}Dd.b=nc}Dd.b[Dd.c++]=$a}var Ec=this.Ga;if(null!=vb){vb.Z();if(Ec.c==Ec.b.length){for(var Rb=Array(Ec.c<<1),ec=0,vc=Ec.c;ec<vc;){var Wb=ec++;Rb[Wb]=Ec.b[Wb];Ec.b[Wb]=null}Ec.b=Rb}Ec.b[Ec.c++]=vb}var Pc=this.Ga;if(null!=eb){eb.Z();if(Pc.c==Pc.b.length){for(var ac=Array(Pc.c<<1),rc=0,oc=Pc.c;rc<oc;){var hc=rc++;ac[hc]=Pc.b[hc];Pc.b[hc]=null}Pc.b=ac}Pc.b[Pc.c++]=eb}ua=xa}},bj:function(a,b,e,c,d,f,h,l,g){if(h!=l){var k=this.Ga,k=0==k.c?new t:k.b[--k.c];k.x=b.x;k.y=b.y;k.z=b.z;var m=k.y+d.y*f,n=k.z+d.z*f;k.x+=d.x*f;k.y=m;k.z=n;a.line(b,k,g);d=this.Ga;if(null!=k){k.Z();if(d.c==d.b.length){for(var m=Array(d.c<<1),n=0,q=d.c;n<q;){var p=n++;m[p]=d.b[p];d.b[p]=null}d.b=m}d.b[d.c++]=k}}h>l?a.ellipse(b,e,c,f,f,g):a.arc(b,e,c,f,f,h,l,!0,g)},Tl:function(a,b,e,c,d,f){if(c<d){var h=this.Ga,h=0==h.c?new t:h.b[--h.c];h.x=b.x;h.y=b.y;h.z=b.z;var l=h.y+e.y*c,g=h.z+e.z*c;h.x+=e.x*c;h.y=l;h.z=g;c=this.Ga;c=0==c.c?new t:c.b[--c.c];c.x=b.x;c.y=b.y;c.z=b.z;b=c.y+e.y*d;l=c.z+e.z*d;c.x+=e.x*d;c.y=b;c.z=l;a.line(h,c,f);a=this.Ga;if(null!=h){h.Z();if(a.c==a.b.length){e=Array(a.c<<1);d=0;for(f=a.c;d<f;)b=d++,e[b]=a.b[b],a.b[b]=null;a.b=e}a.b[a.c++]=h}h=this.Ga;if(null!=c){c.Z();if(h.c==h.b.length){a=Array(h.c<<1);e=0;for(d=h.c;e<d;)f=e++,a[f]=h.b[f],h.b[f]=null;h.b=a}h.b[h.c++]=c}}},an:function(a,b,e,c,d,f,h,l,g){for(var k=0,m=this.Ga,n=0==m.c?new t:m.b[--m.c],m=this.Ga,q=0==m.ee?new ta:m.Wd[--m.ee],m=this.Ga,p=0==m.eb?new E:m.bb[--m.eb],m=this.Ga,m=0==m.c?new t:m.b[--m.c],r=0;17>r;){var v=r++,R=Math.cos(k)*f,y=Math.sin(k)*h,L=Math.sqrt(R*R+y*y),w=Math.sin(.5*L),D=Math.cos(.5*L),Sa=n.Z(),B=Sa.y+c.y*R,C=Sa.z+c.z*R;Sa.x=Sa.x+c.x*R;Sa.y=B;Sa.z=C;R=Sa;Sa=R.y+d.y*y;B=R.z+d.z*y;R.x=R.x+d.x*y;R.y=Sa;R.z=B;y=1/L*w;L=n.y*y;w=n.z*y;n.x=n.x*y;n.y=L;n.z=w;q.x=n.x;q.y=n.y;q.z=n.z;q.w=D;var A=q.x,C=q.y,R=q.z,L=q.w,G=2*A,B=2*C,w=2*R,D=A*G,y=C*B,R=R*w,Sa=A*B,C=C*w,A=A*w,G=L*G,B=L*B,L=L*w;p.e00=1-y-R;p.e01=Sa-L;p.e02=A+B;p.e10=Sa+L;p.e11=1-D-R;p.e12=C-G;p.e20=A-B;p.e21=C+G;p.e22=1-D-y;D=this.Ga;D=0==D.c?new t:D.b[--D.c];y=D.y+e.y*l;L=D.z+e.z*l;D.x=D.x+e.x*l;D.y=y;D.z=L;y=D.x*p.e10+D.y*p.e11+D.z*p.e12;L=D.x*p.e20+D.y*p.e21+D.z*p.e22;D.x=D.x*p.e00+D.y*p.e01+D.z*p.e02;D.y=y;D.z=L;y=D;L=y.y+b.y;w=y.z+b.z;y.x=y.x+b.x;y.y=L;y.z=w;1<=v&&a.line(m,D,g);v=this.Ga;if(null!=m){m.Z();if(v.c==v.b.length){y=Array(v.c<<1);L=0;for(w=v.c;L<w;)R=L++,y[R]=v.b[R],v.b[R]=null;v.b=y}v.b[v.c++]=m}m=D;k+=.39269908169872375}a=this.Ga;if(null!=n){n.Z();if(a.c==a.b.length){b=Array(a.c<<1);e=0;for(c=a.c;e<c;)d=e++,b[d]=a.b[d],a.b[d]=null;a.b=b}a.b[a.c++]=n}n=this.Ga;if(null!=q){q.x=0;q.y=0;q.z=0;q.w=1;if(n.ee==n.Wd.length){a=Array(n.ee<<1);b=0;for(e=n.ee;b<e;)c=b++,a[c]=n.Wd[c],n.Wd[c]=null;n.Wd=a}n.Wd[n.ee++]=q}q=this.Ga;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(q.eb==q.bb.length){n=Array(q.eb<<1);a=0;for(b=q.eb;a<b;)e=a++,n[e]=q.bb[e],q.bb[e]=null;q.bb=n}q.bb[q.eb++]=p}p=this.Ga;if(null!=m){m.Z();if(p.c==p.b.length){q=Array(p.c<<1);n=0;for(a=p.c;n<a;)b=n++,q[b]=p.b[b],p.b[b]=null;p.b=q}p.b[p.c++]=m}},pe:function(a){0<this.Sh.dt&&(this.Sh.dtRatio=a/this.Sh.dt);this.Sh.dt=a;this.Sh.invDt=1/a;a=(new Date).getTime()/1E3;this.gl();this.en();Ad.totalTime=1E3*((new Date).getTime()/1E3-a)},cb:function(a){if(null!=a.oc)throw Error("A rigid body cannot belong to multiple worlds.");null==this.uf?this.uf=a:(this.Ei.M=a,a.ia=this.Ei);this.Ei=a;a.oc=this;for(a=a.Dc;null!=a;){var b=a.M;a.tb=this.jc.Vh(a,a.u);a.Cc=this.Xl++;this.zg++;a=b}this.jj++},qe:function(a){if(a.oc!=this)throw Error("The rigid body doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.uf&&(this.uf=this.uf.M);a==this.Ei&&(this.Ei=this.Ei.ia);a.M=null;a.ia=null;a.oc=null;for(a=a.Dc;null!=a;){b=a.M;this.jc.Wh(a.tb);a.tb=null;a.Cc=-1;for(var c=a.Yb.Ob;null!=c;){var e=c.M,d=c.Zd;if(d.Zb==a||d.$b==a){c=c.Qc;c.Gb=!1;c.yb=0;var c=this.Kh,f=d.ia,h=d.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d==c.zd&&(c.zd=c.zd.M);d==c.ye&&(c.ye=c.ye.ia);d.M=null;d.ia=null;d.Td&&(f=d.Zb.yd,h=d.$b.yd,f==h&&(h=null),null!=f&&f.endContact(d),null!=h&&h.endContact(d));f=d.rb.ia;h=d.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d.rb==d.C.Ob&&(d.C.Ob=d.C.Ob.M);d.rb==d.C.kc&&(d.C.kc=d.C.kc.ia);d.rb.M=null;d.rb.ia=null;f=d.sb.ia;h=d.sb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d.sb==d.D.Ob&&(d.D.Ob=d.D.Ob.M);d.sb==d.D.kc&&(d.D.kc=d.D.kc.ia);d.sb.M=null;d.sb.ia=null;d.C.Ae--;d.D.Ae--;d.rb.Qc=null;d.sb.Qc=null;d.rb.Zd=null;d.sb.Zd=null;d.Zb=null;d.$b=null;d.C=null;d.D=null;d.Td=!1;d.$i.Xe();d.Ja.Xe();d.Lh=null;f=d.Ye;f.Zb=null;f.$b=null;f.C=null;f.D=null;f.pj=null;f.qj=null;d.M=c.lg;c.lg=d;c.Bi--}c=e}this.zg--;a=b}this.jj--},ua:function(a){if(null!=a.oc)throw Error("A joint cannot belong to multiple worlds.");null==this.Ph?this.Ph=a:(this.zi.M=a,a.ia=this.zi);this.zi=a;a.oc=this;a.rb.Qc=a.D;a.sb.Qc=a.C;null==a.C.ze?a.C.ze=a.rb:(a.C.Ze.M=a.rb,a.rb.ia=a.C.Ze);a.C.Ze=a.rb;null==a.D.ze?a.D.ze=a.sb:(a.D.Ze.M=a.sb,a.sb.ia=a.D.Ze);a.D.Ze=a.sb;a.C.kh++;a.D.kh++;var b=a.C;b.Gb=!1;b.yb=0;b=a.D;b.Gb=!1;b.yb=0;a.hd();this.Sk++},Kl:function(a){if(a.oc!=this)throw Error("The joint doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Ph&&(this.Ph=this.Ph.M);a==this.zi&&(this.zi=this.zi.ia);a.M=null;a.ia=null;a.oc=null;b=a.rb.ia;e=a.rb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.rb==a.C.ze&&(a.C.ze=a.C.ze.M);a.rb==a.C.Ze&&(a.C.Ze=a.C.Ze.ia);a.rb.M=null;a.rb.ia=null;b=a.sb.ia;e=a.sb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.sb==a.D.ze&&(a.D.ze=a.D.ze.M);a.sb==a.D.Ze&&(a.D.Ze=a.D.Ze.ia);a.sb.M=null;a.sb.ia=null;a.rb.Qc=null;a.sb.Qc=null;a.C.kh--;a.D.kh--;b=a.C;b.Gb=!1;b.yb=0;a=a.D;a.Gb=!1;a.yb=0;this.Sk--},re:function(a){this.ni=a},qc:function(){return this.ni},Hb:function(){null!=this.ni&&(2==this.jc.Lb&&this.Zm(this.ni,this.jc.ge),this.bn(this.ni),this.$m(this.ni))},Vd:function(a,b,e){var c=this.gk.vj;c.x=a.x;c.y=a.y;c.z=a.z;c=this.gk.end;c.x=b.x;c.y=b.y;c.z=b.z;this.gk.xj=e;this.jc.Vd(a,b,this.gk)},Bf:function(a,b,e,c){this.aj.em=a;var d=this.aj.vj;d.v=b.v;d.A=b.A;d.B=b.B;d.o=b.o;d.f=b.f;d.h=b.h;d.i=b.i;d.m=b.m;d.j=b.j;d.l=b.l;d.g=b.g;d.s=b.s;d=this.aj.eg;d.x=e.x;d.y=e.y;d.z=e.z;this.aj.xj=c;this.jc.Bf(a,b,e,this.aj)},qh:function(a,b){this.yk.u.de(a);this.yk.Ql=b;this.jc.qh(a,this.yk)},fd:function(){return this.uf},vc:function(){return this.Ph},Mb:function(){return this.jc},pc:function(){return this.Kh},Kc:function(){return this.jj},Ec:function(){return this.Sk},Yd:function(){return this.zg},Ac:function(){return this.ek},Lc:function(){return this.Uk},ue:function(a){this.Uk=a},Jc:function(){return this.Tk},te:function(a){this.Tk=a},uc:function(){return this.Fk},se:function(a){var b=this.Fk;b.x=a.x;b.y=a.y;b.z=a.z}};hl.ua=Mc;hl.prototype=cb(Mc.prototype,{process:function(a){a=a.userData;a.Kb.Vd(this.vj,this.end,a.a,this.Mi)&&this.xj.process(a,this.Mi)}});gl.ua=Mc;gl.prototype=cb(Mc.prototype,{process:function(a){a=a.userData;var b=a.Kb.Lb;0>b||5<b||ec.cb.Bf(this.em,a.Kb,this.vj,a.a,this.eg,this.Z,this.Mi)&&this.xj.process(a,this.Mi)}});Wj.ua=Mc;Wj.prototype=cb(Mc.prototype,{process:function(a){a=a.userData;var b=a.u;b.ma<this.u.ja&&b.ja>this.u.ma&&b.na<this.u.ka&&b.ka>this.u.na&&b.oa<this.u.la&&b.la>this.u.oa&&this.Ql.process(a)}});yl.prototype={process:function(){}};fl.prototype={beginContact:function(){},preSolve:function(){},postSolve:function(){},endContact:function(){}};ej.prototype={process:function(){}};hf.ua=ej;hf.prototype=cb(ej.prototype,{clear:function(){this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1},process:function(a,b){if(b.fraction<this.fraction){this.shape=a;this.hit=!0;this.fraction=b.fraction;a=this.position;var e=b.position;a.x=e.x;a.y=e.y;a.z=e.z;a=this.normal;b=b.normal;a.x=b.x;a.y=b.y;a.z=b.z}}});gf.prototype={aabb:function(a,b,e){var c=this.p,d=(0==c.c?new t:c.b[--c.c]).za(a.x,a.y,a.z),c=this.p,f=(0==c.c?new t:c.b[--c.c]).za(a.x,a.y,b.z),c=this.p,h=(0==c.c?new t:c.b[--c.c]).za(a.x,b.y,a.z),c=this.p,l=(0==c.c?new t:c.b[--c.c]).za(a.x,b.y,b.z),c=this.p,g=(0==c.c?new t:c.b[--c.c]).za(b.x,a.y,a.z),c=this.p,c=(0==c.c?new t:c.b[--c.c]).za(b.x,a.y,b.z),k=this.p;a=(0==k.c?new t:k.b[--k.c]).za(b.x,b.y,a.z);k=this.p;b=(0==k.c?new t:k.b[--k.c]).za(b.x,b.y,b.z);this.line(d,f,e);this.line(h,l,e);this.line(g,c,e);this.line(a,b,e);this.line(d,h,e);this.line(f,l,e);this.line(g,a,e);this.line(c,b,e);this.line(d,g,e);this.line(f,c,e);this.line(h,a,e);this.line(l,b,e);e=this.p;if(null!=d){d.Z();if(e.c==e.b.length){for(var k=Array(e.c<<1),m=0,n=e.c;m<n;){var q=m++;k[q]=e.b[q];e.b[q]=null}e.b=k}e.b[e.c++]=d}d=this.p;if(null!=f){f.Z();if(d.c==d.b.length){e=Array(d.c<<1);k=0;for(m=d.c;k<m;)n=k++,e[n]=d.b[n],d.b[n]=null;d.b=e}d.b[d.c++]=f}f=this.p;if(null!=h){h.Z();if(f.c==f.b.length){d=Array(f.c<<1);e=0;for(k=f.c;e<k;)m=e++,d[m]=f.b[m],f.b[m]=null;f.b=d}f.b[f.c++]=h}h=this.p;if(null!=l){l.Z();if(h.c==h.b.length){f=Array(h.c<<1);d=0;for(e=h.c;d<e;)k=d++,f[k]=h.b[k],h.b[k]=null;h.b=f}h.b[h.c++]=l}l=this.p;if(null!=g){g.Z();if(l.c==l.b.length){h=Array(l.c<<1);f=0;for(d=l.c;f<d;)e=f++,h[e]=l.b[e],l.b[e]=null;l.b=h}l.b[l.c++]=g}g=this.p;if(null!=c){c.Z();if(g.c==g.b.length){l=Array(g.c<<1);h=0;for(f=g.c;h<f;)d=h++,l[d]=g.b[d],g.b[d]=null;g.b=l}g.b[g.c++]=c}c=this.p;if(null!=a){a.Z();if(c.c==c.b.length){g=Array(c.c<<1);l=0;for(h=c.c;l<h;)f=l++,g[f]=c.b[f],c.b[f]=null;c.b=g}c.b[c.c++]=a}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){c=Array(a.c<<1);g=0;for(l=a.c;g<l;)h=g++,c[h]=a.b[h],a.b[h]=null;a.b=c}a.b[a.c++]=b}},basis:function(a,b,e,c,d){var f=this.p,h=0==f.c?new t:f.b[--f.c],f=this.p,l=0==f.eb?new E:f.bb[--f.eb],f=this.p,g=0==f.c?new t:f.b[--f.c],f=this.p,k=0==f.c?new t:f.b[--f.c],f=this.p,f=0==f.c?new t:f.b[--f.c];h.x=a.v;h.y=a.A;h.z=a.B;l.e00=a.o;l.e01=a.f;l.e02=a.h;l.e10=a.i;l.e11=a.m;l.e12=a.j;l.e20=a.l;l.e21=a.g;l.e22=a.s;g.za(l.e00,l.e10,l.e20);k.za(l.e01,l.e11,l.e21);f.za(l.e02,l.e12,l.e22);a=g.y*b;var m=g.z*b;g.x=g.x*b;g.y=a;g.z=m;a=g.y+h.y;m=g.z+h.z;g.x+=h.x;g.y=a;g.z=m;a=k.y*b;m=k.z*b;k.x=k.x*b;k.y=a;k.z=m;a=k.y+h.y;m=k.z+h.z;k.x+=h.x;k.y=a;k.z=m;a=f.y*b;m=f.z*b;f.x=f.x*b;f.y=a;f.z=m;b=f.y+h.y;a=f.z+h.z;f.x+=h.x;f.y=b;f.z=a;this.line(h,g,e);this.line(h,k,c);this.line(h,f,d);e=this.p;if(null!=h){h.Z();if(e.c==e.b.length){c=Array(e.c<<1);d=0;for(b=e.c;d<b;)a=d++,c[a]=e.b[a],e.b[a]=null;e.b=c}e.b[e.c++]=h}h=this.p;if(null!=l){l.e00=1;l.e01=0;l.e02=0;l.e10=0;l.e11=1;l.e12=0;l.e20=0;l.e21=0;l.e22=1;if(h.eb==h.bb.length){e=Array(h.eb<<1);c=0;for(d=h.eb;c<d;)b=c++,e[b]=h.bb[b],h.bb[b]=null;h.bb=e}h.bb[h.eb++]=l}l=this.p;if(null!=g){g.Z();if(l.c==l.b.length){h=Array(l.c<<1);e=0;for(c=l.c;e<c;)d=e++,h[d]=l.b[d],l.b[d]=null;l.b=h}l.b[l.c++]=g}g=this.p;if(null!=k){k.Z();if(g.c==g.b.length){l=Array(g.c<<1);h=0;for(e=g.c;h<e;)c=h++,l[c]=g.b[c],g.b[c]=null;g.b=l}g.b[g.c++]=k}k=this.p;if(null!=f){f.Z();if(k.c==k.b.length){g=Array(k.c<<1);l=0;for(h=k.c;l<h;)e=l++,g[e]=k.b[e],k.b[e]=null;k.b=g}k.b[k.c++]=f}},ellipse:function(a,b,e,c,d,f){this.arc(a,b,e,c,d,0,6.28318530717958,!1,f)},arc:function(a,b,e,c,d,f,h,l,g){var k=this.p,k=0==k.c?new t:k.b[--k.c];k.x=b.x;k.y=b.y;k.z=b.z;b=k.y*c;var m=k.z*c;k.x=k.x*c;k.y=b;k.z=m;b=k;c=this.p;c=0==c.c?new t:c.b[--c.c];c.x=e.x;c.y=e.y;c.z=e.z;e=c.y*d;k=c.z*d;c.x=c.x*d;c.y=e;c.z=k;e=c;d=h-f;0>d&&(d=-d);(k=d/.5235987755982984+.5|0)||(k=1);d=f;f=(h-f)/k;h=this.p;h=0==h.c?new t:h.b[--h.c];h.x=a.x;h.y=a.y;h.z=a.z;c=Math.cos(d);var m=h.y+b.y*c,n=h.z+b.z*c;h.x+=b.x*c;h.y=m;h.z=n;c=Math.sin(d);m=h.y+e.y*c;n=h.z+e.z*c;h.x+=e.x*c;h.y=m;h.z=n;l&&this.line(a,h,g);for(c=0;c<k;){c++;d+=f;m=this.p;m=0==m.c?new t:m.b[--m.c];m.x=a.x;m.y=a.y;m.z=a.z;var n=Math.cos(d),q=m.y+b.y*n,p=m.z+b.z*n;m.x=m.x+b.x*n;m.y=q;m.z=p;n=Math.sin(d);q=m.y+e.y*n;p=m.z+e.z*n;m.x=m.x+e.x*n;m.y=q;m.z=p;this.line(h,m,g);n=this.p;if(null!=h){h.Z();if(n.c==n.b.length){for(var q=Array(n.c<<1),p=0,r=n.c;p<r;){var v=p++;q[v]=n.b[v];n.b[v]=null}n.b=q}n.b[n.c++]=h}h=m}l&&this.line(a,h,g);a=this.p;if(null!=h){h.Z();if(a.c==a.b.length){l=Array(a.c<<1);g=0;for(d=a.c;g<d;)f=g++,l[f]=a.b[f],a.b[f]=null;a.b=l}a.b[a.c++]=h}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){l=Array(a.c<<1);g=0;for(d=a.c;g<d;)f=g++,l[f]=a.b[f],a.b[f]=null;a.b=l}a.b[a.c++]=b}b=this.p;if(null!=e){e.Z();if(b.c==b.b.length){a=Array(b.c<<1);l=0;for(g=b.c;l<g;)d=l++,a[d]=b.b[d],b.b[d]=null;b.b=a}b.b[b.c++]=e}},cone:function(a,b,e,c){var d=this.p,f=0==d.c?new t:d.b[--d.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.eb?new E:q.bb[--q.eb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var R=v.y+l.y*e,y=v.z+l.z*e;v.x+=l.x*e;v.y=R;v.z=y;var L=this.p,w=0==L.c?new t:L.b[--L.c];w.x=n.x;w.y=n.y;w.z=n.z;var D=-e,Sa=w.y+l.y*D,B=w.z+l.z*D;w.x+=l.x*D;w.y=Sa;w.z=B;if(this.wireframe){var C=this.p,A=0==C.c?new t:C.b[--C.c];A.x=w.x;A.y=w.y;A.z=w.z;var G=-b,I=A.y+f.y*G,J=A.z+f.z*G;A.x+=f.x*G;A.y=I;A.z=J;var u=A.y+0*k.y,O=A.z+0*k.z;A.x+=0*k.x;A.y=u;A.z=O;var V=this.p,da=0==V.c?new t:V.b[--V.c];da.x=w.x;da.y=w.y;da.z=w.z;var S=da.y+f.y*b,ta=da.z+f.z*b;da.x+=f.x*b;da.y=S;da.z=ta;var Db=da.y+0*k.y,Ia=da.z+0*k.z;da.x+=0*k.x;da.y=Db;da.z=Ia;var Da=this.p,ma=0==Da.c?new t:Da.b[--Da.c];ma.x=w.x;ma.y=w.y;ma.z=w.z;var Q=ma.y+0*f.y,Oa=ma.z+0*f.z;ma.x+=0*f.x;ma.y=Q;ma.z=Oa;var Ga=-b,Ea=ma.y+k.y*Ga,Ua=ma.z+k.z*Ga;ma.x+=k.x*Ga;ma.y=Ea;ma.z=Ua;var va=this.p,oa=0==va.c?new t:va.b[--va.c];oa.x=w.x;oa.y=w.y;oa.z=w.z;var Ya=oa.y+0*f.y,F=oa.z+0*f.z;oa.x+=0*f.x;oa.y=Ya;oa.z=F;var Qa=oa.y+k.y*b,X=oa.z+k.z*b;oa.x+=k.x*b;oa.y=Qa;oa.z=X;this.ellipse(w,f,k,b,b,c);this.line(v,A,c);this.line(v,da,c);this.line(v,ma,c);this.line(v,oa,c);var M=this.p;if(null!=A){A.Z();if(M.c==M.b.length){for(var N=Array(M.c<<1),ca=0,Y=M.c;ca<Y;){var T=ca++;N[T]=M.b[T];M.b[T]=null}M.b=N}M.b[M.c++]=A}var aa=this.p;if(null!=da){da.Z();if(aa.c==aa.b.length){for(var z=Array(aa.c<<1),fa=0,U=aa.c;fa<U;){var pa=fa++;z[pa]=aa.b[pa];aa.b[pa]=null}aa.b=z}aa.b[aa.c++]=da}var sa=this.p;if(null!=ma){ma.Z();if(sa.c==sa.b.length){for(var wa=Array(sa.c<<1),ra=0,ka=sa.c;ra<ka;){var Z=ra++;wa[Z]=sa.b[Z];sa.b[Z]=null}sa.b=wa}sa.b[sa.c++]=ma}var na=this.p;if(null!=oa){oa.Z();if(na.c==na.b.length){for(var Aa=Array(na.c<<1),ya=0,K=na.c;ya<K;){var Ba=ya++;Aa[Ba]=na.b[Ba];na.b[Ba]=null}na.b=Aa}na.b[na.c++]=oa}}else{for(var ha=1/Math.sqrt(b*b+4*e*e),ba=2*e*ha,Va=b*ha,ga=0;8>ga;){var P=ga++,za=this.Te[P],xb=this.yj[P];za.x=xb.x;za.y=xb.y;za.z=xb.z;var ja=za,Xa=ja.y*ba,Wa=ja.z*ba;ja.x=ja.x*ba;ja.y=Xa;ja.z=Wa;ja.y+=Va;var gb=this.Te[P],pb=gb.x*p.e10+gb.y*p.e11+gb.z*p.e12,ua=gb.x*p.e20+gb.y*p.e21+gb.z*p.e22;gb.x=gb.x*p.e00+gb.y*p.e01+gb.z*p.e02;gb.y=pb;gb.z=ua;var xa=this.fe[P],Fa=this.dm[P];xa.x=Fa.x;xa.y=Fa.y;xa.z=Fa.z;var fb=xa,Ha=fb.y*ba,qb=fb.z*ba;fb.x=fb.x*ba;fb.y=Ha;fb.z=qb;fb.y+=Va;var Na=this.fe[P],la=Na.x*p.e10+Na.y*p.e11+Na.z*p.e12,Ca=Na.x*p.e20+Na.y*p.e21+Na.z*p.e22;Na.x=Na.x*p.e00+Na.y*p.e01+Na.z*p.e02;Na.y=la;Na.z=Ca;var Za=this.Xd[P],Ra=this.yj[P];Za.x=Ra.x;Za.y=Ra.y;Za.z=Ra.z;var ib=Za,Lb=ib.x*p.e10+ib.y*p.e11+ib.z*p.e12,db=ib.x*p.e20+ib.y*p.e21+ib.z*p.e22;ib.x=ib.x*p.e00+ib.y*p.e01+ib.z*p.e02;ib.y=Lb;ib.z=db;var Ib=ib,kb=Ib.y*b,nb=Ib.z*b;Ib.x=Ib.x*b;Ib.y=kb;Ib.z=nb;var Yb=Ib,sc=Yb.y+n.y,$a=Yb.z+n.z;Yb.x=Yb.x+n.x;Yb.y=sc;Yb.z=$a;var Ka=this.Xd[P],vb=-e,H=Ka.y+l.y*vb,eb=Ka.z+l.z*vb;Ka.x=Ka.x+l.x*vb;Ka.y=H;Ka.z=eb}for(var lb=0;8>lb;){var yb=lb++,mb=v,ub=this.Xd[yb],x=this.Xd[(yb+1)%8],W=this.fe[yb];this.triangle(mb,ub,x,W,this.Te[yb],this.Te[(yb+1)%8],c);var mb=w,ub=this.Xd[(yb+1)%8],x=this.Xd[yb],ea=this.p,Nc=0==ea.c?new t:ea.b[--ea.c];Nc.x=l.x;Nc.y=l.y;Nc.z=l.z;var xc=Nc,Pa=-xc.y,rb=-xc.z;xc.x=-xc.x;xc.y=Pa;xc.z=rb;W=xc;this.triangle(mb,ub,x,W,W,W,c);var ob=this.p;if(null!=W){W.Z();if(ob.c==ob.b.length){for(var zb=Array(ob.c<<1),Ab=0,ia=ob.c;Ab<ia;){var Ta=Ab++;zb[Ta]=ob.b[Ta];ob.b[Ta]=null}ob.b=zb}ob.b[ob.c++]=W}}}var bb=this.p;if(null!=v){v.Z();if(bb.c==bb.b.length){for(var jb=Array(bb.c<<1),Bb=0,La=bb.c;Bb<La;){var Eb=Bb++;jb[Eb]=bb.b[Eb];bb.b[Eb]=null}bb.b=jb}bb.b[bb.c++]=v}var Ja=this.p;if(null!=w){w.Z();if(Ja.c==Ja.b.length){for(var qa=Array(Ja.c<<1),Bc=0,Mb=Ja.c;Bc<Mb;){var Sb=Bc++;qa[Sb]=Ja.b[Sb];Ja.b[Sb]=null}Ja.b=qa}Ja.b[Ja.c++]=w}var Ma=this.p;if(null!=n){n.Z();if(Ma.c==Ma.b.length){for(var ab=Array(Ma.c<<1),cb=0,Zb=Ma.c;cb<Zb;){var hb=cb++;ab[hb]=Ma.b[hb];Ma.b[hb]=null}Ma.b=ab}Ma.b[Ma.c++]=n}var tb=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(tb.eb==tb.bb.length){for(var Cb=Array(tb.eb<<1),wb=0,Ub=tb.eb;wb<Ub;){var gc=wb++;Cb[gc]=tb.bb[gc];tb.bb[gc]=null}tb.bb=Cb}tb.bb[tb.eb++]=p}var fc=this.p;if(null!=f){f.Z();if(fc.c==fc.b.length){for(var Pb=Array(fc.c<<1),cc=0,Fb=fc.c;cc<Fb;){var lc=cc++;Pb[lc]=fc.b[lc];fc.b[lc]=null}fc.b=Pb}fc.b[fc.c++]=f}var bc=this.p;if(null!=l){l.Z();if(bc.c==bc.b.length){for(var Qb=Array(bc.c<<1),dc=0,Vb=bc.c;dc<Vb;){var Nb=dc++;Qb[Nb]=bc.b[Nb];bc.b[Nb]=null}bc.b=Qb}bc.b[bc.c++]=l}var Tb=this.p;if(null!=k){k.Z();if(Tb.c==Tb.b.length){for(var sb=Array(Tb.c<<1),Jb=0,qc=Tb.c;Jb<qc;){var Hb=Jb++;sb[Hb]=Tb.b[Hb];Tb.b[Hb]=null}Tb.b=sb}Tb.b[Tb.c++]=k}},cylinder:function(a,b,e,c){var d=this.p,f=0==d.c?new t:d.b[--d.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.eb?new E:q.bb[--q.eb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var R=v.y+l.y*e,y=v.z+l.z*e;v.x+=l.x*e;v.y=R;v.z=y;var L=this.p,w=0==L.c?new t:L.b[--L.c];w.x=n.x;w.y=n.y;w.z=n.z;var D=-e,Sa=w.y+l.y*D,B=w.z+l.z*D;w.x+=l.x*D;w.y=Sa;w.z=B;if(this.wireframe){var C=this.p,A=0==C.c?new t:C.b[--C.c];A.x=v.x;A.y=v.y;A.z=v.z;var G=-b,I=A.y+f.y*G,J=A.z+f.z*G;A.x+=f.x*G;A.y=I;A.z=J;var u=A.y+0*k.y,O=A.z+0*k.z;A.x+=0*k.x;A.y=u;A.z=O;var V=this.p,da=0==V.c?new t:V.b[--V.c];da.x=v.x;da.y=v.y;da.z=v.z;var S=da.y+f.y*b,ta=da.z+f.z*b;da.x+=f.x*b;da.y=S;da.z=ta;var Db=da.y+0*k.y,Ia=da.z+0*k.z;da.x+=0*k.x;da.y=Db;da.z=Ia;var Da=this.p,ma=0==Da.c?new t:Da.b[--Da.c];ma.x=v.x;ma.y=v.y;ma.z=v.z;var Q=ma.y+0*f.y,Ja=ma.z+0*f.z;ma.x+=0*f.x;ma.y=Q;ma.z=Ja;var Ga=-b,Ea=ma.y+k.y*Ga,Ua=ma.z+k.z*Ga;ma.x+=k.x*Ga;ma.y=Ea;ma.z=Ua;var va=this.p,oa=0==va.c?new t:va.b[--va.c];oa.x=v.x;oa.y=v.y;oa.z=v.z;var Ya=oa.y+0*f.y,F=oa.z+0*f.z;oa.x+=0*f.x;oa.y=Ya;oa.z=F;var Qa=oa.y+k.y*b,X=oa.z+k.z*b;oa.x+=k.x*b;oa.y=Qa;oa.z=X;var M=this.p,N=0==M.c?new t:M.b[--M.c];N.x=w.x;N.y=w.y;N.z=w.z;var ca=-b,Y=N.y+f.y*ca,T=N.z+f.z*ca;N.x+=f.x*ca;N.y=Y;N.z=T;var aa=N.y+0*k.y,z=N.z+0*k.z;N.x+=0*k.x;N.y=aa;N.z=z;var fa=this.p,U=0==fa.c?new t:fa.b[--fa.c];U.x=w.x;U.y=w.y;U.z=w.z;var pa=U.y+f.y*b,sa=U.z+f.z*b;U.x+=f.x*b;U.y=pa;U.z=sa;var wa=U.y+0*k.y,ra=U.z+0*k.z;U.x+=0*k.x;U.y=wa;U.z=ra;var ka=this.p,Z=0==ka.c?new t:ka.b[--ka.c];Z.x=w.x;Z.y=w.y;Z.z=w.z;var na=Z.y+0*f.y,Aa=Z.z+0*f.z;Z.x+=0*f.x;Z.y=na;Z.z=Aa;var ya=-b,K=Z.y+k.y*ya,Ba=Z.z+k.z*ya;Z.x+=k.x*ya;Z.y=K;Z.z=Ba;var ha=this.p,ba=0==ha.c?new t:ha.b[--ha.c];ba.x=w.x;ba.y=w.y;ba.z=w.z;var Va=ba.y+0*f.y,ga=ba.z+0*f.z;ba.x+=0*f.x;ba.y=Va;ba.z=ga;var P=ba.y+k.y*b,za=ba.z+k.z*b;ba.x+=k.x*b;ba.y=P;ba.z=za;this.ellipse(v,f,k,b,b,c);this.ellipse(w,f,k,b,b,c);this.line(A,N,c);this.line(da,U,c);this.line(ma,Z,c);this.line(oa,ba,c);var xb=this.p;if(null!=A){A.Z();if(xb.c==xb.b.length){for(var ja=Array(xb.c<<1),Ma=0,Oa=xb.c;Ma<Oa;){var gb=Ma++;ja[gb]=xb.b[gb];xb.b[gb]=null}xb.b=ja}xb.b[xb.c++]=A}var pb=this.p;if(null!=da){da.Z();if(pb.c==pb.b.length){for(var ua=Array(pb.c<<1),xa=0,Fa=pb.c;xa<Fa;){var fb=xa++;ua[fb]=pb.b[fb];pb.b[fb]=null}pb.b=ua}pb.b[pb.c++]=da}var Ha=this.p;if(null!=ma){ma.Z();if(Ha.c==Ha.b.length){for(var qb=Array(Ha.c<<1),Na=0,la=Ha.c;Na<la;){var Ca=Na++;qb[Ca]=Ha.b[Ca];Ha.b[Ca]=null}Ha.b=qb}Ha.b[Ha.c++]=ma}var Za=this.p;if(null!=oa){oa.Z();if(Za.c==Za.b.length){for(var Ra=Array(Za.c<<1),ib=0,Lb=Za.c;ib<Lb;){var db=ib++;Ra[db]=Za.b[db];Za.b[db]=null}Za.b=Ra}Za.b[Za.c++]=oa}var Ib=this.p;if(null!=N){N.Z();if(Ib.c==Ib.b.length){for(var kb=Array(Ib.c<<1),nb=0,Yb=Ib.c;nb<Yb;){var sc=nb++;kb[sc]=Ib.b[sc];Ib.b[sc]=null}Ib.b=kb}Ib.b[Ib.c++]=N}var $a=this.p;if(null!=U){U.Z();if($a.c==$a.b.length){for(var Ka=Array($a.c<<1),vb=0,H=$a.c;vb<H;){var eb=vb++;Ka[eb]=$a.b[eb];$a.b[eb]=null}$a.b=Ka}$a.b[$a.c++]=U}var lb=this.p;if(null!=Z){Z.Z();if(lb.c==lb.b.length){for(var yb=Array(lb.c<<1),mb=0,ub=lb.c;mb<ub;){var x=mb++;yb[x]=lb.b[x];lb.b[x]=null}lb.b=yb}lb.b[lb.c++]=Z}var W=this.p;if(null!=ba){ba.Z();if(W.c==W.b.length){for(var ea=Array(W.c<<1),Xa=0,xc=W.c;Xa<xc;){var Pa=Xa++;ea[Pa]=W.b[Pa];W.b[Pa]=null}W.b=ea}W.b[W.c++]=ba}}else{for(var rb=0;8>rb;){var ob=rb++,zb=this.Te[ob],Ab=this.yj[ob];zb.x=Ab.x;zb.y=Ab.y;zb.z=Ab.z;var ia=zb,Ta=ia.x*p.e10+ia.y*p.e11+ia.z*p.e12,bb=ia.x*p.e20+ia.y*p.e21+ia.z*p.e22;ia.x=ia.x*p.e00+ia.y*p.e01+ia.z*p.e02;ia.y=Ta;ia.z=bb;var jb=this.fe[ob],Bb=this.Te[ob];jb.x=Bb.x;jb.y=Bb.y;jb.z=Bb.z;var La=jb,Eb=La.y*b,Wa=La.z*b;La.x=La.x*b;La.y=Eb;La.z=Wa;var qa=La,Bc=qa.y+n.y,Mb=qa.z+n.z;qa.x=qa.x+n.x;qa.y=Bc;qa.z=Mb;var Sb=this.Xd[ob],ab=this.fe[ob];Sb.x=ab.x;Sb.y=ab.y;Sb.z=ab.z;var cb=this.fe[ob],tb=cb.y+l.y*e,Zb=cb.z+l.z*e;cb.x=cb.x+l.x*e;cb.y=tb;cb.z=Zb;var hb=this.Xd[ob],Cb=-e,wb=hb.y+l.y*Cb,Hb=hb.z+l.z*Cb;hb.x=hb.x+l.x*Cb;hb.y=wb;hb.z=Hb}for(var Ub=0;8>Ub;){var gc=Ub++,fc=v,Pb=this.fe[gc],cc=this.fe[(gc+1)%8],Fb=l;this.triangle(fc,Pb,cc,Fb,Fb,Fb,c);var fc=w,Pb=this.Xd[(gc+1)%8],cc=this.Xd[gc],lc=this.p,bc=0==lc.c?new t:lc.b[--lc.c];bc.x=l.x;bc.y=l.y;bc.z=l.z;var Qb=bc,dc=-Qb.y,Vb=-Qb.z;Qb.x=-Qb.x;Qb.y=dc;Qb.z=Vb;Fb=Qb;this.triangle(fc,Pb,cc,Fb,Fb,Fb,c);var Nb=this.p;if(null!=Fb){Fb.Z();if(Nb.c==Nb.b.length){for(var Tb=Array(Nb.c<<1),sb=0,Jb=Nb.c;sb<Jb;){var qc=sb++;Tb[qc]=Nb.b[qc];Nb.b[qc]=null}Nb.b=Tb}Nb.b[Nb.c++]=Fb}var fc=this.fe[gc],Pb=this.Xd[gc],cc=this.Xd[(gc+1)%8],Ob=this.fe[(gc+1)%8],Fb=this.Te[gc],Zc=this.Te[(gc+1)%8];this.rect(fc,Pb,cc,Ob,Fb,Fb,Zc,Zc,c)}}var jc=this.p;if(null!=v){v.Z();if(jc.c==jc.b.length){for(var Hc=Array(jc.c<<1),pc=0,Kb=jc.c;pc<Kb;){var $c=pc++;Hc[$c]=jc.b[$c];jc.b[$c]=null}jc.b=Hc}jc.b[jc.c++]=v}var tc=this.p;if(null!=w){w.Z();if(tc.c==tc.b.length){for(var $b=Array(tc.c<<1),Yc=0,mc=tc.c;Yc<mc;){var kc=Yc++;$b[kc]=tc.b[kc];tc.b[kc]=null}tc.b=$b}tc.b[tc.c++]=w}var Cc=this.p;if(null!=n){n.Z();if(Cc.c==Cc.b.length){for(var ic=Array(Cc.c<<1),wc=0,nc=Cc.c;wc<nc;){var Wb=wc++;ic[Wb]=Cc.b[Wb];Cc.b[Wb]=null}Cc.b=ic}Cc.b[Cc.c++]=n}var Xb=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Xb.eb==Xb.bb.length){for(var Rb=Array(Xb.eb<<1),Dd=0,ec=Xb.eb;Dd<ec;){var Oc=Dd++;Rb[Oc]=Xb.bb[Oc];Xb.bb[Oc]=null}Xb.bb=Rb}Xb.bb[Xb.eb++]=p}var ac=this.p;if(null!=f){f.Z();if(ac.c==ac.b.length){for(var vc=Array(ac.c<<1),Ec=0,hc=ac.c;Ec<hc;){var rc=Ec++;vc[rc]=ac.b[rc];ac.b[rc]=null}ac.b=vc}ac.b[ac.c++]=f}var oc=this.p;if(null!=l){l.Z();if(oc.c==oc.b.length){for(var Gc=Array(oc.c<<1),Pc=0,Tc=oc.c;Pc<Tc;){var ad=Pc++;Gc[ad]=oc.b[ad];oc.b[ad]=null}oc.b=Gc}oc.b[oc.c++]=l}var Wd=this.p;if(null!=k){k.Z();if(Wd.c==Wd.b.length){for(var fd=Array(Wd.c<<1),Uc=0,Mc=Wd.c;Uc<Mc;){var Xc=Uc++;fd[Xc]=Wd.b[Xc];Wd.b[Xc]=null}Wd.b=fd}Wd.b[Wd.c++]=k}},capsule:function(a,b,e,c){var d=this.p,f=0==d.c?new t:d.b[--d.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.eb?new E:q.bb[--q.eb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);for(var r=this.Fh,v=this.xk,R=0;5>R;)for(var y=R++,L=0,w=this.Fh[y].length;L<w;){var D=L++,Sa=v[y][D],B=this.vk[y][D];Sa.x=B.x;Sa.y=B.y;Sa.z=B.z;var C=Sa,A=C.x*p.e10+C.y*p.e11+C.z*p.e12,G=C.x*p.e20+C.y*p.e21+C.z*p.e22;C.x=C.x*p.e00+C.y*p.e01+C.z*p.e02;C.y=A;C.z=G}for(var I=0;4>I;){var J=I++;if(!J)for(var u=0;3>u;)for(var O=u++,V=0,da=this.Fh[O].length;V<da;){var S=V++,ta=r[O][S],Db=v[O][S];ta.x=Db.x;ta.y=Db.y;ta.z=Db.z;var Ia=ta,Da=Ia.y*b,ma=Ia.z*b;Ia.x=Ia.x*b;Ia.y=Da;Ia.z=ma;var Q=Ia,Ma=Q.y+n.y,Ga=Q.z+n.z;Q.x=Q.x+n.x;Q.y=Ma;Q.z=Ga;var Ea=Q,Ua=Ea.y+l.y*e,va=Ea.z+l.z*e;Ea.x=Ea.x+l.x*e;Ea.y=Ua;Ea.z=va}if(2==J)for(var oa=2;5>oa;)for(var Ya=oa++,F=0,Qa=this.Fh[Ya].length;F<Qa;){var X=F++,M=r[Ya][X],N=v[Ya][X];M.x=N.x;M.y=N.y;M.z=N.z;var ca=M,Y=ca.y*b,T=ca.z*b;ca.x=ca.x*b;ca.y=Y;ca.z=T;var aa=ca,z=aa.y+n.y,fa=aa.z+n.z;aa.x=aa.x+n.x;aa.y=z;aa.z=fa;var U=aa,pa=-e,sa=U.y+l.y*pa,wa=U.z+l.z*pa;U.x=U.x+l.x*pa;U.y=sa;U.z=wa}for(var ra=0;8>ra;){var ka=ra++,Z,na,Aa,ya,K,Ba,ha,ba;J?3==J?this.wireframe?(Z=r[4][0],na=r[J][(ka+1)%8],Aa=r[J][ka],this.line(Z,na,c),this.line(na,Aa,c)):(Z=r[4][0],na=r[J][(ka+1)%8],Aa=r[J][ka],K=v[4][0],Ba=v[J][(ka+1)%8],ha=v[J][ka],this.triangle(Z,na,Aa,K,Ba,ha,c)):this.wireframe?(Z=r[J][ka],na=r[J][(ka+1)%8],Aa=r[J+1][ka],this.line(Z,na,c),this.line(Z,Aa,c)):(Z=r[J][ka],na=r[J][(ka+1)%8],Aa=r[J+1][ka],ya=r[J+1][(ka+1)%8],K=v[J][ka],Ba=v[J][(ka+1)%8],ha=v[J+1][ka],ba=v[J+1][(ka+1)%8],this.rect(Z,Aa,ya,na,K,ha,ba,Ba,c)):this.wireframe?(Z=r[0][0],na=r[1][ka],this.line(Z,na,c)):(Z=r[0][0],na=r[1][ka],Aa=r[1][(ka+1)%8],K=v[0][0],Ba=v[1][ka],ha=v[1][(ka+1)%8],this.triangle(Z,na,Aa,K,Ba,ha,c))}}var Va=this.p,ga=0==Va.c?new t:Va.b[--Va.c];ga.x=n.x;ga.y=n.y;ga.z=n.z;var P=ga.y+l.y*e,za=ga.z+l.z*e;ga.x+=l.x*e;ga.y=P;ga.z=za;var xb=this.p,ja=0==xb.c?new t:xb.b[--xb.c];ja.x=n.x;ja.y=n.y;ja.z=n.z;var Ja=-e,Oa=ja.y+l.y*Ja,gb=ja.z+l.z*Ja;ja.x+=l.x*Ja;ja.y=Oa;ja.z=gb;if(this.wireframe){var pb=this.p,ua=0==pb.c?new t:pb.b[--pb.c];ua.x=ga.x;ua.y=ga.y;ua.z=ga.z;var xa=-b,Fa=ua.y+f.y*xa,fb=ua.z+f.z*xa;ua.x+=f.x*xa;ua.y=Fa;ua.z=fb;var Ha=ua.y+0*k.y,qb=ua.z+0*k.z;ua.x+=0*k.x;ua.y=Ha;ua.z=qb;var Na=this.p,la=0==Na.c?new t:Na.b[--Na.c];la.x=ga.x;la.y=ga.y;la.z=ga.z;var Ca=la.y+f.y*b,Za=la.z+f.z*b;la.x+=f.x*b;la.y=Ca;la.z=Za;var Ra=la.y+0*k.y,ib=la.z+0*k.z;la.x+=0*k.x;la.y=Ra;la.z=ib;var Lb=this.p,db=0==Lb.c?new t:Lb.b[--Lb.c];db.x=ga.x;db.y=ga.y;db.z=ga.z;var Ib=db.y+0*f.y,kb=db.z+0*f.z;db.x+=0*f.x;db.y=Ib;db.z=kb;var nb=-b,Yb=db.y+k.y*nb,sc=db.z+k.z*nb;db.x+=k.x*nb;db.y=Yb;db.z=sc;var $a=this.p,Ka=0==$a.c?new t:$a.b[--$a.c];Ka.x=ga.x;Ka.y=ga.y;Ka.z=ga.z;var vb=Ka.y+0*f.y,H=Ka.z+0*f.z;Ka.x+=0*f.x;Ka.y=vb;Ka.z=H;var eb=Ka.y+k.y*b,lb=Ka.z+k.z*b;Ka.x+=k.x*b;Ka.y=eb;Ka.z=lb;var yb=this.p,mb=0==yb.c?new t:yb.b[--yb.c];mb.x=ja.x;mb.y=ja.y;mb.z=ja.z;var ub=-b,x=mb.y+f.y*ub,W=mb.z+f.z*ub;mb.x+=f.x*ub;mb.y=x;mb.z=W;var ea=mb.y+0*k.y,Xa=mb.z+0*k.z;mb.x+=0*k.x;mb.y=ea;mb.z=Xa;var xc=this.p,Pa=0==xc.c?new t:xc.b[--xc.c];Pa.x=ja.x;Pa.y=ja.y;Pa.z=ja.z;var rb=Pa.y+f.y*b,ob=Pa.z+f.z*b;Pa.x+=f.x*b;Pa.y=rb;Pa.z=ob;var zb=Pa.y+0*k.y,Ab=Pa.z+0*k.z;Pa.x+=0*k.x;Pa.y=zb;Pa.z=Ab;var ia=this.p,Ta=0==ia.c?new t:ia.b[--ia.c];Ta.x=ja.x;Ta.y=ja.y;Ta.z=ja.z;var bb=Ta.y+0*f.y,jb=Ta.z+0*f.z;Ta.x+=0*f.x;Ta.y=bb;Ta.z=jb;var Bb=-b,La=Ta.y+k.y*Bb,Eb=Ta.z+k.z*Bb;Ta.x+=k.x*Bb;Ta.y=La;Ta.z=Eb;var Wa=this.p,qa=0==Wa.c?new t:Wa.b[--Wa.c];qa.x=ja.x;qa.y=ja.y;qa.z=ja.z;var Bc=qa.y+0*f.y,Mb=qa.z+0*f.z;qa.x+=0*f.x;qa.y=Bc;qa.z=Mb;var Sb=qa.y+k.y*b,cb=qa.z+k.z*b;qa.x+=k.x*b;qa.y=Sb;qa.z=cb;this.ellipse(ga,f,k,b,b,c);this.ellipse(ja,f,k,b,b,c);this.line(ua,mb,c);this.line(la,Pa,c);this.line(db,Ta,c);this.line(Ka,qa,c);var ab=this.p;if(null!=ua){ua.Z();if(ab.c==ab.b.length){for(var hb=Array(ab.c<<1),Zb=0,tb=ab.c;Zb<tb;){var Cb=Zb++;hb[Cb]=ab.b[Cb];ab.b[Cb]=null}ab.b=hb}ab.b[ab.c++]=ua}var wb=this.p;if(null!=la){la.Z();if(wb.c==wb.b.length){for(var Hb=Array(wb.c<<1),Ub=0,gc=wb.c;Ub<gc;){var fc=Ub++;Hb[fc]=wb.b[fc];wb.b[fc]=null}wb.b=Hb}wb.b[wb.c++]=la}var Pb=this.p;if(null!=db){db.Z();if(Pb.c==Pb.b.length){for(var cc=Array(Pb.c<<1),Fb=0,lc=Pb.c;Fb<lc;){var bc=Fb++;cc[bc]=Pb.b[bc];Pb.b[bc]=null}Pb.b=cc}Pb.b[Pb.c++]=db}var Qb=this.p;if(null!=Ka){Ka.Z();if(Qb.c==Qb.b.length){for(var dc=Array(Qb.c<<1),Vb=0,Nb=Qb.c;Vb<Nb;){var Tb=Vb++;dc[Tb]=Qb.b[Tb];Qb.b[Tb]=null}Qb.b=dc}Qb.b[Qb.c++]=Ka}var sb=this.p;if(null!=mb){mb.Z();if(sb.c==sb.b.length){for(var Jb=Array(sb.c<<1),qc=0,Ob=sb.c;qc<Ob;){var Zc=qc++;Jb[Zc]=sb.b[Zc];sb.b[Zc]=null}sb.b=Jb}sb.b[sb.c++]=mb}var jc=this.p;if(null!=Pa){Pa.Z();if(jc.c==jc.b.length){for(var Hc=Array(jc.c<<1),pc=0,Xb=jc.c;pc<Xb;){var $c=pc++;Hc[$c]=jc.b[$c];jc.b[$c]=null}jc.b=Hc}jc.b[jc.c++]=Pa}var tc=this.p;if(null!=Ta){Ta.Z();if(tc.c==tc.b.length){for(var ac=Array(tc.c<<1),Yc=0,Kb=tc.c;Yc<Kb;){var $b=Yc++;ac[$b]=tc.b[$b];tc.b[$b]=null}tc.b=ac}tc.b[tc.c++]=Ta}var Cc=this.p;if(null!=qa){qa.Z();if(Cc.c==Cc.b.length){for(var kc=Array(Cc.c<<1),wc=0,oc=Cc.c;wc<oc;){var ic=wc++;kc[ic]=Cc.b[ic];Cc.b[ic]=null}Cc.b=kc}Cc.b[Cc.c++]=qa}}else{for(var mc=0;8>mc;){var Wb=mc++,nc=this.Te[Wb],Rb=this.yj[Wb];nc.x=Rb.x;nc.y=Rb.y;nc.z=Rb.z;var Oc=nc,ec=Oc.x*p.e10+Oc.y*p.e11+Oc.z*p.e12,vc=Oc.x*p.e20+Oc.y*p.e21+Oc.z*p.e22;Oc.x=Oc.x*p.e00+Oc.y*p.e01+Oc.z*p.e02;Oc.y=ec;Oc.z=vc;var Ec=this.fe[Wb],rc=this.Te[Wb];Ec.x=rc.x;Ec.y=rc.y;Ec.z=rc.z;var hc=Ec,Gc=hc.y*b,Tc=hc.z*b;hc.x=hc.x*b;hc.y=Gc;hc.z=Tc;var Pc=hc,ad=Pc.y+n.y,fd=Pc.z+n.z;Pc.x=Pc.x+n.x;Pc.y=ad;Pc.z=fd;var Xc=this.Xd[Wb],Uc=this.fe[Wb];Xc.x=Uc.x;Xc.y=Uc.y;Xc.z=Uc.z;var Mc=this.fe[Wb],zd=Mc.y+l.y*e,Ad=Mc.z+l.z*e;Mc.x=Mc.x+l.x*e;Mc.y=zd;Mc.z=Ad;var ed=this.Xd[Wb],yd=-e,Ud=ed.y+l.y*yd,Wc=ed.z+l.z*yd;ed.x=ed.x+l.x*yd;ed.y=Ud;ed.z=Wc}for(var Qc=0;8>Qc;){var Dc=Qc++,Lc=this.Te[Dc],yc=this.Te[(Dc+1)%8];this.rect(this.fe[Dc],this.Xd[Dc],this.Xd[(Dc+1)%8],this.fe[(Dc+1)%8],Lc,Lc,yc,yc,c)}}var uc=this.p;if(null!=ga){ga.Z();if(uc.c==uc.b.length){for(var sd=Array(uc.c<<1),Sd=0,be=uc.c;Sd<be;){var Xd=Sd++;sd[Xd]=uc.b[Xd];uc.b[Xd]=null}uc.b=sd}uc.b[uc.c++]=ga}var od=this.p;if(null!=ja){ja.Z();if(od.c==od.b.length){for(var Hd=Array(od.c<<1),ne=0,de=od.c;ne<de;){var Rd=ne++;Hd[Rd]=od.b[Rd];od.b[Rd]=null}od.b=Hd}od.b[od.c++]=ja}var rd=this.p;if(null!=n){n.Z();if(rd.c==rd.b.length){for(var oe=Array(rd.c<<1),pe=0,qe=rd.c;pe<qe;){var re=pe++;oe[re]=rd.b[re];rd.b[re]=null}rd.b=oe}rd.b[rd.c++]=n}var td=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(td.eb==td.bb.length){for(var se=Array(td.eb<<1),ce=0,ke=td.eb;ce<ke;){var Td=ce++;se[Td]=td.bb[Td];td.bb[Td]=null}td.bb=se}td.bb[td.eb++]=p}var Rc=this.p;if(null!=f){f.Z();if(Rc.c==Rc.b.length){for(var md=Array(Rc.c<<1),pd=0,le=Rc.c;pd<le;){var Vd=pd++;md[Vd]=Rc.b[Vd];Rc.b[Vd]=null}Rc.b=md}Rc.b[Rc.c++]=f}var cd=this.p;if(null!=l){l.Z();if(cd.c==cd.b.length){for(var dd=Array(cd.c<<1),gd=0,Fc=cd.c;gd<Fc;){var Ac=gd++;dd[Ac]=cd.b[Ac];cd.b[Ac]=null}cd.b=dd}cd.b[cd.c++]=l}var zc=this.p;if(null!=k){k.Z();if(zc.c==zc.b.length){for(var Yd=Array(zc.c<<1),ee=0,me=zc.c;ee<me;){var Ed=ee++;Yd[Ed]=zc.b[Ed];zc.b[Ed]=null}zc.b=Yd}zc.b[zc.c++]=k}},sphere:function(a,b,e){var c=this.p,d=0==c.c?new t:c.b[--c.c],c=this.p,c=0==c.eb?new E:c.bb[--c.eb];d.x=a.v;d.y=a.A;d.z=a.B;c.e00=a.o;c.e01=a.f;c.e02=a.h;c.e10=a.i;c.e11=a.m;c.e12=a.j;c.e20=a.l;c.e21=a.g;c.e22=a.s;a=this.Fh;for(var f=this.xk,h=0;5>h;)for(var l=h++,g=0,k=this.Fh[l].length;g<k;){var m=g++,n=f[l][m],q=this.vk[l][m];n.x=q.x;n.y=q.y;n.z=q.z;var q=n.x*c.e10+n.y*c.e11+n.z*c.e12,p=n.x*c.e20+n.y*c.e21+n.z*c.e22;n.x=n.x*c.e00+n.y*c.e01+n.z*c.e02;n.y=q;n.z=p;n=a[l][m];m=f[l][m];n.x=m.x;n.y=m.y;n.z=m.z;m=n;n=m.y*b;q=m.z*b;m.x=m.x*b;m.y=n;m.z=q;n=m.y+d.y;q=m.z+d.z;m.x=m.x+d.x;m.y=n;m.z=q}for(b=0;4>b;)for(h=b++,l=0;8>l;){var r=l++,v;h?3==h?this.wireframe?(g=a[4][0],k=a[h][(r+1)%8],m=a[h][r],this.line(g,k,e),this.line(k,m,e)):(g=a[4][0],k=a[h][(r+1)%8],m=a[h][r],q=f[4][0],p=f[h][(r+1)%8],v=f[h][r],this.triangle(g,k,m,q,p,v,e)):this.wireframe?(g=a[h][r],k=a[h][(r+1)%8],m=a[h+1][r],this.line(g,k,e),this.line(g,m,e)):(g=a[h][r],k=a[h][(r+1)%8],m=a[h+1][r],n=a[h+1][(r+1)%8],q=f[h][r],p=f[h][(r+1)%8],v=f[h+1][r],r=f[h+1][(r+1)%8],this.rect(g,m,n,k,q,v,r,p,e)):this.wireframe?(g=a[0][0],k=a[1][r],this.line(g,k,e)):(g=a[0][0],k=a[1][r],m=a[1][(r+1)%8],q=f[0][0],p=f[1][r],v=f[1][(r+1)%8],this.triangle(g,k,m,q,p,v,e))}e=this.p;if(null!=d){d.Z();if(e.c==e.b.length){a=Array(e.c<<1);f=0;for(b=e.c;f<b;)h=f++,a[h]=e.b[h],e.b[h]=null;e.b=a}e.b[e.c++]=d}d=this.p;if(null!=c){c.e00=1;c.e01=0;c.e02=0;c.e10=0;c.e11=1;c.e12=0;c.e20=0;c.e21=0;c.e22=1;if(d.eb==d.bb.length){e=Array(d.eb<<1);a=0;for(f=d.eb;a<f;)b=a++,e[b]=d.bb[b],d.bb[b]=null;d.bb=e}d.bb[d.eb++]=c}},box:function(a,b,e){var c=this.p,d=0==c.c?new t:c.b[--c.c],f=this.p,h=0==f.c?new t:f.b[--f.c],l=this.p,g=0==l.c?new t:l.b[--l.c],k=this.p,m=0==k.c?new t:k.b[--k.c],n=this.p,q=0==n.eb?new E:n.bb[--n.eb];m.x=a.v;m.y=a.A;m.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;d.za(q.e00,q.e10,q.e20);h.za(q.e01,q.e11,q.e21);g.za(q.e02,q.e12,q.e22);var p=b.x,r=b.y,v=b.z,R=this.p,y=0==R.c?new t:R.b[--R.c];y.x=m.x;y.y=m.y;y.z=m.z;var L=-p,w=y.y+d.y*L,D=y.z+d.z*L;y.x+=d.x*L;y.y=w;y.z=D;var Sa=-r,B=y.y+h.y*Sa,C=y.z+h.z*Sa;y.x+=h.x*Sa;y.y=B;y.z=C;var A=-v,G=y.y+g.y*A,I=y.z+g.z*A;y.x+=g.x*A;y.y=G;y.z=I;var J=this.p,u=0==J.c?new t:J.b[--J.c];u.x=m.x;u.y=m.y;u.z=m.z;var O=-p,V=u.y+d.y*O,da=u.z+d.z*O;u.x+=d.x*O;u.y=V;u.z=da;var S=-r,ta=u.y+h.y*S,Db=u.z+h.z*S;u.x+=h.x*S;u.y=ta;u.z=Db;var Ia=u.y+g.y*v,Da=u.z+g.z*v;u.x+=g.x*v;u.y=Ia;u.z=Da;var ma=this.p,Q=0==ma.c?new t:ma.b[--ma.c];Q.x=m.x;Q.y=m.y;Q.z=m.z;var Ja=-p,Ga=Q.y+d.y*Ja,Ea=Q.z+d.z*Ja;Q.x+=d.x*Ja;Q.y=Ga;Q.z=Ea;var Ua=Q.y+h.y*r,va=Q.z+h.z*r;Q.x+=h.x*r;Q.y=Ua;Q.z=va;var oa=-v,Ya=Q.y+g.y*oa,F=Q.z+g.z*oa;Q.x+=g.x*oa;Q.y=Ya;Q.z=F;var Qa=this.p,X=0==Qa.c?new t:Qa.b[--Qa.c];X.x=m.x;X.y=m.y;X.z=m.z;var M=-p,N=X.y+d.y*M,ca=X.z+d.z*M;X.x+=d.x*M;X.y=N;X.z=ca;var Y=X.y+h.y*r,T=X.z+h.z*r;X.x+=h.x*r;X.y=Y;X.z=T;var aa=X.y+g.y*v,z=X.z+g.z*v;X.x+=g.x*v;X.y=aa;X.z=z;var fa=this.p,U=0==fa.c?new t:fa.b[--fa.c];U.x=m.x;U.y=m.y;U.z=m.z;var pa=U.y+d.y*p,sa=U.z+d.z*p;U.x+=d.x*p;U.y=pa;U.z=sa;var wa=-r,ra=U.y+h.y*wa,ka=U.z+h.z*wa;U.x+=h.x*wa;U.y=ra;U.z=ka;var Z=-v,na=U.y+g.y*Z,Aa=U.z+g.z*Z;U.x+=g.x*Z;U.y=na;U.z=Aa;var ya=this.p,K=0==ya.c?new t:ya.b[--ya.c];K.x=m.x;K.y=m.y;K.z=m.z;var Ba=K.y+d.y*p,ha=K.z+d.z*p;K.x+=d.x*p;K.y=Ba;K.z=ha;var ba=-r,Va=K.y+h.y*ba,ga=K.z+h.z*ba;K.x+=h.x*ba;K.y=Va;K.z=ga;var P=K.y+g.y*v,za=K.z+g.z*v;K.x+=g.x*v;K.y=P;K.z=za;var xb=this.p,ja=0==xb.c?new t:xb.b[--xb.c];ja.x=m.x;ja.y=m.y;ja.z=m.z;var Ma=ja.y+d.y*p,Oa=ja.z+d.z*p;ja.x+=d.x*p;ja.y=Ma;ja.z=Oa;var gb=ja.y+h.y*r,pb=ja.z+h.z*r;ja.x+=h.x*r;ja.y=gb;ja.z=pb;var ua=-v,xa=ja.y+g.y*ua,Fa=ja.z+g.z*ua;ja.x+=g.x*ua;ja.y=xa;ja.z=Fa;var fb=this.p,Ha=0==fb.c?new t:fb.b[--fb.c];Ha.x=m.x;Ha.y=m.y;Ha.z=m.z;var qb=Ha.y+d.y*p,Na=Ha.z+d.z*p;Ha.x+=d.x*p;Ha.y=qb;Ha.z=Na;var la=Ha.y+h.y*r,Ca=Ha.z+h.z*r;Ha.x+=h.x*r;Ha.y=la;Ha.z=Ca;var Za=Ha.y+g.y*v,Ra=Ha.z+g.z*v;Ha.x+=g.x*v;Ha.y=Za;Ha.z=Ra;if(this.wireframe)this.line(y,u,e),this.line(Q,X,e),this.line(U,K,e),this.line(ja,Ha,e),this.line(y,Q,e),this.line(u,X,e),this.line(U,ja,e),this.line(K,Ha,e),this.line(y,U,e),this.line(u,K,e),this.line(Q,ja,e),this.line(X,Ha,e);else{var ib=this.p,Lb=0==ib.c?new t:ib.b[--ib.c];Lb.x=d.x;Lb.y=d.y;Lb.z=d.z;var db=-Lb.y,Ib=-Lb.z;Lb.x=-Lb.x;Lb.y=db;Lb.z=Ib;var kb=this.p,nb=0==kb.c?new t:kb.b[--kb.c];nb.x=h.x;nb.y=h.y;nb.z=h.z;var Yb=-nb.y,sc=-nb.z;nb.x=-nb.x;nb.y=Yb;nb.z=sc;var $a=this.p,Ka=0==$a.c?new t:$a.b[--$a.c];Ka.x=g.x;Ka.y=g.y;Ka.z=g.z;var vb=-Ka.y,H=-Ka.z;Ka.x=-Ka.x;Ka.y=vb;Ka.z=H;this.rect(y,u,X,Q,Lb,Lb,Lb,Lb,e);this.rect(U,ja,Ha,K,d,d,d,d,e);this.rect(y,U,K,u,nb,nb,nb,nb,e);this.rect(Q,X,Ha,ja,h,h,h,h,e);this.rect(y,Q,ja,U,Ka,Ka,Ka,Ka,e);this.rect(u,K,Ha,X,g,g,g,g,e);var eb=this.p;if(null!=Lb){Lb.Z();if(eb.c==eb.b.length){for(var lb=Array(eb.c<<1),yb=0,mb=eb.c;yb<mb;){var ub=yb++;lb[ub]=eb.b[ub];eb.b[ub]=null}eb.b=lb}eb.b[eb.c++]=Lb}var x=this.p;if(null!=nb){nb.Z();if(x.c==x.b.length){for(var W=Array(x.c<<1),ea=0,ab=x.c;ea<ab;){var Xa=ea++;W[Xa]=x.b[Xa];x.b[Xa]=null}x.b=W}x.b[x.c++]=nb}var Pa=this.p;if(null!=Ka){Ka.Z();if(Pa.c==Pa.b.length){for(var rb=Array(Pa.c<<1),ob=0,zb=Pa.c;ob<zb;){var Ab=ob++;rb[Ab]=Pa.b[Ab];Pa.b[Ab]=null}Pa.b=rb}Pa.b[Pa.c++]=Ka}}var ia=this.p;if(null!=y){y.Z();if(ia.c==ia.b.length){for(var Ta=Array(ia.c<<1),bb=0,jb=ia.c;bb<jb;){var Bb=bb++;Ta[Bb]=ia.b[Bb];ia.b[Bb]=null}ia.b=Ta}ia.b[ia.c++]=y}var La=this.p;if(null!=u){u.Z();if(La.c==La.b.length){for(var Eb=Array(La.c<<1),Wa=0,qa=La.c;Wa<qa;){var Bc=Wa++;Eb[Bc]=La.b[Bc];La.b[Bc]=null}La.b=Eb}La.b[La.c++]=u}var Mb=this.p;if(null!=Q){Q.Z();if(Mb.c==Mb.b.length){for(var Sb=Array(Mb.c<<1),cb=0,hb=Mb.c;cb<hb;){var tb=cb++;Sb[tb]=Mb.b[tb];Mb.b[tb]=null}Mb.b=Sb}Mb.b[Mb.c++]=Q}var Zb=this.p;if(null!=X){X.Z();if(Zb.c==Zb.b.length){for(var Cb=Array(Zb.c<<1),wb=0,Hb=Zb.c;wb<Hb;){var Jb=wb++;Cb[Jb]=Zb.b[Jb];Zb.b[Jb]=null}Zb.b=Cb}Zb.b[Zb.c++]=X}var Ub=this.p;if(null!=U){U.Z();if(Ub.c==Ub.b.length){for(var gc=Array(Ub.c<<1),fc=0,Pb=Ub.c;fc<Pb;){var cc=fc++;gc[cc]=Ub.b[cc];Ub.b[cc]=null}Ub.b=gc}Ub.b[Ub.c++]=U}var Fb=this.p;if(null!=K){K.Z();if(Fb.c==Fb.b.length){for(var lc=Array(Fb.c<<1),bc=0,Qb=Fb.c;bc<Qb;){var dc=bc++;lc[dc]=Fb.b[dc];Fb.b[dc]=null}Fb.b=lc}Fb.b[Fb.c++]=K}var Vb=this.p;if(null!=ja){ja.Z();if(Vb.c==Vb.b.length){for(var Nb=Array(Vb.c<<1),Tb=0,sb=Vb.c;Tb<sb;){var Wb=Tb++;Nb[Wb]=Vb.b[Wb];Vb.b[Wb]=null}Vb.b=Nb}Vb.b[Vb.c++]=ja}var qc=this.p;if(null!=Ha){Ha.Z();if(qc.c==qc.b.length){for(var Ob=Array(qc.c<<1),Zc=0,jc=qc.c;Zc<jc;){var Hc=Zc++;Ob[Hc]=qc.b[Hc];qc.b[Hc]=null}qc.b=Ob}qc.b[qc.c++]=Ha}var pc=this.p;if(null!=m){m.Z();if(pc.c==pc.b.length){for(var ac=Array(pc.c<<1),$c=0,tc=pc.c;$c<tc;){var Xb=$c++;ac[Xb]=pc.b[Xb];pc.b[Xb]=null}pc.b=ac}pc.b[pc.c++]=m}var Kb=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(Kb.eb==Kb.bb.length){for(var $b=Array(Kb.eb<<1),kc=0,Cc=Kb.eb;kc<Cc;){var ic=kc++;$b[ic]=Kb.bb[ic];Kb.bb[ic]=null}Kb.bb=$b}Kb.bb[Kb.eb++]=q}var wc=this.p;if(null!=d){d.Z();if(wc.c==wc.b.length){for(var nc=Array(wc.c<<1),oc=0,hc=wc.c;oc<hc;){var mc=oc++;nc[mc]=wc.b[mc];wc.b[mc]=null}wc.b=nc}wc.b[wc.c++]=d}var Rb=this.p;if(null!=h){h.Z();if(Rb.c==Rb.b.length){for(var rc=Array(Rb.c<<1),ec=0,vc=Rb.c;ec<vc;){var Gc=ec++;rc[Gc]=Rb.b[Gc];Rb.b[Gc]=null}Rb.b=rc}Rb.b[Rb.c++]=h}var Ec=this.p;if(null!=g){g.Z();if(Ec.c==Ec.b.length){for(var Mc=Array(Ec.c<<1),Tc=0,Xc=Ec.c;Tc<Xc;){var Uc=Tc++;Mc[Uc]=Ec.b[Uc];Ec.b[Uc]=null}Ec.b=Mc}Ec.b[Ec.c++]=g}},rect:function(a,b,e,c,d,f,h,l,g){this.triangle(a,b,e,d,f,h,g);this.triangle(a,e,c,d,h,l,g)},point:function(){},triangle:function(){},line:function(){}};Ob.prototype={xh:function(){},Gh:function(){},Ch:function(){},Li:function(){},Pg:function(){},Bh:function(){},Ah:function(){},postSolve:function(){}};zd.prototype={$d:function(a,b){b.Qe=this.C;b.Re=this.D;var e,c,d,f,h,l,g,k,m;e=this.Ja.wg;c=this.Ja.xg;d=this.Ja.yg;f=this.Ja.lj;h=this.Ja.mj;l=this.Ja.nj;g=this.Ja.Vi;k=this.Ja.Wi;m=this.Ja.Xi;for(var n=Math.sqrt(this.Zb.Xj*this.$b.Xj),q=Math.sqrt(this.Zb.hk*this.$b.hk),p=this.Ja.be,r=b.Ka=0;r<p;){var v=r++,v=this.Ja.wc[v];if(0>v.Gc)v.lf=!0,v=v.ae,v.bd=0,v.zc=0,v.yc=0,v.ub=0,v.df=0,v.ef=0,v.ff=0;else{v.lf=!1;var R=b.rows[b.Ka++];R.friction=n;R.Ma=0;var y=R.Ng;y.va=e;y.wa=c;y.xa=d;y.Ba=e;y.Ca=c;y.Da=d;y.aa=v.Eb*d-v.Fb*c;y.ba=v.Fb*e-v.Db*d;y.ca=v.Db*c-v.Eb*e;y.ea=v.fc*d-v.gc*c;y.fa=v.gc*e-v.ec*d;y.ga=v.ec*c-v.fc*e;y=R.Lj;y.va=f;y.wa=h;y.xa=l;y.Ba=f;y.Ca=h;y.Da=l;y.aa=v.Eb*l-v.Fb*h;y.ba=v.Fb*f-v.Db*l;y.ca=v.Db*h-v.Eb*f;y.ea=v.fc*l-v.gc*h;y.fa=v.gc*f-v.ec*l;y.ga=v.ec*h-v.fc*f;y=R.Kj;y.va=g;y.wa=k;y.xa=m;y.Ba=g;y.Ca=k;y.Da=m;y.aa=v.Eb*m-v.Fb*k;y.ba=v.Fb*g-v.Db*m;y.ca=v.Db*k-v.Eb*g;y.ea=v.fc*m-v.gc*k;y.fa=v.gc*g-v.ec*m;y.ga=v.ec*k-v.fc*g;y=R.Ng;y=y.va*this.C.gb+y.wa*this.C.hb+y.xa*this.C.ib+(y.aa*this.C.kb+y.ba*this.C.lb+y.ca*this.C.mb)-(y.Ba*this.D.gb+y.Ca*this.D.hb+y.Da*this.D.ib+(y.ea*this.D.kb+y.fa*this.D.lb+y.ga*this.D.mb));R.Fa=y<-G.contactEnableBounceThreshold&&!v.Pe?-y*q:0;this.Hc==Hb.BAUMGARTE&&v.Gc>G.linearSlop&&(y=(v.Gc-G.linearSlop)*G.velocityBaumgarte*a.invDt,R.Fa<y&&(R.Fa=y));v.Pe||(y=v.ae,y.bd=0,y.zc=0,y.yc=0,y.ub=0,y.df=0,y.ef=0,y.ff=0);R.ta=v.ae}}},gd:function(a){a.Qe=this.C;a.Re=this.D;var b,e,c;b=this.Ja.wg;e=this.Ja.xg;c=this.Ja.yg;for(var d=this.Ja.be,f=a.Ka=0;f<d;){var h=f++,h=this.Ja.wc[h];if(!h.lf){var l=a.rows[a.Ka++],g=l.Ng;g.va=b;g.wa=e;g.xa=c;g.Ba=b;g.Ca=e;g.Da=c;g.aa=h.Eb*c-h.Fb*e;g.ba=h.Fb*b-h.Db*c;g.ca=h.Db*e-h.Eb*b;g.ea=h.fc*c-h.gc*e;g.fa=h.gc*b-h.ec*c;g.ga=h.ec*e-h.fc*b;l.Fa=h.Gc-G.linearSlop;0>l.Fa&&(l.Fa=0);l.ta=h.ae}}},al:function(){this.Ja.Yl(this.pj,this.qj)},cb:function(){return this.Zb},Hb:function(){return this.$b},ua:function(){return this.Ja},sk:function(){for(var a=0,b=this.Ja.be;a<b;){var e=a++;if(0<=this.Ja.wc[e].Gc)return!0}return!1}};wl.prototype={de:function(a){this.bd=a.bd;this.zc=a.zc;this.yc=a.yc;this.df=a.df;this.ef=a.ef;this.ff=a.ff}};ic.prototype={Xe:function(){for(var a=0,b=this.be;a<b;){var e=a++,e=this.wc[e];e.mf=0;e.nf=0;e.pf=0;e.qf=0;e.rf=0;e.sf=0;e.Db=0;e.Eb=0;e.Fb=0;e.ec=0;e.fc=0;e.gc=0;e.Jd=0;e.Kd=0;e.Ld=0;e.Md=0;e.Nd=0;e.Od=0;e.Gc=0;var c=e.ae;c.bd=0;c.zc=0;c.yc=0;c.ub=0;c.df=0;c.ef=0;c.ff=0;e.Pe=!1;e.lf=!1;e.Cc=-1}this.be=0},Wm:function(a){this.wg=a.x;this.xg=a.y;this.yg=a.z;var b=a.x,e=a.y;a=a.z;var c=b*b,d=e*e,f=a*a,h;c<d?c<f?(f=1/Math.sqrt(d+f),c=0,d=-a*f,f*=e,h=e*f-a*d,a=-b*f,b*=d):(d=1/Math.sqrt(c+d),c=-e*d,d*=b,f=0,h=-a*d,a*=c,b=b*d-e*c):d<f?(f=1/Math.sqrt(c+f),c=a*f,d=0,f*=-b,h=e*f,a=a*c-b*f,b=-e*c):(d=1/Math.sqrt(c+d),c=-e*d,d*=b,f=0,h=-a*d,a*=c,b=b*d-e*c);this.lj=c;this.mj=d;this.nj=f;this.Vi=h;this.Wi=a;this.Xi=b},Yl:function(a,b){for(var e=0,c=this.be;e<c;){var d=e++,d=this.wc[d],f,h,l;f=a.o*d.mf+a.f*d.nf+a.h*d.pf;h=a.i*d.mf+a.m*d.nf+a.j*d.pf;l=a.l*d.mf+a.g*d.nf+a.s*d.pf;d.Db=f;d.Eb=h;d.Fb=l;f=b.o*d.qf+b.f*d.rf+b.h*d.sf;h=b.i*d.qf+b.m*d.rf+b.j*d.sf;l=b.l*d.qf+b.g*d.rf+b.s*d.sf;d.ec=f;d.fc=h;d.gc=l;d.Jd=d.Db+a.v;d.Kd=d.Eb+a.A;d.Ld=d.Fb+a.B;d.Md=d.ec+b.v;d.Nd=d.fc+b.A;d.Od=d.gc+b.B;d.Gc=-((d.Jd-d.Md)*this.wg+(d.Kd-d.Nd)*this.xg+(d.Ld-d.Od)*this.yg)}},Hb:function(){var a=new t;a.x=this.wg;a.y=this.xg;a.z=this.yg;return a},Mb:function(a){a.x=this.wg;a.y=this.xg;a.z=this.yg},uc:function(){var a=new t;a.x=this.lj;a.y=this.mj;a.z=this.nj;return a},vc:function(a){a.x=this.lj;a.y=this.mj;a.z=this.nj},ua:function(){var a=new t;a.x=this.Vi;a.y=this.Wi;a.z=this.Xi;return a},cb:function(a){a.x=this.Vi;a.y=this.Wi;a.z=this.Xi},qc:function(){return this.wc},pc:function(){return this.be}};Xb.prototype={Mb:function(){var a=new t;a.x=this.Jd;a.y=this.Kd;a.z=this.Ld;return a},pc:function(a){a.x=this.Jd;a.y=this.Kd;a.z=this.Ld},qc:function(){var a=new t;a.x=this.Md;a.y=this.Nd;a.z=this.Od;return a},uc:function(a){a.x=this.Md;a.y=this.Nd;a.z=this.Od},cb:function(){return this.Gc},Ac:function(){return this.Pe},Hb:function(){return this.ae.bd},vc:function(){return this.ae.zc},ua:function(){return this.ae.yc},Ec:function(){return!this.lf}};el.prototype={Wn:function(){for(var a=this.Ja.be;0<=--a;){var b=this.Ja.wc[a],e,c;e=b.Jd-b.Md;c=b.Kd-b.Nd;var b=b.Ld-b.Od,d=this.Ja.wg*e+this.Ja.xg*c+this.Ja.yg*b;d>G.contactPersistenceThreshold?this.Fm(a):(e+=this.Ja.wg*-d,c+=this.Ja.xg*-d,b+=this.Ja.yg*-d,e*e+c*c+b*b>G.contactPersistenceThreshold*G.contactPersistenceThreshold&&this.Fm(a))}},Fm:function(a){var b=--this.Ja.be;if(a!=b){var e=this.Ja.wc[a];this.Ja.wc[a]=this.Ja.wc[b];this.Ja.wc[b]=e}a=this.Ja.wc[b];a.mf=0;a.nf=0;a.pf=0;a.qf=0;a.rf=0;a.sf=0;a.Db=0;a.Eb=0;a.Fb=0;a.ec=0;a.fc=0;a.gc=0;a.Jd=0;a.Kd=0;a.Ld=0;a.Md=0;a.Nd=0;a.Od=0;a.Gc=0;b=a.ae;b.bd=0;b.zc=0;b.yc=0;b.ub=0;b.df=0;b.ef=0;b.ff=0;a.Pe=!1;a.lf=!1;a.Cc=-1},jn:function(a,b,e){var c=this.Ja.be;if(c==G.maxManifoldPoints){var c=this.Ja.wc[this.on(a,b,e)],d=a.position1;c.Jd=d.x;c.Kd=d.y;c.Ld=d.z;d=a.position2;c.Md=d.x;c.Nd=d.y;c.Od=d.z;c.Db=c.Jd-b.v;c.Eb=c.Kd-b.A;c.Fb=c.Ld-b.B;c.ec=c.Md-e.v;c.fc=c.Nd-e.A;c.gc=c.Od-e.B;var f,d=b.o*c.Db+b.i*c.Eb+b.l*c.Fb;f=b.f*c.Db+b.m*c.Eb+b.g*c.Fb;b=b.h*c.Db+b.j*c.Eb+b.s*c.Fb;c.mf=d;c.nf=f;c.pf=b;b=e.o*c.ec+e.i*c.fc+e.l*c.gc;d=e.f*c.ec+e.m*c.fc+e.g*c.gc;e=e.h*c.ec+e.j*c.fc+e.s*c.gc;c.qf=b;c.rf=d;c.sf=e;c.Gc=a.depth;e=c.ae;e.bd=0;e.zc=0;e.yc=0;e.ub=0;e.df=0;e.ef=0;e.ff=0;c.Cc=a.id;c.Pe=!1;c.lf=!1}else c=this.Ja.wc[c],d=a.position1,c.Jd=d.x,c.Kd=d.y,c.Ld=d.z,d=a.position2,c.Md=d.x,c.Nd=d.y,c.Od=d.z,c.Db=c.Jd-b.v,c.Eb=c.Kd-b.A,c.Fb=c.Ld-b.B,c.ec=c.Md-e.v,c.fc=c.Nd-e.A,c.gc=c.Od-e.B,d=b.o*c.Db+b.i*c.Eb+b.l*c.Fb,f=b.f*c.Db+b.m*c.Eb+b.g*c.Fb,b=b.h*c.Db+b.j*c.Eb+b.s*c.Fb,c.mf=d,c.nf=f,c.pf=b,b=e.o*c.ec+e.i*c.fc+e.l*c.gc,d=e.f*c.ec+e.m*c.fc+e.g*c.gc,e=e.h*c.ec+e.j*c.fc+e.s*c.gc,c.qf=b,c.rf=d,c.sf=e,c.Gc=a.depth,e=c.ae,e.bd=0,e.zc=0,e.yc=0,e.ub=0,e.df=0,e.ef=0,e.ff=0,c.Cc=a.id,c.Pe=!1,c.lf=!1,this.Ja.be++},on:function(a,b){var e=this.Ja.wc[0],c=this.Ja.wc[1],d=this.Ja.wc[2],f=this.Ja.wc[3],h=e.Gc,l=0;c.Gc>h&&(h=c.Gc,l=1);d.Gc>h&&(h=d.Gc,l=2);f.Gc>h&&(h=f.Gc,l=3);var g,k,m,n=a.position1;g=n.x;k=n.y;m=n.z;g-=b.v;k-=b.A;m-=b.B;var q=c.Db,p=c.Eb,r=c.Fb,v=d.Db,R=d.Eb,y=d.Fb,L=f.Db,w=f.Eb,D=f.Fb,t,B,C,A,u,I,J,G,E,O,da,V,S,Db,Ia,Da,ma,Q;t=v-q;B=R-p;C=y-r;A=g-L;u=k-w;I=m-D;J=L-q;G=w-p;E=D-r;O=g-v;da=k-R;V=m-y;S=g-q;Db=k-p;Ia=m-r;Da=L-v;ma=w-R;Q=D-y;var ta,Ga,Ea,Ua,va,oa,Ya,F,Qa;ta=B*I-C*u;Ga=C*A-t*I;Ea=t*u-B*A;Ua=G*V-E*da;va=E*O-J*V;oa=J*da-G*O;Ya=Db*Q-Ia*ma;F=Ia*Da-S*Q;Qa=S*ma-Db*Da;var X=ta*ta+Ga*Ga+Ea*Ea,M=Ua*Ua+va*va+oa*oa,N=Ya*Ya+F*F+Qa*Qa,ca=X>M?X>N?X:N:M>N?M:N,Y=e.Db,T=e.Eb,aa=e.Fb,z=d.Db,fa=d.Eb,U=d.Fb,pa=f.Db,sa=f.Eb,wa=f.Fb,ra,ka,Z,na,Aa,ya,K,Ba,ha,ba,Va,ga,P,za,xb,ja,Ja,Ma;ra=z-Y;ka=fa-T;Z=U-aa;na=g-pa;Aa=k-sa;ya=m-wa;K=pa-Y;Ba=sa-T;ha=wa-aa;ba=g-z;Va=k-fa;ga=m-U;P=g-Y;za=k-T;xb=m-aa;ja=pa-z;Ja=sa-fa;Ma=wa-U;var gb,pb,ua,xa,Fa,fb,Ha,qb,Na;gb=ka*ya-Z*Aa;pb=Z*na-ra*ya;ua=ra*Aa-ka*na;xa=Ba*ga-ha*Va;Fa=ha*ba-K*ga;fb=K*Va-Ba*ba;Ha=za*Ma-xb*Ja;qb=xb*ja-P*Ma;Na=P*Ja-za*ja;var la=gb*gb+pb*pb+ua*ua,Ca=xa*xa+Fa*Fa+fb*fb,Za=Ha*Ha+qb*qb+Na*Na,Ra=la>Ca?la>Za?la:Za:Ca>Za?Ca:Za,ib=e.Db,Lb=e.Eb,db=e.Fb,Ib=c.Db,kb=c.Eb,nb=c.Fb,Yb=f.Db,Oa=f.Eb,$a=f.Fb,Ka,vb,H,eb,lb,yb,mb,ub,x,W,ea,Xa,ab,Pa,rb,ob,zb,Ab;Ka=Ib-ib;vb=kb-Lb;H=nb-db;eb=g-Yb;lb=k-Oa;yb=m-$a;mb=Yb-ib;ub=Oa-Lb;x=$a-db;W=g-Ib;ea=k-kb;Xa=m-nb;ab=g-ib;Pa=k-Lb;rb=m-db;ob=Yb-Ib;zb=Oa-kb;Ab=$a-nb;var ia,Ta,bb,jb,Bb,La,Eb,Wa,qa;ia=vb*yb-H*lb;Ta=H*eb-Ka*yb;bb=Ka*lb-vb*eb;jb=ub*Xa-x*ea;Bb=x*W-mb*Xa;La=mb*ea-ub*W;Eb=Pa*Ab-rb*zb;Wa=rb*ob-ab*Ab;qa=ab*zb-Pa*ob;var cb=ia*ia+Ta*Ta+bb*bb,Mb=jb*jb+Bb*Bb+La*La,Sb=Eb*Eb+Wa*Wa+qa*qa,hb=cb>Mb?cb>Sb?cb:Sb:Mb>Sb?Mb:Sb,tb=e.Db,Cb=e.Eb,Zb=e.Fb,wb=c.Db,Jb=c.Eb,Kb=c.Fb,Hb=d.Db,Ub=d.Eb,gc=d.Fb,fc,Pb,cc,Fb,lc,bc,Qb,dc,Vb,Nb,Tb,sb,Wb,qc,Rb,Xb,jc,Hc;fc=wb-tb;Pb=Jb-Cb;cc=Kb-Zb;Fb=g-Hb;lc=k-Ub;bc=m-gc;Qb=Hb-tb;dc=Ub-Cb;Vb=gc-Zb;Nb=g-wb;Tb=k-Jb;sb=m-Kb;Wb=g-tb;qc=k-Cb;Rb=m-Zb;Xb=Hb-wb;jc=Ub-Jb;Hc=gc-Kb;var pc,Ob,ac,tc,$b,ic,kc,mc,nc;pc=Pb*bc-cc*lc;Ob=cc*Fb-fc*bc;ac=fc*lc-Pb*Fb;tc=dc*sb-Vb*Tb;$b=Vb*Nb-Qb*sb;ic=Qb*Tb-dc*Nb;kc=qc*Hc-Rb*jc;mc=Rb*Xb-Wb*Hc;nc=Wb*jc-qc*Xb;var oc=pc*pc+Ob*Ob+ac*ac,wc=tc*tc+$b*$b+ic*ic,hc=kc*kc+mc*mc+nc*nc,rc=oc>wc?oc>hc?oc:hc:wc>hc?wc:hc,ec=ca,vc=0;if(Ra>ec&&1!=l||!l)ec=Ra,vc=1;hb>ec&&2!=l&&(ec=hb,vc=2);rc>ec&&3!=l&&(ec=rc,vc=3);return vc},rn:function(a,b,e){for(var c=G.contactPersistenceThreshold*G.contactPersistenceThreshold,d=-1,f=0,h=this.Ja.be;f<h;){var l=f++,g=this.Ja.wc[l],k,m,n,q,p,r;p=a.position1;k=p.x;m=p.y;n=p.z;r=a.position2;q=r.x;p=r.y;r=r.z;k-=b.v;m-=b.A;n-=b.B;q-=e.v;p-=e.A;r-=e.B;k=g.Db-k;m=g.Eb-m;n=g.Fb-n;q=g.ec-q;p=g.fc-p;g=g.gc-r;r=k*k+m*m+n*n;g=q*q+p*p+g*g;g=r<g?r:g;g<c&&(c=g,d=l)}return d},eo:function(a,b,e){this.Gl=this.Ja.be;for(var c=0,d=this.Gl;c<d;){var f=c++,h=this.Hl[f],f=this.Ja.wc[f];h.mf=f.mf;h.nf=f.nf;h.pf=f.pf;h.qf=f.qf;h.rf=f.rf;h.sf=f.sf;h.Db=f.Db;h.Eb=f.Eb;h.Fb=f.Fb;h.ec=f.ec;h.fc=f.fc;h.gc=f.gc;h.Jd=f.Jd;h.Kd=f.Kd;h.Ld=f.Ld;h.Md=f.Md;h.Nd=f.Nd;h.Od=f.Od;h.Gc=f.Gc;h.ae.de(f.ae);h.Cc=f.Cc;h.Pe=f.Pe;h.lf=!1}c=a.numPoints;this.Ja.be=c;for(d=0;d<c;){var f=d++,h=this.Ja.wc[f],f=a.points[f],l=f.position1;h.Jd=l.x;h.Kd=l.y;h.Ld=l.z;l=f.position2;h.Md=l.x;h.Nd=l.y;h.Od=l.z;h.Db=h.Jd-b.v;h.Eb=h.Kd-b.A;h.Fb=h.Ld-b.B;h.ec=h.Md-e.v;h.fc=h.Nd-e.A;h.gc=h.Od-e.B;var g,k,l=b.o*h.Db+b.i*h.Eb+b.l*h.Fb;g=b.f*h.Db+b.m*h.Eb+b.g*h.Fb;k=b.h*h.Db+b.j*h.Eb+b.s*h.Fb;h.mf=l;h.nf=g;h.pf=k;l=e.o*h.ec+e.i*h.fc+e.l*h.gc;g=e.f*h.ec+e.m*h.fc+e.g*h.gc;k=e.h*h.ec+e.j*h.fc+e.s*h.gc;h.qf=l;h.rf=g;h.sf=k;h.Gc=f.depth;l=h.ae;l.bd=0;l.zc=0;l.yc=0;l.ub=0;l.df=0;l.ef=0;l.ff=0;h.Cc=f.id;h.Pe=!1;h.lf=!1;f=0;for(l=this.Gl;f<l;)if(g=f++,g=this.Hl[g],h.Cc==g.Cc){h.ae.de(g.ae);h.Pe=!0;break}}},On:function(a,b,e){this.Ja.Yl(b,e);for(var c=0,d=this.Ja.be;c<d;){var f=c++;this.Ja.wc[f].Pe=!0}a=a.points[0];c=this.rn(a,b,e);-1==c?this.jn(a,b,e):(c=this.Ja.wc[c],d=a.position1,c.Jd=d.x,c.Kd=d.y,c.Ld=d.z,d=a.position2,c.Md=d.x,c.Nd=d.y,c.Od=d.z,c.Db=c.Jd-b.v,c.Eb=c.Kd-b.A,c.Fb=c.Ld-b.B,c.ec=c.Md-e.v,c.fc=c.Nd-e.A,c.gc=c.Od-e.B,d=b.o*c.Db+b.i*c.Eb+b.l*c.Fb,f=b.f*c.Db+b.m*c.Eb+b.g*c.Fb,b=b.h*c.Db+b.j*c.Eb+b.s*c.Fb,c.mf=d,c.nf=f,c.pf=b,b=e.o*c.ec+e.i*c.fc+e.l*c.gc,d=e.f*c.ec+e.m*c.fc+e.g*c.gc,e=e.h*c.ec+e.j*c.fc+e.s*c.gc,c.qf=b,c.rf=d,c.sf=e,c.Gc=a.depth);this.Wn()}};be.prototype={Im:function(){this.xc=0;if(0!=this.va||0!=this.wa||0!=this.xa||0!=this.Ba||0!=this.Ca||0!=this.Da)this.xc|=1;if(0!=this.aa||0!=this.ba||0!=this.ca||0!=this.ea||0!=this.fa||0!=this.ga)this.xc|=2}};V.prototype={hd:function(){var a=this.C.a,b=this.D.a,e,c,d;e=a.o*this.dj+a.f*this.ej+a.h*this.fj;c=a.i*this.dj+a.m*this.ej+a.j*this.fj;d=a.l*this.dj+a.g*this.ej+a.s*this.fj;this.Sb=e;this.Tb=c;this.Ub=d;e=b.o*this.gj+b.f*this.hj+b.h*this.ij;c=b.i*this.gj+b.m*this.hj+b.j*this.ij;d=b.l*this.gj+b.g*this.hj+b.s*this.ij;this.Vb=e;this.Wb=c;this.Xb=d;this.Of=this.Sb+a.v;this.Pf=this.Tb+a.A;this.Qf=this.Ub+a.B;this.Rf=this.Vb+b.v;this.Sf=this.Wb+b.A;this.Tf=this.Xb+b.B;e=a.o*this.qa+a.f*this.ra+a.h*this.sa;c=a.i*this.qa+a.m*this.ra+a.j*this.sa;d=a.l*this.qa+a.g*this.ra+a.s*this.sa;this.vb=e;this.wb=c;this.xb=d;e=a.o*this.Ab+a.f*this.Bb+a.h*this.Cb;c=a.i*this.Ab+a.m*this.Bb+a.j*this.Cb;d=a.l*this.Ab+a.g*this.Bb+a.s*this.Cb;this.He=e;this.Ie=c;this.Je=d;e=a.o*this.lc+a.f*this.mc+a.h*this.nc;c=a.i*this.lc+a.m*this.mc+a.j*this.nc;a=a.l*this.lc+a.g*this.mc+a.s*this.nc;this.Hh=e;this.Ih=c;this.Jh=a;a=b.o*this.nb+b.f*this.ob+b.h*this.pb;e=b.i*this.nb+b.m*this.ob+b.j*this.pb;c=b.l*this.nb+b.g*this.ob+b.s*this.pb;this.bc=a;this.cc=e;this.dc=c;a=b.o*this.gh+b.f*this.hh+b.h*this.ih;e=b.i*this.gh+b.m*this.hh+b.j*this.ih;c=b.l*this.gh+b.g*this.hh+b.s*this.ih;this.ve=a;this.we=e;this.xe=c;a=b.o*this.Mc+b.f*this.Nc+b.h*this.Oc;e=b.i*this.Mc+b.m*this.Nc+b.j*this.Oc;b=b.l*this.Mc+b.g*this.Nc+b.s*this.Oc;this.ah=a;this.bh=e;this.dh=b},$d:function(a,b){b.Qe=this.C;b.Re=this.D;b.Ka=0},gd:function(a){a.Qe=this.C;a.Re=this.D;a.Ka=0},Rl:function(){var a=this.Pi*this.Pi+this.Qi*this.Qi+this.Ri*this.Ri,b=this.Si*this.Si+this.Ti*this.Ti+this.Ui*this.Ui;0<this.Yi&&a>this.Yi*this.Yi?this.oc.Kl(this):0<this.Zi&&b>this.Zi*this.Zi&&this.oc.Kl(this)},ue:function(){return this.C},Ue:function(){return this.D},Tg:function(){return this.Lb},cb:function(){var a=new t;a.x=this.Of;a.y=this.Pf;a.z=this.Qf;return a},Mb:function(){var a=new t;a.x=this.Rf;a.y=this.Sf;a.z=this.Tf;return a},Hb:function(a){a.x=this.Of;a.y=this.Pf;a.z=this.Qf},pc:function(a){a.x=this.Rf;a.y=this.Sf;a.z=this.Tf},pe:function(){var a=new t;a.x=this.dj;a.y=this.ej;a.z=this.fj;return a},re:function(){var a=new t;a.x=this.gj;a.y=this.hj;a.z=this.ij;return a},qe:function(a){a.x=this.dj;a.y=this.ej;a.z=this.fj},se:function(a){a.x=this.gj;a.y=this.hj;a.z=this.ij},Ec:function(){var a=new E,b,e,c,d,f,h,l,g,k;b=this.vb;e=this.He;c=this.Hh;d=this.wb;f=this.Ie;h=this.Ih;l=this.xb;g=this.Je;k=this.Jh;a.e00=b;a.e01=e;a.e02=c;a.e10=d;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Kc:function(){var a=new E,b,e,c,d,f,h,l,g,k;b=this.bc;e=this.ve;c=this.ah;d=this.cc;f=this.we;h=this.bh;l=this.dc;g=this.xe;k=this.dh;a.e00=b;a.e01=e;a.e02=c;a.e10=d;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Jc:function(a){var b,e,c,d,f,h,l,g,k;b=this.vb;e=this.He;c=this.Hh;d=this.wb;f=this.Ie;h=this.Ih;l=this.xb;g=this.Je;k=this.Jh;a.e00=b;a.e01=e;a.e02=c;a.e10=d;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},Lc:function(a){var b,e,c,d,f,h,l,g,k;b=this.bc;e=this.ve;c=this.ah;d=this.cc;f=this.we;h=this.bh;l=this.dc;g=this.xe;k=this.dh;a.e00=b;a.e01=e;a.e02=c;a.e10=d;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},ua:function(){return this.Ak},Ug:function(a){this.Ak=a},fd:function(){return this.Yi},Vg:function(a){this.Yi=a},Yd:function(){return this.Zi},Wg:function(a){this.Zi=a},te:function(){return this.Hc},Xg:function(a){switch(a){case 0:case 1:case 2:break;default:throw Error("invalid position correction algorithm id: "+a);}this.Hc=a},qc:function(){var a=new t;a.x=this.Pi;a.y=this.Qi;a.z=this.Ri;return a},uc:function(a){a.x=this.Pi;a.y=this.Qi;a.z=this.Ri},vc:function(){var a=new t;a.x=this.Si;a.y=this.Ti;a.z=this.Ui;return a},Ac:function(a){a.x=this.Si;a.y=this.Ti;a.z=this.Ui},Mf:function(){return this.ia},Ve:function(){return this.M}};Cb.ua=V;Cb.prototype=cb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0,d=this.Df*c,f=this.Ef*c,h=this.Ee*c,c=this.Fe*c,l,g,k,m,n,q,p,r,v,t,y,L;l=-this.Ub;g=this.Tb;k=this.Ub;m=-this.Sb;n=-this.Tb;q=this.Sb;p=-this.Xb;r=this.Wb;v=this.Xb;t=-this.Vb;y=-this.Wb;L=this.Vb;var w,D=1/(this.C.$a+this.D.$a),Sa=this.da.cd,B=this.da.dd,C=this.da.ed,A=(this.C.P*Sa+this.C.R*B+this.C.S*C)*Sa+(this.C.T*Sa+this.C.U*B+this.C.V*C)*B+(this.C.W*Sa+this.C.X*B+this.C.Y*C)*C;w=(this.D.P*Sa+this.D.R*B+this.D.S*C)*Sa+(this.D.T*Sa+this.D.U*B+this.D.V*C)*B+(this.D.W*Sa+this.D.X*B+this.D.Y*C)*C;if(0<A){var u=Sa*this.Sb+B*this.Tb+C*this.Ub,u=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-u*u;0<u&&(A=0<this.C.$a?1/(1/A+this.C.Pc*u):0)}0<w&&(Sa=Sa*this.Vb+B*this.Wb+C*this.Xb,Sa=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-Sa*Sa,0<Sa&&(w=0<this.D.$a?1/(1/w+this.D.Pc*Sa):0));A=A+w?1/(A+w):0;if(0>=this.dl.frequency||!e){w=this.Pb[0];Sa=a.rows[a.Ka++];B=Sa.Aa;B.va=0;B.wa=0;B.xa=0;B.Ba=0;B.Ca=0;B.Da=0;B.aa=0;B.ba=0;B.ca=0;B.ea=0;B.fa=0;B.ga=0;Sa.Fa=0;Sa.Ma=0;Sa.Ia=0;Sa.Ha=0;Sa.motorSpeed=0;Sa.fb=0;Sa.ta=null;Sa.ta=w;w=Sa;var Sa=this.eg,u=this.cl,C=this.dl,I,B=G.linearSlop;if(e)C=0,I=1;else{if(0<C.frequency){var B=0,J=6.28318530717958*C.frequency,E=C.dampingRatio;E<G.minSpringDamperDampingRatio&&(E=G.minSpringDamperDampingRatio);I=b.dt;E=2*E*J;J*=J;C.useSymplecticEuler?(C=1/(I*E),I=J/E):(C=1/(I*(I*J+E)),I=J/(I*J+E))}else C=0,I=this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0;0<u.motorForce?(w.motorSpeed=u.motorSpeed,w.fb=u.motorForce*b.dt):(w.motorSpeed=0,w.fb=0)}var E=u.lowerLimit,O=u.upperLimit;E>O?Sa=J=u=0:E==O?(u=-1/0,J=1/0,Sa-=E):Sa<E?(u=-1/0,J=0,Sa=Sa-E+B,0<Sa&&(Sa=0)):Sa>O?(u=0,J=1/0,Sa=Sa-O-B,0>Sa&&(Sa=0)):Sa=J=u=0;w.Ia=u;w.Ha=J;w.Ma=C*(D?1/D:0);w.Fa=Sa*I;w=w.Aa;w.va=this.da.cd;w.wa=this.da.dd;w.xa=this.da.ed;w.Ba=this.da.cd;w.Ca=this.da.dd;w.Da=this.da.ed;w.aa=-0;w.ba=-l;w.ca=-g;w.ea=-0;w.fa=-p;w.ga=-r}w=this.Pb[1];l=a.rows[a.Ka++];g=l.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.aa=0;g.ba=0;g.ca=0;g.ea=0;g.fa=0;g.ga=0;l.Fa=0;l.Ma=0;l.Ia=0;l.Ha=0;l.motorSpeed=0;l.fb=0;l.ta=w;w=l;w.Fa=d;w.Ma=0;w.Ia=-1/0;w.Ha=1/0;w=w.Aa;w.va=this.da.Qd;w.wa=this.da.Rd;w.xa=this.da.Sd;w.Ba=this.da.Qd;w.Ca=this.da.Rd;w.Da=this.da.Sd;w.aa=-k;w.ba=-0;w.ca=-m;w.ea=-v;w.fa=-0;w.ga=-t;d=this.Pb[2];w=a.rows[a.Ka++];k=w.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.aa=0;k.ba=0;k.ca=0;k.ea=0;k.fa=0;k.ga=0;w.Fa=0;w.Ma=0;w.Ia=0;w.Ha=0;w.motorSpeed=0;w.fb=0;w.ta=d;w.Fa=f;w.Ma=0;w.Ia=-1/0;w.Ha=1/0;w=w.Aa;w.va=this.da.me;w.wa=this.da.ne;w.xa=this.da.oe;w.Ba=this.da.me;w.Ca=this.da.ne;w.Da=this.da.oe;w.aa=-n;w.ba=-q;w.ca=-0;w.ea=-y;w.fa=-L;w.ga=-0;if(0>=this.Xk.frequency||!e)f=this.Pb[3],n=a.rows[a.Ka++],q=n.Aa,q.va=0,q.wa=0,q.xa=0,q.Ba=0,q.Ca=0,q.Da=0,q.aa=0,q.ba=0,q.ca=0,q.ea=0,q.fa=0,q.ga=0,n.Fa=0,n.Ma=0,n.Ia=0,n.Ha=0,n.motorSpeed=0,n.fb=0,n.ta=f,w=n,f=this.angle,q=this.Wk,y=this.Xk,n=G.angularSlop,e?(e=0,y=1):(0<y.frequency?(n=0,e=6.28318530717958*y.frequency,d=y.dampingRatio,d<G.minSpringDamperDampingRatio&&(d=G.minSpringDamperDampingRatio),L=b.dt,d=2*d*e,k=e*e,y.useSymplecticEuler?(e=1/(L*d),y=k/d):(e=1/(L*(L*k+d)),y=k/(L*k+d))):(e=0,y=this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0),0<q.motorTorque?(w.motorSpeed=q.motorSpeed,w.fb=q.motorTorque*b.dt):(w.motorSpeed=0,w.fb=0)),b=q.lowerLimit,q=q.upperLimit,L=.5*(b+q),f=((f-L+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+L,b>q?b=d=L=0:b==q?(L=-1/0,d=1/0,b=f-b):f<b?(L=-1/0,d=0,b=f-b+n,0<b&&(b=0)):f>q?(L=0,d=1/0,b=f-q-n,0>b&&(b=0)):b=d=L=0,w.Ia=L,w.Ha=d,w.Ma=e*(A?1/A:0),w.Fa=b*y,w=w.Aa,w.aa=this.da.cd,w.ba=this.da.dd,w.ca=this.da.ed,w.ea=this.da.cd,w.fa=this.da.dd,w.ga=this.da.ed;b=this.Pb[4];A=a.rows[a.Ka++];e=A.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.aa=0;e.ba=0;e.ca=0;e.ea=0;e.fa=0;e.ga=0;A.Fa=0;A.Ma=0;A.Ia=0;A.Ha=0;A.motorSpeed=0;A.fb=0;A.ta=b;w=A;w.Fa=h;w.Ma=0;w.Ia=-1/0;w.Ha=1/0;w=w.Aa;w.aa=this.da.Qd;w.ba=this.da.Rd;w.ca=this.da.Sd;w.ea=this.da.Qd;w.fa=this.da.Rd;w.ga=this.da.Sd;h=this.Pb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.aa=0;b.ba=0;b.ca=0;b.ea=0;b.fa=0;b.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=h;w=a;w.Fa=c;w.Ma=0;w.Ia=-1/0;w.Ha=1/0;w=w.Aa;w.aa=this.da.me;w.ba=this.da.ne;w.ca=this.da.oe;w.ea=this.da.me;w.fa=this.da.ne;w.ga=this.da.oe},hd:function(){V.prototype.hd.call(this);var a=this.da,b=a.$.C.$a,e=a.$.D.$a,c,d,f,h,l,g,k,m,n,q,p,r,v,t,y,L,w,D,Sa,B,C,A,u,I,J,G,E,O,da,S,ta=a.$.vb*a.$.bc+a.$.wb*a.$.cc+a.$.xb*a.$.dc;if(-.999999999>ta){var Db,Ia,Da,ma=a.$.vb,Q=a.$.wb,Ja=a.$.xb,Ga=ma*ma,Ea=Q*Q,Ua=Ja*Ja,va;Ga<Ea?Ga<Ua?(va=1/Math.sqrt(Ea+Ua),Db=0,Ia=Ja*va,Da=-Q*va):(va=1/Math.sqrt(Ga+Ea),Db=Q*va,Ia=-ma*va,Da=0):Ea<Ua?(va=1/Math.sqrt(Ua+Ga),Db=-Ja*va,Ia=0,Da=ma*va):(va=1/Math.sqrt(Ga+Ea),Db=Q*va,Ia=-ma*va,Da=0);c=Db;d=Ia;f=Da;h=0}else{var oa,Ya,F;oa=a.$.wb*a.$.dc-a.$.xb*a.$.cc;Ya=a.$.xb*a.$.bc-a.$.vb*a.$.dc;F=a.$.vb*a.$.cc-a.$.wb*a.$.bc;var Qa=Math.sqrt(.5*(1+ta)),ta=.5/Qa;oa*=ta;Ya*=ta;F*=ta;c=oa;d=Ya;f=F;h=Qa}var X,M,N,ca,Y,T,aa,z;N=M=X=0;ca=1;Y=c;T=d;aa=f;z=h;var fa=X*Y+M*T+N*aa+ca*z;0>fa&&(fa=-fa,Y=-Y,T=-T,aa=-aa,z=-z);if(.999999<fa){var U,pa,sa,wa;U=Y-X;pa=T-M;sa=aa-N;wa=z-ca;Y=X+b/(b+e)*U;T=M+b/(b+e)*pa;aa=N+b/(b+e)*sa;z=ca+b/(b+e)*wa;var ra=Y*Y+T*T+aa*aa+z*z;1E-32<ra&&(ra=1/Math.sqrt(ra));l=Y*ra;g=T*ra;k=aa*ra;m=z*ra}else{var ka=b/(b+e)*Math.acos(fa);Y+=X*-fa;T+=M*-fa;aa+=N*-fa;z+=ca*-fa;var Z=Y*Y+T*T+aa*aa+z*z;1E-32<Z&&(Z=1/Math.sqrt(Z));Y*=Z;T*=Z;aa*=Z;z*=Z;var na=Math.sin(ka),Aa=Math.cos(ka);X*=Aa;M*=Aa;N*=Aa;ca*=Aa;l=X+Y*na;g=M+T*na;k=N+aa*na;m=ca+z*na}var ya=l,K=g,Ba=k,ha=m,ba=2*ya,Va=2*K,ga=2*Ba,P=ya*ba,za=K*Va,xb=Ba*ga,ja=ya*Va,Ma=K*ga,Oa=ya*ga,gb=ha*ba,pb=ha*Va,ua=ha*ga;n=1-za-xb;q=ja-ua;p=Oa+pb;r=ja+ua;v=1-P-xb;t=Ma-gb;y=Oa-pb;L=Ma+gb;w=1-P-za;var xa,Fa;xa=n*a.$.vb+q*a.$.wb+p*a.$.xb;Fa=r*a.$.vb+v*a.$.wb+t*a.$.xb;D=y*a.$.vb+L*a.$.wb+w*a.$.xb;J=a.cd;G=a.dd;E=a.ed;O=a.Qd;da=a.Rd;S=a.Sd;var fb=J*xa+G*Fa+E*D;if(-.999999999>fb){var Ha,qb,Na,la=J*J,Ca=G*G,Za=E*E,Ra;la<Ca?la<Za?(Ra=1/Math.sqrt(Ca+Za),Ha=0,qb=E*Ra,Na=-G*Ra):(Ra=1/Math.sqrt(la+Ca),Ha=G*Ra,qb=-J*Ra,Na=0):Ca<Za?(Ra=1/Math.sqrt(Za+la),Ha=-E*Ra,qb=0,Na=J*Ra):(Ra=1/Math.sqrt(la+Ca),Ha=G*Ra,qb=-J*Ra,Na=0);l=Ha;g=qb;k=Na;m=0}else{var ib,Lb,db;ib=G*D-E*Fa;Lb=E*xa-J*D;db=J*Fa-G*xa;var Ib=Math.sqrt(.5*(1+fb)),fb=.5/Ib;ib*=fb;Lb*=fb;db*=fb;l=ib;g=Lb;k=db;m=Ib}var kb=l,nb=g,Yb=k,Xa=m,$a=2*kb,Ka=2*nb,vb=2*Yb,H=kb*$a,eb=nb*Ka,lb=Yb*vb,yb=kb*Ka,mb=nb*vb,ub=kb*vb,x=Xa*$a,W=Xa*Ka,ea=Xa*vb;n=1-eb-lb;q=yb-ea;p=ub+W;r=yb+ea;v=1-H-lb;t=mb-x;y=ub-W;L=mb+x;w=1-H-eb;var ab,Wa,Pa;ab=n*O+q*da+p*S;Wa=r*O+v*da+t*S;Pa=y*O+L*da+w*S;Sa=ab;B=Wa;C=Pa;A=Fa*C-D*B;u=D*Sa-xa*C;I=xa*B-Fa*Sa;if(1E-6<A*A+u*u+I*I){var rb=A*A+u*u+I*I;0<rb&&(rb=1/Math.sqrt(rb));A*=rb;u*=rb;I*=rb}else{var ob=xa*xa,zb=Fa*Fa,Ab=D*D,ia;ob<zb?ob<Ab?(ia=1/Math.sqrt(zb+Ab),A=0,u=D*ia,I=-Fa*ia):(ia=1/Math.sqrt(ob+zb),A=Fa*ia,u=-xa*ia,I=0):zb<Ab?(ia=1/Math.sqrt(Ab+ob),A=-D*ia,u=0,I=xa*ia):(ia=1/Math.sqrt(ob+zb),A=Fa*ia,u=-xa*ia,I=0)}Sa=u*D-I*Fa;B=I*xa-A*D;C=A*Fa-u*xa;a.cd=xa;a.dd=Fa;a.ed=D;a.Qd=Sa;a.Rd=B;a.Sd=C;a.me=A;a.ne=u;a.oe=I;var Ta,bb,jb;Ta=this.wb*this.dc-this.xb*this.cc;bb=this.xb*this.bc-this.vb*this.dc;jb=this.vb*this.cc-this.wb*this.bc;var Bb=this.vb*this.bc+this.wb*this.cc+this.xb*this.dc,La=-1>=Bb?3.14159265358979:1<=Bb?0:Math.acos(Bb),Eb=Ta*Ta+bb*bb+jb*jb;0<Eb&&(Eb=1/Math.sqrt(Eb));Ta*=Eb;bb*=Eb;jb*=Eb;Ta*=La;bb*=La;jb*=La;this.Ee=Ta*this.da.Qd+bb*this.da.Rd+jb*this.da.Sd;this.Fe=Ta*this.da.me+bb*this.da.ne+jb*this.da.oe;var cb,qa,tb;cb=this.Ie*this.xe-this.Je*this.we;qa=this.Je*this.ve-this.He*this.xe;tb=this.He*this.we-this.Ie*this.ve;Bb=this.He*this.ve+this.Ie*this.we+this.Je*this.xe;this.angle=-1>=Bb?3.14159265358979:1<=Bb?0:Math.acos(Bb);0>cb*this.da.cd+qa*this.da.dd+tb*this.da.ed&&(this.angle=-this.angle);var Mb,Sb,hb;Mb=this.Rf-this.Of;Sb=this.Sf-this.Pf;hb=this.Tf-this.Qf;this.eg=Mb*this.da.cd+Sb*this.da.dd+hb*this.da.ed;this.Df=Mb*this.da.Qd+Sb*this.da.Rd+hb*this.da.Sd;this.Ef=Mb*this.da.me+Sb*this.da.ne+hb*this.da.oe},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new t;a.x=this.bc;a.y=this.cc;a.z=this.dc;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.bc;a.y=this.cc;a.z=this.dc},Ig:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new t;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},In:function(){return this.dl},An:function(){return this.Xk},Hn:function(){return this.cl},zn:function(){return this.Wk},ol:function(){return this.angle},rl:function(){return this.eg}});kc.prototype={fh:function(a,b,e){this.rigidBody1=a;this.rigidBody2=b;var c=this.rigidBody1,d,f,h;d=e.x;f=e.y;h=e.z;d-=c.a.v;f-=c.a.A;h-=c.a.B;a=c.a.o*d+c.a.i*f+c.a.l*h;b=c.a.f*d+c.a.m*f+c.a.g*h;c=c.a.h*d+c.a.j*f+c.a.s*h;d=this.localAnchor1;d.x=a;d.y=b;d.z=c;b=this.rigidBody2;c=e.x;d=e.y;f=e.z;c-=b.a.v;d-=b.a.A;f-=b.a.B;e=b.a.o*c+b.a.i*d+b.a.l*f;a=b.a.f*c+b.a.m*d+b.a.g*f;b=b.a.h*c+b.a.j*d+b.a.s*f;c=this.localAnchor2;c.x=e;c.y=a;c.z=b}};Ge.ua=kc;Ge.prototype=cb(kc.prototype,{za:function(a,b,e,c){this.fh(a,b,e);var d,f,h;d=c.x;f=c.y;h=c.z;var l;e=a.a.o*d+a.a.i*f+a.a.l*h;l=a.a.f*d+a.a.m*f+a.a.g*h;a=a.a.h*d+a.a.j*f+a.a.s*h;d=this.localAxis1;d.x=e;d.y=l;d.z=a;l=c.x;a=c.y;d=c.z;c=b.a.o*l+b.a.i*a+b.a.l*d;e=b.a.f*l+b.a.m*a+b.a.g*d;b=b.a.h*l+b.a.j*a+b.a.s*d;l=this.localAxis2;l.x=c;l.y=e;l.z=b;return this}});Xc.prototype={ua:function(){return this.Pk},Hb:function(){return this.Qc},Mb:function(){return this.ia},cb:function(){return this.M}};Kb.ua=V;Kb.prototype=cb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0,d=this.Df*c,f=this.Ef*c,h=this.rh*c,l=this.Ee*c,c=this.Fe*c,g,k,m,n,q,p,r,v,t,y,L,w;g=-this.Ub;k=this.Tb;m=this.Ub;n=-this.Sb;q=-this.Tb;p=this.Sb;r=-this.Xb;v=this.Wb;t=this.Xb;y=-this.Vb;L=-this.Wb;w=this.Vb;var D,u;u=1/(this.C.$a+this.D.$a);if(0>=this.Ce.frequency||!e){D=this.Pb[0];var B=a.rows[a.Ka++],C=B.Aa;C.va=0;C.wa=0;C.xa=0;C.Ba=0;C.Ca=0;C.Da=0;C.aa=0;C.ba=0;C.ca=0;C.ea=0;C.fa=0;C.ga=0;B.Fa=0;B.Ma=0;B.Ia=0;B.Ha=0;B.motorSpeed=0;B.fb=0;B.ta=D;D=B;var B=this.eg,A=this.Rh,E=this.Ce,C=G.linearSlop;if(e)E=0,e=1;else{if(0<E.frequency){var C=0,I=6.28318530717958*E.frequency,J=E.dampingRatio;J<G.minSpringDamperDampingRatio&&(J=G.minSpringDamperDampingRatio);e=b.dt;J=2*J*I;I*=I;E.useSymplecticEuler?(E=1/(e*J),e=I/J):(E=1/(e*(e*I+J)),e=I/(e*I+J))}else E=0,e=this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0;0<A.motorForce?(D.motorSpeed=A.motorSpeed,D.fb=A.motorForce*b.dt):(D.motorSpeed=0,D.fb=0)}b=A.lowerLimit;I=A.upperLimit;b>I?b=J=A=0:b==I?(A=-1/0,J=1/0,b=B-b):B<b?(A=-1/0,J=0,b=B-b+C,0<b&&(b=0)):B>I?(A=0,J=1/0,b=B-I-C,0>b&&(b=0)):b=J=A=0;D.Ia=A;D.Ha=J;D.Ma=E*(u?1/u:0);D.Fa=b*e;u=D.Aa;u.va=this.da.cd;u.wa=this.da.dd;u.xa=this.da.ed;u.Ba=this.da.cd;u.Ca=this.da.dd;u.Da=this.da.ed;u.aa=-0;u.ba=-g;u.ca=-k;u.ea=-0;u.fa=-r;u.ga=-v}g=this.Pb[1];k=a.rows[a.Ka++];r=k.Aa;r.va=0;r.wa=0;r.xa=0;r.Ba=0;r.Ca=0;r.Da=0;r.aa=0;r.ba=0;r.ca=0;r.ea=0;r.fa=0;r.ga=0;k.Fa=0;k.Ma=0;k.Ia=0;k.Ha=0;k.motorSpeed=0;k.fb=0;k.ta=g;D=k;D.Fa=d;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;u=D.Aa;u.va=this.da.Qd;u.wa=this.da.Rd;u.xa=this.da.Sd;u.Ba=this.da.Qd;u.Ca=this.da.Rd;u.Da=this.da.Sd;u.aa=-m;u.ba=-0;u.ca=-n;u.ea=-t;u.fa=-0;u.ga=-y;d=this.Pb[2];m=a.rows[a.Ka++];n=m.Aa;n.va=0;n.wa=0;n.xa=0;n.Ba=0;n.Ca=0;n.Da=0;n.aa=0;n.ba=0;n.ca=0;n.ea=0;n.fa=0;n.ga=0;m.Fa=0;m.Ma=0;m.Ia=0;m.Ha=0;m.motorSpeed=0;m.fb=0;m.ta=d;D=m;D.Fa=f;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;u=D.Aa;u.va=this.da.me;u.wa=this.da.ne;u.xa=this.da.oe;u.Ba=this.da.me;u.Ca=this.da.ne;u.Da=this.da.oe;u.aa=-q;u.ba=-p;u.ca=-0;u.ea=-L;u.fa=-w;u.ga=-0;f=this.Pb[3];q=a.rows[a.Ka++];p=q.Aa;p.va=0;p.wa=0;p.xa=0;p.Ba=0;p.Ca=0;p.Da=0;p.aa=0;p.ba=0;p.ca=0;p.ea=0;p.fa=0;p.ga=0;q.Fa=0;q.Ma=0;q.Ia=0;q.Ha=0;q.motorSpeed=0;q.fb=0;q.ta=f;D=q;D.Fa=h;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;u=D.Aa;u.aa=1;u.ba=0;u.ca=0;u.ea=1;u.fa=0;u.ga=0;h=this.Pb[4];f=a.rows[a.Ka++];q=f.Aa;q.va=0;q.wa=0;q.xa=0;q.Ba=0;q.Ca=0;q.Da=0;q.aa=0;q.ba=0;q.ca=0;q.ea=0;q.fa=0;q.ga=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.fb=0;f.ta=h;D=f;D.Fa=l;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;u=D.Aa;u.aa=0;u.ba=1;u.ca=0;u.ea=0;u.fa=1;u.ga=0;l=this.Pb[5];a=a.rows[a.Ka++];h=a.Aa;h.va=0;h.wa=0;h.xa=0;h.Ba=0;h.Ca=0;h.Da=0;h.aa=0;h.ba=0;h.ca=0;h.ea=0;h.fa=0;h.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=l;D=a;D.Fa=c;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;u=D.Aa;u.aa=0;u.ba=0;u.ca=1;u.ea=0;u.fa=0;u.ga=1},hd:function(){V.prototype.hd.call(this);var a=this.da,b=a.$.C.$a,e=a.$.D.$a,c,d,f,h,l,g,k,m,n,q,p,r,v,t,y,L,w,D,u,B,C,A,G,I,J,E,O,S,da,ta,Ja=a.$.vb*a.$.bc+a.$.wb*a.$.cc+a.$.xb*a.$.dc;if(-.999999999>Ja){var Db,Ia,Da,ma=a.$.vb,Q=a.$.wb,Ma=a.$.xb,Ga=ma*ma,Ea=Q*Q,Ua=Ma*Ma,va;Ga<Ea?Ga<Ua?(va=1/Math.sqrt(Ea+Ua),Db=0,Ia=Ma*va,Da=-Q*va):(va=1/Math.sqrt(Ga+Ea),Db=Q*va,Ia=-ma*va,Da=0):Ea<Ua?(va=1/Math.sqrt(Ua+Ga),Db=-Ma*va,Ia=0,Da=ma*va):(va=1/Math.sqrt(Ga+Ea),Db=Q*va,Ia=-ma*va,Da=0);c=Db;d=Ia;f=Da;h=0}else{var oa,Ya,F;oa=a.$.wb*a.$.dc-a.$.xb*a.$.cc;Ya=a.$.xb*a.$.bc-a.$.vb*a.$.dc;F=a.$.vb*a.$.cc-a.$.wb*a.$.bc;var Qa=Math.sqrt(.5*(1+Ja)),Ja=.5/Qa;oa*=Ja;Ya*=Ja;F*=Ja;c=oa;d=Ya;f=F;h=Qa}var X,M,N,ca,Y,T,aa,z;N=M=X=0;ca=1;Y=c;T=d;aa=f;z=h;var fa=X*Y+M*T+N*aa+ca*z;0>fa&&(fa=-fa,Y=-Y,T=-T,aa=-aa,z=-z);if(.999999<fa){var U,pa,sa,wa;U=Y-X;pa=T-M;sa=aa-N;wa=z-ca;Y=X+b/(b+e)*U;T=M+b/(b+e)*pa;aa=N+b/(b+e)*sa;z=ca+b/(b+e)*wa;var ra=Y*Y+T*T+aa*aa+z*z;1E-32<ra&&(ra=1/Math.sqrt(ra));l=Y*ra;g=T*ra;k=aa*ra;m=z*ra}else{var ka=b/(b+e)*Math.acos(fa);Y+=X*-fa;T+=M*-fa;aa+=N*-fa;z+=ca*-fa;var Z=Y*Y+T*T+aa*aa+z*z;1E-32<Z&&(Z=1/Math.sqrt(Z));Y*=Z;T*=Z;aa*=Z;z*=Z;var na=Math.sin(ka),Aa=Math.cos(ka);X*=Aa;M*=Aa;N*=Aa;ca*=Aa;l=X+Y*na;g=M+T*na;k=N+aa*na;m=ca+z*na}var ya=l,K=g,Ba=k,ha=m,ba=2*ya,Va=2*K,ga=2*Ba,P=ya*ba,za=K*Va,xb=Ba*ga,ja=ya*Va,Oa=K*ga,Xa=ya*ga,gb=ha*ba,pb=ha*Va,ua=ha*ga;n=1-za-xb;q=ja-ua;p=Xa+pb;r=ja+ua;v=1-P-xb;t=Oa-gb;y=Xa-pb;L=Oa+gb;w=1-P-za;var xa,Fa;xa=n*a.$.vb+q*a.$.wb+p*a.$.xb;Fa=r*a.$.vb+v*a.$.wb+t*a.$.xb;D=y*a.$.vb+L*a.$.wb+w*a.$.xb;J=a.cd;E=a.dd;O=a.ed;S=a.Qd;da=a.Rd;ta=a.Sd;var fb=J*xa+E*Fa+O*D;if(-.999999999>fb){var Ha,qb,Na,la=J*J,Ca=E*E,Za=O*O,Ra;la<Ca?la<Za?(Ra=1/Math.sqrt(Ca+Za),Ha=0,qb=O*Ra,Na=-E*Ra):(Ra=1/Math.sqrt(la+Ca),Ha=E*Ra,qb=-J*Ra,Na=0):Ca<Za?(Ra=1/Math.sqrt(Za+la),Ha=-O*Ra,qb=0,Na=J*Ra):(Ra=1/Math.sqrt(la+Ca),Ha=E*Ra,qb=-J*Ra,Na=0);l=Ha;g=qb;k=Na;m=0}else{var ib,Lb,db;ib=E*D-O*Fa;Lb=O*xa-J*D;db=J*Fa-E*xa;var Ib=Math.sqrt(.5*(1+fb)),fb=.5/Ib;ib*=fb;Lb*=fb;db*=fb;l=ib;g=Lb;k=db;m=Ib}var kb=l,nb=g,Yb=k,ab=m,$a=2*kb,Ka=2*nb,vb=2*Yb,H=kb*$a,eb=nb*Ka,lb=Yb*vb,yb=kb*Ka,mb=nb*vb,ub=kb*vb,x=ab*$a,W=ab*Ka,ea=ab*vb;n=1-eb-lb;q=yb-ea;p=ub+W;r=yb+ea;v=1-H-lb;t=mb-x;y=ub-W;L=mb+x;w=1-H-eb;var Wa,cb,Pa;Wa=n*S+q*da+p*ta;cb=r*S+v*da+t*ta;Pa=y*S+L*da+w*ta;u=Wa;B=cb;C=Pa;A=Fa*C-D*B;G=D*u-xa*C;I=xa*B-Fa*u;if(1E-6<A*A+G*G+I*I){var rb=A*A+G*G+I*I;0<rb&&(rb=1/Math.sqrt(rb));A*=rb;G*=rb;I*=rb}else{var ob=xa*xa,zb=Fa*Fa,Ab=D*D,ia;ob<zb?ob<Ab?(ia=1/Math.sqrt(zb+Ab),A=0,G=D*ia,I=-Fa*ia):(ia=1/Math.sqrt(ob+zb),A=Fa*ia,G=-xa*ia,I=0):zb<Ab?(ia=1/Math.sqrt(Ab+ob),A=-D*ia,G=0,I=xa*ia):(ia=1/Math.sqrt(ob+zb),A=Fa*ia,G=-xa*ia,I=0)}u=G*D-I*Fa;B=I*xa-A*D;C=A*Fa-G*xa;a.cd=xa;a.dd=Fa;a.ed=D;a.Qd=u;a.Rd=B;a.Sd=C;a.me=A;a.ne=G;a.oe=I;var Ta,bb,jb,Bb,La,Eb,hb,qa,tb,Mb,Sb,Cb,wb,Jb,Zb,Kb,Hb,Wb;Ta=this.vb;bb=this.He;jb=this.Hh;Bb=this.wb;La=this.Ie;Eb=this.Ih;hb=this.xb;qa=this.Je;tb=this.Jh;Mb=this.bc;Sb=this.ve;Cb=this.ah;wb=this.cc;Jb=this.we;Zb=this.bh;Kb=this.dc;Hb=this.xe;Wb=this.dh;var Rb,Ub,gc,fc,Pb,cc,Fb,lc;Rb=Mb*Ta+Sb*bb+Cb*jb;Ub=Mb*Bb+Sb*La+Cb*Eb;gc=Mb*hb+Sb*qa+Cb*tb;fc=wb*Ta+Jb*bb+Zb*jb;Pb=wb*Bb+Jb*La+Zb*Eb;cc=wb*hb+Jb*qa+Zb*tb;Fb=Kb*Ta+Hb*bb+Wb*jb;lc=Kb*Bb+Hb*La+Wb*Eb;var bc,Qb,dc,Vb,Nb=Kb*hb+Hb*qa+Wb*tb,Tb=Rb+Pb+Nb,sb;0<Tb?(sb=Math.sqrt(Tb+1),Vb=.5*sb,sb=.5/sb,bc=(lc-cc)*sb,Qb=(gc-Fb)*sb,dc=(fc-Ub)*sb):Rb>Pb?Rb>Nb?(sb=Math.sqrt(Rb-Pb-Nb+1),bc=.5*sb,sb=.5/sb,Qb=(Ub+fc)*sb,dc=(gc+Fb)*sb,Vb=(lc-cc)*sb):(sb=Math.sqrt(Nb-Rb-Pb+1),dc=.5*sb,sb=.5/sb,bc=(gc+Fb)*sb,Qb=(cc+lc)*sb,Vb=(fc-Ub)*sb):Pb>Nb?(sb=Math.sqrt(Pb-Nb-Rb+1),Qb=.5*sb,sb=.5/sb,bc=(Ub+fc)*sb,dc=(cc+lc)*sb,Vb=(gc-Fb)*sb):(sb=Math.sqrt(Nb-Rb-Pb+1),dc=.5*sb,sb=.5/sb,bc=(gc+Fb)*sb,Qb=(cc+lc)*sb,Vb=(fc-Ub)*sb);var Xb=Vb,qc=2*(-1>=Xb?3.14159265358979:1<=Xb?0:Math.acos(Xb));this.rh=bc;this.Ee=Qb;this.Fe=dc;var Ob=this.rh*this.rh+this.Ee*this.Ee+this.Fe*this.Fe;0<Ob&&(Ob=1/Math.sqrt(Ob));this.rh*=Ob;this.Ee*=Ob;this.Fe*=Ob;this.rh*=qc;this.Ee*=qc;this.Fe*=qc;var ac,jc,$b;ac=this.Rf-this.Of;jc=this.Sf-this.Pf;$b=this.Tf-this.Qf;this.eg=ac*this.da.cd+jc*this.da.dd+$b*this.da.ed;this.Df=ac*this.da.Qd+jc*this.da.Rd+$b*this.da.Sd;this.Ef=ac*this.da.me+jc*this.da.ne+$b*this.da.oe},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new t;a.x=this.bc;a.y=this.cc;a.z=this.dc;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.bc;a.y=this.cc;a.z=this.dc},Ig:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new t;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},Cj:function(){return this.Ce},ql:function(){return this.Rh},rl:function(){return this.eg}});cg.ua=kc;cg.prototype=cb(kc.prototype,{za:function(a,b,e,c){this.fh(a,b,e);var d,f,h;d=c.x;f=c.y;h=c.z;var l;e=a.a.o*d+a.a.i*f+a.a.l*h;l=a.a.f*d+a.a.m*f+a.a.g*h;a=a.a.h*d+a.a.j*f+a.a.s*h;d=this.localAxis1;d.x=e;d.y=l;d.z=a;l=c.x;a=c.y;d=c.z;c=b.a.o*l+b.a.i*a+b.a.l*d;e=b.a.f*l+b.a.m*a+b.a.g*d;b=b.a.h*l+b.a.j*a+b.a.s*d;l=this.localAxis2;l.x=c;l.y=e;l.z=b;return this}});ab.ua=V;ab.prototype=cb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0,d,f;d=this.Mj*c;f=this.Df*c;var h=this.Ef*c,l,g,k,m,n,q,p,r,v,t,y,L;l=-this.Ub;g=this.Tb;k=this.Ub;m=-this.Sb;n=-this.Tb;q=this.Sb;p=-this.Xb;r=this.Wb;v=this.Xb;t=-this.Vb;y=-this.Wb;L=this.Vb;var w=this.je,D=this.ke,u=this.le,c=(this.C.P*w+this.C.R*D+this.C.S*u)*w+(this.C.T*w+this.C.U*D+this.C.V*u)*D+(this.C.W*w+this.C.X*D+this.C.Y*u)*u,B=(this.D.P*w+this.D.R*D+this.D.S*u)*w+(this.D.T*w+this.D.U*D+this.D.V*u)*D+(this.D.W*w+this.D.X*D+this.D.Y*u)*u;if(0<c){var C=w*this.Sb+D*this.Tb+u*this.Ub,C=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-C*C;0<C&&(c=0<this.C.$a?1/(1/c+this.C.Pc*C):0)}0<B&&(w=w*this.Vb+D*this.Wb+u*this.Xb,w=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-w*w,0<w&&(B=0<this.D.$a?1/(1/B+this.D.Pc*w):0));B=c+B?1/(c+B):0;D=this.bc;u=this.cc;C=this.dc;c=(this.C.P*D+this.C.R*u+this.C.S*C)*D+(this.C.T*D+this.C.U*u+this.C.V*C)*u+(this.C.W*D+this.C.X*u+this.C.Y*C)*C;w=(this.D.P*D+this.D.R*u+this.D.S*C)*D+(this.D.T*D+this.D.U*u+this.D.V*C)*u+(this.D.W*D+this.D.X*u+this.D.Y*C)*C;if(0<c){var A=D*this.Sb+u*this.Tb+C*this.Ub,A=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-A*A;0<A&&(c=0<this.C.$a?1/(1/c+this.C.Pc*A):0)}0<w&&(D=D*this.Vb+u*this.Wb+C*this.Xb,D=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-D*D,0<D&&(w=0<this.D.$a?1/(1/w+this.D.Pc*D):0));c=c+w?1/(c+w):0;w=this.Pb[0];D=a.rows[a.Ka++];u=D.Aa;u.va=0;u.wa=0;u.xa=0;u.Ba=0;u.Ca=0;u.Da=0;u.aa=0;u.ba=0;u.ca=0;u.ea=0;u.fa=0;u.ga=0;D.Fa=0;D.Ma=0;D.Ia=0;D.Ha=0;D.motorSpeed=0;D.fb=0;D.ta=w;w=D;w.Fa=d;w.Ma=0;w.Ia=-1/0;w.Ha=1/0;w=w.Aa;w.va=1;w.wa=0;w.xa=0;w.Ba=1;w.Ca=0;w.Da=0;w.aa=-0;w.ba=-l;w.ca=-g;w.ea=-0;w.fa=-p;w.ga=-r;w=this.Pb[1];d=a.rows[a.Ka++];l=d.Aa;l.va=0;l.wa=0;l.xa=0;l.Ba=0;l.Ca=0;l.Da=0;l.aa=0;l.ba=0;l.ca=0;l.ea=0;l.fa=0;l.ga=0;d.Fa=0;d.Ma=0;d.Ia=0;d.Ha=0;d.motorSpeed=0;d.fb=0;d.ta=w;w=d;w.Fa=f;w.Ma=0;w.Ia=-1/0;w.Ha=1/0;w=w.Aa;w.va=0;w.wa=1;w.xa=0;w.Ba=0;w.Ca=1;w.Da=0;w.aa=-k;w.ba=-0;w.ca=-m;w.ea=-v;w.fa=-0;w.ga=-t;w=this.Pb[2];f=a.rows[a.Ka++];k=f.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.aa=0;k.ba=0;k.ca=0;k.ea=0;k.fa=0;k.ga=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.fb=0;f.ta=w;w=f;w.Fa=h;w.Ma=0;w.Ia=-1/0;w.Ha=1/0;w=w.Aa;w.va=0;w.wa=0;w.xa=1;w.Ba=0;w.Ca=0;w.Da=1;w.aa=-n;w.ba=-q;w.ca=-0;w.ea=-y;w.fa=-L;w.ga=-0;0<this.Nj&&(0>=this.$k.frequency||!e)&&(w=this.Pb[3],h=a.rows[a.Ka++],n=h.Aa,n.va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.aa=0,n.ba=0,n.ca=0,n.ea=0,n.fa=0,n.ga=0,h.Fa=0,h.Ma=0,h.Ia=0,h.Ha=0,h.motorSpeed=0,h.fb=0,h.ta=w,w=h,h=this.Nj,y=this.nl,q=this.$k,n=G.angularSlop,e?(q=0,L=1):(0<q.frequency?(n=0,k=6.28318530717958*q.frequency,f=q.dampingRatio,f<G.minSpringDamperDampingRatio&&(f=G.minSpringDamperDampingRatio),L=b.dt,f=2*f*k,k*=k,q.useSymplecticEuler?(q=1/(L*f),L=k/f):(q=1/(L*(L*k+f)),L=k/(L*k+f))):(q=0,L=this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0),0<y.motorTorque?(w.motorSpeed=y.motorSpeed,w.fb=y.motorTorque*b.dt):(w.motorSpeed=0,w.fb=0)),f=y.lowerLimit,y=y.upperLimit,k=.5*(f+y),h=((h-k+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,h+=k,f>y?h=m=k=0:f==y?(k=-1/0,m=1/0,h-=f):h<f?(k=-1/0,m=0,h=h-f+n,0<h&&(h=0)):h>y?(k=0,m=1/0,h=h-y-n,0>h&&(h=0)):h=m=k=0,w.Ia=k,w.Ha=m,w.Ma=q*(B?1/B:0),w.Fa=h*L,w=w.Aa,w.aa=this.je,w.ba=this.ke,w.ca=this.le,w.ea=this.je,w.fa=this.ke,w.ga=this.le);if(0>=this.fl.frequency||!e)B=this.Pb[4],a=a.rows[a.Ka++],w=a.Aa,w.va=0,w.wa=0,w.xa=0,w.Ba=0,w.Ca=0,w.Da=0,w.aa=0,w.ba=0,w.ca=0,w.ea=0,w.fa=0,w.ga=0,a.Fa=0,a.Ma=0,a.Ia=0,a.Ha=0,a.motorSpeed=0,a.fb=0,a.ta=B,w=a,a=this.tj,h=this.el,n=this.fl,B=G.angularSlop,e?(e=0,n=1):(0<n.frequency?(B=0,e=6.28318530717958*n.frequency,y=n.dampingRatio,y<G.minSpringDamperDampingRatio&&(y=G.minSpringDamperDampingRatio),q=b.dt,y=2*y*e,L=e*e,n.useSymplecticEuler?(e=1/(q*y),n=L/y):(e=1/(q*(q*L+y)),n=L/(q*L+y))):(e=0,n=this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0),0<h.motorTorque?(w.motorSpeed=h.motorSpeed,w.fb=h.motorTorque*b.dt):(w.motorSpeed=0,w.fb=0)),b=h.lowerLimit,h=h.upperLimit,q=.5*(b+h),a=((a-q+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,a+=q,b>h?b=y=q=0:b==h?(q=-1/0,y=1/0,b=a-b):a<b?(q=-1/0,y=0,b=a-b+B,0<b&&(b=0)):a>h?(q=0,y=1/0,b=a-h-B,0>b&&(b=0)):b=y=q=0,w.Ia=q,w.Ha=y,w.Ma=e*(c?1/c:0),w.Fa=b*n,w=w.Aa,w.aa=this.gi,w.ba=this.hi,w.ca=this.ii,w.ea=this.gi,w.fa=this.hi,w.ga=this.ii},hd:function(){V.prototype.hd.call(this);var a,b,e,c,d,f;a=this.vb;b=this.wb;e=this.xb;c=this.bc;d=this.cc;f=this.dc;var h,l,g,k,m,n,q,p,r;h=this.vb;l=this.He;g=this.Hh;k=this.wb;m=this.Ie;n=this.Ih;q=this.xb;p=this.Je;r=this.Jh;var v,t,y,L,w,D,u,B;D=a*c+b*d+e*f;-.999999999>D?(w=a*a,c=b*b,d=e*e,w<c?w<d?(c=1/Math.sqrt(c+d),w=0,e*=c,a=-b*c):(c=1/Math.sqrt(w+c),w=b*c,e=-a*c,a=0):c<d?(c=1/Math.sqrt(d+w),w=-e*c,e=0,a*=c):(c=1/Math.sqrt(w+c),w=b*c,e=-a*c,a=0),v=w,t=e,y=a,L=0):(w=Math.sqrt(.5*(1+D)),D=.5/w,v=(b*f-e*d)*D,t=(e*c-a*f)*D,y=(a*d-b*c)*D,L=w);D=v;f=t;w=y;a=L;d=2*D;e=2*f;b=2*w;u=D*d;B=f*e;c=w*b;w=D*e;f*=b;D*=b;var C=a*d,A=a*e;d=a*b;a=1-B-c;b=w-d;e=D+A;w+=d;c=1-u-c;d=f-C;D-=A;f+=C;u=1-u-B;this.kj=2*(-1>=L?3.14159265358979:1<=L?0:Math.acos(L));L=v;B=y;y=a*this.ve+w*this.we+D*this.xe;C=b*this.ve+c*this.we+f*this.xe;v=e*this.ve+d*this.we+u*this.xe;this.tj=Math.atan2(this.Hh*y+this.Ih*C+this.Jh*v,this.He*y+this.Ie*C+this.Je*v);this.gi=this.vb+this.bc;this.hi=this.wb+this.cc;this.ii=this.xb+this.dc;v=this.gi*this.gi+this.hi*this.hi+this.ii*this.ii;0<v&&(v=1/Math.sqrt(v));this.gi*=v;this.hi*=v;this.ii*=v;y=Math.sqrt(L*L+t*t+B*B);0<y&&(y=1/y);L*=y*this.kj;t*=y*this.kj;B*=y*this.kj;v=l*L+m*t+p*B;t=g*L+n*t+r*B;y=this.bk;L=this.ck;y=1/(y*y);B=1/(L*L);(L=v*v*y+t*t*B)?(C=Math.sqrt(1/L),L=v*C,C*=t,A=L*y,B*=C,y=1/Math.sqrt(A*A+B*B),A*=y,B*=y,v=(v-L)*A+(t-C)*B,0<v?(this.Nj=v,this.je=0,this.ke=A,this.le=B,h=h*this.je+l*this.ke+g*this.le,k=k*this.je+m*this.ke+n*this.le,q=q*this.je+p*this.ke+r*this.le,this.je=h,this.ke=k,this.le=q,q=a*this.je+b*this.ke+e*this.le,p=w*this.je+c*this.ke+d*this.le,r=D*this.je+f*this.ke+u*this.le,this.je=q,this.ke=p,this.le=r):this.Nj=0):this.Nj=this.le=this.ke=this.je=0;this.Mj=this.Rf-this.Of;this.Df=this.Sf-this.Pf;this.Ef=this.Tf-this.Qf},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new t;a.x=this.bc;a.y=this.cc;a.z=this.dc;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.bc;a.y=this.cc;a.z=this.dc},Ig:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new t;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},Mn:function(){return this.fl},Ln:function(){return this.el},Gn:function(){return this.$k},En:function(){var a=new t;a.x=this.je;a.y=this.ke;a.z=this.le;return a},Fn:function(a){a.x=this.je;a.y=this.ke;a.z=this.le},Dn:function(){return this.kj},Kn:function(){return this.tj}});Rf.ua=kc;Rf.prototype=cb(kc.prototype,{za:function(a,b,e,c,d){this.fh(a,b,e);var f,h,l;f=c.x;h=c.y;l=c.z;var g;e=a.a.o*f+a.a.i*h+a.a.l*l;g=a.a.f*f+a.a.m*h+a.a.g*l;f=a.a.h*f+a.a.j*h+a.a.s*l;h=this.localTwistAxis1;h.x=e;h.y=g;h.z=f;g=c.x;f=c.y;h=c.z;c=b.a.o*g+b.a.i*f+b.a.l*h;e=b.a.f*g+b.a.m*f+b.a.g*h;b=b.a.h*g+b.a.j*f+b.a.s*h;g=this.localTwistAxis2;g.x=c;g.y=e;g.z=b;c=d.x;e=d.y;g=d.z;d=a.a.o*c+a.a.i*e+a.a.l*g;b=a.a.f*c+a.a.m*e+a.a.g*g;a=a.a.h*c+a.a.j*e+a.a.s*g;c=this.localSwingAxis1;c.x=d;c.y=b;c.z=a;return this}});Jb.ua=V;Jb.prototype=cb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0,d,f;d=this.Mj*c;f=this.Df*c;var h=this.Ef*c,l=this.Ee*c,c=this.Fe*c,g,k,m,n,q,p,r,v,t,y,L,w;g=-this.Ub;k=this.Tb;m=this.Ub;n=-this.Sb;q=-this.Tb;p=this.Sb;r=-this.Xb;v=this.Wb;t=this.Xb;y=-this.Vb;L=-this.Wb;w=this.Vb;var D=this.da.cd,u=this.da.dd,B=this.da.ed,C=(this.C.P*D+this.C.R*u+this.C.S*B)*D+(this.C.T*D+this.C.U*u+this.C.V*B)*u+(this.C.W*D+this.C.X*u+this.C.Y*B)*B,A=(this.D.P*D+this.D.R*u+this.D.S*B)*D+(this.D.T*D+this.D.U*u+this.D.V*B)*u+(this.D.W*D+this.D.X*u+this.D.Y*B)*B;if(0<C){var E=D*this.Sb+u*this.Tb+B*this.Ub,E=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-E*E;0<E&&(C=0<this.C.$a?1/(1/C+this.C.Pc*E):0)}0<A&&(D=D*this.Vb+u*this.Wb+B*this.Xb,D=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-D*D,0<D&&(A=0<this.D.$a?1/(1/A+this.D.Pc*D):0));C=C+A?1/(C+A):0;A=this.Pb[0];D=a.rows[a.Ka++];u=D.Aa;u.va=0;u.wa=0;u.xa=0;u.Ba=0;u.Ca=0;u.Da=0;u.aa=0;u.ba=0;u.ca=0;u.ea=0;u.fa=0;u.ga=0;D.Fa=0;D.Ma=0;D.Ia=0;D.Ha=0;D.motorSpeed=0;D.fb=0;D.ta=A;A=D;A.Fa=d;A.Ma=0;A.Ia=-1/0;A.Ha=1/0;A=A.Aa;A.va=1;A.wa=0;A.xa=0;A.Ba=1;A.Ca=0;A.Da=0;A.aa=-0;A.ba=-g;A.ca=-k;A.ea=-0;A.fa=-r;A.ga=-v;A=this.Pb[1];d=a.rows[a.Ka++];g=d.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.aa=0;g.ba=0;g.ca=0;g.ea=0;g.fa=0;g.ga=0;d.Fa=0;d.Ma=0;d.Ia=0;d.Ha=0;d.motorSpeed=0;d.fb=0;d.ta=A;A=d;A.Fa=f;A.Ma=0;A.Ia=-1/0;A.Ha=1/0;A=A.Aa;A.va=0;A.wa=1;A.xa=0;A.Ba=0;A.Ca=1;A.Da=0;A.aa=-m;A.ba=-0;A.ca=-n;A.ea=-t;A.fa=-0;A.ga=-y;f=this.Pb[2];A=a.rows[a.Ka++];m=A.Aa;m.va=0;m.wa=0;m.xa=0;m.Ba=0;m.Ca=0;m.Da=0;m.aa=0;m.ba=0;m.ca=0;m.ea=0;m.fa=0;m.ga=0;A.Fa=0;A.Ma=0;A.Ia=0;A.Ha=0;A.motorSpeed=0;A.fb=0;A.ta=f;A.Fa=h;A.Ma=0;A.Ia=-1/0;A.Ha=1/0;A=A.Aa;A.va=0;A.wa=0;A.xa=1;A.Ba=0;A.Ca=0;A.Da=1;A.aa=-q;A.ba=-p;A.ca=-0;A.ea=-L;A.fa=-w;A.ga=-0;if(0>=this.Ce.frequency||!e)h=this.Pb[3],q=a.rows[a.Ka++],p=q.Aa,p.va=0,p.wa=0,p.xa=0,p.Ba=0,p.Ca=0,p.Da=0,p.aa=0,p.ba=0,p.ca=0,p.ea=0,p.fa=0,p.ga=0,q.Fa=0,q.Ma=0,q.Ia=0,q.Ha=0,q.motorSpeed=0,q.fb=0,q.ta=h,A=q,h=this.angle,p=this.Rh,L=this.Ce,q=G.angularSlop,e?(e=0,L=1):(0<L.frequency?(q=0,e=6.28318530717958*L.frequency,f=L.dampingRatio,f<G.minSpringDamperDampingRatio&&(f=G.minSpringDamperDampingRatio),w=b.dt,f=2*f*e,m=e*e,L.useSymplecticEuler?(e=1/(w*f),L=m/f):(e=1/(w*(w*m+f)),L=m/(w*m+f))):(e=0,L=this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0),0<p.motorTorque?(A.motorSpeed=p.motorSpeed,A.fb=p.motorTorque*b.dt):(A.motorSpeed=0,A.fb=0)),b=p.lowerLimit,p=p.upperLimit,w=.5*(b+p),h=((h-w+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+w,b>p?b=f=w=0:b==p?(w=-1/0,f=1/0,b=h-b):h<b?(w=-1/0,f=0,b=h-b+q,0<b&&(b=0)):h>p?(w=0,f=1/0,b=h-p-q,0>b&&(b=0)):b=f=w=0,A.Ia=w,A.Ha=f,A.Ma=e*(C?1/C:0),A.Fa=b*L,A=A.Aa,A.aa=this.da.cd,A.ba=this.da.dd,A.ca=this.da.ed,A.ea=this.da.cd,A.fa=this.da.dd,A.ga=this.da.ed;b=this.Pb[4];C=a.rows[a.Ka++];e=C.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.aa=0;e.ba=0;e.ca=0;e.ea=0;e.fa=0;e.ga=0;C.Fa=0;C.Ma=0;C.Ia=0;C.Ha=0;C.motorSpeed=0;C.fb=0;C.ta=b;A=C;A.Fa=l;A.Ma=0;A.Ia=-1/0;A.Ha=1/0;A=A.Aa;A.aa=this.da.Qd;A.ba=this.da.Rd;A.ca=this.da.Sd;A.ea=this.da.Qd;A.fa=this.da.Rd;A.ga=this.da.Sd;l=this.Pb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.aa=0;b.ba=0;b.ca=0;b.ea=0;b.fa=0;b.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=l;A=a;A.Fa=c;A.Ma=0;A.Ia=-1/0;A.Ha=1/0;A=A.Aa;A.aa=this.da.me;A.ba=this.da.ne;A.ca=this.da.oe;A.ea=this.da.me;A.fa=this.da.ne;A.ga=this.da.oe},hd:function(){V.prototype.hd.call(this);var a=this.da,b=a.$.C.$a,e=a.$.D.$a,c,d,f,h,l,g,k,m,n,q,p,r,v,t,y,L,w,u,G,B,C,A,E,I,J,O,S,ta,da,Ja,Ma=a.$.vb*a.$.bc+a.$.wb*a.$.cc+a.$.xb*a.$.dc;if(-.999999999>Ma){var Db,Ia,Da,ma=a.$.vb,Q=a.$.wb,Oa=a.$.xb,Ga=ma*ma,Ea=Q*Q,Ua=Oa*Oa,va;Ga<Ea?Ga<Ua?(va=1/Math.sqrt(Ea+Ua),Db=0,Ia=Oa*va,Da=-Q*va):(va=1/Math.sqrt(Ga+Ea),Db=Q*va,Ia=-ma*va,Da=0):Ea<Ua?(va=1/Math.sqrt(Ua+Ga),Db=-Oa*va,Ia=0,Da=ma*va):(va=1/Math.sqrt(Ga+Ea),Db=Q*va,Ia=-ma*va,Da=0);c=Db;d=Ia;f=Da;h=0}else{var oa,Ya,F;oa=a.$.wb*a.$.dc-a.$.xb*a.$.cc;Ya=a.$.xb*a.$.bc-a.$.vb*a.$.dc;F=a.$.vb*a.$.cc-a.$.wb*a.$.bc;var Qa=Math.sqrt(.5*(1+Ma)),Ma=.5/Qa;oa*=Ma;Ya*=Ma;F*=Ma;c=oa;d=Ya;f=F;h=Qa}var X,M,N,ca,Y,T,aa,z;N=M=X=0;ca=1;Y=c;T=d;aa=f;z=h;var fa=X*Y+M*T+N*aa+ca*z;0>fa&&(fa=-fa,Y=-Y,T=-T,aa=-aa,z=-z);if(.999999<fa){var U,pa,sa,wa;U=Y-X;pa=T-M;sa=aa-N;wa=z-ca;Y=X+b/(b+e)*U;T=M+b/(b+e)*pa;aa=N+b/(b+e)*sa;z=ca+b/(b+e)*wa;var ra=Y*Y+T*T+aa*aa+z*z;1E-32<ra&&(ra=1/Math.sqrt(ra));l=Y*ra;g=T*ra;k=aa*ra;m=z*ra}else{var ka=b/(b+e)*Math.acos(fa);Y+=X*-fa;T+=M*-fa;aa+=N*-fa;z+=ca*-fa;var Z=Y*Y+T*T+aa*aa+z*z;1E-32<Z&&(Z=1/Math.sqrt(Z));Y*=Z;T*=Z;aa*=Z;z*=Z;var na=Math.sin(ka),Aa=Math.cos(ka);X*=Aa;M*=Aa;N*=Aa;ca*=Aa;l=X+Y*na;g=M+T*na;k=N+aa*na;m=ca+z*na}var ya=l,K=g,Ba=k,ha=m,ba=2*ya,Va=2*K,ga=2*Ba,P=ya*ba,za=K*Va,xb=Ba*ga,ja=ya*Va,Xa=K*ga,ab=ya*ga,gb=ha*ba,pb=ha*Va,ua=ha*ga;n=1-za-xb;q=ja-ua;p=ab+pb;r=ja+ua;v=1-P-xb;t=Xa-gb;y=ab-pb;L=Xa+gb;w=1-P-za;var xa,Fa;xa=n*a.$.vb+q*a.$.wb+p*a.$.xb;Fa=r*a.$.vb+v*a.$.wb+t*a.$.xb;u=y*a.$.vb+L*a.$.wb+w*a.$.xb;J=a.cd;O=a.dd;S=a.ed;ta=a.Qd;da=a.Rd;Ja=a.Sd;var fb=J*xa+O*Fa+S*u;if(-.999999999>fb){var Ha,qb,Na,la=J*J,Ca=O*O,Za=S*S,Ra;la<Ca?la<Za?(Ra=1/Math.sqrt(Ca+Za),Ha=0,qb=S*Ra,Na=-O*Ra):(Ra=1/Math.sqrt(la+Ca),Ha=O*Ra,qb=-J*Ra,Na=0):Ca<Za?(Ra=1/Math.sqrt(Za+la),Ha=-S*Ra,qb=0,Na=J*Ra):(Ra=1/Math.sqrt(la+Ca),Ha=O*Ra,qb=-J*Ra,Na=0);l=Ha;g=qb;k=Na;m=0}else{var ib,Lb,db;ib=O*u-S*Fa;Lb=S*xa-J*u;db=J*Fa-O*xa;var Ib=Math.sqrt(.5*(1+fb)),fb=.5/Ib;ib*=fb;Lb*=fb;db*=fb;l=ib;g=Lb;k=db;m=Ib}var kb=l,nb=g,Wa=k,cb=m,$a=2*kb,Ka=2*nb,vb=2*Wa,H=kb*$a,eb=nb*Ka,lb=Wa*vb,yb=kb*Ka,mb=nb*vb,ub=kb*vb,x=cb*$a,W=cb*Ka,ea=cb*vb;n=1-eb-lb;q=yb-ea;p=ub+W;r=yb+ea;v=1-H-lb;t=mb-x;y=ub-W;L=mb+x;w=1-H-eb;var hb,tb,Pa;hb=n*ta+q*da+p*Ja;tb=r*ta+v*da+t*Ja;Pa=y*ta+L*da+w*Ja;G=hb;B=tb;C=Pa;A=Fa*C-u*B;E=u*G-xa*C;I=xa*B-Fa*G;if(1E-6<A*A+E*E+I*I){var rb=A*A+E*E+I*I;0<rb&&(rb=1/Math.sqrt(rb));A*=rb;E*=rb;I*=rb}else{var ob=xa*xa,zb=Fa*Fa,Ab=u*u,ia;ob<zb?ob<Ab?(ia=1/Math.sqrt(zb+Ab),A=0,E=u*ia,I=-Fa*ia):(ia=1/Math.sqrt(ob+zb),A=Fa*ia,E=-xa*ia,I=0):zb<Ab?(ia=1/Math.sqrt(Ab+ob),A=-u*ia,E=0,I=xa*ia):(ia=1/Math.sqrt(ob+zb),A=Fa*ia,E=-xa*ia,I=0)}G=E*u-I*Fa;B=I*xa-A*u;C=A*Fa-E*xa;a.cd=xa;a.dd=Fa;a.ed=u;a.Qd=G;a.Rd=B;a.Sd=C;a.me=A;a.ne=E;a.oe=I;var Ta,bb,jb;Ta=this.wb*this.dc-this.xb*this.cc;bb=this.xb*this.bc-this.vb*this.dc;jb=this.vb*this.cc-this.wb*this.bc;var Bb=this.vb*this.bc+this.wb*this.cc+this.xb*this.dc,La=-1>=Bb?3.14159265358979:1<=Bb?0:Math.acos(Bb),Eb=Ta*Ta+bb*bb+jb*jb;0<Eb&&(Eb=1/Math.sqrt(Eb));Ta*=Eb;bb*=Eb;jb*=Eb;Ta*=La;bb*=La;jb*=La;this.Ee=Ta*this.da.Qd+bb*this.da.Rd+jb*this.da.Sd;this.Fe=Ta*this.da.me+bb*this.da.ne+jb*this.da.oe;var Cb,qa,wb;Cb=this.Ie*this.xe-this.Je*this.we;qa=this.Je*this.ve-this.He*this.xe;wb=this.He*this.we-this.Ie*this.ve;Bb=this.He*this.ve+this.Ie*this.we+this.Je*this.xe;this.angle=-1>=Bb?3.14159265358979:1<=Bb?0:Math.acos(Bb);0>Cb*this.da.cd+qa*this.da.dd+wb*this.da.ed&&(this.angle=-this.angle);this.Mj=this.Rf-this.Of;this.Df=this.Sf-this.Pf;this.Ef=this.Tf-this.Qf},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new t;a.x=this.bc;a.y=this.cc;a.z=this.dc;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.bc;a.y=this.cc;a.z=this.dc},Ig:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new t;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},Cj:function(){return this.Ce},ql:function(){return this.Rh},ol:function(){return this.angle}});Ef.ua=kc;Ef.prototype=cb(kc.prototype,{za:function(a,b,e,c){this.fh(a,b,e);var d,f,h;d=c.x;f=c.y;h=c.z;var l;e=a.a.o*d+a.a.i*f+a.a.l*h;l=a.a.f*d+a.a.m*f+a.a.g*h;a=a.a.h*d+a.a.j*f+a.a.s*h;d=this.localAxis1;d.x=e;d.y=l;d.z=a;l=c.x;a=c.y;d=c.z;c=b.a.o*l+b.a.i*a+b.a.l*d;e=b.a.f*l+b.a.m*a+b.a.g*d;b=b.a.h*l+b.a.j*a+b.a.s*d;l=this.localAxis2;l.x=c;l.y=e;l.z=b;return this}});ac.prototype={ua:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},cb:function(a,b){this.motorSpeed=a;this.motorTorque=b;return this},clone:function(){var a=new ac;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorTorque=this.motorTorque;return a}};Sd.ua=V;Sd.prototype=cb(V.prototype,{Ud:function(a,b,e){if(!(0<this.Ce.frequency&&e)){var c,d,f;c=this.Rf-this.Of;d=this.Sf-this.Pf;f=this.Tf-this.Qf;var h;if(0<this.Ce.frequency){h=6.28318530717958*this.Ce.frequency;e=this.Ce.dampingRatio;e<G.minSpringDamperDampingRatio&&(e=G.minSpringDamperDampingRatio);b=b.dt;e=2*e*h;var l=h*h;this.Ce.useSymplecticEuler?(h=1/(b*e),b=l/e):(h=1/(b*(b*l+e)),b=l/(b*l+e));h*=this.C.$a+this.D.$a}else h=0,b=e?1:this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0;var g,k,m,n,q,p,r,v,t,y;g=-this.Ub;k=this.Tb;m=this.Ub;n=-this.Sb;e=-this.Tb;l=this.Sb;q=-this.Xb;p=this.Wb;r=this.Xb;v=-this.Vb;t=-this.Wb;y=this.Vb;var L=this.Pb[0],w=a.rows[a.Ka++],u=w.Aa;u.va=0;u.wa=0;u.xa=0;u.Ba=0;u.Ca=0;u.Da=0;u.aa=0;u.ba=0;u.ca=0;u.ea=0;u.fa=0;u.ga=0;w.Fa=0;w.Ma=0;w.Ia=0;w.Ha=0;w.motorSpeed=0;w.fb=0;w.ta=L;L=w;L.Fa=c*b;L.Ma=h;L.Ia=-1/0;L.Ha=1/0;c=L.Aa;c.va=1;c.wa=0;c.xa=0;c.Ba=1;c.Ca=0;c.Da=0;c.aa=-0;c.ba=-g;c.ca=-k;c.ea=-0;c.fa=-q;c.ga=-p;c=this.Pb[1];g=a.rows[a.Ka++];k=g.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.aa=0;k.ba=0;k.ca=0;k.ea=0;k.fa=0;k.ga=0;g.Fa=0;g.Ma=0;g.Ia=0;g.Ha=0;g.motorSpeed=0;g.fb=0;g.ta=c;L=g;L.Fa=d*b;L.Ma=h;L.Ia=-1/0;L.Ha=1/0;c=L.Aa;c.va=0;c.wa=1;c.xa=0;c.Ba=0;c.Ca=1;c.Da=0;c.aa=-m;c.ba=-0;c.ca=-n;c.ea=-r;c.fa=-0;c.ga=-v;d=this.Pb[2];a=a.rows[a.Ka++];c=a.Aa;c.va=0;c.wa=0;c.xa=0;c.Ba=0;c.Ca=0;c.Da=0;c.aa=0;c.ba=0;c.ca=0;c.ea=0;c.fa=0;c.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=d;L=a;L.Fa=f*b;L.Ma=h;L.Ia=-1/0;L.Ha=1/0;c=L.Aa;c.va=0;c.wa=0;c.xa=1;c.Ba=0;c.Ca=0;c.Da=1;c.aa=-e;c.ba=-l;c.ca=-0;c.ea=-t;c.fa=-y;c.ga=-0}},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Cj:function(){return this.Ce}});bg.ua=kc;bg.prototype=cb(kc.prototype,{za:function(a,b,e){this.fh(a,b,e);return this}});Wb.prototype={ua:function(a,b){this.frequency=a;this.dampingRatio=b;return this},cb:function(a){this.useSymplecticEuler=a;return this},clone:function(){var a=new Wb;a.frequency=this.frequency;a.dampingRatio=this.dampingRatio;a.useSymplecticEuler=this.useSymplecticEuler;return a}};yd.prototype={ua:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},cb:function(a,b){this.motorSpeed=a;this.motorForce=b;return this},clone:function(){var a=new yd;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorForce=this.motorForce;return a}};hb.ua=V;hb.prototype=cb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0,d,f;d=this.Mj*c;f=this.Df*c;var h=this.Ef*c,l=this.Pl*c,g,k,m,n,q,p,r,v,t,y,L,w,u,E,B,C,A,O;g=0;k=-this.Ub;m=this.Tb;n=this.Ub;q=0;p=-this.Sb;r=-this.Tb;v=this.Sb;y=t=0;L=-this.Xb;w=this.Wb;u=this.Xb;E=0;B=-this.Vb;C=-this.Wb;A=this.Vb;O=0;g=-g;k=-k;m=-m;n=-n;q=-q;p=-p;r=-r;v=-v;t=-t;y=-y;L=-L;w=-w;u=-u;E=-E;B=-B;C=-C;A=-A;O=-O;var I=this.fg,J=this.gg,S=this.hg,V=(this.C.P*I+this.C.R*J+this.C.S*S)*I+(this.C.T*I+this.C.U*J+this.C.V*S)*J+(this.C.W*I+this.C.X*J+this.C.Y*S)*S,ta=(this.D.P*I+this.D.R*J+this.D.S*S)*I+(this.D.T*I+this.D.U*J+this.D.V*S)*J+(this.D.W*I+this.D.X*J+this.D.Y*S)*S;if(0<V){var da=I*this.Sb+J*this.Tb+S*this.Ub,Ja=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-da*da;0<Ja&&(V=0<this.C.$a?1/(1/V+this.C.Pc*Ja):0)}if(0<ta){var Ma=I*this.Vb+J*this.Wb+S*this.Xb,Db=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-Ma*Ma;0<Db&&(ta=0<this.D.$a?1/(1/ta+this.D.Pc*Db):0)}var Ia=V+ta?1/(V+ta):0,Da=this.ig,ma=this.jg,Q=this.kg,Oa=(this.C.P*Da+this.C.R*ma+this.C.S*Q)*Da+(this.C.T*Da+this.C.U*ma+this.C.V*Q)*ma+(this.C.W*Da+this.C.X*ma+this.C.Y*Q)*Q,Ga=(this.D.P*Da+this.D.R*ma+this.D.S*Q)*Da+(this.D.T*Da+this.D.U*ma+this.D.V*Q)*ma+(this.D.W*Da+this.D.X*ma+this.D.Y*Q)*Q;if(0<Oa){var Ea=Da*this.Sb+ma*this.Tb+Q*this.Ub,Ua=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-Ea*Ea;0<Ua&&(Oa=0<this.C.$a?1/(1/Oa+this.C.Pc*Ua):0)}if(0<Ga){var va=Da*this.Vb+ma*this.Wb+Q*this.Xb,oa=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-va*va;0<oa&&(Ga=0<this.D.$a?1/(1/Ga+this.D.Pc*oa):0)}var Ya=Oa+Ga?1/(Oa+Ga):0,F=this.Pb[0],Qa=a.rows[a.Ka++],X=Qa.Aa;X.va=0;X.wa=0;X.xa=0;X.Ba=0;X.Ca=0;X.Da=0;X.aa=0;X.ba=0;X.ca=0;X.ea=0;X.fa=0;X.ga=0;Qa.Fa=0;Qa.Ma=0;Qa.Ia=0;Qa.Ha=0;Qa.motorSpeed=0;Qa.fb=0;Qa.ta=F;var M=Qa;M.Fa=d;M.Ma=0;M.Ia=-1/0;M.Ha=1/0;var N=M.Aa;N.va=1;N.wa=0;N.xa=0;N.Ba=1;N.Ca=0;N.Da=0;N.aa=g;N.ba=k;N.ca=m;N.ea=y;N.fa=L;N.ga=w;var ca=this.Pb[1],Y=a.rows[a.Ka++],T=Y.Aa;T.va=0;T.wa=0;T.xa=0;T.Ba=0;T.Ca=0;T.Da=0;T.aa=0;T.ba=0;T.ca=0;T.ea=0;T.fa=0;T.ga=0;Y.Fa=0;Y.Ma=0;Y.Ia=0;Y.Ha=0;Y.motorSpeed=0;Y.fb=0;Y.ta=ca;M=Y;M.Fa=f;M.Ma=0;M.Ia=-1/0;M.Ha=1/0;N=M.Aa;N.va=0;N.wa=1;N.xa=0;N.Ba=0;N.Ca=1;N.Da=0;N.aa=n;N.ba=q;N.ca=p;N.ea=u;N.fa=E;N.ga=B;var aa=this.Pb[2],z=a.rows[a.Ka++],fa=z.Aa;fa.va=0;fa.wa=0;fa.xa=0;fa.Ba=0;fa.Ca=0;fa.Da=0;fa.aa=0;fa.ba=0;fa.ca=0;fa.ea=0;fa.fa=0;fa.ga=0;z.Fa=0;z.Ma=0;z.Ia=0;z.Ha=0;z.motorSpeed=0;z.fb=0;z.ta=aa;M=z;M.Fa=h;M.Ma=0;M.Ia=-1/0;M.Ha=1/0;N=M.Aa;N.va=0;N.wa=0;N.xa=1;N.Ba=0;N.Ca=0;N.Da=1;N.aa=r;N.ba=v;N.ca=t;N.ea=C;N.fa=A;N.ga=O;if(!this.Jm&&(0>=this.Yk.frequency||!e)){var U=this.Pb[3],pa=a.rows[a.Ka++],sa=pa.Aa;sa.va=0;sa.wa=0;sa.xa=0;sa.Ba=0;sa.Ca=0;sa.Da=0;sa.aa=0;sa.ba=0;sa.ca=0;sa.ea=0;sa.fa=0;sa.ga=0;pa.Fa=0;pa.Ma=0;pa.Ia=0;pa.Ha=0;pa.motorSpeed=0;pa.fb=0;pa.ta=U;var M=pa,wa=this.Ni,ra=this.Qk,ka=this.Yk,Z,na,Aa=G.angularSlop;if(e)Z=0,na=1;else{if(0<ka.frequency){var Aa=0,ya=6.28318530717958*ka.frequency,K=ka.dampingRatio;K<G.minSpringDamperDampingRatio&&(K=G.minSpringDamperDampingRatio);var Ba=b.dt,ha=2*K*ya,ba=ya*ya;ka.useSymplecticEuler?(Z=1/(Ba*ha),na=ba/ha):(Z=1/(Ba*(Ba*ba+ha)),na=ba/(Ba*ba+ha))}else Z=0,na=this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0;0<ra.motorTorque?(M.motorSpeed=ra.motorSpeed,M.fb=ra.motorTorque*b.dt):(M.motorSpeed=0,M.fb=0)}var Va=ra.lowerLimit,ga=ra.upperLimit,P=.5*(Va+ga),wa=wa-P,wa=((wa+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,wa=wa+P,za,xb,ja;Va>ga?ja=xb=za=0:Va==ga?(za=-1/0,xb=1/0,ja=wa-Va):wa<Va?(za=-1/0,xb=0,ja=wa-Va+Aa,0<ja&&(ja=0)):wa>ga?(za=0,xb=1/0,ja=wa-ga-Aa,0>ja&&(ja=0)):ja=xb=za=0;var Xa=Ia?1/Ia:0;M.Ia=za;M.Ha=xb;M.Ma=Z*Xa;M.Fa=ja*na;N=M.Aa;N.aa=this.fg;N.ba=this.gg;N.ca=this.hg;N.ea=this.fg;N.fa=this.gg;N.ga=this.hg}if(!this.Km){var ab=this.Pb[4],gb=a.rows[a.Ka++],pb=gb.Aa;pb.va=0;pb.wa=0;pb.xa=0;pb.Ba=0;pb.Ca=0;pb.Da=0;pb.aa=0;pb.ba=0;pb.ca=0;pb.ea=0;pb.fa=0;pb.ga=0;gb.Fa=0;gb.Ma=0;gb.Ia=0;gb.Ha=0;gb.motorSpeed=0;gb.fb=0;gb.ta=ab;M=gb;M.Fa=l;M.Ma=0;M.Ia=-1/0;M.Ha=1/0;N=M.Aa;N.aa=this.Yg;N.ba=this.Zg;N.ca=this.$g;N.ea=this.Yg;N.fa=this.Zg;N.ga=this.$g}if(!this.Lm&&(0>=this.Zk.frequency||!e)){var ua=this.Pb[5],xa=a.rows[a.Ka++],Fa=xa.Aa;Fa.va=0;Fa.wa=0;Fa.xa=0;Fa.Ba=0;Fa.Ca=0;Fa.Da=0;Fa.aa=0;Fa.ba=0;Fa.ca=0;Fa.ea=0;Fa.fa=0;Fa.ga=0;xa.Fa=0;xa.Ma=0;xa.Ia=0;xa.Ha=0;xa.motorSpeed=0;xa.fb=0;xa.ta=ua;var M=xa,fb=this.Oi,Ha=this.Rk,qb=this.Zk,Na,la,Ca=G.angularSlop;if(e)Na=0,la=1;else{if(0<qb.frequency){var Ca=0,Za=6.28318530717958*qb.frequency,Ra=qb.dampingRatio;Ra<G.minSpringDamperDampingRatio&&(Ra=G.minSpringDamperDampingRatio);var ib=b.dt,Wa=2*Ra*Za,db=Za*Za;qb.useSymplecticEuler?(Na=1/(ib*Wa),la=db/Wa):(Na=1/(ib*(ib*db+Wa)),la=db/(ib*db+Wa))}else Na=0,la=this.Hc==Hb.BAUMGARTE?b.invDt*G.velocityBaumgarte:0;0<Ha.motorTorque?(M.motorSpeed=Ha.motorSpeed,M.fb=Ha.motorTorque*b.dt):(M.motorSpeed=0,M.fb=0)}var Ib=Ha.lowerLimit,kb=Ha.upperLimit,nb=.5*(Ib+kb),fb=fb-nb,fb=((fb+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,fb=fb+nb,cb,hb,$a;Ib>kb?$a=hb=cb=0:Ib==kb?(cb=-1/0,hb=1/0,$a=fb-Ib):fb<Ib?(cb=-1/0,hb=0,$a=fb-Ib+Ca,0<$a&&($a=0)):fb>kb?(cb=0,hb=1/0,$a=fb-kb-Ca,0>$a&&($a=0)):$a=hb=cb=0;var Ka=Ya?1/Ya:0;M.Ia=cb;M.Ha=hb;M.Ma=Na*Ka;M.Fa=$a*la;N=M.Aa;N.aa=this.ig;N.ba=this.jg;N.ca=this.kg;N.ea=this.ig;N.fa=this.jg;N.ga=this.kg}},hd:function(){V.prototype.hd.call(this);var a,b,e,c,d,f,h,l,g;a=this.vb;b=this.wb;e=this.xb;h=this.ah;l=this.bh;g=this.dh;c=l*e-g*b;d=g*a-h*e;f=h*b-l*a;this.fg=d*g-f*l;this.gg=f*h-c*g;this.hg=c*l-d*h;this.Yg=c;this.Zg=d;this.$g=f;this.ig=b*f-e*d;this.jg=e*c-a*f;this.kg=a*d-b*c;a=this.fg*this.fg+this.gg*this.gg+this.hg*this.hg;0<a&&(a=1/Math.sqrt(a));this.fg*=a;this.gg*=a;this.hg*=a;a=this.Yg*this.Yg+this.Zg*this.Zg+this.$g*this.$g;0<a&&(a=1/Math.sqrt(a));this.Yg*=a;this.Zg*=a;this.$g*=a;a=this.ig*this.ig+this.jg*this.jg+this.kg*this.kg;0<a&&(a=1/Math.sqrt(a));this.ig*=a;this.jg*=a;this.kg*=a;this.Jm=!(this.fg*this.fg+this.gg*this.gg+this.hg*this.hg);this.Km=!(this.Yg*this.Yg+this.Zg*this.Zg+this.$g*this.$g);this.Lm=!(this.ig*this.ig+this.jg*this.jg+this.kg*this.kg);var k,m,n,q,p,r,v,t,y;k=this.vb;a=this.He;b=this.Hh;m=this.wb;e=this.Ie;c=this.Ih;n=this.xb;d=this.Je;f=this.Jh;q=this.bc;p=this.ve;h=this.ah;r=this.cc;v=this.we;l=this.bh;t=this.dc;y=this.xe;g=this.dh;var u,w,D;u=k*h+m*l+n*g;w=a*p+e*v+d*y;D=b*p+c*v+f*y;-1>=u?(e=Math.atan2(D,w),a=.5*e,b=-1.570796326794895,e=.5*-e):1<=u?(e=Math.atan2(D,w),a=.5*e,b=1.570796326794895,e*=.5):(u=Math.asin(u),k=Math.atan2(-(k*p+m*v+n*y),k*q+m*r+n*t),a=Math.atan2(-(a*h+e*l+d*g),b*h+c*l+f*g),b=u,e=k);this.Ni=a;this.Pl=b;this.Oi=e;this.Mj=this.Rf-this.Of;this.Df=this.Sf-this.Pf;this.Ef=this.Tf-this.Qf},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new t;a.x=this.ah;a.y=this.bh;a.z=this.dh;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.ah;a.y=this.bh;a.z=this.dh},Ig:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new t;a.x=this.Mc;a.y=this.Nc;a.z=this.Oc;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.Mc;a.y=this.Nc;a.z=this.Oc},Bn:function(){return this.Yk},Cn:function(){return this.Zk},xn:function(){return this.Qk},yn:function(){return this.Rk},sn:function(){return this.Ni},tn:function(){return this.Oi}});rf.ua=kc;rf.prototype=cb(kc.prototype,{za:function(a,b,e,c,d){this.fh(a,b,e);var f,h,l;f=c.x;h=c.y;l=c.z;c=a.a.o*f+a.a.i*h+a.a.l*l;e=a.a.f*f+a.a.m*h+a.a.g*l;a=a.a.h*f+a.a.j*h+a.a.s*l;f=this.localAxis1;f.x=c;f.y=e;f.z=a;c=d.x;e=d.y;f=d.z;d=b.a.o*c+b.a.i*e+b.a.l*f;a=b.a.f*c+b.a.m*e+b.a.g*f;b=b.a.h*c+b.a.j*e+b.a.s*f;c=this.localAxis2;c.x=d;c.y=a;c.z=b;return this}});vl.prototype={za:function(a){this.Sc=a.Sc;for(var b=0,e=this.Sc;b<e;){var c=b++;this.uh[c]=a.uh[c];this.zh[c]=a.zh[c]}this.ie=a.ie;b=0;for(e=this.ie;b<e;)c=b++,this.Mg[c]=a.Mg[c]},kl:function(a,b,e,c,d,f,h){for(var l=0,g=this.ie;l<g;){var k=l++,k=this.Mg[k],m=a.rows[k];this.il[k]=m.Fa*f-e[k]-m.Ma*c[k]}l=b.cj;g=0;for(k=this.Sc;g<k;){var n=g++,m=this.uh[n],n=this.zh[n],q=a.rows[m],n=(0>n?q.Ia:0<n?q.Ha:0)-c[m];if(d[m]=n)for(var q=0,p=this.ie;q<p;){var r=q++,v=r=this.Mg[r],u=this.il;u[v]-=l[m][r]*n}}g=this.Mg;k=this.ie;for(n=m=0;n<k;)q=n++,m|=1<<g[q];b.Sj[m]||(b.nn(m,g,k),b.Sj[m]=!0);g=b.Ck[m];b=!0;k=0;for(m=this.ie;k<m;){for(var n=k++,q=this.Mg[n],p=a.rows[q],v=r=c[q],u=0,y=this.ie;u<y;)var t=u++,v=v+this.il[this.Mg[t]]*g[n][t];if(v<p.Ia-G.directMlcpSolverEps||v>p.Ha+G.directMlcpSolverEps){b=!1;break}d[q]=v-r}if(h)return!0;if(!b)return!1;h=0;for(g=this.Sc;h<g;){n=h++;k=this.uh[n];m=a.rows[k];n=this.zh[n];q=c[k]+d[k];p=e[k];r=0;for(v=a.Ka;r<v;)u=r++,p+=l[k][u]*d[u];k=m.Fa*f-p-m.Ma*q;if(0>n&&k>G.directMlcpSolverEps||0<n&&k<-G.directMlcpSolverEps){b=!1;break}}return b}};ul.prototype={Uh:function(a,b){if(b==a.Ka)null==this.Th[this.jf]&&(this.Th[this.jf]=new vl(this.Qn)),this.Th[this.jf++].za(this.cf);else{var e=a.rows[b],c=e.Ia>-1/0,d=e.Ha<1/0;0==e.Ia&&0==e.Ha?(d=this.cf,d.uh[d.Sc]=b,d.zh[d.Sc]=0,d.Sc++,this.Uh(a,b+1),this.cf.Sc--):(e=this.cf,e.Mg[e.ie]=b,e.ie++,this.Uh(a,b+1),this.cf.ie--,c&&(c=this.cf,c.uh[c.Sc]=b,c.zh[c.Sc]=-1,c.Sc++,this.Uh(a,b+1),this.cf.Sc--),d&&(d=this.cf,d.uh[d.Sc]=b,d.zh[d.Sc]=1,d.Sc++,this.Uh(a,b+1),this.cf.Sc--))}}};dl.prototype={};vc.ua=Ob;vc.prototype=cb(Ob.prototype,{xh:function(a){this.$.hd();this.$.$d(a,this.info);this.C=this.info.Qe;this.D=this.info.Re;this.ei.ll(this.info,this.ac);a=this.Se;a.jf=0;var b=a.cf;b.Sc=0;b.ie=0;a.Uh(this.info,0);a=this.Ml;for(var b=this.Se.jf,e=0,c=0,d=0,f=a.n;d<f;){var h=d++,h=a.sc[h];h<b?(a.kf[e]=h,++e):(a.kf[b+c]=h,++c)}b=a.sc;a.sc=a.kf;a.kf=b},Gh:function(a){var b=this.$.Hc==Hb.BAUMGARTE?G.jointWarmStartingFactorForBaungarte:G.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ta;e.ta=0;e.ad=0;e.ub=0}else{a=0;for(e=this.info.Ka;a<e;){var c=a++,d=this.info.rows[c],f=d.ta,h=f.ta*b;h<d.Ia?h=d.Ia:h>d.Ha&&(h=d.Ha);f.ta=h;0<d.fb?(h=f.ad*b,d=d.fb,h<-d?h=-d:h>d&&(h=d),f.ad=h):f.ad=0;this.Cf[c]=f.ta+f.ad}var b=this.Cf,e=a=!1,l,g,k,m,n,q,p,r,c=this.C.gb,f=this.C.hb,d=this.C.ib,h=this.D.gb;l=this.D.hb;g=this.D.ib;k=this.C.kb;m=this.C.lb;n=this.C.mb;q=this.D.kb;p=this.D.lb;r=this.D.mb;for(var v=0,u=this.info.Ka;v<u;){var y=v++,t=this.info.rows[y].Aa,w=this.ac[y],y=b[y];t.xc&1&&(c+=w.qd*y,f+=w.rd*y,d+=w.sd*y,h+=w.td*-y,l+=w.ud*-y,g+=w.vd*-y,a=!0);t.xc&2&&(k+=w.kd*y,m+=w.ld*y,n+=w.md*y,q+=w.nd*-y,p+=w.od*-y,r+=w.pd*-y,e=!0)}a&&(this.C.gb=c,this.C.hb=f,this.C.ib=d,this.D.gb=h,this.D.hb=l,this.D.ib=g);e&&(this.C.kb=k,this.C.lb=m,this.C.mb=n,this.D.kb=q,this.D.lb=p,this.D.mb=r)}},Ch:function(){var a=this.info.Ka,b,e,c,d,f,h,l,g,k,m,n,q;b=this.C.gb;e=this.C.hb;c=this.C.ib;d=this.D.gb;f=this.D.hb;h=this.D.ib;l=this.C.kb;g=this.C.lb;k=this.C.mb;m=this.D.kb;n=this.D.lb;q=this.D.mb;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],u=v.ta,v=v.Aa,y=0,y=y+(b*v.va+e*v.wa+c*v.xa),y=y-(d*v.Ba+f*v.Ca+h*v.Da),y=y+(l*v.aa+g*v.ba+k*v.ca),y=y-(m*v.ea+n*v.fa+q*v.ga);this.Qg[r]=y;this.Yh[r]=u.ta;this.Aj[r]=0}b=this.ei.cj;for(e=0;e<a;)if(c=e++,h=this.info.rows[c],d=h.ta,l=this.ac[c],0<h.fb)for(f=d.ad,h=f+l.Ff*(-h.motorSpeed-this.Qg[c]),l=d.ad,h<-l?h=-l:h>l&&(h=l),d.ad=h,d=h-f,this.Aj[c]=d,f=0,h=a;f<h;)g=l=f++,k=this.Qg,k[g]+=d*b[c][l];e=!1;c=0;for(d=this.Se.jf;c<d;)if(b=c++,b=this.Ml.sc[b],this.Se.Th[b].kl(this.info,this.ei,this.Qg,this.Yh,this.Cf,1,!1)){for(e=0;e<a;)d=e++,c=this.Cf[d],this.info.rows[d].ta.ta+=c,f=this.Aj,f[d]+=c;a=this.Aj;c=e=!1;d=this.C.gb;f=this.C.hb;h=this.C.ib;l=this.D.gb;g=this.D.hb;k=this.D.ib;m=this.C.kb;n=this.C.lb;q=this.C.mb;p=this.D.kb;r=this.D.lb;u=this.D.mb;v=0;for(y=this.info.Ka;v<y;){var t=v++,w=this.info.rows[t].Aa,D=this.ac[t],t=a[t];w.xc&1&&(d+=D.qd*t,f+=D.rd*t,h+=D.sd*t,l+=D.td*-t,g+=D.ud*-t,k+=D.vd*-t,e=!0);w.xc&2&&(m+=D.kd*t,n+=D.ld*t,q+=D.md*t,p+=D.nd*-t,r+=D.od*-t,u+=D.pd*-t,c=!0)}e&&(this.C.gb=d,this.C.hb=f,this.C.ib=h,this.D.gb=l,this.D.hb=g,this.D.ib=k);c&&(this.C.kb=m,this.C.lb=n,this.C.mb=q,this.D.kb=p,this.D.lb=r,this.D.mb=u);a=this.Ml;for(e=0;a.sc[e]!=b;)++e;for(;0<e;)b=a.sc[e],a.sc[e]=a.sc[e-1],a.sc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:338:","could not find solution. (velocity)")},Li:function(a){for(var b,e,c,d,f,h,l=h=f=d=c=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ta,m=m.Aa;m.xc&1?(b+=m.va*k.ta,e+=m.wa*k.ta,c+=m.xa*k.ta):m.xc&2&&(d+=m.aa*k.ta,f+=m.ba*k.ta,h+=m.ca*k.ta)}this.$.Pi=b*a.invDt;this.$.Qi=e*a.invDt;this.$.Ri=c*a.invDt;this.$.Si=d*a.invDt;this.$.Ti=f*a.invDt;this.$.Ui=h*a.invDt},Pg:function(){this.$.hd();this.$.gd(this.info);this.C=this.info.Qe;this.D=this.info.Re;this.ei.ll(this.info,this.ac);var a=this.Se;a.jf=0;var b=a.cf;b.Sc=0;b.ie=0;a.Uh(this.info,0);for(var a=this.Ki,b=this.Se.jf,e=0,c=0,d=0,f=a.n;d<f;){var h=d++,h=a.sc[h];h<b?(a.kf[e]=h,++e):(a.kf[b+c]=h,++c)}b=a.sc;a.sc=a.kf;a.kf=b;a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ta.ub=0},Bh:function(){var a=this.info.Ka,b,e,c,d,f,h,l,g,k,m,n,q;b=this.C.Yc;e=this.C.Zc;c=this.C.$c;d=this.D.Yc;f=this.D.Zc;h=this.D.$c;l=this.C.Uc;g=this.C.Vc;k=this.C.Wc;m=this.D.Uc;n=this.D.Vc;q=this.D.Wc;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.ta,v=v.Aa,y=0,y=y+(b*v.va+e*v.wa+c*v.xa),y=y-(d*v.Ba+f*v.Ca+h*v.Da),y=y+(l*v.aa+g*v.ba+k*v.ca),y=y-(m*v.ea+n*v.fa+q*v.ga);this.Qg[r]=y;this.Yh[r]=t.ub}e=!1;c=0;for(d=this.Se.jf;c<d;)if(b=c++,b=this.Ki.sc[b],this.Se.Th[b].kl(this.info,this.ei,this.Qg,this.Yh,this.Cf,G.positionSplitImpulseBaumgarte,!1)){for(e=0;e<a;)c=e++,this.info.rows[c].ta.ub+=this.Cf[c];a=this.Cf;c=e=!1;d=this.C.Yc;f=this.C.Zc;h=this.C.$c;l=this.D.Yc;g=this.D.Zc;k=this.D.$c;m=this.C.Uc;n=this.C.Vc;q=this.C.Wc;p=this.D.Uc;r=this.D.Vc;t=this.D.Wc;v=0;for(y=this.info.Ka;v<y;){var u=v++,w=this.info.rows[u].Aa,D=this.ac[u],u=a[u];w.xc&1&&(d+=D.qd*u,f+=D.rd*u,h+=D.sd*u,l+=D.td*-u,g+=D.ud*-u,k+=D.vd*-u,e=!0);w.xc&2&&(m+=D.kd*u,n+=D.ld*u,q+=D.md*u,p+=D.nd*-u,r+=D.od*-u,t+=D.pd*-u,c=!0)}e&&(this.C.Yc=d,this.C.Zc=f,this.C.$c=h,this.D.Yc=l,this.D.Zc=g,this.D.$c=k);c&&(this.C.Uc=m,this.C.Vc=n,this.C.Wc=q,this.D.Uc=p,this.D.Vc=r,this.D.Wc=t);a=this.Ki;for(e=0;a.sc[e]!=b;)++e;for(;0<e;)b=a.sc[e],a.sc[e]=a.sc[e-1],a.sc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:454:","could not find solution. (split impulse)")},Ah:function(){this.$.hd();this.$.gd(this.info);this.C=this.info.Qe;this.D=this.info.Re;this.ei.ll(this.info,this.ac);var a=this.Se;a.jf=0;var b=a.cf;b.Sc=0;b.ie=0;a.Uh(this.info,0);for(var e=this.Ki,c=this.Se.jf,d=0,f=0,h=0,l=e.n;h<l;){var g=h++,k=e.sc[g];k<c?(e.kf[d]=k,++d):(e.kf[c+f]=k,++f)}var m=e.sc;e.sc=e.kf;e.kf=m;for(var n=this.info.Ka,q=0;q<n;){var p=q++,r=this.info.rows[p].ta;this.Qg[p]=0;this.Yh[p]=r.ub}for(var v=!1,u=0,y=this.Se.jf;u<y;){var t=u++,w=this.Ki.sc[t];if(this.Se.Th[w].kl(this.info,this.ei,this.Qg,this.Yh,this.Cf,G.positionNgsBaumgarte,!1)){for(var D=0,E=n;D<E;){var B=D++;this.info.rows[B].ta.ub+=this.Cf[B]}for(var C=this.Cf,A=!1,O=!1,I,J,S,V,ta,da,Ja,Ma,Oa,Ia,Da,ma,Q=ma=Da=Ia=Oa=Ma=Ja=da=ta=V=S=J=I=0,Xa=this.info.Ka;Q<Xa;){var Ga=Q++,Ea=this.info.rows[Ga].Aa,Ua=this.ac[Ga],va=C[Ga];Ea.xc&1&&(I+=Ua.qd*va,J+=Ua.rd*va,S+=Ua.sd*va,V+=Ua.td*-va,ta+=Ua.ud*-va,da+=Ua.vd*-va,A=!0);Ea.xc&2&&(Ja+=Ua.kd*va,Ma+=Ua.ld*va,Oa+=Ua.md*va,Ia+=Ua.nd*-va,Da+=Ua.od*-va,ma+=Ua.pd*-va,O=!0)}if(A){var oa=this.C;oa.a.v+=I;oa.a.A+=J;oa.a.B+=S;var Ya=this.D;Ya.a.v+=V;Ya.a.A+=ta;Ya.a.B+=da}if(O){var F=this.C,Qa=Math.sqrt(Ja*Ja+Ma*Ma+Oa*Oa),X=.5*Qa,M,N;if(.5>X){var ca=X*X;M=.5*(1-.16666666666666666*ca+ca*ca*.008333333333333333);N=1-.5*ca+ca*ca*.041666666666666664}else M=Math.sin(X)/Qa,N=Math.cos(X);var Y,T,aa;Y=Ja*M;T=Ma*M;aa=Oa*M;var z,fa,U,pa;z=Y;fa=T;U=aa;pa=N;var sa,wa,ra,ka,Z=F.a.o,na=F.a.m,Aa=F.a.s,ya=Z+na+Aa,K;0<ya?(K=Math.sqrt(ya+1),ka=.5*K,K=.5/K,sa=(F.a.g-F.a.j)*K,wa=(F.a.h-F.a.l)*K,ra=(F.a.i-F.a.f)*K):Z>na?Z>Aa?(K=Math.sqrt(Z-na-Aa+1),sa=.5*K,K=.5/K,wa=(F.a.f+F.a.i)*K,ra=(F.a.h+F.a.l)*K,ka=(F.a.g-F.a.j)*K):(K=Math.sqrt(Aa-Z-na+1),ra=.5*K,K=.5/K,sa=(F.a.h+F.a.l)*K,wa=(F.a.j+F.a.g)*K,ka=(F.a.i-F.a.f)*K):na>Aa?(K=Math.sqrt(na-Aa-Z+1),wa=.5*K,K=.5/K,sa=(F.a.f+F.a.i)*K,ra=(F.a.j+F.a.g)*K,ka=(F.a.h-F.a.l)*K):(K=Math.sqrt(Aa-Z-na+1),ra=.5*K,K=.5/K,sa=(F.a.h+F.a.l)*K,wa=(F.a.j+F.a.g)*K,ka=(F.a.i-F.a.f)*K);sa=pa*sa+z*ka+fa*ra-U*wa;wa=pa*wa-z*ra+fa*ka+U*sa;ra=pa*ra+z*wa-fa*sa+U*ka;ka=pa*ka-z*sa-fa*wa-U*ra;var Ba=sa*sa+wa*wa+ra*ra+ka*ka;1E-32<Ba&&(Ba=1/Math.sqrt(Ba));sa*=Ba;wa*=Ba;ra*=Ba;ka*=Ba;var ha=sa,ba=wa,Va=ra,ga=ka,P=2*ha,za=2*ba,xb=2*Va,ja=ha*P,Wa=ba*za,ab=Va*xb,gb=ha*za,pb=ba*xb,ua=ha*xb,xa=ga*P,Fa=ga*za,fb=ga*xb;F.a.o=1-Wa-ab;F.a.f=gb-fb;F.a.h=ua+Fa;F.a.i=gb+fb;F.a.m=1-ja-ab;F.a.j=pb-xa;F.a.l=ua-Fa;F.a.g=pb+xa;F.a.s=1-ja-Wa;var Ha,qb,Na,la,Ca,Za,Ra,ib,cb;Ha=F.a.o*F.Ra+F.a.f*F.Ua+F.a.h*F.Xa;qb=F.a.o*F.Sa+F.a.f*F.Va+F.a.h*F.Ya;Na=F.a.o*F.Ta+F.a.f*F.Wa+F.a.h*F.Za;la=F.a.i*F.Ra+F.a.m*F.Ua+F.a.j*F.Xa;Ca=F.a.i*F.Sa+F.a.m*F.Va+F.a.j*F.Ya;Za=F.a.i*F.Ta+F.a.m*F.Wa+F.a.j*F.Za;Ra=F.a.l*F.Ra+F.a.g*F.Ua+F.a.s*F.Xa;ib=F.a.l*F.Sa+F.a.g*F.Va+F.a.s*F.Ya;cb=F.a.l*F.Ta+F.a.g*F.Wa+F.a.s*F.Za;F.P=Ha;F.R=qb;F.S=Na;F.T=la;F.U=Ca;F.V=Za;F.W=Ra;F.X=ib;F.Y=cb;var db,hb,kb,nb,tb,Cb,$a,Ka,vb;db=F.P*F.a.o+F.R*F.a.f+F.S*F.a.h;hb=F.P*F.a.i+F.R*F.a.m+F.S*F.a.j;kb=F.P*F.a.l+F.R*F.a.g+F.S*F.a.s;nb=F.T*F.a.o+F.U*F.a.f+F.V*F.a.h;tb=F.T*F.a.i+F.U*F.a.m+F.V*F.a.j;Cb=F.T*F.a.l+F.U*F.a.g+F.V*F.a.s;$a=F.W*F.a.o+F.X*F.a.f+F.Y*F.a.h;Ka=F.W*F.a.i+F.X*F.a.m+F.Y*F.a.j;vb=F.W*F.a.l+F.X*F.a.g+F.Y*F.a.s;F.P=db;F.R=hb;F.S=kb;F.T=nb;F.U=tb;F.V=Cb;F.W=$a;F.X=Ka;F.Y=vb;F.P*=F.N.x;F.R*=F.N.x;F.S*=F.N.x;F.T*=F.N.y;F.U*=F.N.y;F.V*=F.N.y;F.W*=F.N.z;F.X*=F.N.z;F.Y*=F.N.z;var H=this.D,eb=Math.sqrt(Ia*Ia+Da*Da+ma*ma),lb=.5*eb,yb,mb;if(.5>lb){var ub=lb*lb;yb=.5*(1-.16666666666666666*ub+ub*ub*.008333333333333333);mb=1-.5*ub+ub*ub*.041666666666666664}else yb=Math.sin(lb)/eb,mb=Math.cos(lb);var x,W,ea;x=Ia*yb;W=Da*yb;ea=ma*yb;var wb,Jb,Pa,rb;wb=x;Jb=W;Pa=ea;rb=mb;var ob,zb,Ab,ia,Ta=H.a.o,bb=H.a.m,jb=H.a.s,Bb=Ta+bb+jb,La;0<Bb?(La=Math.sqrt(Bb+1),ia=.5*La,La=.5/La,ob=(H.a.g-H.a.j)*La,zb=(H.a.h-H.a.l)*La,Ab=(H.a.i-H.a.f)*La):Ta>bb?Ta>jb?(La=Math.sqrt(Ta-bb-jb+1),ob=.5*La,La=.5/La,zb=(H.a.f+H.a.i)*La,Ab=(H.a.h+H.a.l)*La,ia=(H.a.g-H.a.j)*La):(La=Math.sqrt(jb-Ta-bb+1),Ab=.5*La,La=.5/La,ob=(H.a.h+H.a.l)*La,zb=(H.a.j+H.a.g)*La,ia=(H.a.i-H.a.f)*La):bb>jb?(La=Math.sqrt(bb-jb-Ta+1),zb=.5*La,La=.5/La,ob=(H.a.f+H.a.i)*La,Ab=(H.a.j+H.a.g)*La,ia=(H.a.h-H.a.l)*La):(La=Math.sqrt(jb-Ta-bb+1),Ab=.5*La,La=.5/La,ob=(H.a.h+H.a.l)*La,zb=(H.a.j+H.a.g)*La,ia=(H.a.i-H.a.f)*La);ob=rb*ob+wb*ia+Jb*Ab-Pa*zb;zb=rb*zb-wb*Ab+Jb*ia+Pa*ob;Ab=rb*Ab+wb*zb-Jb*ob+Pa*ia;ia=rb*ia-wb*ob-Jb*zb-Pa*Ab;var Eb=ob*ob+zb*zb+Ab*Ab+ia*ia;1E-32<Eb&&(Eb=1/Math.sqrt(Eb));ob*=Eb;zb*=Eb;Ab*=Eb;ia*=Eb;var Kb=ob,qa=zb,Hb=Ab,Mb=ia,Sb=2*Kb,Rb=2*qa,Ob=2*Hb,Wb=Kb*Sb,Zb=qa*Rb,ac=Hb*Ob,Xb=Kb*Rb,$b=qa*Ob,ic=Kb*Ob,Ub=Mb*Sb,gc=Mb*Rb,fc=Mb*Ob;H.a.o=1-Zb-ac;H.a.f=Xb-fc;H.a.h=ic+gc;H.a.i=Xb+fc;H.a.m=1-Wb-ac;H.a.j=$b-Ub;H.a.l=ic-gc;H.a.g=$b+Ub;H.a.s=1-Wb-Zb;var Pb,cc,Fb,lc,bc,Qb,dc,Vb,Nb;Pb=H.a.o*H.Ra+H.a.f*H.Ua+H.a.h*H.Xa;cc=H.a.o*H.Sa+H.a.f*H.Va+H.a.h*H.Ya;Fb=H.a.o*H.Ta+H.a.f*H.Wa+H.a.h*H.Za;lc=H.a.i*H.Ra+H.a.m*H.Ua+H.a.j*H.Xa;bc=H.a.i*H.Sa+H.a.m*H.Va+H.a.j*H.Ya;Qb=H.a.i*H.Ta+H.a.m*H.Wa+H.a.j*H.Za;dc=H.a.l*H.Ra+H.a.g*H.Ua+H.a.s*H.Xa;Vb=H.a.l*H.Sa+H.a.g*H.Va+H.a.s*H.Ya;Nb=H.a.l*H.Ta+H.a.g*H.Wa+H.a.s*H.Za;H.P=Pb;H.R=cc;H.S=Fb;H.T=lc;H.U=bc;H.V=Qb;H.W=dc;H.X=Vb;H.Y=Nb;var Tb,sb,kc,qc,mc,nc,jc,oc,pc;Tb=H.P*H.a.o+H.R*H.a.f+H.S*H.a.h;sb=H.P*H.a.i+H.R*H.a.m+H.S*H.a.j;kc=H.P*H.a.l+H.R*H.a.g+H.S*H.a.s;qc=H.T*H.a.o+H.U*H.a.f+H.V*H.a.h;mc=H.T*H.a.i+H.U*H.a.m+H.V*H.a.j;nc=H.T*H.a.l+H.U*H.a.g+H.V*H.a.s;jc=H.W*H.a.o+H.X*H.a.f+H.Y*H.a.h;oc=H.W*H.a.i+H.X*H.a.m+H.Y*H.a.j;pc=H.W*H.a.l+H.X*H.a.g+H.Y*H.a.s;H.P=Tb;H.R=sb;H.S=kc;H.T=qc;H.U=mc;H.V=nc;H.W=jc;H.X=oc;H.Y=pc;H.P*=H.N.x;H.R*=H.N.x;H.S*=H.N.x;H.T*=H.N.y;H.U*=H.N.y;H.V*=H.N.y;H.W*=H.N.z;H.X*=H.N.z;H.Y*=H.N.z}for(var hc=this.Ki,ec=0;hc.sc[ec]!=w;)++ec;for(;0<ec;){var tc=hc.sc[ec];hc.sc[ec]=hc.sc[ec-1];hc.sc[ec-1]=tc;--ec}v=!0;break}}v||console.log("DirectJointConstraintSolver.hx:506:","could not find solution. (NGS)")},postSolve:function(){this.$.hd();this.$.Rl()}});tl.prototype={nn:function(a,b,e){for(var c=0;c<e;)for(var d=c++,f=b[d],h=0,l=e;h<l;){var g=h++;this.wk[d][g]=this.$a[f][b[g]]}c=this.wk;a=this.Ck[a];var k;switch(e){case 4:d=c[0];b=a[0];e=1/d[0];b[0]=e;d[1]*=e;d[2]*=e;d[3]*=e;g=c[1];k=a[1];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g=c[2];k=a[2];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g=c[3];k=a[3];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];d=c[1];b=a[1];e=1/d[1];b[1]=e;b[0]*=e;d[2]*=e;d[3]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g=c[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g=c[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];d=c[2];b=a[2];e=1/d[2];b[2]=e;b[0]*=e;b[1]*=e;d[3]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=d[3]*g[2];g=c[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=d[3]*g[2];g=c[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];d=c[3];b=a[3];e=1/d[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[3];g=c[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g=c[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];break;case 5:d=c[0];b=a[0];e=1/d[0];b[0]=e;d[1]*=e;d[2]*=e;d[3]*=e;d[4]*=e;g=c[1];k=a[1];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g=c[2];k=a[2];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g=c[3];k=a[3];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g=c[4];k=a[4];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];d=c[1];b=a[1];e=1/d[1];b[1]=e;b[0]*=e;d[2]*=e;d[3]*=e;d[4]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g=c[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g=c[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g=c[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];d=c[2];b=a[2];e=1/d[2];b[2]=e;b[0]*=e;b[1]*=e;d[3]*=e;d[4]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g=c[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g=c[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g=c[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];d=c[3];b=a[3];e=1/d[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;d[4]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=d[4]*g[3];g=c[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=d[4]*g[3];g=c[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=d[4]*g[3];g=c[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=d[4]*g[3];d=c[4];b=a[4];e=1/d[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[4];g=c[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g=c[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g=c[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];break;case 6:d=c[0];b=a[0];e=1/d[0];b[0]=e;d[1]*=e;d[2]*=e;d[3]*=e;d[4]*=e;d[5]*=e;g=c[1];k=a[1];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];g=c[2];k=a[2];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];g=c[3];k=a[3];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];g=c[4];k=a[4];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];g=c[5];k=a[5];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];d=c[1];b=a[1];e=1/d[1];b[1]=e;b[0]*=e;d[2]*=e;d[3]*=e;d[4]*=e;d[5]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];g=c[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];g=c[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];g=c[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];g=c[5];k=a[5];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];d=c[2];b=a[2];e=1/d[2];b[2]=e;b[0]*=e;b[1]*=e;d[3]*=e;d[4]*=e;d[5]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];g=c[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];g=c[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];g=c[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];g=c[5];k=a[5];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];d=c[3];b=a[3];e=1/d[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;d[4]*=e;d[5]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];g=c[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];g=c[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];g=c[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];g=c[5];k=a[5];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];d=c[4];b=a[4];e=1/d[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;d[5]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[4];g[5]-=d[5]*g[4];g=c[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g[5]-=d[5]*g[4];g=c[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g[5]-=d[5]*g[4];g=c[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];g[5]-=d[5]*g[4];g=c[5];k=a[5];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];k[4]=-e*g[4];g[5]-=d[5]*g[4];d=c[5];b=a[5];e=1/d[5];b[5]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;b[4]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[5];g=c[1];k=a[1];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];g=c[2];k=a[2];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];g=c[3];k=a[3];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];g=c[4];k=a[4];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];k[4]-=b[4]*g[5];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];b=a[5];a[0][5]=b[0];a[1][5]=b[1];a[2][5]=b[2];a[3][5]=b[3];a[4][5]=b[4];break;default:for(f=0;f<e;){h=f++;d=c[h];b=a[h];l=1/d[h];b[h]=l;g=0;for(k=h;g<k;){var m=g++;b[m]*=l}g=h+1;for(k=e;g<k;)m=g++,d[m]*=l;for(var m=0,n=h;m<n;){var q=m++,g=c[q];k=a[q];for(var p=0,q=q+1;p<q;){var r=p++;k[r]-=b[r]*g[h]}k=h+1;for(p=e;k<p;)q=k++,g[q]-=d[q]*g[h]}m=h+1;for(n=e;m<n;){k=m++;g=c[k];k=a[k];p=0;for(q=h;p<q;)r=p++,k[r]-=b[r]*g[h];k[h]=-l*g[h];k=h+1;for(p=e;k<p;)q=k++,g[q]-=d[q]*g[h]}}for(c=1;c<e;)for(d=c++,b=a[d],f=0,h=d;f<h;)l=f++,a[l][d]=b[l]}},ll:function(a,b){var e=this.$a,c=this.cj,d=a.Ka,f=a.Qe,h=a.Re,l=f.$a,g=h.$a,k,m,n,q,p,r,v,u,y,t,w,D,G,B,C,A;k=f.P;m=f.R;n=f.S;q=f.T;p=f.U;r=f.V;v=f.W;u=f.X;f=f.Y;y=h.P;t=h.R;w=h.S;D=h.T;G=h.U;B=h.V;C=h.W;A=h.X;for(var h=h.Y,E=0;E<d;){var I=E++,J=a.rows[I].Aa,I=b[I];J.Im();J.xc&1?(I.qd=J.va*l,I.rd=J.wa*l,I.sd=J.xa*l,I.td=J.Ba*g,I.ud=J.Ca*g,I.vd=J.Da*g):(I.qd=0,I.rd=0,I.sd=0,I.td=0,I.ud=0,I.vd=0);if(J.xc&2){var O,S,V;O=k*J.aa+m*J.ba+n*J.ca;S=q*J.aa+p*J.ba+r*J.ca;V=v*J.aa+u*J.ba+f*J.ca;I.kd=O;I.ld=S;I.md=V;O=y*J.ea+t*J.fa+w*J.ga;S=D*J.ea+G*J.fa+B*J.ga;J=C*J.ea+A*J.fa+h*J.ga;I.nd=O;I.od=S;I.pd=J}else I.kd=0,I.ld=0,I.md=0,I.nd=0,I.od=0,I.pd=0}for(l=0;l<d;)for(g=l++,k=a.rows[g].Aa,m=g,n=d;m<n;)q=m++,p=b[q],r=k.va*p.qd+k.wa*p.rd+k.xa*p.sd+(k.aa*p.kd+k.ba*p.ld+k.ca*p.md)+(k.Ba*p.td+k.Ca*p.ud+k.Da*p.vd)+(k.ea*p.nd+k.fa*p.od+k.ga*p.pd),g==q?(e[g][q]=r+a.rows[g].Ma,c[g][q]=r,p.mass=r+a.rows[g].Ma,p.Ff=r,0!=p.mass&&(p.mass=1/p.mass),p.Ff&&(p.Ff=1/p.Ff)):(e[g][q]=r,e[q][g]=r,c[g][q]=r,c[q][g]=r);a=0;for(b=this.ak;a<b;)e=a++,this.Sj[e]=!1}};nc.ua=Ob;nc.prototype=cb(Ob.prototype,{xh:function(a){this.Ji.$d(a,this.info);this.C=this.info.Qe;this.D=this.info.Re;a=this.C.$a;var b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,v,u,y,t,w;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;u=this.D.V;y=this.D.W;t=this.D.X;w=this.D.Y;for(var D=0,G=this.info.Ka;D<G;){var B=D++,C=this.info.rows[B],B=this.ac[B],A=C.Ng;B.Zh=A.va*a;B.$h=A.wa*a;B.ai=A.xa*a;B.bi=A.Ba*b;B.ci=A.Ca*b;B.di=A.Da*b;var E,I,J;E=e*A.aa+c*A.ba+d*A.ca;I=f*A.aa+h*A.ba+l*A.ca;J=g*A.aa+k*A.ba+m*A.ca;B.Xf=E;B.Yf=I;B.Zf=J;E=n*A.ea+q*A.fa+p*A.ga;I=r*A.ea+v*A.fa+u*A.ga;J=y*A.ea+t*A.fa+w*A.ga;B.$f=E;B.ag=I;B.bg=J;B.he=a+b+(B.Xf*A.aa+B.Yf*A.ba+B.Zf*A.ca)+(B.$f*A.ea+B.ag*A.fa+B.bg*A.ga);0!=B.he&&(B.he=1/B.he);A=C.Lj;C=C.Kj;B.yl=A.va*a;B.zl=A.wa*a;B.Al=A.xa*a;B.Bl=A.Ba*b;B.Cl=A.Ca*b;B.Dl=A.Da*b;B.sl=C.va*a;B.tl=C.wa*a;B.ul=C.xa*a;B.vl=C.Ba*b;B.wl=C.Ca*b;B.xl=C.Da*b;E=e*A.aa+c*A.ba+d*A.ca;I=f*A.aa+h*A.ba+l*A.ca;J=g*A.aa+k*A.ba+m*A.ca;B.Ej=E;B.Fj=I;B.Gj=J;E=n*A.ea+q*A.fa+p*A.ga;I=r*A.ea+v*A.fa+u*A.ga;J=y*A.ea+t*A.fa+w*A.ga;B.Hj=E;B.Ij=I;B.Jj=J;E=e*C.aa+c*C.ba+d*C.ca;I=f*C.aa+h*C.ba+l*C.ca;J=g*C.aa+k*C.ba+m*C.ca;B.lk=E;B.mk=I;B.nk=J;E=n*C.ea+q*C.fa+p*C.ga;I=r*C.ea+v*C.fa+u*C.ga;J=y*C.ea+t*C.fa+w*C.ga;B.pk=E;B.qk=I;B.rk=J;A=a+b+(B.Ej*A.aa+B.Fj*A.ba+B.Gj*A.ca)+(B.Hj*A.ea+B.Ij*A.fa+B.Jj*A.ga);I=E=B.Ej*C.aa+B.Fj*C.ba+B.Gj*C.ca+(B.Hj*C.ea+B.Ij*C.fa+B.Jj*C.ga);C=a+b+(B.lk*C.aa+B.mk*C.ba+B.nk*C.ca)+(B.pk*C.ea+B.qk*C.fa+B.rk*C.ga);(J=A*C-E*I)&&(J=1/J);B.ym=C*J;B.zm=-E*J;B.Am=-I*J;B.Bm=A*J}},Gh:function(a){var b,e,c,d,f,h,l,g,k,m,n,q;b=this.C.gb;e=this.C.hb;c=this.C.ib;d=this.D.gb;f=this.D.hb;h=this.D.ib;l=this.C.kb;g=this.C.lb;k=this.C.mb;m=this.D.kb;n=this.D.lb;q=this.D.mb;for(var p=0,r=this.info.Ka;p<r;){var v=p++,u=this.info.rows[v],y=u.ta,v=this.ac[v],t=u.Lj,w=u.Kj,u=y.bd,t=y.df*t.va+y.ef*t.wa+y.ff*t.xa,w=y.df*w.va+y.ef*w.wa+y.ff*w.xa;y.zc=t;y.yc=w;y.bd*=a.dtRatio;y.zc*=a.dtRatio;y.yc*=a.dtRatio;b+=v.Zh*u;e+=v.$h*u;c+=v.ai*u;b+=v.yl*t;e+=v.zl*t;c+=v.Al*t;b+=v.sl*w;e+=v.tl*w;c+=v.ul*w;d+=v.bi*-u;f+=v.ci*-u;h+=v.di*-u;d+=v.Bl*-t;f+=v.Cl*-t;h+=v.Dl*-t;d+=v.vl*-w;f+=v.wl*-w;h+=v.xl*-w;l+=v.Xf*u;g+=v.Yf*u;k+=v.Zf*u;l+=v.Ej*t;g+=v.Fj*t;k+=v.Gj*t;l+=v.lk*w;g+=v.mk*w;k+=v.nk*w;m+=v.$f*-u;n+=v.ag*-u;q+=v.bg*-u;m+=v.Hj*-t;n+=v.Ij*-t;q+=v.Jj*-t;m+=v.pk*-w;n+=v.qk*-w;q+=v.rk*-w}this.C.gb=b;this.C.hb=e;this.C.ib=c;this.D.gb=d;this.D.hb=f;this.D.ib=h;this.C.kb=l;this.C.lb=g;this.C.mb=k;this.D.kb=m;this.D.lb=n;this.D.mb=q},Ch:function(){var a,b,e,c,d,f,h,l,g,k,m,n;a=this.C.gb;b=this.C.hb;e=this.C.ib;c=this.D.gb;d=this.D.hb;f=this.D.ib;h=this.C.kb;l=this.C.lb;g=this.C.mb;k=this.D.kb;m=this.D.lb;n=this.D.mb;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.ac[r],u=v.ta,y=0,t=v.Lj,y=y+(a*t.va+b*t.wa+e*t.xa),y=y-(c*t.Ba+d*t.Ca+f*t.Da),y=y+(h*t.aa+l*t.ba+g*t.ca),y=y-(k*t.ea+m*t.fa+n*t.ga),w=0,t=v.Kj,w=w+(a*t.va+b*t.wa+e*t.xa),w=w-(c*t.Ba+d*t.Ca+f*t.Da),w=w+(h*t.aa+l*t.ba+g*t.ca),w=w-(k*t.ea+m*t.fa+n*t.ga),t=-(y*r.ym+w*r.zm),D=-(y*r.Am+w*r.Bm),y=u.zc,w=u.yc;u.zc+=t;u.yc+=D;(v=v.friction*u.bd)?(t=u.zc*u.zc+u.yc*u.yc,t>v*v&&(v/=Math.sqrt(t),u.zc*=v,u.yc*=v)):(u.zc=0,u.yc=0);t=u.zc-y;D=u.yc-w;a+=r.yl*t;b+=r.zl*t;e+=r.Al*t;a+=r.sl*D;b+=r.tl*D;e+=r.ul*D;c+=r.Bl*-t;d+=r.Cl*-t;f+=r.Dl*-t;c+=r.vl*-D;d+=r.wl*-D;f+=r.xl*-D;h+=r.Ej*t;l+=r.Fj*t;g+=r.Gj*t;h+=r.lk*D;l+=r.mk*D;g+=r.nk*D;k+=r.Hj*-t;m+=r.Ij*-t;n+=r.Jj*-t;k+=r.pk*-D;m+=r.qk*-D;n+=r.rk*-D}q=0;for(p=this.info.Ka;q<p;)r=q++,v=this.info.rows[r],r=this.ac[r],u=v.ta,y=0,w=v.Ng,y+=a*w.va+b*w.wa+e*w.xa,y-=c*w.Ba+d*w.Ca+f*w.Da,y+=h*w.aa+l*w.ba+g*w.ca,y-=k*w.ea+m*w.fa+n*w.ga,v=(v.Fa-y)*r.he,y=u.bd,u.bd+=v,0>u.bd&&(u.bd=0),v=u.bd-y,a+=r.Zh*v,b+=r.$h*v,e+=r.ai*v,c+=r.bi*-v,d+=r.ci*-v,f+=r.di*-v,h+=r.Xf*v,l+=r.Yf*v,g+=r.Zf*v,k+=r.$f*-v,m+=r.ag*-v,n+=r.bg*-v;this.C.gb=a;this.C.hb=b;this.C.ib=e;this.D.gb=c;this.D.hb=d;this.D.ib=f;this.C.kb=h;this.C.lb=l;this.C.mb=g;this.D.kb=k;this.D.lb=m;this.D.mb=n},Pg:function(){this.Ji.al();this.Ji.gd(this.info);var a=this.C.$a,b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,v,t,y,u,w;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;y=this.D.W;u=this.D.X;w=this.D.Y;for(var D=0,G=this.info.Ka;D<G;){var B=D++,C=this.ac[B],B=this.info.rows[B].Ng;C.Zh=B.va*a;C.$h=B.wa*a;C.ai=B.xa*a;C.bi=B.Ba*b;C.ci=B.Ca*b;C.di=B.Da*b;var A,E,I;A=e*B.aa+c*B.ba+d*B.ca;E=f*B.aa+h*B.ba+l*B.ca;I=g*B.aa+k*B.ba+m*B.ca;C.Xf=A;C.Yf=E;C.Zf=I;A=n*B.ea+q*B.fa+p*B.ga;E=r*B.ea+v*B.fa+t*B.ga;I=y*B.ea+u*B.fa+w*B.ga;C.$f=A;C.ag=E;C.bg=I;C.he=a+b+(C.Xf*B.aa+C.Yf*B.ba+C.Zf*B.ca)+(C.$f*B.ea+C.ag*B.fa+C.bg*B.ga);0!=C.he&&(C.he=1/C.he)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ta.ub=0},Bh:function(){var a,b,e,c,d,f,h,l,g,k,m,n;a=this.C.Yc;b=this.C.Zc;e=this.C.$c;c=this.D.Yc;d=this.D.Zc;f=this.D.$c;h=this.C.Uc;l=this.C.Vc;g=this.C.Wc;k=this.D.Uc;m=this.D.Vc;n=this.D.Wc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.ac[r],t=v.ta,y=v.Ng,u=0,u=u+(a*y.va+b*y.wa+e*y.xa),u=u-(c*y.Ba+d*y.Ca+f*y.Da),u=u+(h*y.aa+l*y.ba+g*y.ca),u=u-(k*y.ea+m*y.fa+n*y.ga),v=(v.Fa-u)*r.he*G.positionSplitImpulseBaumgarte,y=t.ub;t.ub+=v;0>t.ub&&(t.ub=0);v=t.ub-y;a+=r.Zh*v;b+=r.$h*v;e+=r.ai*v;c+=r.bi*-v;d+=r.ci*-v;f+=r.di*-v;h+=r.Xf*v;l+=r.Yf*v;g+=r.Zf*v;k+=r.$f*-v;m+=r.ag*-v;n+=r.bg*-v}this.C.Yc=a;this.C.Zc=b;this.C.$c=e;this.D.Yc=c;this.D.Zc=d;this.D.$c=f;this.C.Uc=h;this.C.Vc=l;this.C.Wc=g;this.D.Uc=k;this.D.Vc=m;this.D.Wc=n},Ah:function(){this.Ji.al();this.Ji.gd(this.info);var a=this.C.$a,b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,v,t,y,u,w;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;y=this.D.W;u=this.D.X;w=this.D.Y;for(var D=0,E=this.info.Ka;D<E;){var B=D++,C=this.ac[B],A=this.info.rows[B].Ng;C.Zh=A.va*a;C.$h=A.wa*a;C.ai=A.xa*a;C.bi=A.Ba*b;C.ci=A.Ca*b;C.di=A.Da*b;var O,I,J;O=e*A.aa+c*A.ba+d*A.ca;I=f*A.aa+h*A.ba+l*A.ca;J=g*A.aa+k*A.ba+m*A.ca;C.Xf=O;C.Yf=I;C.Zf=J;var S,V,ta;S=n*A.ea+q*A.fa+p*A.ga;V=r*A.ea+v*A.fa+t*A.ga;ta=y*A.ea+u*A.fa+w*A.ga;C.$f=S;C.ag=V;C.bg=ta;C.he=a+b+(C.Xf*A.aa+C.Yf*A.ba+C.Zf*A.ca)+(C.$f*A.ea+C.ag*A.fa+C.bg*A.ga);0!=C.he&&(C.he=1/C.he)}for(var da,Ja,Ma,Oa,Ia,Da,ma,Q,Wa,Ga,Ea,Ua,va=Ua=Ea=Ga=Wa=Q=ma=Da=Ia=Oa=Ma=Ja=da=0,oa=this.info.Ka;va<oa;){var Ya=va++,F=this.info.rows[Ya],Qa=this.ac[Ya],X=F.ta,M=F.Ng,N=0,N=N+(da*M.va+Ja*M.wa+Ma*M.xa),N=N-(Oa*M.Ba+Ia*M.Ca+Da*M.Da),N=N+(ma*M.aa+Q*M.ba+Wa*M.ca),N=N-(Ga*M.ea+Ea*M.fa+Ua*M.ga),ca=(F.Fa-N)*Qa.he*G.positionNgsBaumgarte,Y=X.ub;X.ub+=ca;0>X.ub&&(X.ub=0);ca=X.ub-Y;da+=Qa.Zh*ca;Ja+=Qa.$h*ca;Ma+=Qa.ai*ca;Oa+=Qa.bi*-ca;Ia+=Qa.ci*-ca;Da+=Qa.di*-ca;ma+=Qa.Xf*ca;Q+=Qa.Yf*ca;Wa+=Qa.Zf*ca;Ga+=Qa.$f*-ca;Ea+=Qa.ag*-ca;Ua+=Qa.bg*-ca}var T=this.C;T.a.v+=da;T.a.A+=Ja;T.a.B+=Ma;var aa=this.D;aa.a.v+=Oa;aa.a.A+=Ia;aa.a.B+=Da;var z=this.C,fa=Math.sqrt(ma*ma+Q*Q+Wa*Wa),U=.5*fa,pa,sa;if(.5>U){var wa=U*U;pa=.5*(1-.16666666666666666*wa+wa*wa*.008333333333333333);sa=1-.5*wa+wa*wa*.041666666666666664}else pa=Math.sin(U)/fa,sa=Math.cos(U);var ra,ka;ra=ma*pa;ka=Q*pa;var Z,na;Z=Wa*pa;na=sa;var Aa,ya,K,Ba,ha=z.a.o,ba=z.a.m,Va=z.a.s,ga=ha+ba+Va,P;0<ga?(P=Math.sqrt(ga+1),Ba=.5*P,P=.5/P,Aa=(z.a.g-z.a.j)*P,ya=(z.a.h-z.a.l)*P,K=(z.a.i-z.a.f)*P):ha>ba?ha>Va?(P=Math.sqrt(ha-ba-Va+1),Aa=.5*P,P=.5/P,ya=(z.a.f+z.a.i)*P,K=(z.a.h+z.a.l)*P,Ba=(z.a.g-z.a.j)*P):(P=Math.sqrt(Va-ha-ba+1),K=.5*P,P=.5/P,Aa=(z.a.h+z.a.l)*P,ya=(z.a.j+z.a.g)*P,Ba=(z.a.i-z.a.f)*P):ba>Va?(P=Math.sqrt(ba-Va-ha+1),ya=.5*P,P=.5/P,Aa=(z.a.f+z.a.i)*P,K=(z.a.j+z.a.g)*P,Ba=(z.a.h-z.a.l)*P):(P=Math.sqrt(Va-ha-ba+1),K=.5*P,P=.5/P,Aa=(z.a.h+z.a.l)*P,ya=(z.a.j+z.a.g)*P,Ba=(z.a.i-z.a.f)*P);Aa=na*Aa+ra*Ba+ka*K-Z*ya;ya=na*ya-ra*K+ka*Ba+Z*Aa;K=na*K+ra*ya-ka*Aa+Z*Ba;Ba=na*Ba-ra*Aa-ka*ya-Z*K;var za=Aa*Aa+ya*ya+K*K+Ba*Ba;1E-32<za&&(za=1/Math.sqrt(za));Aa*=za;ya*=za;K*=za;Ba*=za;var Xa=Aa,ja=ya,ab=K,cb=Ba,gb=2*Xa,pb=2*ja,ua=2*ab,xa=Xa*gb,Fa=ja*pb,fb=ab*ua,Ha=Xa*pb,qb=ja*ua,Na=Xa*ua,la=cb*gb,Ca=cb*pb,Za=cb*ua;z.a.o=1-Fa-fb;z.a.f=Ha-Za;z.a.h=Na+Ca;z.a.i=Ha+Za;z.a.m=1-xa-fb;z.a.j=qb-la;z.a.l=Na-Ca;z.a.g=qb+la;z.a.s=1-xa-Fa;var Ra,ib,hb,db,tb,kb,nb,wb,Cb;Ra=z.a.o*z.Ra+z.a.f*z.Ua+z.a.h*z.Xa;ib=z.a.o*z.Sa+z.a.f*z.Va+z.a.h*z.Ya;hb=z.a.o*z.Ta+z.a.f*z.Wa+z.a.h*z.Za;db=z.a.i*z.Ra+z.a.m*z.Ua+z.a.j*z.Xa;tb=z.a.i*z.Sa+z.a.m*z.Va+z.a.j*z.Ya;kb=z.a.i*z.Ta+z.a.m*z.Wa+z.a.j*z.Za;nb=z.a.l*z.Ra+z.a.g*z.Ua+z.a.s*z.Xa;wb=z.a.l*z.Sa+z.a.g*z.Va+z.a.s*z.Ya;Cb=z.a.l*z.Ta+z.a.g*z.Wa+z.a.s*z.Za;z.P=Ra;z.R=ib;z.S=hb;z.T=db;z.U=tb;z.V=kb;z.W=nb;z.X=wb;z.Y=Cb;var $a,Ka,vb,H,eb,lb,yb,mb,ub;$a=z.P*z.a.o+z.R*z.a.f+z.S*z.a.h;Ka=z.P*z.a.i+z.R*z.a.m+z.S*z.a.j;vb=z.P*z.a.l+z.R*z.a.g+z.S*z.a.s;H=z.T*z.a.o+z.U*z.a.f+z.V*z.a.h;eb=z.T*z.a.i+z.U*z.a.m+z.V*z.a.j;lb=z.T*z.a.l+z.U*z.a.g+z.V*z.a.s;yb=z.W*z.a.o+z.X*z.a.f+z.Y*z.a.h;mb=z.W*z.a.i+z.X*z.a.m+z.Y*z.a.j;ub=z.W*z.a.l+z.X*z.a.g+z.Y*z.a.s;z.P=$a;z.R=Ka;z.S=vb;z.T=H;z.U=eb;z.V=lb;z.W=yb;z.X=mb;z.Y=ub;z.P*=z.N.x;z.R*=z.N.x;z.S*=z.N.x;z.T*=z.N.y;z.U*=z.N.y;z.V*=z.N.y;z.W*=z.N.z;z.X*=z.N.z;z.Y*=z.N.z;var x=this.D,W=Math.sqrt(Ga*Ga+Ea*Ea+Ua*Ua),ea=.5*W,Jb,Kb;if(.5>ea){var Pa=ea*ea;Jb=.5*(1-.16666666666666666*Pa+Pa*Pa*.008333333333333333);Kb=1-.5*Pa+Pa*Pa*.041666666666666664}else Jb=Math.sin(ea)/W,Kb=Math.cos(ea);var rb,ob;rb=Ga*Jb;ob=Ea*Jb;var zb,Ab;zb=Ua*Jb;Ab=Kb;var ia,Ta,bb,jb,Bb=x.a.o,La=x.a.m,Eb=x.a.s,Rb=Bb+La+Eb,qa;0<Rb?(qa=Math.sqrt(Rb+1),jb=.5*qa,qa=.5/qa,ia=(x.a.g-x.a.j)*qa,Ta=(x.a.h-x.a.l)*qa,bb=(x.a.i-x.a.f)*qa):Bb>La?Bb>Eb?(qa=Math.sqrt(Bb-La-Eb+1),ia=.5*qa,qa=.5/qa,Ta=(x.a.f+x.a.i)*qa,bb=(x.a.h+x.a.l)*qa,jb=(x.a.g-x.a.j)*qa):(qa=Math.sqrt(Eb-Bb-La+1),bb=.5*qa,qa=.5/qa,ia=(x.a.h+x.a.l)*qa,Ta=(x.a.j+x.a.g)*qa,jb=(x.a.i-x.a.f)*qa):La>Eb?(qa=Math.sqrt(La-Eb-Bb+1),Ta=.5*qa,qa=.5/qa,ia=(x.a.f+x.a.i)*qa,bb=(x.a.j+x.a.g)*qa,jb=(x.a.h-x.a.l)*qa):(qa=Math.sqrt(Eb-Bb-La+1),bb=.5*qa,qa=.5/qa,ia=(x.a.h+x.a.l)*qa,Ta=(x.a.j+x.a.g)*qa,jb=(x.a.i-x.a.f)*qa);ia=Ab*ia+rb*jb+ob*bb-zb*Ta;Ta=Ab*Ta-rb*bb+ob*jb+zb*ia;bb=Ab*bb+rb*Ta-ob*ia+zb*jb;jb=Ab*jb-rb*ia-ob*Ta-zb*bb;var Hb=ia*ia+Ta*Ta+bb*bb+jb*jb;1E-32<Hb&&(Hb=1/Math.sqrt(Hb));ia*=Hb;Ta*=Hb;bb*=Hb;jb*=Hb;var Mb=ia,Sb=Ta,Ob=bb,Wb=jb,ac=2*Mb,Zb=2*Sb,Xb=2*Ob,$b=Mb*ac,ec=Sb*Zb,hc=Ob*Xb,Ub=Mb*Zb,gc=Sb*Xb,fc=Mb*Xb,Pb=Wb*ac,cc=Wb*Zb,Fb=Wb*Xb;x.a.o=1-ec-hc;x.a.f=Ub-Fb;x.a.h=fc+cc;x.a.i=Ub+Fb;x.a.m=1-$b-hc;x.a.j=gc-Pb;x.a.l=fc-cc;x.a.g=gc+Pb;x.a.s=1-$b-ec;var lc,bc,Qb,dc,Vb,Nb,Tb,sb,ic;lc=x.a.o*x.Ra+x.a.f*x.Ua+x.a.h*x.Xa;bc=x.a.o*x.Sa+x.a.f*x.Va+x.a.h*x.Ya;Qb=x.a.o*x.Ta+x.a.f*x.Wa+x.a.h*x.Za;dc=x.a.i*x.Ra+x.a.m*x.Ua+x.a.j*x.Xa;Vb=x.a.i*x.Sa+x.a.m*x.Va+x.a.j*x.Ya;Nb=x.a.i*x.Ta+x.a.m*x.Wa+x.a.j*x.Za;Tb=x.a.l*x.Ra+x.a.g*x.Ua+x.a.s*x.Xa;sb=x.a.l*x.Sa+x.a.g*x.Va+x.a.s*x.Ya;ic=x.a.l*x.Ta+x.a.g*x.Wa+x.a.s*x.Za;x.P=lc;x.R=bc;x.S=Qb;x.T=dc;x.U=Vb;x.V=Nb;x.W=Tb;x.X=sb;x.Y=ic;var qc,kc,mc,jc,nc,pc,oc,rc,tc;qc=x.P*x.a.o+x.R*x.a.f+x.S*x.a.h;kc=x.P*x.a.i+x.R*x.a.m+x.S*x.a.j;mc=x.P*x.a.l+x.R*x.a.g+x.S*x.a.s;jc=x.T*x.a.o+x.U*x.a.f+x.V*x.a.h;nc=x.T*x.a.i+x.U*x.a.m+x.V*x.a.j;pc=x.T*x.a.l+x.U*x.a.g+x.V*x.a.s;oc=x.W*x.a.o+x.X*x.a.f+x.Y*x.a.h;rc=x.W*x.a.i+x.X*x.a.m+x.Y*x.a.j;tc=x.W*x.a.l+x.X*x.a.g+x.Y*x.a.s;x.P=qc;x.R=kc;x.S=mc;x.T=jc;x.U=nc;x.V=pc;x.W=oc;x.X=rc;x.Y=tc;x.P*=x.N.x;x.R*=x.N.x;x.S*=x.N.x;x.T*=x.N.y;x.U*=x.N.y;x.V*=x.N.y;x.W*=x.N.z;x.X*=x.N.z;x.Y*=x.N.z},postSolve:function(){for(var a=0,b=this.info.Ka;a<b;){var e=a++,c=this.info.rows[e],e=c.ta,d=c.Lj,c=c.Kj,f,h,l;l=h=f=0;f+=d.va*e.zc;h+=d.wa*e.zc;l+=d.xa*e.zc;f+=c.va*e.yc;h+=c.wa*e.yc;l+=c.xa*e.yc;e.df=f;e.ef=h;e.ff=l}this.Ji.al()}});mc.ua=Ob;mc.prototype=cb(Ob.prototype,{xh:function(a){this.$.hd();this.$.$d(a,this.info);this.C=this.info.Qe;this.D=this.info.Re;a=this.C.$a;var b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,v,t,y,u,w;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;y=this.D.W;u=this.D.X;w=this.D.Y;for(var D=0,G=this.info.Ka;D<G;){var B=D++,C=this.info.rows[B],B=this.ac[B],A=C.Aa;A.Im();A.xc&1?(B.qd=A.va*a,B.rd=A.wa*a,B.sd=A.xa*a,B.td=A.Ba*b,B.ud=A.Ca*b,B.vd=A.Da*b):(B.qd=0,B.rd=0,B.sd=0,B.td=0,B.ud=0,B.vd=0);if(A.xc&2){var E,I,J;E=e*A.aa+c*A.ba+d*A.ca;I=f*A.aa+h*A.ba+l*A.ca;J=g*A.aa+k*A.ba+m*A.ca;B.kd=E;B.ld=I;B.md=J;E=n*A.ea+q*A.fa+p*A.ga;I=r*A.ea+v*A.fa+t*A.ga;J=y*A.ea+u*A.fa+w*A.ga;B.nd=E;B.od=I;B.pd=J}else B.kd=0,B.ld=0,B.md=0,B.nd=0,B.od=0,B.pd=0;B.Ff=B.qd*A.va+B.rd*A.wa+B.sd*A.xa+(B.td*A.Ba+B.ud*A.Ca+B.vd*A.Da)+(B.kd*A.aa+B.ld*A.ba+B.md*A.ca)+(B.nd*A.ea+B.od*A.fa+B.pd*A.ga);B.mass=B.Ff+C.Ma;B.Ff&&(B.Ff=1/B.Ff);0!=B.mass&&(B.mass=1/B.mass)}},Gh:function(a){var b=this.$.Hc==Hb.BAUMGARTE?G.jointWarmStartingFactorForBaungarte:G.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ta;e.ta=0;e.ad=0;e.ub=0}else{var c,d,f,h,l,g,k,m,n,q;a=this.C.gb;e=this.C.hb;c=this.C.ib;d=this.D.gb;f=this.D.hb;h=this.D.ib;l=this.C.kb;g=this.C.lb;k=this.C.mb;m=this.D.kb;n=this.D.lb;q=this.D.mb;for(var p=0,r=this.info.Ka;p<r;){var v=p++,t=this.ac[v],v=this.info.rows[v].ta;v.ta*=b;v.ad*=b;v=v.ta+v.ad;a+=t.qd*v;e+=t.rd*v;c+=t.sd*v;d+=t.td*-v;f+=t.ud*-v;h+=t.vd*-v;l+=t.kd*v;g+=t.ld*v;k+=t.md*v;m+=t.nd*-v;n+=t.od*-v;q+=t.pd*-v}this.C.gb=a;this.C.hb=e;this.C.ib=c;this.D.gb=d;this.D.hb=f;this.D.ib=h;this.C.kb=l;this.C.lb=g;this.C.mb=k;this.D.kb=m;this.D.lb=n;this.D.mb=q}},Ch:function(){var a,b,e,c,d,f,h,l,g,k,m,n;a=this.C.gb;b=this.C.hb;e=this.C.ib;c=this.D.gb;d=this.D.hb;f=this.D.ib;h=this.C.kb;l=this.C.lb;g=this.C.mb;k=this.D.kb;m=this.D.lb;n=this.D.mb;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.ac[r],t=v.ta,y=v.Aa;if(0!=v.fb){var u=0,u=u+(a*y.va+b*y.wa+e*y.xa),u=u-(c*y.Ba+d*y.Ca+f*y.Da),u=u+(h*y.aa+l*y.ba+g*y.ca),u=u-(k*y.ea+m*y.fa+n*y.ga),u=(-v.motorSpeed-u)*r.Ff,w=t.ad;t.ad+=u;t.ad<-v.fb?t.ad=-v.fb:t.ad>v.fb&&(t.ad=v.fb);u=t.ad-w;y.xc&1&&(a+=r.qd*u,b+=r.rd*u,e+=r.sd*u,c+=r.td*-u,d+=r.ud*-u,f+=r.vd*-u);y.xc&2&&(h+=r.kd*u,l+=r.ld*u,g+=r.md*u,k+=r.nd*-u,m+=r.od*-u,n+=r.pd*-u)}}q=0;for(p=this.info.Ka;q<p;)r=q++,v=this.info.rows[r],r=this.ac[r],t=v.ta,y=v.Aa,u=0,u+=a*y.va+b*y.wa+e*y.xa,u-=c*y.Ba+d*y.Ca+f*y.Da,u+=h*y.aa+l*y.ba+g*y.ca,u-=k*y.ea+m*y.fa+n*y.ga,u=(v.Fa-u-t.ta*v.Ma)*r.mass,w=t.ta,t.ta+=u,t.ta<v.Ia?t.ta=v.Ia:t.ta>v.Ha&&(t.ta=v.Ha),u=t.ta-w,y.xc&1&&(a+=r.qd*u,b+=r.rd*u,e+=r.sd*u,c+=r.td*-u,d+=r.ud*-u,f+=r.vd*-u),y.xc&2&&(h+=r.kd*u,l+=r.ld*u,g+=r.md*u,k+=r.nd*-u,m+=r.od*-u,n+=r.pd*-u);this.C.gb=a;this.C.hb=b;this.C.ib=e;this.D.gb=c;this.D.hb=d;this.D.ib=f;this.C.kb=h;this.C.lb=l;this.C.mb=g;this.D.kb=k;this.D.lb=m;this.D.mb=n},Li:function(a){for(var b,e,c,d,f,h,l=h=f=d=c=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ta,m=m.Aa;m.xc&1?(b+=m.va*k.ta,e+=m.wa*k.ta,c+=m.xa*k.ta):m.xc&2&&(d+=m.aa*k.ta,f+=m.ba*k.ta,h+=m.ca*k.ta)}this.$.Pi=b*a.invDt;this.$.Qi=e*a.invDt;this.$.Ri=c*a.invDt;this.$.Si=d*a.invDt;this.$.Ti=f*a.invDt;this.$.Ui=h*a.invDt},Pg:function(){this.$.hd();this.$.gd(this.info);this.C=this.info.Qe;this.D=this.info.Re;var a=this.C.$a,b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,v,u,t,G,w;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;u=this.D.V;t=this.D.W;G=this.D.X;w=this.D.Y;for(var D=0,E=this.info.Ka;D<E;){var B=D++,C=this.ac[B],B=this.info.rows[B].Aa;C.qd=B.va*a;C.rd=B.wa*a;C.sd=B.xa*a;C.td=B.Ba*b;C.ud=B.Ca*b;C.vd=B.Da*b;var A,O,I;A=e*B.aa+c*B.ba+d*B.ca;O=f*B.aa+h*B.ba+l*B.ca;I=g*B.aa+k*B.ba+m*B.ca;C.kd=A;C.ld=O;C.md=I;A=n*B.ea+q*B.fa+p*B.ga;O=r*B.ea+v*B.fa+u*B.ga;I=t*B.ea+G*B.fa+w*B.ga;C.nd=A;C.od=O;C.pd=I;C.mass=C.qd*B.va+C.rd*B.wa+C.sd*B.xa+(C.td*B.Ba+C.ud*B.Ca+C.vd*B.Da)+(C.kd*B.aa+C.ld*B.ba+C.md*B.ca)+(C.nd*B.ea+C.od*B.fa+C.pd*B.ga);C.mass&&(C.mass=1/C.mass)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ta.ub=0},Bh:function(){var a,b,e,c,d,f,h,l,g,k,m,n;a=this.C.Yc;b=this.C.Zc;e=this.C.$c;c=this.D.Yc;d=this.D.Zc;f=this.D.$c;h=this.C.Uc;l=this.C.Vc;g=this.C.Wc;k=this.D.Uc;m=this.D.Vc;n=this.D.Wc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.ac[r],u=v.ta,t=v.Aa,E=0,E=E+(a*t.va+b*t.wa+e*t.xa),E=E-(c*t.Ba+d*t.Ca+f*t.Da),E=E+(h*t.aa+l*t.ba+g*t.ca),E=E-(k*t.ea+m*t.fa+n*t.ga),t=(v.Fa*G.positionSplitImpulseBaumgarte-E)*r.mass,E=u.ub;u.ub+=t;u.ub<v.Ia?u.ub=v.Ia:u.ub>v.Ha&&(u.ub=v.Ha);t=u.ub-E;a+=r.qd*t;b+=r.rd*t;e+=r.sd*t;c+=r.td*-t;d+=r.ud*-t;f+=r.vd*-t;h+=r.kd*t;l+=r.ld*t;g+=r.md*t;k+=r.nd*-t;m+=r.od*-t;n+=r.pd*-t}this.C.Yc=a;this.C.Zc=b;this.C.$c=e;this.D.Yc=c;this.D.Zc=d;this.D.$c=f;this.C.Uc=h;this.C.Vc=l;this.C.Wc=g;this.D.Uc=k;this.D.Vc=m;this.D.Wc=n},Ah:function(){this.$.hd();this.$.gd(this.info);this.C=this.info.Qe;this.D=this.info.Re;var a=this.C.$a,b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,t,u,y,E,w;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;u=this.D.V;y=this.D.W;E=this.D.X;w=this.D.Y;for(var D=0,O=this.info.Ka;D<O;){var B=D++,C=this.ac[B],A=this.info.rows[B].Aa;C.qd=A.va*a;C.rd=A.wa*a;C.sd=A.xa*a;C.td=A.Ba*b;C.ud=A.Ca*b;C.vd=A.Da*b;var S,I,J;S=e*A.aa+c*A.ba+d*A.ca;I=f*A.aa+h*A.ba+l*A.ca;J=g*A.aa+k*A.ba+m*A.ca;C.kd=S;C.ld=I;C.md=J;var V,ta,Ja;V=n*A.ea+q*A.fa+p*A.ga;ta=r*A.ea+t*A.fa+u*A.ga;Ja=y*A.ea+E*A.fa+w*A.ga;C.nd=V;C.od=ta;C.pd=Ja;C.mass=C.qd*A.va+C.rd*A.wa+C.sd*A.xa+(C.td*A.Ba+C.ud*A.Ca+C.vd*A.Da)+(C.kd*A.aa+C.ld*A.ba+C.md*A.ca)+(C.nd*A.ea+C.od*A.fa+C.pd*A.ga);C.mass&&(C.mass=1/C.mass)}for(var da,Ma,Oa,Wa,Ia,Da,ma,Q,Xa,Ga,Ea,Ua,va=Ua=Ea=Ga=Xa=Q=ma=Da=Ia=Wa=Oa=Ma=da=0,oa=this.info.Ka;va<oa;){var Ya=va++,F=this.info.rows[Ya],Qa=this.ac[Ya],X=F.ta,M=F.Aa,N=0,N=N+(da*M.va+Ma*M.wa+Oa*M.xa),N=N-(Wa*M.Ba+Ia*M.Ca+Da*M.Da),N=N+(ma*M.aa+Q*M.ba+Xa*M.ca),N=N-(Ga*M.ea+Ea*M.fa+Ua*M.ga),ca=(F.Fa*G.positionNgsBaumgarte-N)*Qa.mass,Y=X.ub;X.ub+=ca;X.ub<F.Ia?X.ub=F.Ia:X.ub>F.Ha&&(X.ub=F.Ha);ca=X.ub-Y;da+=Qa.qd*ca;Ma+=Qa.rd*ca;Oa+=Qa.sd*ca;Wa+=Qa.td*-ca;Ia+=Qa.ud*-ca;Da+=Qa.vd*-ca;ma+=Qa.kd*ca;Q+=Qa.ld*ca;Xa+=Qa.md*ca;Ga+=Qa.nd*-ca;Ea+=Qa.od*-ca;Ua+=Qa.pd*-ca}var T=this.C;T.a.v+=da;T.a.A+=Ma;T.a.B+=Oa;var aa=this.D;aa.a.v+=Wa;aa.a.A+=Ia;aa.a.B+=Da;var z=this.C,fa=Math.sqrt(ma*ma+Q*Q+Xa*Xa),U=.5*fa,pa,sa;if(.5>U){var wa=U*U;pa=.5*(1-.16666666666666666*wa+wa*wa*.008333333333333333);sa=1-.5*wa+wa*wa*.041666666666666664}else pa=Math.sin(U)/fa,sa=Math.cos(U);var ra,ka;ra=ma*pa;ka=Q*pa;var Z,na;Z=Xa*pa;na=sa;var Aa,ya,K,Ba,ha=z.a.o,ba=z.a.m,Va=z.a.s,ga=ha+ba+Va,P;0<ga?(P=Math.sqrt(ga+1),Ba=.5*P,P=.5/P,Aa=(z.a.g-z.a.j)*P,ya=(z.a.h-z.a.l)*P,K=(z.a.i-z.a.f)*P):ha>ba?ha>Va?(P=Math.sqrt(ha-ba-Va+1),Aa=.5*P,P=.5/P,ya=(z.a.f+z.a.i)*P,K=(z.a.h+z.a.l)*P,Ba=(z.a.g-z.a.j)*P):(P=Math.sqrt(Va-ha-ba+1),K=.5*P,P=.5/P,Aa=(z.a.h+z.a.l)*P,ya=(z.a.j+z.a.g)*P,Ba=(z.a.i-z.a.f)*P):ba>Va?(P=Math.sqrt(ba-Va-ha+1),ya=.5*P,P=.5/P,Aa=(z.a.f+z.a.i)*P,K=(z.a.j+z.a.g)*P,Ba=(z.a.h-z.a.l)*P):(P=Math.sqrt(Va-ha-ba+1),K=.5*P,P=.5/P,Aa=(z.a.h+z.a.l)*P,ya=(z.a.j+z.a.g)*P,Ba=(z.a.i-z.a.f)*P);Aa=na*Aa+ra*Ba+ka*K-Z*ya;ya=na*ya-ra*K+ka*Ba+Z*Aa;K=na*K+ra*ya-ka*Aa+Z*Ba;Ba=na*Ba-ra*Aa-ka*ya-Z*K;var za=Aa*Aa+ya*ya+K*K+Ba*Ba;1E-32<za&&(za=1/Math.sqrt(za));Aa*=za;ya*=za;K*=za;Ba*=za;var ab=Aa,ja=ya,cb=K,hb=Ba,gb=2*ab,pb=2*ja,ua=2*cb,xa=ab*gb,Fa=ja*pb,fb=cb*ua,Ha=ab*pb,qb=ja*ua,Na=ab*ua,la=hb*gb,Ca=hb*pb,Za=hb*ua;z.a.o=1-Fa-fb;z.a.f=Ha-Za;z.a.h=Na+Ca;z.a.i=Ha+Za;z.a.m=1-xa-fb;z.a.j=qb-la;z.a.l=Na-Ca;z.a.g=qb+la;z.a.s=1-xa-Fa;var Ra,ib,tb,db,wb,kb,nb,Cb,Jb;Ra=z.a.o*z.Ra+z.a.f*z.Ua+z.a.h*z.Xa;ib=z.a.o*z.Sa+z.a.f*z.Va+z.a.h*z.Ya;tb=z.a.o*z.Ta+z.a.f*z.Wa+z.a.h*z.Za;db=z.a.i*z.Ra+z.a.m*z.Ua+z.a.j*z.Xa;wb=z.a.i*z.Sa+z.a.m*z.Va+z.a.j*z.Ya;kb=z.a.i*z.Ta+z.a.m*z.Wa+z.a.j*z.Za;nb=z.a.l*z.Ra+z.a.g*z.Ua+z.a.s*z.Xa;Cb=z.a.l*z.Sa+z.a.g*z.Va+z.a.s*z.Ya;Jb=z.a.l*z.Ta+z.a.g*z.Wa+z.a.s*z.Za;z.P=Ra;z.R=ib;z.S=tb;z.T=db;z.U=wb;z.V=kb;z.W=nb;z.X=Cb;z.Y=Jb;var $a,Ka,vb,H,eb,lb,yb,mb,ub;$a=z.P*z.a.o+z.R*z.a.f+z.S*z.a.h;Ka=z.P*z.a.i+z.R*z.a.m+z.S*z.a.j;vb=z.P*z.a.l+z.R*z.a.g+z.S*z.a.s;H=z.T*z.a.o+z.U*z.a.f+z.V*z.a.h;eb=z.T*z.a.i+z.U*z.a.m+z.V*z.a.j;lb=z.T*z.a.l+z.U*z.a.g+z.V*z.a.s;yb=z.W*z.a.o+z.X*z.a.f+z.Y*z.a.h;mb=z.W*z.a.i+z.X*z.a.m+z.Y*z.a.j;ub=z.W*z.a.l+z.X*z.a.g+z.Y*z.a.s;z.P=$a;z.R=Ka;z.S=vb;z.T=H;z.U=eb;z.V=lb;z.W=yb;z.X=mb;z.Y=ub;z.P*=z.N.x;z.R*=z.N.x;z.S*=z.N.x;z.T*=z.N.y;z.U*=z.N.y;z.V*=z.N.y;z.W*=z.N.z;z.X*=z.N.z;z.Y*=z.N.z;var x=this.D,W=Math.sqrt(Ga*Ga+Ea*Ea+Ua*Ua),ea=.5*W,Hb,Kb;if(.5>ea){var Pa=ea*ea;Hb=.5*(1-.16666666666666666*Pa+Pa*Pa*.008333333333333333);Kb=1-.5*Pa+Pa*Pa*.041666666666666664}else Hb=Math.sin(ea)/W,Kb=Math.cos(ea);var rb,ob;rb=Ga*Hb;ob=Ea*Hb;var zb,Ab;zb=Ua*Hb;Ab=Kb;var ia,Ta,bb,jb,Bb=x.a.o,La=x.a.m,Eb=x.a.s,Rb=Bb+La+Eb,qa;0<Rb?(qa=Math.sqrt(Rb+1),jb=.5*qa,qa=.5/qa,ia=(x.a.g-x.a.j)*qa,Ta=(x.a.h-x.a.l)*qa,bb=(x.a.i-x.a.f)*qa):Bb>La?Bb>Eb?(qa=Math.sqrt(Bb-La-Eb+1),ia=.5*qa,qa=.5/qa,Ta=(x.a.f+x.a.i)*qa,bb=(x.a.h+x.a.l)*qa,jb=(x.a.g-x.a.j)*qa):(qa=Math.sqrt(Eb-Bb-La+1),bb=.5*qa,qa=.5/qa,ia=(x.a.h+x.a.l)*qa,Ta=(x.a.j+x.a.g)*qa,jb=(x.a.i-x.a.f)*qa):La>Eb?(qa=Math.sqrt(La-Eb-Bb+1),Ta=.5*qa,qa=.5/qa,ia=(x.a.f+x.a.i)*qa,bb=(x.a.j+x.a.g)*qa,jb=(x.a.h-x.a.l)*qa):(qa=Math.sqrt(Eb-Bb-La+1),bb=.5*qa,qa=.5/qa,ia=(x.a.h+x.a.l)*qa,Ta=(x.a.j+x.a.g)*qa,jb=(x.a.i-x.a.f)*qa);ia=Ab*ia+rb*jb+ob*bb-zb*Ta;Ta=Ab*Ta-rb*bb+ob*jb+zb*ia;bb=Ab*bb+rb*Ta-ob*ia+zb*jb;jb=Ab*jb-rb*ia-ob*Ta-zb*bb;var Ob=ia*ia+Ta*Ta+bb*bb+jb*jb;1E-32<Ob&&(Ob=1/Math.sqrt(Ob));ia*=Ob;Ta*=Ob;bb*=Ob;jb*=Ob;var Mb=ia,Sb=Ta,Wb=bb,Xb=jb,ac=2*Mb,Zb=2*Sb,$b=2*Wb,ec=Mb*ac,hc=Sb*Zb,ic=Wb*$b,Ub=Mb*Zb,gc=Sb*$b,fc=Mb*$b,Pb=Xb*ac,cc=Xb*Zb,Fb=Xb*$b;x.a.o=1-hc-ic;x.a.f=Ub-Fb;x.a.h=fc+cc;x.a.i=Ub+Fb;x.a.m=1-ec-ic;x.a.j=gc-Pb;x.a.l=fc-cc;x.a.g=gc+Pb;x.a.s=1-ec-hc;var lc,bc,Qb,dc,Vb,Nb,Tb,sb,kc;lc=x.a.o*x.Ra+x.a.f*x.Ua+x.a.h*x.Xa;bc=x.a.o*x.Sa+x.a.f*x.Va+x.a.h*x.Ya;Qb=x.a.o*x.Ta+x.a.f*x.Wa+x.a.h*x.Za;dc=x.a.i*x.Ra+x.a.m*x.Ua+x.a.j*x.Xa;Vb=x.a.i*x.Sa+x.a.m*x.Va+x.a.j*x.Ya;Nb=x.a.i*x.Ta+x.a.m*x.Wa+x.a.j*x.Za;Tb=x.a.l*x.Ra+x.a.g*x.Ua+x.a.s*x.Xa;sb=x.a.l*x.Sa+x.a.g*x.Va+x.a.s*x.Ya;kc=x.a.l*x.Ta+x.a.g*x.Wa+x.a.s*x.Za;x.P=lc;x.R=bc;x.S=Qb;x.T=dc;x.U=Vb;x.V=Nb;x.W=Tb;x.X=sb;x.Y=kc;var qc,mc,nc,jc,oc,pc,rc,vc,tc;qc=x.P*x.a.o+x.R*x.a.f+x.S*x.a.h;mc=x.P*x.a.i+x.R*x.a.m+x.S*x.a.j;nc=x.P*x.a.l+x.R*x.a.g+x.S*x.a.s;jc=x.T*x.a.o+x.U*x.a.f+x.V*x.a.h;oc=x.T*x.a.i+x.U*x.a.m+x.V*x.a.j;pc=x.T*x.a.l+x.U*x.a.g+x.V*x.a.s;rc=x.W*x.a.o+x.X*x.a.f+x.Y*x.a.h;vc=x.W*x.a.i+x.X*x.a.m+x.Y*x.a.j;tc=x.W*x.a.l+x.X*x.a.g+x.Y*x.a.s;x.P=qc;x.R=mc;x.S=nc;x.T=jc;x.U=oc;x.V=pc;x.W=rc;x.X=vc;x.Y=tc;x.P*=x.N.x;x.R*=x.N.x;x.S*=x.N.x;x.T*=x.N.y;x.U*=x.N.y;x.V*=x.N.y;x.W*=x.N.z;x.X*=x.N.z;x.Y*=x.N.z},postSolve:function(){this.$.hd();this.$.Rl()}});u.prototype={Wl:function(a){switch(this.Lb){case 1:this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=this.mb=this.lb=this.kb=this.ib=this.hb=this.gb=0;break;case 0:case 2:var b,e,c,d,f;b=this.gb*a;e=this.hb*a;c=this.ib*a;d=this.kb*a;f=this.lb*a;a=this.mb*a;var h=b*b+e*e+c*c,l=d*d+f*f+a*a;if(h||l){h>G.maxTranslationPerStep*G.maxTranslationPerStep&&(h=G.maxTranslationPerStep/Math.sqrt(h),this.gb*=h,this.hb*=h,this.ib*=h,b*=h,e*=h,c*=h);l>G.maxRotationPerStep*G.maxRotationPerStep&&(l=G.maxRotationPerStep/Math.sqrt(l),this.kb*=l,this.lb*=l,this.mb*=l,d*=l,f*=l,a*=l);this.a.v+=b;this.a.A+=e;this.a.B+=c;b=Math.sqrt(d*d+f*f+a*a);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));d*=b;f*=b;a*=b;b=e;e=this.a.o;c=this.a.m;var l=this.a.s,h=e+c+l,g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,c=(this.a.i-this.a.f)*g):e>c?e>l?(g=Math.sqrt(e-c-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,c=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-c+1),c=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):c>l?(g=Math.sqrt(c-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,c=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-c+1),c=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+d*e+f*c-a*l;l=b*l-d*c+f*e+a*h;c=b*c+d*l-f*h+a*e;e=b*e-d*h-f*l-a*c;a=h*h+l*l+c*c+e*e;1E-32<a&&(a=1/Math.sqrt(a));f=h*a;h=l*a;c*=a;b=e*a;var k=2*f;g=2*h;e=2*c;a=f*k;d=h*g;c*=e;l=f*g;h*=e;f*=e;k*=b;g*=b;b*=e;this.a.o=1-d-c;this.a.f=l-b;this.a.h=f+g;this.a.i=l+b;this.a.m=1-a-c;this.a.j=h-k;this.a.l=f-g;this.a.g=h+k;this.a.s=1-a-d;f=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=f;this.R=a;this.S=d;this.T=b;this.U=e;this.V=c;this.W=l;this.X=h;this.Y=g;f=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;d=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;c=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=f;this.R=a;this.S=d;this.T=b;this.U=e;this.V=c;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}}},dn:function(){var a=this.Uc*this.Uc+this.Vc*this.Vc+this.Wc*this.Wc;if(this.Yc*this.Yc+this.Zc*this.Zc+this.$c*this.$c||a)switch(this.Lb){case 1:this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=0;break;case 0:case 2:var b,e,c,d,f;b=this.Yc;e=this.Zc;c=this.$c;a=this.Uc;d=this.Vc;f=this.Wc;this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=0;this.a.v+=b;this.a.A+=e;this.a.B+=c;b=Math.sqrt(a*a+d*d+f*f);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));a*=b;d*=b;f*=b;b=e;var h,l;e=this.a.o;c=this.a.m;l=this.a.s;h=e+c+l;var g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,c=(this.a.i-this.a.f)*g):e>c?e>l?(g=Math.sqrt(e-c-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,c=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-c+1),c=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):c>l?(g=Math.sqrt(c-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,c=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-c+1),c=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+a*e+d*c-f*l;l=b*l-a*c+d*e+f*h;c=b*c+a*l-d*h+f*e;e=b*e-a*h-d*l-f*c;d=h*h+l*l+c*c+e*e;1E-32<d&&(d=1/Math.sqrt(d));a=h*d;h=l*d;c*=d;b=e*d;var k=2*a;g=2*h;e=2*c;d=a*k;f=h*g;c*=e;l=a*g;h*=e;a*=e;k*=b;g*=b;b*=e;this.a.o=1-f-c;this.a.f=l-b;this.a.h=a+g;this.a.i=l+b;this.a.m=1-d-c;this.a.j=h-k;this.a.l=a-g;this.a.g=h+k;this.a.s=1-d-f;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;d=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=d;this.S=f;this.T=b;this.U=e;this.V=c;this.W=l;this.X=h;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;d=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;c=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=d;this.S=f;this.T=b;this.U=e;this.V=c;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}},Oj:function(){for(var a,b,e,c,d,f,h,l,g,k=g=l=h=f=d=c=e=b=a=0,m=this.Dc;null!=m;){var n=m.M,q=m.Kb;q.Oe();var p=m.Dk*q.yf,r,t,u,y,E,w,D,G;r=m.ha.o*q.mg+m.ha.f*q.pg+m.ha.h*q.sg;t=m.ha.o*q.ng+m.ha.f*q.qg+m.ha.h*q.tg;u=m.ha.o*q.og+m.ha.f*q.rg+m.ha.h*q.ug;y=m.ha.i*q.mg+m.ha.m*q.pg+m.ha.j*q.sg;E=m.ha.i*q.ng+m.ha.m*q.qg+m.ha.j*q.tg;w=m.ha.i*q.og+m.ha.m*q.rg+m.ha.j*q.ug;D=m.ha.l*q.mg+m.ha.g*q.pg+m.ha.s*q.sg;G=m.ha.l*q.ng+m.ha.g*q.qg+m.ha.s*q.tg;var q=m.ha.l*q.og+m.ha.g*q.rg+m.ha.s*q.ug,B,C,A,O,I,J;B=r*m.ha.o+t*m.ha.f+u*m.ha.h;C=r*m.ha.i+t*m.ha.m+u*m.ha.j;u=r*m.ha.l+t*m.ha.g+u*m.ha.s;A=y*m.ha.o+E*m.ha.f+w*m.ha.h;O=y*m.ha.i+E*m.ha.m+w*m.ha.j;w=y*m.ha.l+E*m.ha.g+w*m.ha.s;I=D*m.ha.o+G*m.ha.f+q*m.ha.h;J=D*m.ha.i+G*m.ha.m+q*m.ha.j;q=D*m.ha.l+G*m.ha.g+q*m.ha.s;r=B;t=C;y=A;E=O;D=I;G=J;r*=p;t*=p;u*=p;y*=p;E*=p;w*=p;D*=p;G*=p;var q=q*p,S,V,ta;A=m.ha.v*m.ha.v;O=m.ha.A*m.ha.A;S=m.ha.B*m.ha.B;I=-m.ha.v*m.ha.A;J=-m.ha.A*m.ha.B;ta=-m.ha.B*m.ha.v;m=O+S;B=I;C=ta;S=A+S;V=J;A+=O;r+=m*p;t+=B*p;u+=C*p;y+=I*p;E+=S*p;w+=V*p;D+=ta*p;G+=J*p;q+=A*p;k+=p;a+=r;b+=t;e+=u;c+=y;d+=E;f+=w;h+=D;l+=G;g+=q;m=n}this.Pc=k;this.Ad=a;this.Bd=b;this.Cd=e;this.Dd=c;this.Ed=d;this.Fd=f;this.Gd=h;this.Hd=l;this.Id=g;a=this.Ad*(this.Ed*this.Id-this.Fd*this.Hd)-this.Bd*(this.Dd*this.Id-this.Fd*this.Gd)+this.Cd*(this.Dd*this.Hd-this.Ed*this.Gd);if(0<this.Pc&&0<a&&0==this.Lb){this.$a=1/this.Pc;a=this.Ed*this.Id-this.Fd*this.Hd;b=this.Dd*this.Id-this.Fd*this.Gd;e=this.Dd*this.Hd-this.Ed*this.Gd;c=this.Bd*this.Id-this.Cd*this.Hd;d=this.Ad*this.Id-this.Cd*this.Gd;f=this.Ad*this.Hd-this.Bd*this.Gd;h=this.Bd*this.Fd-this.Cd*this.Ed;l=this.Ad*this.Fd-this.Cd*this.Dd;g=this.Ad*this.Ed-this.Bd*this.Dd;k=this.Ad*a-this.Bd*b+this.Cd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Ra=a*k;this.Sa=-c*k;this.Ta=h*k;this.Ua=-b*k;this.Va=d*k;this.Wa=-l*k;this.Xa=e*k;this.Ya=-f*k;this.Za=g*k;this.pi=this.Ra;this.ri=this.Sa;this.si=this.Ta;this.ti=this.Ua;this.ui=this.Va;this.vi=this.Wa;this.wi=this.Xa;this.xi=this.Ya;this.yi=this.Za;this.Ra=this.pi*this.N.x;this.Sa=this.ri*this.N.x;this.Ta=this.si*this.N.x;this.Ua=this.ti*this.N.y;this.Va=this.ui*this.N.y;this.Wa=this.vi*this.N.y;this.Xa=this.wi*this.N.z;this.Ya=this.xi*this.N.z;this.Za=this.yi*this.N.z}else this.yi=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=this.ri=this.pi=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0,0==this.Lb&&(this.Lb=1);a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},qm:function(){var a=new t;a.x=this.a.v;a.y=this.a.A;a.z=this.a.B;return a},rm:function(a){a.x=this.a.v;a.y=this.a.A;a.z=this.a.B},Xn:function(a){this.a.v=a.x;this.a.A=a.y;this.a.B=a.z;a=this.pa;var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Dc;null!=a;){var b=a.M,e=a.pa,c=a.ha,d=this.pa,f,h,l,g,k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=d,f.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}this.Gb=!1;this.yb=0},jo:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.a.v+=b;this.a.A+=e;this.a.B+=a;b=this.pa;e=this.a;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;for(b=this.Dc;null!=b;){e=b.M;a=b.pa;var c=b.ha,d=this.pa,f,h,l,g,k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;a.v=f;a.A=h;a.B=c;a.v+=d.v;a.A+=d.A;a.B+=d.B;a=b.a;c=b.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;a.v=f;a.A=h;a.B=c;a.v+=d.v;a.A+=d.A;a.B+=d.B;b.Kb.Nb(b.u,b.pa);a=b.u.ma;d=b.u.na;c=b.u.oa;f=b.u.ja;h=b.u.ka;l=b.u.la;b.Kb.Nb(b.u,b.a);b.u.ma=a<b.u.ma?a:b.u.ma;b.u.na=d<b.u.na?d:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.ja=f>b.u.ja?f:b.u.ja;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;null!=b.tb&&(a=b.a.v-b.pa.v,d=b.a.A-b.pa.A,c=b.a.B-b.pa.B,f=b.rc,f.x=a,f.y=d,f.z=c,b.Yb.oc.jc.wd(b.tb,b.u,b.rc));b=e}this.Gb=!1;this.yb=0},vm:function(){var a=new E;a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s;return a},wm:function(a){a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s},$n:function(a){this.a.o=a.e00;this.a.f=a.e01;this.a.h=a.e02;this.a.i=a.e10;this.a.m=a.e11;this.a.j=a.e12;this.a.l=a.e20;this.a.g=a.e21;this.a.s=a.e22;var b,e,c,d,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Dc;null!=a;){b=a.M;e=a.pa;d=a.ha;c=this.pa;var k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=c,f.z=d,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}this.Gb=!1;this.yb=0},fo:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;a=Math.sin(b);var d=Math.sin(e),f=Math.sin(c);b=Math.cos(b);e=Math.cos(e);c=Math.cos(c);this.a.o=e*c;this.a.f=-e*f;this.a.h=d;this.a.i=b*f+c*a*d;this.a.m=b*c-a*d*f;this.a.j=-e*a;this.a.l=a*f-b*c*d;this.a.g=c*a+b*d*f;this.a.s=b*e;var h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;d=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;b=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=d;this.S=f;this.T=e;this.U=c;this.V=b;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;d=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;e=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;b=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=d;this.S=f;this.T=e;this.U=c;this.V=b;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;d=this.a;a.v=d.v;a.A=d.A;a.B=d.B;a.o=d.o;a.f=d.f;a.h=d.h;a.i=d.i;a.m=d.m;a.j=d.j;a.l=d.l;a.g=d.g;a.s=d.s;for(a=this.Dc;null!=a;){d=a.M;f=a.pa;c=a.ha;e=this.pa;var k,m,n,q,p;b=e.o*c.o+e.f*c.i+e.h*c.l;h=e.o*c.f+e.f*c.m+e.h*c.g;l=e.o*c.h+e.f*c.j+e.h*c.s;g=e.i*c.o+e.m*c.i+e.j*c.l;k=e.i*c.f+e.m*c.m+e.j*c.g;m=e.i*c.h+e.m*c.j+e.j*c.s;n=e.l*c.o+e.g*c.i+e.s*c.l;q=e.l*c.f+e.g*c.m+e.s*c.g;p=e.l*c.h+e.g*c.j+e.s*c.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*c.v+e.f*c.A+e.h*c.B;h=e.i*c.v+e.m*c.A+e.j*c.B;c=e.l*c.v+e.g*c.A+e.s*c.B;f.v=b;f.A=h;f.B=c;f.v+=e.v;f.A+=e.A;f.B+=e.B;f=a.a;c=a.ha;e=this.a;b=e.o*c.o+e.f*c.i+e.h*c.l;h=e.o*c.f+e.f*c.m+e.h*c.g;l=e.o*c.h+e.f*c.j+e.h*c.s;g=e.i*c.o+e.m*c.i+e.j*c.l;k=e.i*c.f+e.m*c.m+e.j*c.g;m=e.i*c.h+e.m*c.j+e.j*c.s;n=e.l*c.o+e.g*c.i+e.s*c.l;q=e.l*c.f+e.g*c.m+e.s*c.g;p=e.l*c.h+e.g*c.j+e.s*c.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*c.v+e.f*c.A+e.h*c.B;h=e.i*c.v+e.m*c.A+e.j*c.B;c=e.l*c.v+e.g*c.A+e.s*c.B;f.v=b;f.A=h;f.B=c;f.v+=e.v;f.A+=e.A;f.B+=e.B;a.Kb.Nb(a.u,a.pa);f=a.u.ma;e=a.u.na;c=a.u.oa;b=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=f<a.u.ma?f:a.u.ma;a.u.na=e<a.u.na?e:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=b>a.u.ja?b:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(f=a.a.v-a.pa.v,e=a.a.A-a.pa.A,c=a.a.B-a.pa.B,b=a.rc,b.x=f,b.y=e,b.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=d}this.Gb=!1;this.yb=0},Em:function(a){var b,e,c,d,f,h,l,g,k;b=a.e00;e=a.e01;c=a.e02;d=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.a.o+e*this.a.i+c*this.a.l;m=b*this.a.f+e*this.a.m+c*this.a.g;b=b*this.a.h+e*this.a.j+c*this.a.s;e=d*this.a.o+f*this.a.i+h*this.a.l;c=d*this.a.f+f*this.a.m+h*this.a.g;d=d*this.a.h+f*this.a.j+h*this.a.s;f=l*this.a.o+g*this.a.i+k*this.a.l;h=l*this.a.f+g*this.a.m+k*this.a.g;l=l*this.a.h+g*this.a.j+k*this.a.s;this.a.o=a;this.a.f=m;this.a.h=b;this.a.i=e;this.a.m=c;this.a.j=d;this.a.l=f;this.a.g=h;this.a.s=l;l=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;g=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;m=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;k=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;b=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=d;this.W=f;this.X=h;this.Y=b;l=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;a=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;m=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;k=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;d=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;f=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=d;this.W=f;this.X=h;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;l=this.pa;g=this.a;l.v=g.v;l.A=g.A;l.B=g.B;l.o=g.o;l.f=g.f;l.h=g.h;l.i=g.i;l.m=g.m;l.j=g.j;l.l=g.l;l.g=g.g;l.s=g.s;for(l=this.Dc;null!=l;){g=l.M;a=l.pa;k=l.ha;m=this.pa;var n,q,p;d=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;c=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=d;a.f=f;a.h=h;a.i=b;a.m=e;a.j=c;a.l=n;a.g=q;a.s=p;d=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=d;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;a=l.a;k=l.ha;m=this.a;d=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;c=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=d;a.f=f;a.h=h;a.i=b;a.m=e;a.j=c;a.l=n;a.g=q;a.s=p;d=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=d;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;l.Kb.Nb(l.u,l.pa);a=l.u.ma;m=l.u.na;k=l.u.oa;d=l.u.ja;f=l.u.ka;h=l.u.la;l.Kb.Nb(l.u,l.a);l.u.ma=a<l.u.ma?a:l.u.ma;l.u.na=m<l.u.na?m:l.u.na;l.u.oa=k<l.u.oa?k:l.u.oa;l.u.ja=d>l.u.ja?d:l.u.ja;l.u.ka=f>l.u.ka?f:l.u.ka;l.u.la=h>l.u.la?h:l.u.la;null!=l.tb&&(a=l.a.v-l.pa.v,m=l.a.A-l.pa.A,k=l.a.B-l.pa.B,d=l.rc,d.x=a,d.y=m,d.z=k,l.Yb.oc.jc.wd(l.tb,l.u,l.rc));l=g}this.Gb=!1;this.yb=0},Sn:function(a){var b,e,c,d,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);c=l*n;d=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=c*this.a.o+d*this.a.i+g*this.a.l;m=c*this.a.f+d*this.a.m+g*this.a.g;g=c*this.a.h+d*this.a.j+g*this.a.s;c=a*this.a.o+b*this.a.i+f*this.a.l;d=a*this.a.f+b*this.a.m+f*this.a.g;a=a*this.a.h+b*this.a.j+f*this.a.s;b=e*this.a.o+h*this.a.i+l*this.a.l;f=e*this.a.f+h*this.a.m+l*this.a.g;e=e*this.a.h+h*this.a.j+l*this.a.s;this.a.o=k;this.a.f=m;this.a.h=g;this.a.i=c;this.a.m=d;this.a.j=a;this.a.l=b;this.a.g=f;this.a.s=e;e=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;f=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;h=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;g=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;k=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;m=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;e=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;b=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;f=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;h=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;g=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;k=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;m=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;l=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;e=this.pa;a=this.a;e.v=a.v;e.A=a.A;e.B=a.B;e.o=a.o;e.f=a.f;e.h=a.h;e.i=a.i;e.m=a.m;e.j=a.j;e.l=a.l;e.g=a.g;e.s=a.s;for(e=this.Dc;null!=e;){a=e.M;b=e.pa;h=e.ha;f=this.pa;var q,p,g=f.o*h.o+f.f*h.i+f.h*h.l,k=f.o*h.f+f.f*h.m+f.h*h.g,m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;c=f.i*h.f+f.m*h.m+f.j*h.g;d=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=c;b.j=d;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;b=e.a;h=e.ha;f=this.a;g=f.o*h.o+f.f*h.i+f.h*h.l;k=f.o*h.f+f.f*h.m+f.h*h.g;m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;c=f.i*h.f+f.m*h.m+f.j*h.g;d=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=c;b.j=d;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;e.Kb.Nb(e.u,e.pa);b=e.u.ma;f=e.u.na;h=e.u.oa;g=e.u.ja;k=e.u.ka;m=e.u.la;e.Kb.Nb(e.u,e.a);e.u.ma=b<e.u.ma?b:e.u.ma;e.u.na=f<e.u.na?f:e.u.na;e.u.oa=h<e.u.oa?h:e.u.oa;e.u.ja=g>e.u.ja?g:e.u.ja;e.u.ka=k>e.u.ka?k:e.u.ka;e.u.la=m>e.u.la?m:e.u.la;null!=e.tb&&(b=e.a.v-e.pa.v,f=e.a.A-e.pa.A,h=e.a.B-e.pa.B,g=e.rc,g.x=b,g.y=f,g.z=h,e.Yb.oc.jc.wd(e.tb,e.u,e.rc));e=a}this.Gb=!1;this.yb=0},jm:function(){var a=new ta,b,e,c,d;b=this.a.o;e=this.a.m;c=this.a.s;d=b+e+c;var f;0<d?(f=Math.sqrt(d+1),d=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,c=(this.a.i-this.a.f)*f):b>e?b>c?(f=Math.sqrt(b-e-c+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,c=(this.a.h+this.a.l)*f,d=(this.a.g-this.a.j)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,d=(this.a.i-this.a.f)*f):e>c?(f=Math.sqrt(e-c-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,c=(this.a.j+this.a.g)*f,d=(this.a.h-this.a.l)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,d=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=c;a.w=d;return a},lm:function(a){var b,e,c,d;b=this.a.o;e=this.a.m;c=this.a.s;d=b+e+c;var f;0<d?(f=Math.sqrt(d+1),d=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,c=(this.a.i-this.a.f)*f):b>e?b>c?(f=Math.sqrt(b-e-c+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,c=(this.a.h+this.a.l)*f,d=(this.a.g-this.a.j)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,d=(this.a.i-this.a.f)*f):e>c?(f=Math.sqrt(e-c-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,c=(this.a.j+this.a.g)*f,d=(this.a.h-this.a.l)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,d=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=c;a.w=d},Tn:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;var d=a.w,f=2*b,h=2*e,l=2*c;a=b*f;var g=e*h;c*=l;var k=b*h;e*=l;b*=l;f*=d;h*=d;d*=l;this.a.o=1-g-c;this.a.f=k-d;this.a.h=b+h;this.a.i=k+d;this.a.m=1-a-c;this.a.j=e-f;this.a.l=b-h;this.a.g=e+f;this.a.s=1-a-g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;g=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;l=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;k=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;e=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;b=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=g;this.S=d;this.T=l;this.U=c;this.V=k;this.W=h;this.X=e;this.Y=b;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;d=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;l=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;k=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;e=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=g;this.S=d;this.T=l;this.U=c;this.V=k;this.W=h;this.X=e;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;g=this.a;a.v=g.v;a.A=g.A;a.B=g.B;a.o=g.o;a.f=g.f;a.h=g.h;a.i=g.i;a.m=g.m;a.j=g.j;a.l=g.l;a.g=g.g;a.s=g.s;for(a=this.Dc;null!=a;){g=a.M;d=a.pa;c=a.ha;var l=this.pa,m,n,q,p,k=l.o*c.o+l.f*c.i+l.h*c.l,h=l.o*c.f+l.f*c.m+l.h*c.g;e=l.o*c.h+l.f*c.j+l.h*c.s;b=l.i*c.o+l.m*c.i+l.j*c.l;f=l.i*c.f+l.m*c.m+l.j*c.g;m=l.i*c.h+l.m*c.j+l.j*c.s;n=l.l*c.o+l.g*c.i+l.s*c.l;q=l.l*c.f+l.g*c.m+l.s*c.g;p=l.l*c.h+l.g*c.j+l.s*c.s;d.o=k;d.f=h;d.h=e;d.i=b;d.m=f;d.j=m;d.l=n;d.g=q;d.s=p;k=l.o*c.v+l.f*c.A+l.h*c.B;h=l.i*c.v+l.m*c.A+l.j*c.B;c=l.l*c.v+l.g*c.A+l.s*c.B;d.v=k;d.A=h;d.B=c;d.v+=l.v;d.A+=l.A;d.B+=l.B;d=a.a;c=a.ha;l=this.a;k=l.o*c.o+l.f*c.i+l.h*c.l;h=l.o*c.f+l.f*c.m+l.h*c.g;e=l.o*c.h+l.f*c.j+l.h*c.s;b=l.i*c.o+l.m*c.i+l.j*c.l;f=l.i*c.f+l.m*c.m+l.j*c.g;m=l.i*c.h+l.m*c.j+l.j*c.s;n=l.l*c.o+l.g*c.i+l.s*c.l;q=l.l*c.f+l.g*c.m+l.s*c.g;p=l.l*c.h+l.g*c.j+l.s*c.s;d.o=k;d.f=h;d.h=e;d.i=b;d.m=f;d.j=m;d.l=n;d.g=q;d.s=p;k=l.o*c.v+l.f*c.A+l.h*c.B;h=l.i*c.v+l.m*c.A+l.j*c.B;c=l.l*c.v+l.g*c.A+l.s*c.B;d.v=k;d.A=h;d.B=c;d.v+=l.v;d.A+=l.A;d.B+=l.B;a.Kb.Nb(a.u,a.pa);d=a.u.ma;l=a.u.na;c=a.u.oa;k=a.u.ja;h=a.u.ka;e=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=d<a.u.ma?d:a.u.ma;a.u.na=l<a.u.na?l:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=k>a.u.ja?k:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=e>a.u.la?e:a.u.la;null!=a.tb&&(d=a.a.v-a.pa.v,l=a.a.A-a.pa.A,c=a.a.B-a.pa.B,k=a.rc,k.x=d,k.y=l,k.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=g}this.Gb=!1;this.yb=0},xm:function(){var a=this.a,b=new Ja;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Cm:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},ho:function(a){this.a.v=a.v;this.a.A=a.A;this.a.B=a.B;this.a.o=a.o;this.a.f=a.f;this.a.h=a.h;this.a.i=a.i;this.a.m=a.m;this.a.j=a.j;this.a.l=a.l;this.a.g=a.g;this.a.s=a.s;var b,e,c,d,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Dc;null!=a;){b=a.M;e=a.pa;d=a.ha;c=this.pa;var k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=c,f.z=d,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}this.Gb=!1;this.yb=0},Tg:function(){return this.Pc},se:function(){var a=new E;a.e00=this.Ad;a.e01=this.Bd;a.e02=this.Cd;a.e10=this.Dd;a.e11=this.Ed;a.e12=this.Fd;a.e20=this.Gd;a.e21=this.Hd;a.e22=this.Id;return a},te:function(a){a.e00=this.Ad;a.e01=this.Bd;a.e02=this.Cd;a.e10=this.Dd;a.e11=this.Ed;a.e12=this.Fd;a.e20=this.Gd;a.e21=this.Hd;a.e22=this.Id},Ug:function(){var a=new ql;a.mass=this.Pc;var b=a.localInertia;b.e00=this.Ad;b.e01=this.Bd;b.e02=this.Cd;b.e10=this.Dd;b.e11=this.Ed;b.e12=this.Fd;b.e20=this.Gd;b.e21=this.Hd;b.e22=this.Id;return a},Vg:function(a){a.mass=this.Pc;a=a.localInertia;a.e00=this.Ad;a.e01=this.Bd;a.e02=this.Cd;a.e10=this.Dd;a.e11=this.Ed;a.e12=this.Fd;a.e20=this.Gd;a.e21=this.Hd;a.e22=this.Id},Qm:function(a){this.Pc=a.mass;a=a.localInertia;this.Ad=a.e00;this.Bd=a.e01;this.Cd=a.e02;this.Dd=a.e10;this.Ed=a.e11;this.Fd=a.e12;this.Gd=a.e20;this.Hd=a.e21;this.Id=a.e22;a=this.Ad*(this.Ed*this.Id-this.Fd*this.Hd)-this.Bd*(this.Dd*this.Id-this.Fd*this.Gd)+this.Cd*(this.Dd*this.Hd-this.Ed*this.Gd);if(0<this.Pc&&0<a&&0==this.Lb){this.$a=1/this.Pc;a=this.Ed*this.Id-this.Fd*this.Hd;var b=this.Dd*this.Id-this.Fd*this.Gd,e=this.Dd*this.Hd-this.Ed*this.Gd,c=this.Bd*this.Id-this.Cd*this.Hd,d=this.Ad*this.Id-this.Cd*this.Gd,f=this.Ad*this.Hd-this.Bd*this.Gd,h=this.Bd*this.Fd-this.Cd*this.Ed,l=this.Ad*this.Fd-this.Cd*this.Dd,g=this.Ad*this.Ed-this.Bd*this.Dd,k=this.Ad*a-this.Bd*b+this.Cd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Ra=a*k;this.Sa=-c*k;this.Ta=h*k;this.Ua=-b*k;this.Va=d*k;this.Wa=-l*k;this.Xa=e*k;this.Ya=-f*k;this.Za=g*k;this.pi=this.Ra;this.ri=this.Sa;this.si=this.Ta;this.ti=this.Ua;this.ui=this.Va;this.vi=this.Wa;this.wi=this.Xa;this.xi=this.Ya;this.yi=this.Za;this.Ra=this.pi*this.N.x;this.Sa=this.ri*this.N.x;this.Ta=this.si*this.N.x;this.Ua=this.ti*this.N.y;this.Va=this.ui*this.N.y;this.Wa=this.vi*this.N.y;this.Xa=this.wi*this.N.z;this.Ya=this.xi*this.N.z;this.Za=this.yi*this.N.z}else this.yi=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=this.ri=this.pi=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0,0==this.Lb&&(this.Lb=1);a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},ji:function(){var a=this.N;return new t(a.x,a.y,a.z)},Rm:function(a){var b=this.N;b.x=a.x;b.y=a.y;b.z=a.z;var e,c,d,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},qe:function(){var a=new t;a.x=this.gb;a.y=this.hb;a.z=this.ib;return a},re:function(a){a.x=this.gb;a.y=this.hb;a.z=this.ib},Pm:function(a){1==this.Lb?this.ib=this.hb=this.gb=0:(this.gb=a.x,this.hb=a.y,this.ib=a.z);this.Gb=!1;this.yb=0},Jc:function(){var a=new t;a.x=this.kb;a.y=this.lb;a.z=this.mb;return a},Kc:function(a){a.x=this.gb;a.y=this.hb;a.z=this.ib},mo:function(a){1==this.Lb?this.mb=this.lb=this.kb=0:(this.kb=a.x,this.lb=a.y,this.mb=a.z);this.Gb=!1;this.yb=0},cb:function(a){if(1!=this.Lb){var b,e;b=a.x;e=a.y;a=a.z;this.gb+=b;this.hb+=e;this.ib+=a}this.Gb=!1;this.yb=0},ua:function(a){if(1!=this.Lb){var b,e;b=a.x;e=a.y;a=a.z;this.kb+=b;this.lb+=e;this.mb+=a}this.Gb=!1;this.yb=0},uc:function(a,b){var e,c;e=a.x;c=a.y;a=a.z;this.gb+=e*this.$a;this.hb+=c*this.$a;this.ib+=a*this.$a;var d,f,h;d=b.x;f=b.y;h=b.z;d-=this.a.v;f-=this.a.A;h-=this.a.B;b=f*a-h*c;a=h*e-d*a;d=d*c-f*e;e=this.P*b+this.R*a+this.S*d;c=this.T*b+this.U*a+this.V*d;b=this.W*b+this.X*a+this.Y*d;this.kb+=e;this.lb+=c;this.mb+=b;this.Gb=!1;this.yb=0},vc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.gb+=b*this.$a;this.hb+=e*this.$a;this.ib+=a*this.$a;this.Gb=!1;this.yb=0},Mb:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;var d;a=this.P*b+this.R*e+this.S*c;d=this.T*b+this.U*e+this.V*c;b=this.W*b+this.X*e+this.Y*c;this.kb+=a;this.lb+=d;this.mb+=b;this.Gb=!1;this.yb=0},pc:function(a,b){var e,c;e=a.x;c=a.y;a=a.z;this.Mh+=e;this.Nh+=c;this.Oh+=a;var d,f;d=b.x;f=b.y;b=b.z;d-=this.a.v;f-=this.a.A;b-=this.a.B;this.vf+=f*a-b*c;this.wf+=b*e-d*a;this.xf+=d*c-f*e;this.Gb=!1;this.yb=0},qc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.Mh+=b;this.Nh+=e;this.Oh+=a;this.Gb=!1;this.yb=0},Ac:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.vf+=b;this.wf+=e;this.xf+=a;this.Gb=!1;this.yb=0},fd:function(){return this.eh},Nm:function(a){this.eh=a;this.Gb=!1;this.yb=0},ue:function(a){var b,e;b=a.x;e=a.y;a=a.z;b-=this.a.v;e-=this.a.A;a-=this.a.B;var c,d;c=this.a.o*b+this.a.i*e+this.a.l*a;d=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=c;e=d;c=new t;c.x=b;c.y=e;c.z=a;return c},Ue:function(a,b){var e,c,d;e=a.x;c=a.y;d=a.z;e-=this.a.v;c-=this.a.A;d-=this.a.B;var f;a=this.a.o*e+this.a.i*c+this.a.l*d;f=this.a.f*e+this.a.m*c+this.a.g*d;e=this.a.h*e+this.a.j*c+this.a.s*d;b.x=a;b.y=f;b.z=e},Ve:function(a){var b,e;b=a.x;e=a.y;a=a.z;var c,d;c=this.a.o*b+this.a.i*e+this.a.l*a;d=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=c;e=d;c=new t;c.x=b;c.y=e;c.z=a;return c},Mf:function(a,b){var e,c,d;e=a.x;c=a.y;d=a.z;var f;a=this.a.o*e+this.a.i*c+this.a.l*d;f=this.a.f*e+this.a.m*c+this.a.g*d;e=this.a.h*e+this.a.j*c+this.a.s*d;b.x=a;b.y=f;b.z=e},Pj:function(a){var b,e;b=a.x;e=a.y;a=a.z;var c,d;c=this.a.o*b+this.a.f*e+this.a.h*a;d=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=c+this.a.v;e=d+this.a.A;a+=this.a.B;c=new t;c.x=b;c.y=e;c.z=a;return c},Nl:function(a,b){var e,c,d;e=a.x;c=a.y;d=a.z;var f;a=this.a.o*e+this.a.f*c+this.a.h*d;f=this.a.i*e+this.a.m*c+this.a.j*d;d=this.a.l*e+this.a.g*c+this.a.s*d;e=a+this.a.v;c=f+this.a.A;d+=this.a.B;b.x=e;b.y=c;b.z=d},am:function(a){var b,e;b=a.x;e=a.y;a=a.z;var c,d;c=this.a.o*b+this.a.f*e+this.a.h*a;d=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=c;e=d;c=new t;c.x=b;c.y=e;c.z=a;return c},bm:function(a,b){var e,c,d;e=a.x;c=a.y;d=a.z;var f;a=this.a.o*e+this.a.f*c+this.a.h*d;f=this.a.i*e+this.a.m*c+this.a.j*d;e=this.a.l*e+this.a.g*c+this.a.s*d;b.x=a;b.y=f;b.z=e},im:function(){return this.zg},ki:function(){return this.Dc},Wg:function(){return this.Ae},Lc:function(){return this.Ob},Xg:function(){return this.kh},Yd:function(){return this.ze},Hb:function(a){null==this.Dc?this.Dc=a:(this.Fi.M=a,a.ia=this.Fi);this.Fi=a;this.zg++;a.Yb=this;if(null!=this.oc){var b=this.oc;a.tb=b.jc.Vh(a,a.u);a.Cc=b.Xl++;b.zg++}this.Oj();for(a=this.Dc;null!=a;){var b=a.M,e=a.pa,c=a.ha,d=this.pa,f,h,l,g,k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=d,f.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}},ko:function(a){var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Dc&&(this.Dc=this.Dc.M);a==this.Fi&&(this.Fi=this.Fi.ia);a.M=null;a.ia=null;this.zg--;a.Yb=null;if(null!=this.oc){b=this.oc;b.jc.Wh(a.tb);a.tb=null;a.Cc=-1;for(var c=a.Yb.Ob;null!=c;){var e=c.M,d=c.Zd;if(d.Zb==a||d.$b==a){c=c.Qc;c.Gb=!1;c.yb=0;var c=b.Kh,f=d.ia,h=d.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d==c.zd&&(c.zd=c.zd.M);d==c.ye&&(c.ye=c.ye.ia);d.M=null;d.ia=null;d.Td&&(f=d.Zb.yd,h=d.$b.yd,f==h&&(h=null),null!=f&&f.endContact(d),null!=h&&h.endContact(d));f=d.rb.ia;h=d.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d.rb==d.C.Ob&&(d.C.Ob=d.C.Ob.M);d.rb==d.C.kc&&(d.C.kc=d.C.kc.ia);d.rb.M=null;d.rb.ia=null;f=d.sb.ia;h=d.sb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d.sb==d.D.Ob&&(d.D.Ob=d.D.Ob.M);d.sb==d.D.kc&&(d.D.kc=d.D.kc.ia);d.sb.M=null;d.sb.ia=null;d.C.Ae--;d.D.Ae--;d.rb.Qc=null;d.sb.Qc=null;d.rb.Zd=null;d.sb.Zd=null;d.Zb=null;d.$b=null;d.C=null;d.D=null;d.Td=!1;d.$i.Xe();d.Ja.Xe();d.Lh=null;f=d.Ye;f.Zb=null;f.$b=null;f.C=null;f.D=null;f.pj=null;f.qj=null;d.M=c.lg;c.lg=d;c.Bi--}c=e}b.zg--}this.Oj();for(a=this.Dc;null!=a;){var b=a.M,e=a.pa,c=a.ha,d=this.pa,l,g,k,m,n,q,p,f=d.o*c.o+d.f*c.i+d.h*c.l,h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=d,f.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}},Dm:function(){return this.Lb},Sm:function(a){this.Lb=a;this.Oj()},Um:function(){this.Gb=!1;this.yb=0},Tm:function(){this.Gb=!0;this.yb=0},cm:function(){return this.Gb},li:function(){return this.yb},Mm:function(a){this.Bk=a;this.Gb=!1;this.yb=0},pe:function(){return this.$j},Om:function(a){this.$j=a},Ec:function(){return this.Qj},lo:function(a){this.Qj=a},um:function(){return this.ia},gm:function(){return this.M}};Wa.prototype={uc:function(){return this.Xj},ue:function(a){this.Xj=a},Jc:function(){return this.hk},Ve:function(a){this.hk=a},Ac:function(){var a=this.ha,b=new Ja;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Ec:function(a){var b=this.ha;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Yd:function(){var a=this.a,b=new Ja;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},pe:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Ue:function(a){var b=this.ha;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;if(null!=this.Yb)for(a=this.Yb,a.Oj(),b=a.Dc;null!=b;){var e=b.M,c=b.pa,d=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*d.o+f.f*d.i+f.h*d.l;l=f.o*d.f+f.f*d.m+f.h*d.g;g=f.o*d.h+f.f*d.j+f.h*d.s;k=f.i*d.o+f.m*d.i+f.j*d.l;m=f.i*d.f+f.m*d.m+f.j*d.g;n=f.i*d.h+f.m*d.j+f.j*d.s;q=f.l*d.o+f.g*d.i+f.s*d.l;p=f.l*d.f+f.g*d.m+f.s*d.g;r=f.l*d.h+f.g*d.j+f.s*d.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=f.o*d.v+f.f*d.A+f.h*d.B;l=f.i*d.v+f.m*d.A+f.j*d.B;d=f.l*d.v+f.g*d.A+f.s*d.B;c.v=h;c.A=l;c.B=d;c.v+=f.v;c.A+=f.A;c.B+=f.B;c=b.a;d=b.ha;f=a.a;h=f.o*d.o+f.f*d.i+f.h*d.l;l=f.o*d.f+f.f*d.m+f.h*d.g;g=f.o*d.h+f.f*d.j+f.h*d.s;k=f.i*d.o+f.m*d.i+f.j*d.l;m=f.i*d.f+f.m*d.m+f.j*d.g;n=f.i*d.h+f.m*d.j+f.j*d.s;q=f.l*d.o+f.g*d.i+f.s*d.l;p=f.l*d.f+f.g*d.m+f.s*d.g;r=f.l*d.h+f.g*d.j+f.s*d.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=f.o*d.v+f.f*d.A+f.h*d.B;l=f.i*d.v+f.m*d.A+f.j*d.B;d=f.l*d.v+f.g*d.A+f.s*d.B;c.v=h;c.A=l;c.B=d;c.v+=f.v;c.A+=f.A;c.B+=f.B;b.Kb.Nb(b.u,b.pa);c=b.u.ma;f=b.u.na;d=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Kb.Nb(b.u,b.a);b.u.ma=c<b.u.ma?c:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.tb&&(c=b.a.v-b.pa.v,f=b.a.A-b.pa.A,d=b.a.B-b.pa.B,h=b.rc,h.x=c,h.y=f,h.z=d,b.Yb.oc.jc.wd(b.tb,b.u,b.rc));b=e}},qc:function(){return this.Dk},te:function(a){this.Dk=a;if(null!=this.Yb){a=this.Yb;a.Oj();for(var b=a.Dc;null!=b;){var e=b.M,c=b.pa,d=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*d.o+f.f*d.i+f.h*d.l;l=f.o*d.f+f.f*d.m+f.h*d.g;g=f.o*d.h+f.f*d.j+f.h*d.s;k=f.i*d.o+f.m*d.i+f.j*d.l;m=f.i*d.f+f.m*d.m+f.j*d.g;n=f.i*d.h+f.m*d.j+f.j*d.s;q=f.l*d.o+f.g*d.i+f.s*d.l;p=f.l*d.f+f.g*d.m+f.s*d.g;r=f.l*d.h+f.g*d.j+f.s*d.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=f.o*d.v+f.f*d.A+f.h*d.B;l=f.i*d.v+f.m*d.A+f.j*d.B;d=f.l*d.v+f.g*d.A+f.s*d.B;c.v=h;c.A=l;c.B=d;c.v+=f.v;c.A+=f.A;c.B+=f.B;c=b.a;d=b.ha;f=a.a;h=f.o*d.o+f.f*d.i+f.h*d.l;l=f.o*d.f+f.f*d.m+f.h*d.g;g=f.o*d.h+f.f*d.j+f.h*d.s;k=f.i*d.o+f.m*d.i+f.j*d.l;m=f.i*d.f+f.m*d.m+f.j*d.g;n=f.i*d.h+f.m*d.j+f.j*d.s;q=f.l*d.o+f.g*d.i+f.s*d.l;p=f.l*d.f+f.g*d.m+f.s*d.g;r=f.l*d.h+f.g*d.j+f.s*d.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=f.o*d.v+f.f*d.A+f.h*d.B;l=f.i*d.v+f.m*d.A+f.j*d.B;d=f.l*d.v+f.g*d.A+f.s*d.B;c.v=h;c.A=l;c.B=d;c.v+=f.v;c.A+=f.A;c.B+=f.B;b.Kb.Nb(b.u,b.pa);c=b.u.ma;f=b.u.na;d=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Kb.Nb(b.u,b.a);b.u.ma=c<b.u.ma?c:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.tb&&(c=b.a.v-b.pa.v,f=b.a.A-b.pa.A,d=b.a.B-b.pa.B,h=b.rc,h.x=c,h.y=f,h.z=d,b.Yb.oc.jc.wd(b.tb,b.u,b.rc));b=e}}},ua:function(){return this.u.clone()},cb:function(a){a.de(this.u)},vc:function(){return this.Kb},Kc:function(){return this.Yb},Hb:function(){return this.Tj},qe:function(a){this.Tj=a},Mb:function(){return this.Uj},re:function(a){this.Uj=a},pc:function(){return this.yd},se:function(a){this.yd=a},fd:function(){return this.ia},Lc:function(){return this.M}};wh.Ve=1;wh.Mf=2;wh.BRUTE_FORCE=1;wh.BVH=2;Uc.vm=0;Uc.Ue=1;Uc.ji=2;Uc.Ug=3;Uc.Tg=4;Uc.Vg=5;Uc.Xg=0;Uc.Wg=5;Uc.SPHERE=0;Uc.BOX=1;Uc.CYLINDER=2;Uc.CONE=3;Uc.CAPSULE=4;Uc.CONVEX_HULL=5;ij.re=1;Ie.Mb=0;t.numCreations=0;G.defaultFriction=.2;G.defaultRestitution=.2;G.defaultDensity=1;G.defaultCollisionGroup=1;G.defaultCollisionMask=1;G.maxTranslationPerStep=20;G.maxRotationPerStep=3.14159265358979;G.bvhProxyPadding=.1;G.bvhIncrementalCollisionThreshold=.45;G.defaultGJKMargin=.05;G.enableGJKCaching=!0;G.maxEPAVertices=128;G.maxEPAPolyhedronFaces=128;G.contactEnableBounceThreshold=.5;G.velocityBaumgarte=.2;G.positionSplitImpulseBaumgarte=.4;G.positionNgsBaumgarte=1;G.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05;G.defaultContactPositionCorrectionAlgorithm=0;G.alternativeContactPositionCorrectionAlgorithm=1;G.contactPersistenceThreshold=.05;G.maxManifoldPoints=4;G.defaultJointConstraintSolverType=0;G.defaultJointPositionCorrectionAlgorithm=0;G.jointWarmStartingFactorForBaungarte=.8;G.jointWarmStartingFactor=.95;G.minSpringDamperDampingRatio=1E-6;G.minRagdollMaxSwingAngle=1E-6;G.maxJacobianRows=6;G.directMlcpSolverEps=1E-9;G.islandInitialRigidBodyArraySize=128;G.islandInitialConstraintArraySize=128;G.sleepingVelocityThreshold=.2;G.sleepingAngularVelocityThreshold=.5;G.sleepingTimeThreshold=1;G.disableSleeping=!1;G.linearSlop=.005;G.angularSlop=.017453292519943278;ec.cb=new ec;Gc.Dm=0;Gc.gm=1;Gc.cm=2;Gc.bm=257;Gc.am=258;Gc.Nl=259;Gc.SUCCEEDED=0;Gc.GJK_FAILED_TO_MAKE_TETRAHEDRON=1;Gc.GJK_DID_NOT_CONVERGE=2;Gc.EPA_FAILED_TO_INIT=257;Gc.EPA_FAILED_TO_ADD_VERTEX=258;Gc.EPA_DID_NOT_CONVERGE=259;E.numCreations=0;O.numCreations=0;Oa.POSITIVE_INFINITY=1/0;Oa.NEGATIVE_INFINITY=-1/0;Oa.PI=3.14159265358979;Oa.TWO_PI=6.28318530717958;Oa.HALF_PI=1.570796326794895;Oa.TO_RADIANS=.017453292519943278;Oa.TO_DEGREES=57.29577951308238;ta.numCreations=0;gf.se=8;gf.te=4;gf.qe=8;Ad.broadPhaseCollisionTime=0;Ad.narrowPhaseCollisionTime=0;Ad.dynamicsTime=0;Ad.totalTime=0;Hb.ue=0;Hb.xm=1;Hb.lm=2;Hb.BAUMGARTE=0;Hb.SPLIT_IMPULSE=1;Hb.NGS=2;be.pe=1;be.Yd=2;rc.wm=0;rc.um=1;rc.ki=2;rc.qm=3;rc.Em=4;rc.rm=5;rc.SPHERICAL=0;rc.REVOLUTE=1;rc.CYLINDRICAL=2;rc.PRISMATIC=3;rc.UNIVERSAL=4;rc.RAGDOLL=5;Fe.im=0;Fe.li=1;Fe.ITERATIVE=0;Fe.DIRECT=1;Rd.Pj=0;Rd.Cm=1;Rd.jm=2;Rd.DYNAMIC=0;Rd.STATIC=1;Rd.KINEMATIC=2;S.OIMO={};S.OIMO.DebugDraw=gf;S.OIMO.BroadPhase=wb;wb.prototype.createProxy=wb.prototype.Vh;wb.prototype.destroyProxy=wb.prototype.Wh;wb.prototype.moveProxy=wb.prototype.wd;wb.prototype.isOverlapping=wb.prototype.Mb;wb.prototype.collectPairs=wb.prototype.Ii;wb.prototype.getProxyPairList=wb.prototype.ua;wb.prototype.isIncremental=wb.prototype.Hb;wb.prototype.getTestCount=wb.prototype.cb;wb.prototype.rayCast=wb.prototype.Vd;wb.prototype.convexCast=wb.prototype.Bf;wb.prototype.aabbTest=wb.prototype.qh;S.OIMO.Geometry=fd;fd.prototype.getType=fd.prototype.cb;fd.prototype.getVolume=fd.prototype.ua;fd.prototype.rayCast=fd.prototype.Vd;S.OIMO.ConvexGeometry=tb;tb.prototype.getGjkMergin=tb.prototype.un;tb.prototype.setGjkMergin=tb.prototype.Zn;tb.prototype.computeLocalSupportingVertex=tb.prototype.Pd;tb.prototype.rayCast=tb.prototype.Vd;S.OIMO.BroadPhaseProxyCallback=Mc;Mc.prototype.process=Mc.prototype.process;S.OIMO.BroadPhaseType=wh;S.OIMO.Proxy=ad;ad.prototype.getId=ad.prototype.Hb;ad.prototype.getFatAabb=ad.prototype.ua;ad.prototype.getFatAabbTo=ad.prototype.cb;S.OIMO.ProxyPair=Be;Be.prototype.getProxy1=Be.prototype.ua;Be.prototype.getProxy2=Be.prototype.cb;Be.prototype.getNext=Be.prototype.Hb;S.OIMO.BruteForceBroadPhase=oc;oc.prototype.createProxy=oc.prototype.Vh;oc.prototype.destroyProxy=oc.prototype.Wh;oc.prototype.moveProxy=oc.prototype.wd;oc.prototype.collectPairs=oc.prototype.Ii;oc.prototype.rayCast=oc.prototype.Vd;oc.prototype.convexCast=oc.prototype.Bf;oc.prototype.aabbTest=oc.prototype.qh;S.OIMO.BvhBroadPhase=hc;hc.prototype.createProxy=hc.prototype.Vh;hc.prototype.destroyProxy=hc.prototype.Wh;hc.prototype.moveProxy=hc.prototype.wd;hc.prototype.collectPairs=hc.prototype.Ii;hc.prototype.rayCast=hc.prototype.Vd;hc.prototype.convexCast=hc.prototype.Bf;hc.prototype.aabbTest=hc.prototype.qh;hc.prototype.getTreeBalance=hc.prototype.Jn;S.OIMO.Aabb=Xa;Xa.prototype.init=Xa.prototype.za;Xa.prototype.getMin=Xa.prototype.Jc;Xa.prototype.getMinTo=Xa.prototype.Kc;Xa.prototype.setMin=Xa.prototype.Yd;Xa.prototype.getMax=Xa.prototype.Ac;Xa.prototype.getMaxTo=Xa.prototype.Ec;Xa.prototype.setMax=Xa.prototype.fd;Xa.prototype.getCenter=Xa.prototype.Hb;Xa.prototype.getCenterTo=Xa.prototype.Mb;Xa.prototype.getExtents=Xa.prototype.pc;Xa.prototype.getExtentsTo=Xa.prototype.qc;Xa.prototype.combine=Xa.prototype.ua;Xa.prototype.combined=Xa.prototype.cb;Xa.prototype.overlap=Xa.prototype.Lc;Xa.prototype.getIntersection=Xa.prototype.uc;Xa.prototype.getIntersectionTo=Xa.prototype.vc;Xa.prototype.copyFrom=Xa.prototype.de;Xa.prototype.clone=Xa.prototype.clone;S.OIMO.BoxGeometry=me;me.prototype.getHalfExtents=me.prototype.vn;me.prototype.getHalfExtentsTo=me.prototype.wn;me.prototype.computeLocalSupportingVertex=me.prototype.Pd;S.OIMO.CapsuleGeometry=ee;ee.prototype.getRadius=ee.prototype.Xh;ee.prototype.getHalfHeight=ee.prototype.Bj;ee.prototype.computeLocalSupportingVertex=ee.prototype.Pd;S.OIMO.ConeGeometry=Vd;Vd.prototype.getRadius=Vd.prototype.Xh;Vd.prototype.getHalfHeight=Vd.prototype.Bj;Vd.prototype.computeLocalSupportingVertex=Vd.prototype.Pd;S.OIMO.ConvexHullGeometry=le;le.prototype.getVertices=le.prototype.Nn;le.prototype.computeLocalSupportingVertex=le.prototype.Pd;S.OIMO.CylinderGeometry=Ud;Ud.prototype.getRadius=Ud.prototype.Xh;Ud.prototype.getHalfHeight=Ud.prototype.Bj;Ud.prototype.computeLocalSupportingVertex=Ud.prototype.Pd;S.OIMO.GeometryType=Uc;S.OIMO.RayCastHit=fj;S.OIMO.SphereGeometry=Td;Td.prototype.getRadius=Td.prototype.Xh;Td.prototype.computeLocalSupportingVertex=Td.prototype.Pd;S.OIMO.CollisionMatrix=dg;dg.prototype.getDetector=dg.prototype.ua;S.OIMO.DetectorResult=ce;ce.prototype.getMaxDepth=ce.prototype.mm;ce.prototype.clear=ce.prototype.clear;S.OIMO.DetectorResultPoint=ll;S.OIMO.Detector=Tc;Tc.prototype.detect=Tc.prototype.hm;S.OIMO.BoxBoxDetector=ij;S.OIMO.CapsuleCapsuleDetector=hj;S.OIMO.GjkEpaDetector=gj;S.OIMO.SphereBoxDetector=Sg;S.OIMO.SphereCapsuleDetector=Sf;S.OIMO.SphereSphereDetector=Fk;S.OIMO.Vec3=t;t.prototype.init=t.prototype.za;t.prototype.zero=t.prototype.Z;t.prototype.add=t.prototype.Lc;t.prototype.addScaled=t.prototype.ua;t.prototype.sub=t.prototype.ue;t.prototype.scale=t.prototype.se;t.prototype.scale3=t.prototype.Ve;t.prototype.dot=t.prototype.Yd;t.prototype.cross=t.prototype.Hb;t.prototype.addEq=t.prototype.fd;t.prototype.addScaledEq=t.prototype.cb;t.prototype.subEq=t.prototype.Ue;t.prototype.scaleEq=t.prototype.te;t.prototype.scale3Eq=t.prototype.Mf;t.prototype.crossEq=t.prototype.Mb;t.prototype.mulMat3=t.prototype.pc;t.prototype.mulMat4=t.prototype.uc;t.prototype.mulTransform=t.prototype.Ac;t.prototype.mulMat3Eq=t.prototype.qc;t.prototype.mulMat4Eq=t.prototype.vc;t.prototype.mulTransformEq=t.prototype.Ec;t.prototype.length=t.prototype.length;t.prototype.lengthSq=t.prototype.pe;t.prototype.normalized=t.prototype.re;t.prototype.normalize=t.prototype.qe;t.prototype.negate=t.prototype.Jc;t.prototype.negateEq=t.prototype.Kc;t.prototype.copyFrom=t.prototype.de;t.prototype.clone=t.prototype.clone;t.prototype.toString=t.prototype.toString;S.OIMO.Transform=Ja;Ja.prototype.identity=Ja.prototype.Wf;Ja.prototype.getPosition=Ja.prototype.Hb;Ja.prototype.getPositionTo=Ja.prototype.Mb;Ja.prototype.setPosition=Ja.prototype.Ec;Ja.prototype.translate=Ja.prototype.Lc;Ja.prototype.getRotation=Ja.prototype.pc;Ja.prototype.getRotationTo=Ja.prototype.qc;Ja.prototype.setRotation=Ja.prototype.Jc;Ja.prototype.setRotationXyz=Ja.prototype.Kc;Ja.prototype.rotate=Ja.prototype.uc;Ja.prototype.rotateXyz=Ja.prototype.vc;Ja.prototype.getOrientation=Ja.prototype.ua;Ja.prototype.getOrientationTo=Ja.prototype.cb;Ja.prototype.setOrientation=Ja.prototype.Ac;Ja.prototype.clone=Ja.prototype.clone;Ja.prototype.copyFrom=Ja.prototype.de;S.OIMO.Setting=G;S.OIMO.GjkEpa=ec;ec.prototype.computeClosestPoints=ec.prototype.ua;ec.prototype.computeDistance=ec.prototype.cb;ec.prototype.convexCast=ec.prototype.Bf;ec.prototype.rayCast=ec.prototype.Vd;ec.getInstance=ec.pc;S.OIMO.GjkEpaResultState=Gc;S.OIMO.SimplexUtil=de;de.projectOrigin2=de.qc;de.projectOrigin3=de.uc;de.projectOrigin4=de.vc;S.OIMO.Mat3=E;E.prototype.init=E.prototype.za;E.prototype.identity=E.prototype.Wf;E.prototype.add=E.prototype.Ac;E.prototype.sub=E.prototype.Ug;E.prototype.scale=E.prototype.Mf;E.prototype.mul=E.prototype.re;E.prototype.addEq=E.prototype.Ec;E.prototype.subEq=E.prototype.Vg;E.prototype.scaleEq=E.prototype.Tg;E.prototype.mulEq=E.prototype.se;E.prototype.prependScale=E.prototype.Ue;E.prototype.appendScale=E.prototype.Lc;E.prototype.prependRotation=E.prototype.te;E.prototype.appendRotation=E.prototype.Jc;E.prototype.prependScaleEq=E.prototype.Ve;E.prototype.appendScaleEq=E.prototype.fd;E.prototype.prependRotationEq=E.prototype.ue;E.prototype.appendRotationEq=E.prototype.Kc;E.prototype.transpose=E.prototype.ji;E.prototype.transposeEq=E.prototype.ki;E.prototype.determinant=E.prototype.Yd;E.prototype.trace=E.prototype.Xg;E.prototype.inverse=E.prototype.pe;E.prototype.inverseEq=E.prototype.qe;E.prototype.toArray=E.prototype.Wg;E.prototype.copyFrom=E.prototype.de;E.prototype.clone=E.prototype.clone;E.prototype.fromQuat=E.prototype.Hb;E.prototype.toQuat=E.prototype.Pj;E.prototype.fromEulerXyz=E.prototype.cb;E.prototype.toEulerXyz=E.prototype.li;E.prototype.getRow=E.prototype.uc;E.prototype.getCol=E.prototype.pc;E.prototype.getRowTo=E.prototype.vc;E.prototype.getColTo=E.prototype.qc;E.prototype.fromRows=E.prototype.Mb;E.prototype.fromCols=E.prototype.ua;E.prototype.toString=E.prototype.toString;S.OIMO.Mat4=O;O.prototype.init=O.prototype.za;O.prototype.identity=O.prototype.Wf;O.prototype.add=O.prototype.pc;O.prototype.sub=O.prototype.Mf;O.prototype.scale=O.prototype.Ue;O.prototype.mul=O.prototype.Yd;O.prototype.addEq=O.prototype.qc;O.prototype.subEq=O.prototype.Tg;O.prototype.scaleEq=O.prototype.Ve;O.prototype.mulEq=O.prototype.pe;O.prototype.prependScale=O.prototype.te;O.prototype.appendScale=O.prototype.Ac;O.prototype.prependRotation=O.prototype.re;O.prototype.appendRotation=O.prototype.uc;O.prototype.prependTranslation=O.prototype.ki;O.prototype.appendTranslation=O.prototype.ua;O.prototype.prependScaleEq=O.prototype.ue;O.prototype.appendScaleEq=O.prototype.Ec;O.prototype.prependRotationEq=O.prototype.se;O.prototype.appendRotationEq=O.prototype.vc;O.prototype.prependTranslationEq=O.prototype.li;O.prototype.appendTranslationEq=O.prototype.cb;O.prototype.transpose=O.prototype.Wg;O.prototype.transposeEq=O.prototype.Xg;O.prototype.determinant=O.prototype.Jc;O.prototype.trace=O.prototype.Vg;O.prototype.inverse=O.prototype.Lc;O.prototype.inverseEq=O.prototype.fd;O.prototype.lookAt=O.prototype.Mb;O.prototype.perspective=O.prototype.qe;O.prototype.ortho=O.prototype.ji;O.prototype.toArray=O.prototype.Ug;O.prototype.copyFrom=O.prototype.de;O.prototype.fromMat3=O.prototype.Kc;O.prototype.fromTransform=O.prototype.Hb;O.prototype.clone=O.prototype.clone;O.prototype.toString=O.prototype.toString;S.OIMO.MathUtil=Oa;Oa.abs=Oa.abs;Oa.sin=Oa.sin;Oa.cos=Oa.cos;Oa.tan=Oa.tan;Oa.asin=Oa.asin;Oa.acos=Oa.acos;Oa.atan=Oa.atan;Oa.safeAsin=Oa.fd;Oa.safeAcos=Oa.Lc;Oa.atan2=Oa.atan2;Oa.sqrt=Oa.sqrt;Oa.clamp=Oa.Hb;Oa.rand=Oa.Ac;Oa.randIn=Oa.Ec;Oa.randVec3In=Oa.Kc;Oa.randVec3=Oa.Jc;S.OIMO.Pool=$b;$b.prototype.vec3=$b.prototype.Ac;$b.prototype.mat3=$b.prototype.qc;$b.prototype.mat4=$b.prototype.uc;$b.prototype.quat=$b.prototype.vc;$b.prototype.dispose=$b.prototype.ua;$b.prototype.disposeVec3=$b.prototype.pc;$b.prototype.disposeMat3=$b.prototype.cb;$b.prototype.disposeMat4=$b.prototype.Hb;$b.prototype.disposeQuat=$b.prototype.Mb;S.OIMO.Quat=ta;ta.prototype.identity=ta.prototype.Wf;ta.prototype.init=ta.prototype.za;ta.prototype.add=ta.prototype.ua;ta.prototype.sub=ta.prototype.Ec;ta.prototype.scale=ta.prototype.vc;ta.prototype.addEq=ta.prototype.cb;ta.prototype.subEq=ta.prototype.Jc;ta.prototype.scaleEq=ta.prototype.Ac;ta.prototype.length=ta.prototype.length;ta.prototype.lengthSq=ta.prototype.pc;ta.prototype.dot=ta.prototype.Hb;ta.prototype.normalized=ta.prototype.uc;ta.prototype.normalize=ta.prototype.qc;ta.prototype.setArc=ta.prototype.Kc;ta.prototype.slerp=ta.prototype.Lc;ta.prototype.copyFrom=ta.prototype.de;ta.prototype.clone=ta.prototype.clone;ta.prototype.fromMat3=ta.prototype.Mb;ta.prototype.toMat3=ta.prototype.fd;ta.prototype.toString=ta.prototype.toString;S.OIMO.Contact=Rb;Rb.prototype.getShape1=Rb.prototype.pc;Rb.prototype.getShape2=Rb.prototype.qc;Rb.prototype.isTouching=Rb.prototype.sk;Rb.prototype.getManifold=Rb.prototype.cb;Rb.prototype.getContactConstraint=Rb.prototype.ua;Rb.prototype.getPrev=Rb.prototype.Mb;Rb.prototype.getNext=Rb.prototype.Hb;S.OIMO.ContactLink=ed;ed.prototype.getContact=ed.prototype.ua;ed.prototype.getOther=ed.prototype.Hb;ed.prototype.getPrev=ed.prototype.Mb;ed.prototype.getNext=ed.prototype.cb;S.OIMO.ContactManager=He;He.prototype.getNumContacts=He.prototype.cb;He.prototype.getContactList=He.prototype.ua;S.OIMO.TimeStep=Al;S.OIMO.World=Ma;Ma.prototype.step=Ma.prototype.pe;Ma.prototype.addRigidBody=Ma.prototype.cb;Ma.prototype.removeRigidBody=Ma.prototype.qe;Ma.prototype.addJoint=Ma.prototype.ua;Ma.prototype.removeJoint=Ma.prototype.Kl;Ma.prototype.setDebugDraw=Ma.prototype.re;Ma.prototype.getDebugDraw=Ma.prototype.qc;Ma.prototype.debugDraw=Ma.prototype.Hb;Ma.prototype.rayCast=Ma.prototype.Vd;Ma.prototype.convexCast=Ma.prototype.Bf;Ma.prototype.aabbTest=Ma.prototype.qh;Ma.prototype.getRigidBodyList=Ma.prototype.fd;Ma.prototype.getJointList=Ma.prototype.vc;Ma.prototype.getBroadPhase=Ma.prototype.Mb;Ma.prototype.getContactManager=Ma.prototype.pc;Ma.prototype.getNumRigidBodies=Ma.prototype.Kc;Ma.prototype.getNumJoints=Ma.prototype.Ec;Ma.prototype.getNumShapes=Ma.prototype.Yd;Ma.prototype.getNumIslands=Ma.prototype.Ac;Ma.prototype.getNumVelocityIterations=Ma.prototype.Lc;Ma.prototype.setNumVelocityIterations=Ma.prototype.ue;Ma.prototype.getNumPositionIterations=Ma.prototype.Jc;Ma.prototype.setNumPositionIterations=Ma.prototype.te;Ma.prototype.getGravity=Ma.prototype.uc;Ma.prototype.setGravity=Ma.prototype.se;S.OIMO.AabbTestCallback=yl;S.OIMO.ContactCallback=fl;S.OIMO.RayCastCallback=ej;S.OIMO.RayCastClosest=hf;hf.prototype.clear=hf.prototype.clear;hf.prototype.process=hf.prototype.process;S.OIMO.DebugDrawStyle=xl;S.OIMO.Performance=Ad;S.OIMO.ConstraintSolver=Ob;Ob.prototype.preSolveVelocity=Ob.prototype.xh;Ob.prototype.warmStart=Ob.prototype.Gh;Ob.prototype.solveVelocity=Ob.prototype.Ch;Ob.prototype.postSolveVelocity=Ob.prototype.Li;Ob.prototype.preSolvePosition=Ob.prototype.Pg;Ob.prototype.solvePositionSplitImpulse=Ob.prototype.Bh;Ob.prototype.solvePositionNgs=Ob.prototype.Ah;Ob.prototype.postSolve=Ob.prototype.postSolve;S.OIMO.PositionCorrectionAlgorithm=Hb;S.OIMO.ContactConstraint=zd;zd.prototype.getShape1=zd.prototype.cb;zd.prototype.getShape2=zd.prototype.Hb;zd.prototype.getManifold=zd.prototype.ua;zd.prototype.isTouching=zd.prototype.sk;S.OIMO.Manifold=ic;ic.prototype.getNormal=ic.prototype.Hb;ic.prototype.getNormalTo=ic.prototype.Mb;ic.prototype.getTangent=ic.prototype.uc;ic.prototype.getTangentTo=ic.prototype.vc;ic.prototype.getBinormal=ic.prototype.ua;ic.prototype.getBinormalTo=ic.prototype.cb;ic.prototype.getPoints=ic.prototype.qc;ic.prototype.getNumPoints=ic.prototype.pc;S.OIMO.ManifoldPoint=Xb;Xb.prototype.getPosition1=Xb.prototype.Mb;Xb.prototype.getPosition1To=Xb.prototype.pc;Xb.prototype.getPosition2=Xb.prototype.qc;Xb.prototype.getPosition2To=Xb.prototype.uc;Xb.prototype.getDepth=Xb.prototype.cb;Xb.prototype.isWarmStarted=Xb.prototype.Ac;Xb.prototype.getNormalImpulse=Xb.prototype.Hb;Xb.prototype.getTangentImpulse=Xb.prototype.vc;Xb.prototype.getBinormalImpulse=Xb.prototype.ua;Xb.prototype.isEnabled=Xb.prototype.Ec;S.OIMO.Joint=V;V.prototype.getRigidBody1=V.prototype.ue;V.prototype.getRigidBody2=V.prototype.Ue;V.prototype.getType=V.prototype.Tg;V.prototype.getAnchor1=V.prototype.cb;V.prototype.getAnchor2=V.prototype.Mb;V.prototype.getAnchor1To=V.prototype.Hb;V.prototype.getAnchor2To=V.prototype.pc;V.prototype.getLocalAnchor1=V.prototype.pe;V.prototype.getLocalAnchor2=V.prototype.re;V.prototype.getLocalAnchor1To=V.prototype.qe;V.prototype.getLocalAnchor2To=V.prototype.se;V.prototype.getBasis1=V.prototype.Ec;V.prototype.getBasis2=V.prototype.Kc;V.prototype.getBasis1To=V.prototype.Jc;V.prototype.getBasis2To=V.prototype.Lc;V.prototype.getAllowCollision=V.prototype.ua;V.prototype.setAllowCollision=V.prototype.Ug;V.prototype.getBreakForce=V.prototype.fd;V.prototype.setBreakForce=V.prototype.Vg;V.prototype.getBreakTorque=V.prototype.Yd;V.prototype.setBreakTorque=V.prototype.Wg;V.prototype.getPositionCorrectionAlgorithm=V.prototype.te;V.prototype.setPositionCorrectionAlgorithm=V.prototype.Xg;V.prototype.getAppliedForce=V.prototype.qc;V.prototype.getAppliedForceTo=V.prototype.uc;V.prototype.getAppliedTorque=V.prototype.vc;V.prototype.getAppliedTorqueTo=V.prototype.Ac;V.prototype.getPrev=V.prototype.Mf;V.prototype.getNext=V.prototype.Ve;S.OIMO.CylindricalJoint=Cb;Cb.prototype.getAxis1=Cb.prototype.Eg;Cb.prototype.getAxis2=Cb.prototype.Gg;Cb.prototype.getAxis1To=Cb.prototype.Fg;Cb.prototype.getAxis2To=Cb.prototype.Hg;Cb.prototype.getLocalAxis1=Cb.prototype.Ig;Cb.prototype.getLocalAxis2=Cb.prototype.Kg;Cb.prototype.getLocalAxis1To=Cb.prototype.Jg;Cb.prototype.getLocalAxis2To=Cb.prototype.Lg;Cb.prototype.getTranslationalSpringDamper=Cb.prototype.In;Cb.prototype.getRotationalSpringDamper=Cb.prototype.An;Cb.prototype.getTranslationalLimitMotor=Cb.prototype.Hn;Cb.prototype.getRotationalLimitMotor=Cb.prototype.zn;Cb.prototype.getAngle=Cb.prototype.ol;Cb.prototype.getTranslation=Cb.prototype.rl;S.OIMO.JointConfig=kc;S.OIMO.CylindricalJointConfig=Ge;Ge.prototype.init=Ge.prototype.za;S.OIMO.JointLink=Xc;Xc.prototype.getContact=Xc.prototype.ua;Xc.prototype.getOther=Xc.prototype.Hb;Xc.prototype.getPrev=Xc.prototype.Mb;Xc.prototype.getNext=Xc.prototype.cb;S.OIMO.JointType=rc;S.OIMO.PrismaticJoint=Kb;Kb.prototype.getAxis1=Kb.prototype.Eg;Kb.prototype.getAxis2=Kb.prototype.Gg;Kb.prototype.getAxis1To=Kb.prototype.Fg;Kb.prototype.getAxis2To=Kb.prototype.Hg;Kb.prototype.getLocalAxis1=Kb.prototype.Ig;Kb.prototype.getLocalAxis2=Kb.prototype.Kg;Kb.prototype.getLocalAxis1To=Kb.prototype.Jg;Kb.prototype.getLocalAxis2To=Kb.prototype.Lg;Kb.prototype.getSpringDamper=Kb.prototype.Cj;Kb.prototype.getLimitMotor=Kb.prototype.ql;Kb.prototype.getTranslation=Kb.prototype.rl;S.OIMO.PrismaticJointConfig=cg;cg.prototype.init=cg.prototype.za;S.OIMO.RagdollJoint=ab;ab.prototype.getAxis1=ab.prototype.Eg;ab.prototype.getAxis2=ab.prototype.Gg;ab.prototype.getAxis1To=ab.prototype.Fg;ab.prototype.getAxis2To=ab.prototype.Hg;ab.prototype.getLocalAxis1=ab.prototype.Ig;ab.prototype.getLocalAxis2=ab.prototype.Kg;ab.prototype.getLocalAxis1To=ab.prototype.Jg;ab.prototype.getLocalAxis2To=ab.prototype.Lg;ab.prototype.getTwistSpringDamper=ab.prototype.Mn;ab.prototype.getTwistLimitMotor=ab.prototype.Ln;ab.prototype.getSwingSpringDamper=ab.prototype.Gn;ab.prototype.getSwingAxis=ab.prototype.En;ab.prototype.getSwingAxisTo=ab.prototype.Fn;ab.prototype.getSwingAngle=ab.prototype.Dn;ab.prototype.getTwistAngle=ab.prototype.Kn;S.OIMO.RagdollJointConfig=Rf;Rf.prototype.init=Rf.prototype.za;S.OIMO.RevoluteJoint=Jb;Jb.prototype.getAxis1=Jb.prototype.Eg;Jb.prototype.getAxis2=Jb.prototype.Gg;Jb.prototype.getAxis1To=Jb.prototype.Fg;Jb.prototype.getAxis2To=Jb.prototype.Hg;Jb.prototype.getLocalAxis1=Jb.prototype.Ig;Jb.prototype.getLocalAxis2=Jb.prototype.Kg;Jb.prototype.getLocalAxis1To=Jb.prototype.Jg;Jb.prototype.getLocalAxis2To=Jb.prototype.Lg;Jb.prototype.getSpringDamper=Jb.prototype.Cj;Jb.prototype.getLimitMotor=Jb.prototype.ql;Jb.prototype.getAngle=Jb.prototype.ol;S.OIMO.RevoluteJointConfig=Ef;Ef.prototype.init=Ef.prototype.za;S.OIMO.RotationalLimitMotor=ac;ac.prototype.setLimits=ac.prototype.ua;ac.prototype.setMotor=ac.prototype.cb;ac.prototype.clone=ac.prototype.clone;S.OIMO.SphericalJoint=Sd;Sd.prototype.getSpringDamper=Sd.prototype.Cj;S.OIMO.SphericalJointConfig=bg;bg.prototype.init=bg.prototype.za;S.OIMO.SpringDamper=Wb;Wb.prototype.setSpring=Wb.prototype.ua;Wb.prototype.setSymplecticEuler=Wb.prototype.cb;Wb.prototype.clone=Wb.prototype.clone;S.OIMO.TranslationalLimitMotor=yd;yd.prototype.setLimits=yd.prototype.ua;yd.prototype.setMotor=yd.prototype.cb;yd.prototype.clone=yd.prototype.clone;S.OIMO.UniversalJoint=hb;hb.prototype.getAxis1=hb.prototype.Eg;hb.prototype.getAxis2=hb.prototype.Gg;hb.prototype.getAxis1To=hb.prototype.Fg;hb.prototype.getAxis2To=hb.prototype.Hg;hb.prototype.getLocalAxis1=hb.prototype.Ig;hb.prototype.getLocalAxis2=hb.prototype.Kg;hb.prototype.getLocalAxis1To=hb.prototype.Jg;hb.prototype.getLocalAxis2To=hb.prototype.Lg;hb.prototype.getSpringDamper1=hb.prototype.Bn;hb.prototype.getSpringDamper2=hb.prototype.Cn;hb.prototype.getLimitMotor1=hb.prototype.xn;hb.prototype.getLimitMotor2=hb.prototype.yn;hb.prototype.getAngle1=hb.prototype.sn;hb.prototype.getAngle2=hb.prototype.tn;S.OIMO.UniversalJointConfig=rf;rf.prototype.init=rf.prototype.za;S.OIMO.ConstraintSolverType=Fe;S.OIMO.DirectJointConstraintSolver=vc;vc.prototype.preSolveVelocity=vc.prototype.xh;vc.prototype.warmStart=vc.prototype.Gh;vc.prototype.solveVelocity=vc.prototype.Ch;vc.prototype.postSolveVelocity=vc.prototype.Li;vc.prototype.preSolvePosition=vc.prototype.Pg;vc.prototype.solvePositionSplitImpulse=vc.prototype.Bh;vc.prototype.solvePositionNgs=vc.prototype.Ah;vc.prototype.postSolve=vc.prototype.postSolve;S.OIMO.PgsContactConstraintSolver=nc;nc.prototype.preSolveVelocity=nc.prototype.xh;nc.prototype.warmStart=nc.prototype.Gh;nc.prototype.solveVelocity=nc.prototype.Ch;nc.prototype.preSolvePosition=nc.prototype.Pg;nc.prototype.solvePositionSplitImpulse=nc.prototype.Bh;nc.prototype.solvePositionNgs=nc.prototype.Ah;nc.prototype.postSolve=nc.prototype.postSolve;S.OIMO.PgsJointConstraintSolver=mc;mc.prototype.preSolveVelocity=mc.prototype.xh;mc.prototype.warmStart=mc.prototype.Gh;mc.prototype.solveVelocity=mc.prototype.Ch;mc.prototype.postSolveVelocity=mc.prototype.Li;mc.prototype.preSolvePosition=mc.prototype.Pg;mc.prototype.solvePositionSplitImpulse=mc.prototype.Bh;mc.prototype.solvePositionNgs=mc.prototype.Ah;mc.prototype.postSolve=mc.prototype.postSolve;S.OIMO.MassData=ql;S.OIMO.RigidBody=u;u.prototype.getPosition=u.prototype.qm;u.prototype.getPositionTo=u.prototype.rm;u.prototype.setPosition=u.prototype.Xn;u.prototype.translate=u.prototype.jo;u.prototype.getRotation=u.prototype.vm;u.prototype.getRotationTo=u.prototype.wm;u.prototype.setRotation=u.prototype.$n;u.prototype.setRotationXyz=u.prototype.fo;u.prototype.rotate=u.prototype.Em;u.prototype.rotateXyz=u.prototype.Sn;u.prototype.getOrientation=u.prototype.jm;u.prototype.getOrientationTo=u.prototype.lm;u.prototype.setOrientation=u.prototype.Tn;u.prototype.getTransform=u.prototype.xm;u.prototype.getTransformTo=u.prototype.Cm;u.prototype.setTransform=u.prototype.ho;u.prototype.getMass=u.prototype.Tg;u.prototype.getLocalInertia=u.prototype.se;u.prototype.getLocalInertiaTo=u.prototype.te;u.prototype.getMassData=u.prototype.Ug;u.prototype.getMassDataTo=u.prototype.Vg;u.prototype.setMassData=u.prototype.Qm;u.prototype.getRotationFactor=u.prototype.ji;u.prototype.setRotationFactor=u.prototype.Rm;u.prototype.getLinearVelocity=u.prototype.qe;u.prototype.getLinearVelocityTo=u.prototype.re;u.prototype.setLinearVelocity=u.prototype.Pm;u.prototype.getAngularVelocity=u.prototype.Jc;u.prototype.getAngularVelocityTo=u.prototype.Kc;u.prototype.setAngularVelocity=u.prototype.mo;u.prototype.addLinearVelocity=u.prototype.cb;u.prototype.addAngularVelocity=u.prototype.ua;u.prototype.applyImpulse=u.prototype.uc;u.prototype.applyLinearImpulse=u.prototype.vc;u.prototype.applyAngularImpulse=u.prototype.Mb;u.prototype.applyForce=u.prototype.pc;u.prototype.applyForceToCenter=u.prototype.qc;u.prototype.applyTorque=u.prototype.Ac;u.prototype.getGravityScale=u.prototype.fd;u.prototype.setGravityScale=u.prototype.Nm;u.prototype.getLocalPoint=u.prototype.ue;u.prototype.getLocalPointTo=u.prototype.Ue;u.prototype.getLocalVector=u.prototype.Ve;u.prototype.getLocalVectorTo=u.prototype.Mf;u.prototype.getWorldPoint=u.prototype.Pj;u.prototype.getWorldPointTo=u.prototype.Nl;u.prototype.getWorldVector=u.prototype.am;u.prototype.getWorldVectorTo=u.prototype.bm;u.prototype.getNumShapes=u.prototype.im;u.prototype.getShapeList=u.prototype.ki;u.prototype.getNumContectLinks=u.prototype.Wg;u.prototype.getContactLinkList=u.prototype.Lc;u.prototype.getNumJointLinks=u.prototype.Xg;u.prototype.getJointLinkList=u.prototype.Yd;u.prototype.addShape=u.prototype.Hb;u.prototype.removeShape=u.prototype.ko;u.prototype.getType=u.prototype.Dm;u.prototype.setType=u.prototype.Sm;u.prototype.wakeUp=u.prototype.Um;u.prototype.sleep=u.prototype.Tm;u.prototype.isSleeping=u.prototype.cm;u.prototype.getSleepTime=u.prototype.li;u.prototype.setAutoSleep=u.prototype.Mm;u.prototype.getLinearDamping=u.prototype.pe;u.prototype.setLinearDamping=u.prototype.Om;u.prototype.getAngularDamping=u.prototype.Ec;u.prototype.setAngularDamping=u.prototype.lo;u.prototype.getPrev=u.prototype.um;u.prototype.getNext=u.prototype.gm;S.OIMO.RigidBodyConfig=function(){this.position=new t;this.rotation=new E;this.linearVelocity=new t;this.angularVelocity=new t;this.type=0;this.autoSleep=!0;this.angularDamping=this.linearDamping=0};S.OIMO.RigidBodyType=Rd;S.OIMO.Shape=Wa;Wa.prototype.getFriction=Wa.prototype.uc;Wa.prototype.setFriction=Wa.prototype.ue;Wa.prototype.getRestitution=Wa.prototype.Jc;Wa.prototype.setRestitution=Wa.prototype.Ve;Wa.prototype.getLocalTransform=Wa.prototype.Ac;Wa.prototype.getLocalTransformTo=Wa.prototype.Ec;Wa.prototype.getTransform=Wa.prototype.Yd;Wa.prototype.getTransformTo=Wa.prototype.pe;Wa.prototype.setLocalTransform=Wa.prototype.Ue;Wa.prototype.getDensity=Wa.prototype.qc;Wa.prototype.setDensity=Wa.prototype.te;Wa.prototype.getAabb=Wa.prototype.ua;Wa.prototype.getAabbTo=Wa.prototype.cb;Wa.prototype.getGeometry=Wa.prototype.vc;Wa.prototype.getRigidBody=Wa.prototype.Kc;Wa.prototype.getCollisionGroup=Wa.prototype.Hb;Wa.prototype.setCollisionGroup=Wa.prototype.qe;Wa.prototype.getCollisionMask=Wa.prototype.Mb;Wa.prototype.setCollisionMask=Wa.prototype.re;Wa.prototype.getContactCallback=Wa.prototype.pc;Wa.prototype.setContactCallback=Wa.prototype.se;Wa.prototype.getPrev=Wa.prototype.fd;Wa.prototype.getNext=Wa.prototype.Lc;S.OIMO.ShapeConfig=function(){this.position=new t;this.rotation=new E;this.friction=G.defaultFriction;this.restitution=G.defaultRestitution;this.density=G.defaultDensity;this.collisionGroup=G.defaultCollisionGroup;this.collisionMask=G.defaultCollisionMask;this.contactCallback=this.geometry=null}})(window);