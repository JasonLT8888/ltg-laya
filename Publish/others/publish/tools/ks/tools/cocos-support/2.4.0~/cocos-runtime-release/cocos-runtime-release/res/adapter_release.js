!function r(a,o,l){function c(t,e){if(!o[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var s=o[t]={exports:{}};a[t][0].call(s.exports,function(e){return c(a[t][1][e]||e)},s,s.exports,r,a,o,l)}return o[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(r,e,t){"use strict";var a,h=r("./cache-manager"),i=window.fsUtils,d=i.downloadFile,s=i.readText,o=i.readArrayBuffer,n=i.readJson,_=i.loadSubpackage,l=i.getUserDataPath,f=i._subpackagesPath,p=/^\w+:\/\/.*/,c=cc.assetManager.downloader,u=cc.assetManager.parser,m=cc.assetManager.presets;c.maxConcurrency=8,c.maxRequestsPerFrame=64,m.scene.maxConcurrency=10,m.scene.maxRequestsPerFrame=64;var v={},g={},y={};function b(e,t,i){if("function"==typeof t&&(i=t,t=null),p.test(e))i&&i(new Error("Can not load remote scripts"));else{if(y[e])return i&&i();r(e),y[e]=!0,i&&i(null)}}function D(e,t,i){"function"==typeof t&&(i=t,t=null);var n=document.createElement("audio");n.src=e,i&&i(null,n)}function x(n,t,s,e,r){var i=L(n,s);i.inLocal?t(i.url,s,r):i.inCache?(h.updateLastTime(n),t(i.url,s,function(e,t){e&&h.removeCache(n),r(e,t)})):d(n,null,s.header,e,function(e,i){e?r(e,null):t(i,s,function(e,t){e||(h.tempFiles.add(n,i),h.cacheFile(n,i,s.cacheEnabled,s.__cacheBundleRoot__,!0)),r(e,t)})})}function E(e,t,i){o(e,i)}function C(e,t,i){s(e,i)}function T(e,t,i){n(e,i)}function A(e,t,i){x(e,T,t,t.onFileProgress,i)}function w(e,t,i){i(null,__globalAdapter.loadFont(e)||"Arial")}function S(e,t,i){i(null,e)}function M(e,t,i){x(e,S,t,t.onFileProgress,i)}function P(e,i,n){o(e,function(e,t){return e?n(e):void R(t,i,n)})}function F(e,i,n){o(e,function(e,t){return e?n(e):void k(t,i,n)})}var R=u.parsePVRTex,k=u.parsePKMTex;var O=M;c.downloadDomAudio=D,c.downloadScript=b,u.parsePVRTex=P,u.parsePKMTex=F,c.register({".js":b,".mp3":M,".ogg":M,".wav":M,".m4a":M,".png":O,".jpg":O,".bmp":O,".jpeg":O,".gif":O,".ico":O,".tiff":O,".image":O,".webp":O,".pvr":M,".pkm":M,".font":M,".eot":M,".ttf":M,".woff":M,".svg":M,".ttc":M,".txt":M,".xml":M,".vsh":M,".fsh":M,".atlas":M,".tmx":M,".tsx":M,".plist":M,".fnt":M,".json":A,".ExportJson":M,".binary":M,".bin":M,".dbbin":M,".skel":M,".mp4":M,".avi":M,".mov":M,".mpg":M,".mpeg":M,".rm":M,".rmvb":M,bundle:function(e,l,c){var t,u,i,n=cc.path.basename(e),s=l.version||cc.assetManager.downloader.bundleVers[n];v[n]?(i="".concat(f).concat(n,"/config.").concat(s?s+".":"","json"),_(n,l.onFileProgress,function(e){e?c(e,null):A(i,l,function(e,t){t&&(t.base="".concat(f).concat(n,"/")),c(e,t)})})):(p.test(e)?(u=e,t="src/scripts/".concat(n,"/index.js"),h.makeBundleFolder(n)):g[n]?(u="".concat(a,"remote/").concat(n),t="src/scripts/".concat(n,"/index.js"),h.makeBundleFolder(n)):(u="assets/".concat(n),t="assets/".concat(n,"/index.js")),y[t]||(r(t),y[t]=!0),p.test(u)&&h.makeBundleFolder(n),l.cacheEnabled=!0,l.__cacheBundleRoot__=n,i="".concat(u,"/config.").concat(s?s+".":"","json"),A(i,l,function(e,i){var t,n,s,r,a,o;e?c&&c(e):i.isZip?(t=i.zipVersion,n="".concat(u,"/res.").concat(t?t+".":"","zip"),s=n,r=l,a=function(e,t){e?c&&c(e):(i.base=t+"/res/",c&&c(null,i))},(o=h.cachedFiles.get(s))?(h.updateLastTime(s),a&&a(null,o.url)):p.test(s)?d(s,null,r.header,r.onFileProgress,function(e,t){e?a&&a(e):h.unzipAndCacheBundle(s,t,r.__cacheBundleRoot__,a)}):h.unzipAndCacheBundle(s,s,r.__cacheBundleRoot__,a)):(i.base=u+"/",c&&c(null,i))}))},default:function(e,t,i){x(e,C,t,t.onFileProgress,i)}}),u.register({".png":c.downloadDomImage,".jpg":c.downloadDomImage,".bmp":c.downloadDomImage,".jpeg":c.downloadDomImage,".gif":c.downloadDomImage,".ico":c.downloadDomImage,".tiff":c.downloadDomImage,".image":c.downloadDomImage,".webp":c.downloadDomImage,".pvr":P,".pkm":F,".font":w,".eot":w,".ttf":w,".woff":w,".svg":w,".ttc":w,".mp3":D,".ogg":D,".wav":D,".m4a":D,".txt":C,".xml":C,".vsh":C,".fsh":C,".atlas":C,".tmx":C,".tsx":C,".fnt":C,".plist":function(e,t,n){s(e,function(e,t){var i=null;e||(i=cc.plistParser.parse(t))||(e=new Error("parse failed")),n&&n(e,i)})},".binary":E,".bin":E,".dbbin":E,".skel":E,".ExportJson":T});var L=function(e,t){var i,n,s=!1,r=!1;return!e.startsWith(l())&&p.test(e)?t.reload||((i=h.cachedFiles.get(e))?(r=!0,e=i.url):(n=h.tempFiles.get(e))&&(s=!0,e=n)):s=!0,{url:e,inLocal:s,inCache:r}};cc.assetManager.transformPipeline.append(function(e){for(var t=e.output=e.input,i=0,n=t.length;i<n;i++){var s=t[i],r=s.options;s.config?r.__cacheBundleRoot__=s.config.name:r.cacheEnabled=void 0!==r.cacheEnabled&&r.cacheEnabled}});var N=cc.assetManager.init;cc.assetManager.init=function(e){N.call(cc.assetManager,e),e.subpackages&&e.subpackages.forEach(function(e){return v[e]="subpackages/"+e}),e.remoteBundles&&e.remoteBundles.forEach(function(e){return g[e]=!0}),(a=e.server||"")&&!a.endsWith("/")&&(a+="/"),h.init()}},{"./cache-manager":15}],2:[function(e,t,i){"use strict";cc.FlexBuffer=function(e){this._reallocBuffer(e||64,!1)},cc.js.mixin(cc.FlexBuffer.prototype,{_reallocBuffer:function(e,t){var i;this.buffer&&(i=new Uint8Array(this.buffer)),this.buffer=new ArrayBuffer(e);var n=new Uint8Array(this.buffer);i&&t&&n.length>=i.length&&n.set(i)},reserve:function(e){var t=this.buffer.byteLength;if(t<e){for(;t<e;)t*=2;return this._reallocBuffer(t),!0}return!1}})},{}],3:[function(e,t,i){"use strict";var l=cc.Graphics.Helper,c=cc.Graphics.Types.PointFlags,o=cc.Graphics.Point;function n(){this.reset()}cc.js.mixin(n.prototype,{reset:function(){this.closed=!1,this.nbevel=0,this.complex=!0,this.points?this.points.length=0:this.points=[]}});function u(){this.index=0,this.byteOffset=0,this.indiceStart=0,this.indiceOffset=0,this.vertexStart=0,this.vertexOffset=0}cc.Graphics.Impl=function(){this._tessTol=.25,this._distTol=.01,this._updatePathOffset=!1,this._paths=null,this._pathLength=0,this._pathOffset=0,this._points=null,this._pointsOffset=0,this._commandx=0,this._commandy=0,this._paths=[],this._points=[],this._renderDatas=[],this._dataOffset=0},cc.js.mixin(cc.Graphics.Impl.prototype,{moveTo:function(e,t){this._updatePathOffset&&(this._pathOffset=this._pathLength,this._updatePathOffset=!1),this._addPath(),this._addPoint(e,t,c.PT_CORNER),this._commandx=e,this._commandy=t},lineTo:function(e,t){this._addPoint(e,t,c.PT_CORNER),this._commandx=e,this._commandy=t},bezierCurveTo:function(e,t,i,n,s,r){var a=this._curPath,o=a.points[a.points.length-1];o.x!==e||o.y!==t||i!==s||n!==r?(l.tesselateBezier(this,o.x,o.y,e,t,i,n,s,r,0,c.PT_CORNER),this._commandx=s,this._commandy=r):this.lineTo(s,r)},quadraticCurveTo:function(e,t,i,n){var s=this._commandx,r=this._commandy;this.bezierCurveTo(s+2/3*(e-s),r+2/3*(t-r),i+2/3*(e-i),n+2/3*(t-n),i,n)},arc:function(e,t,i,n,s,r){l.arc(this,e,t,i,n,s,r)},ellipse:function(e,t,i,n){l.ellipse(this,e,t,i,n),this._curPath.complex=!1},circle:function(e,t,i){l.ellipse(this,e,t,i,i),this._curPath.complex=!1},rect:function(e,t,i,n){this.moveTo(e,t),this.lineTo(e,t+n),this.lineTo(e+i,t+n),this.lineTo(e+i,t),this.close(),this._curPath.complex=!1},roundRect:function(e,t,i,n,s){l.roundRect(this,e,t,i,n,s),this._curPath.complex=!1},clear:function(e){this._pathLength=0,this._pathOffset=0,this._pointsOffset=0,this._dataOffset=0,this._curPath=null;var t=this._renderDatas;this._paths.length=0,this._points.length=0,t.length=0,e._renderHandle.clear()},close:function(){this._curPath.closed=!0},_addPath:function(){var e=this._pathLength,t=this._paths[e];return t?t.reset():(t=new n,this._paths.push(t)),this._pathLength++,this._curPath=t},_addPoint:function(e,t,i){var n,s,r,a=this._curPath;a&&(n=this._points,s=a.points,(r=n[this._pointsOffset++])?(r.x=e,r.y=t):(r=new o(e,t),n.push(r)),r.flags=i,s.push(r))},requestRenderData:function(e,t){var i=e._renderHandle,n=t&&0<t?t:256,s=n*e._vertexFormat._bytes,r=3*n,a=new Float32Array(s),o=new Uint16Array(r),l=new u;return l.index=this._dataOffset,l.vertexStart=0,l.vertexOffset=n,l.indiceStart=0,l.indiceOffset=r,l.byteOffset=s,this._renderDatas.push(l),i.updateMesh(this._dataOffset,a,o),l},getRenderDatas:function(e,t){return 0===this._renderDatas.length&&this.requestRenderData(e,t),this._renderDatas},reallocVData:function(e,t,i){var n,s=this._renderDatas[t],r=e._renderHandle.vDatas[t];r&&(n=new Uint8Array(r.buffer)),s.vertexOffset+=i,s.byteOffset+=i*e._vertexFormat._bytes;var a=new Float32Array(s.byteOffset),o=new Uint8Array(a.buffer);if(n)for(var l=0,c=n.length;l<c;l++)o[l]=n[l];return a},reallocIData:function(e,t,i){var n=e._renderHandle.iDatas[t],s=this._renderDatas[t];s.indiceOffset+=i;var r=new Uint16Array(s.indiceOffset);if(n)for(var a=0,o=n.length;a<o;a++)r[a]=n[a];return r}})},{}],4:[function(e,t,i){"use strict";var H=cc.Graphics.Types.PointFlags,G=cc.Graphics.LineJoin,K=cc.Graphics.LineCap,w=cc.Graphics.earcut,n=cc.Graphics.Impl,z=Math.PI,D=Math.min,W=Math.max,J=Math.ceil,Y=Math.acos,L=Math.cos,N=Math.sin,j=Math.atan2,q=(Math.abs,null),Z=0,r=null,Q=null,a=0;function I(e,t,i){return e<t?t:i<e?i:e}cc.Graphics._assembler={useModel:!0,createImpl:function(e){return new n(e)},updateRenderData:function(e){var t=e._impl.getRenderDatas(e);e._activateMaterial();for(var i=0,n=t.length;i<n;i++)e._renderHandle.updateMaterial(i,e.getMaterial())},genRenderData:function(e,t){var i,n,s=e._renderHandle,r=(Q=e._impl).getRenderDatas(e,t),a=r[Q._dataOffset],o=a.vertexStart+t;return(65535<o||131070<3*o)&&(++Q._dataOffset,o=t,Q._dataOffset<r.length?a=r[Q._dataOffset]:(a=Q.requestRenderData(e,t),r[Q._dataOffset]=a)),o>a.vertexOffset&&(i=Q.reallocVData(e,Q._dataOffset,t),n=Q.reallocIData(e,Q._dataOffset,3*t),s.updateMesh(Q._dataOffset,i,n)),a},stroke:function(e){a=e._strokeColor._val,r=e._renderHandle,this._flattenPaths(e._impl),this._expandStroke(e),r=null,e._impl._updatePathOffset=!0},fill:function(e){a=e._fillColor._val,r=e._renderHandle,this._expandFill(e),r=null,e._impl._updatePathOffset=!0},_expandStroke:function(e){var t=.5*e.lineWidth,i=e.lineCap,n=e.lineJoin,s=e.miterLimit;Q=e._impl;var r,a,o,l,c=(r=t,a=z,o=Q._tessTol,l=2*Y(r/(r+o)),W(2,J(a/l)));this._calculateJoins(Q,t,n,s);for(var u=Q._paths,h=0,d=Q._pathOffset,_=Q._pathLength;d<_;d++){var f=u[d],p=f.points.length;n===G.ROUND?h+=2*(p+f.nbevel*(c+2)+1):h+=2*(p+5*f.nbevel+1),f.closed||(i===K.ROUND?h+=2*(2*c+2):h+=12)}var m=q=this.genRenderData(e,h),v=e._renderHandle,g=v.vDatas[m.index],y=v.iDatas[m.index];Z=m.index;for(var b=Q._pathOffset,D=Q._pathLength;b<D;b++){var x,E,C,T,A=u[b],w=A.points,S=w.length,M=m.vertexStart,P=void 0,F=void 0,R=void 0,k=void 0,k=(T=A.closed)?(P=w[S-1],F=w[0],R=0,S):(P=w[0],F=w[1],S-(R=1));T||((x=F.sub(P)).normalizeSelf(),E=x.x,C=x.y,i===K.BUTT?this._buttCap(P,E,C,t,0):i===K.SQUARE?this._buttCap(P,E,C,t,t):i===K.ROUND&&this._roundCapStart(P,E,C,t,c));for(var O,L,N,j,I=R;I<k;++I)n===G.ROUND?this._roundJoin(P,F,t,t,c):0!=(F.flags&(H.PT_BEVEL|H.PT_INNERBEVEL))?this._bevelJoin(P,F,t,t):(this._vset(F.x+F.dmx*t,F.y+F.dmy*t),this._vset(F.x-F.dmx*t,F.y-F.dmy*t)),P=F,F=w[I+1];T?(O=3*M,this._vset(g[O],g[1+O]),this._vset(g[3+O],g[4+O])):((L=F.sub(P)).normalizeSelf(),N=L.x,j=L.y,i===K.BUTT?this._buttCap(F,N,j,t,0):i===K.BUTT||i===K.SQUARE?this._buttCap(F,N,j,t,t):i===K.ROUND&&this._roundCapEnd(F,N,j,t,c));for(var V=m.indiceStart,B=M+2,U=m.vertexStart;B<U;B++)y[V++]=B-2,y[V++]=B-1,y[V++]=B;m.indiceStart=V}v.updateIAData(m.index,0,m.indiceStart),Q=q=null},_expandFill:function(e){for(var t=(Q=e._impl)._paths,i=0,n=Q._pathOffset,s=Q._pathLength;n<s;n++){i+=t[n].points.length}var r=q=this.genRenderData(e,i),a=e._renderHandle,o=a.vDatas[r.index],l=a.iDatas[r.index];Z=r.index;for(var c=Q._pathOffset,u=Q._pathLength;c<u;c++){var h=t[c],d=h.points,_=d.length;if(0!==_){for(var f=r.vertexStart,p=0;p<_;++p)this._vset(d[p].x,d[p].y);var m=r.indiceStart;if(h.complex){for(var v=[],g=f,y=r.vertexStart;g<y;g++){var b=3*g;v.push(o[b]),v.push(o[1+b])}var D=w(v,null,2);if(!D||0===D.length)continue;for(var x=0,E=D.length;x<E;x++)l[m++]=D[x]+f}else for(var C=f,T=f+2,A=r.vertexStart;T<A;T++)l[m++]=C,l[m++]=T-1,l[m++]=T;r.indiceStart=m}}a.updateIAData(r.index,0,r.indiceStart),Q=q=null},_calculateJoins:function(e,t,i,n){var s=0;0<t&&(s=1/t);for(var r=e._paths,a=e._pathOffset,o=e._pathLength;a<o;a++)for(var l=r[a],c=l.points,u=c.length,h=c[u-1],d=c[0],_=l.nbevel=0;_<u;_++){var f,p,m,v=h.dy,g=-h.dx,y=d.dy,b=-d.dx;d.dmx=.5*(v+y),d.dmy=.5*(g+b),1e-6<(f=d.dmx*d.dmx+d.dmy*d.dmy)&&(600<(m=1/f)&&(m=600),d.dmx*=m,d.dmy*=m),0<d.dx*h.dy-h.dx*d.dy&&(d.flags|=H.PT_LEFT),f*(p=W(11,D(h.len,d.len)*s))*p<1&&(d.flags|=H.PT_INNERBEVEL),d.flags&H.PT_CORNER&&(f*n*n<1||i===G.BEVEL||i===G.ROUND)&&(d.flags|=H.PT_BEVEL),0!=(d.flags&(H.PT_BEVEL|H.PT_INNERBEVEL))&&l.nbevel++,h=d,d=c[_+1]}},_flattenPaths:function(e){for(var t=e._paths,i=e._pathOffset,n=e._pathLength;i<n;i++){var s=t[i],r=s.points,a=r[r.length-1],o=r[0];a.equals(o)&&(s.closed=!0,r.pop(),a=r[r.length-1]);for(var l=0,c=r.length;l<c;l++){var u=o.sub(a);a.len=u.mag(),(u.x||u.y)&&u.normalizeSelf(),a.dx=u.x,a.dy=u.y,a=o,o=r[l+1]}}},_chooseBevel:function(e,t,i,n){var s,r,a,o,l=i.x,c=i.y;return 0!==e?(s=l+t.dy*n,r=c-t.dx*n,a=l+i.dy*n,o=c-i.dx*n):(s=a=l+i.dmx*n,r=o=c+i.dmy*n),[s,r,a,o]},_buttCap:function(e,t,i,n,s){var r=e.x-t*s,a=e.y-i*s,o=i,l=-t;this._vset(r+o*n,a+l*n),this._vset(r-o*n,a-l*n)},_roundCapStart:function(e,t,i,n,s){for(var r=e.x,a=e.y,o=i,l=-t,c=0;c<s;c++){var u=c/(s-1)*z,h=L(u)*n,d=N(u)*n;this._vset(r-o*h-t*d,a-l*h-i*d),this._vset(r,a)}this._vset(r+o*n,a+l*n),this._vset(r-o*n,a-l*n)},_roundCapEnd:function(e,t,i,n,s){var r=e.x,a=e.y,o=i,l=-t;this._vset(r+o*n,a+l*n),this._vset(r-o*n,a-l*n);for(var c=0;c<s;c++){var u=c/(s-1)*z,h=L(u)*n,d=N(u)*n;this._vset(r,a),this._vset(r-o*h+t*d,a-l*h+i*d)}},_roundJoin:function(e,t,i,n,s){var r=e.dy,a=-e.dx,o=t.dy,l=-t.dx,c=t.x,u=t.y;if(0!=(t.flags&H.PT_LEFT)){var h=this._chooseBevel(t.flags&H.PT_INNERBEVEL,e,t,i),d=h[0],_=h[1],f=h[2],p=h[3],m=j(-a,-r),v=j(-l,-o);m<v&&(v-=2*z),this._vset(d,_),this._vset(c-r*n,t.y-a*n);for(var g=I(J((m-v)/z)*s,2,s),y=0;y<g;y++){var b=m+y/(g-1)*(v-m),D=c+L(b)*n,x=u+N(b)*n;this._vset(c,u),this._vset(D,x)}this._vset(f,p),this._vset(c-o*n,u-l*n)}else{var E=this._chooseBevel(t.flags&H.PT_INNERBEVEL,e,t,-n),C=E[0],T=E[1],A=E[2],w=E[3],S=j(a,r),M=j(l,o);M<S&&(M+=2*z),this._vset(c+r*n,u+a*n),this._vset(C,T);for(var P=I(J((M-S)/z)*s,2,s),F=0;F<P;F++){var R=S+F/(P-1)*(M-S),k=c+L(R)*i,O=u+N(R)*i;this._vset(k,O),this._vset(c,u)}this._vset(c+o*n,u+l*n),this._vset(A,w)}},_bevelJoin:function(e,t,i,n){var s,r,a,o,l,c,u,h,d,_,f=e.dy,p=-e.dx,m=t.dy,v=-t.dx;t.flags&H.PT_LEFT?(r=(s=this._chooseBevel(t.flags&H.PT_INNERBEVEL,e,t,i))[0],a=s[1],o=s[2],l=s[3],this._vset(r,a),this._vset(t.x-f*n,t.y-p*n),this._vset(o,l),this._vset(t.x-m*n,t.y-v*n)):(u=(c=this._chooseBevel(t.flags&H.PT_INNERBEVEL,e,t,-n))[0],h=c[1],d=c[2],_=c[3],this._vset(t.x+f*i,t.y+p*i),this._vset(u,h),this._vset(t.x+m*i,t.y+v*i),this._vset(d,_))},_vset:function(e,t){var i=3*q.vertexStart,n=r.vDatas[Z],s=r.uintVDatas[Z];n[i]=e,n[1+i]=t,s[2+i]=a,q.vertexStart++},updateColor:function(){}}},{}],5:[function(e,t,i){"use strict";var y=0;cc.Label._assembler.bmfont=cc.js.addon({delayUpdateRenderData:!0,createData:function(e){return e._renderHandle},_reserveQuads:function(e,t){var i=e._renderHandle,n=4*t*5*4,s=6*t*2,r=n+s,a=!1,a=i.flexBuffer?i.flexBuffer.reserve(r):(i.flexBuffer=new cc.FlexBuffer(r),!0),o=i.flexBuffer.buffer,l=i.vDatas[0];if(a||!l||l.length!=t){for(var c=new Float32Array(o,0,n/4),u=new Uint16Array(o,n,s/2),h=0,d=0;h<u.length;h+=6,d+=4)u[h]=d,u[h+1]=d+1,u[h+2]=d+2,u[h+3]=d+1,u[h+4]=d+3,u[h+5]=d+2;i.updateMesh(0,c,u)}i.updateMaterial(0,e.getMaterial()),y=0},_quadsUpdated:function(){y=0},appendQuad:function(e,t,i,n,s,r,a){var o,l,c,u,h=e._renderHandle,d=h.vDatas[0],_=h.uintVDatas[0],f=t.width,p=t.height,m=i.width,v=i.height,g=e.node._color._val,g=(4278190080&_[4]|(16777215&g)>>>0)>>>0;n?(o=i.x/f,c=(i.x+v)/f,l=(i.y+m)/p,u=i.y/p,d[y+2]=o,d[y+3]=u,d[y+7]=o,d[y+8]=l,d[y+12]=c,d[y+13]=u,d[y+17]=c,d[y+18]=l):(o=i.x/f,c=(i.x+m)/f,l=(i.y+v)/p,u=i.y/p,d[y+2]=o,d[y+3]=l,d[y+7]=c,d[y+8]=l,d[y+12]=o,d[y+13]=u,d[y+17]=c,d[y+18]=u),d[y]=s,d[y+1]=r-v*a,d[y+5]=s+m*a,d[y+6]=r-v*a,d[y+10]=s,d[y+11]=r,d[y+15]=s+m*a,d[y+16]=r,_[y+4]=g,_[y+9]=g,_[y+14]=g,_[y+19]=g,y+=20},updateColor:function(e,t){var i=e._renderHandle.uintVDatas[0];if(i){t=((4278190080&i[4])>>>0|16777215&t)>>>0;for(var n=i.length,s=4;s<n;s+=5)i[s]=t}}},cc.textUtils.bmfont)},{}],6:[function(e,t,i){"use strict";cc.Label._assembler={getAssembler:function(e){return e.font instanceof cc.BitmapFont?cc.Label._assembler.bmfont:cc.Label._assembler.ttf},updateRenderData:function(e){return e.__allocedDatas},updateColor:function(){}}},{}],7:[function(e,t,i){"use strict";var r=cc.color(255,255,255,255);cc.Label._assembler.ttf=cc.js.addon({delayUpdateRenderData:!0,createData:function(e){var t,i,n,s=e._renderHandle;return 0===s.meshCount&&((t=new Float32Array(20))[2]=0,t[3]=1,t[7]=1,t[8]=1,t[12]=0,t[13]=0,t[17]=1,t[18]=0,(i=new Uint16Array(6))[0]=0,i[1]=1,i[2]=2,i[3]=1,i[4]=3,i[5]=2,s.updateMesh(0,t,i),(n=s.uintVDatas[0])[4]=n[9]=n[14]=n[19]=r._val),s},updateColor:function(){},_updateVerts:function(e){var t=e._renderHandle;t.updateMaterial(0,e.getMaterial());var i=e.node,n=i.width,s=i.height,r=i.anchorX*n,a=i.anchorY*s,o=t.vDatas[0];o[0]=-r,o[1]=-a,o[5]=n-r,o[6]=-a,o[10]=-r,o[11]=s-a,o[15]=n-r,o[16]=s-a}},cc.textUtils.ttf)},{}],8:[function(e,t,i){"use strict";var n=cc.Mask,s=(cc.RenderFlow,cc.Sprite._assembler.simple),r=cc.Graphics._assembler;cc.Mask._assembler={updateRenderData:function(e){e._renderData||(r.updateRenderData(e._clearGraphics),e._type===n.Type.IMAGE_STENCIL&&(e._renderData=s.createData(e)));var t=e._renderData;e._type===n.Type.IMAGE_STENCIL?(e.spriteFrame?(e._material||e._activateMaterial(),s.updateRenderData(e),t._material=e._material):e._material=null,e._renderHandle.useImageStencil(!0)):(e._material||e._activateMaterial(),e._graphics._material=e._material,r.updateRenderData(e._graphics),e._renderHandle.useImageStencil(!1)),e._renderHandle.updateMaterial(0,e._material),e._renderHandle.setMaskInverted(e.inverted),e._renderHandle.setUseModel(e._type!==n.Type.IMAGE_STENCIL),e._clearGraphics._renderHandle.setUseModel(!1)},updateColor:function(){}}},{}],9:[function(e,t,i){"use strict";var g=cc.Sprite.FillType;cc.Sprite._assembler.barFilled={useModel:!1,updateRenderData:function(e){var t,i,n,s=e.spriteFrame;s&&(e._material._texture!==s._texture&&e._activateMaterial(),e._renderHandle.updateMaterial(0,e._material)),s&&e._vertsDirty&&(t=e._fillStart,(i=e._fillRange)<0&&(t+=i,i=-i),i=(i=1<(i=t+i)?1:i)<0?0:i,n=1<(n=(t=(t=1<t?1:t)<0?0:t)+(i=(i-=t)<0?0:i))?1:n,this.updateUVs(e,t,n),this.updateVerts(e,t,n),e._vertsDirty=!1)},updateUVs:function(e,t,i){var n,s,r,a,o,l,c,u,h,d,_=e._spriteFrame,f=e._renderHandle.vDatas[0],p=_._texture.width,m=_._texture.height,v=_._rect;switch(_._rotated?(n=v.x/p,s=(v.y+v.width)/m,r=o=n,c=h=(v.x+v.height)/p,l=d=s,a=u=v.y/m):(n=v.x/p,s=(v.y+v.height)/m,r=c=n,o=h=(v.x+v.width)/p,a=l=s,u=d=v.y/m),e._fillType){case g.HORIZONTAL:f[2]=r+(o-r)*t,f[3]=a+(l-a)*t,f[7]=r+(o-r)*i,f[8]=a+(l-a)*i,f[12]=c+(h-c)*t,f[13]=u+(d-u)*t,f[17]=c+(h-c)*i,f[18]=u+(d-u)*i;break;case g.VERTICAL:f[2]=r+(c-r)*t,f[3]=a+(u-a)*t,f[7]=o+(h-o)*t,f[8]=l+(d-l)*t,f[12]=r+(c-r)*i,f[13]=a+(u-a)*i,f[17]=o+(h-o)*i,f[18]=l+(d-l)*i;break;default:cc.errorID(2626)}},updateVerts:function(e,t,i){var n,s=e._renderHandle,r=s.vDatas[0],a=s.uintVDatas[0],o=e.node,l=o._color._val,c=o.width,u=o.height,h=o.anchorX*c,d=o.anchorY*u,_=-h,f=-d,p=c-h,m=u-d;switch(e._fillType){case g.HORIZONTAL:n=_+(p-_)*i,_=_+(p-_)*t,p=n;break;case g.VERTICAL:n=f+(m-f)*i,f=f+(m-f)*t,m=n;break;default:cc.errorID(2626)}r[0]=_,r[1]=f,r[5]=p,r[6]=f,r[10]=_,r[11]=m,r[15]=p,r[16]=m,a[4]=l,a[9]=l,a[14]=l,a[19]=l},createData:function(e){var t,i,n=e._renderHandle;return 0===n.meshCount&&(t=new Float32Array(20),(i=new Uint16Array(6))[0]=0,i[1]=1,i[2]=2,i[3]=1,i[4]=3,i[5]=2,n.updateMesh(0,t,i)),n},updateColor:function(e,t){var i=e._renderHandle.uintVDatas[0];if(i){t=((4278190080&i[4])>>>0|16777215&t)>>>0;for(var n=i.length,s=4;s<n;s+=5)i[s]=t}}}},{}],10:[function(e,t,i){"use strict";cc.Sprite._assembler={getAssembler:function(e){var t=this.simple;switch(e.type){case cc.Sprite.Type.SLICED:t=this.sliced;break;case cc.Sprite.Type.TILED:t=this.tiled;break;case cc.Sprite.Type.FILLED:t=e._fillType===cc.Sprite.FillType.RADIAL?this.radialFilled:this.barFilled;break;case cc.Sprite.Type.MESH:t=this.mesh}return t},updateRenderData:function(e){return e.__allocedDatas},updateColor:function(){}}},{}],11:[function(e,t,i){"use strict";var f=2*Math.PI,p=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],m=[0,0,0,0],v=[0,0,0,0,0,0,0,0],g=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],y=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],b=cc.v2(0,0),D=[],x=[];function E(e,t,i,n,s,r,a){var o,l,c,u,h,d,_=Math.sin(r),f=Math.cos(r);0!==Math.cos(r)&&(c=_/f,0<(e-s.x)*f&&(o=s.y+c*(e-s.x),a[0].x=e,a[0].y=o),0<(t-s.x)*f&&(l=s.y+c*(t-s.x),a[2].x=t,a[2].y=l)),0!==Math.sin(r)&&(d=f/_,0<(n-s.y)*_&&(u=s.x+d*(n-s.y),a[3].x=u,a[3].y=n),0<(i-s.y)*_&&(h=s.x+d*(i-s.y),a[1].x=h,a[1].y=i))}function c(e,t){var i=t.x-e.x,n=t.y-e.y;if(0!=i||0!=n){if(0==i)return 0<n?.5*Math.PI:1.5*Math.PI;var s=Math.atan(n/i);return i<0&&(s+=Math.PI),s}}function u(e,t,i,n,s){var r=m[0],a=m[1],o=m[2],l=m[3];e[t]=i.x,e[t+1]=i.y,e[t+5]=n.x,e[t+6]=n.y,e[t+10]=s.x,e[t+11]=s.y,h((i.x-r)/(o-r),(i.y-a)/(l-a),e,t+2),h((n.x-r)/(o-r),(n.y-a)/(l-a),e,t+7),h((s.x-r)/(o-r),(s.y-a)/(l-a),e,t+12)}function h(e,t,i,n){var s=v[0]+(v[2]-v[0])*e,r=v[4]+(v[6]-v[4])*e,a=v[1]+(v[3]-v[1])*e,o=v[5]+(v[7]-v[5])*e;i[n]=s+(r-s)*t,i[n+1]=a+(o-a)*t}cc.Sprite._assembler.radialFilled={useModel:!1,createData:function(e){return e._renderHandle},updateRenderData:function(e){var t,i,n,s,r,a,o,l,c,u=e.spriteFrame,h=e._renderHandle;if(u&&(e._material._texture!==u._texture&&e._activateMaterial(),h.updateMaterial(0,e._material)),u&&e._vertsDirty){var d=e._fillStart,_=e._fillRange;for(_<0&&(d+=_,_=-_);1<=d;)--d;for(;d<0;)d+=1;d*=f,_*=f,function(e){var t=e.node,i=t.width,n=t.height,s=t.anchorX*i,r=t.anchorY*n,a=-s,o=-r,l=i-s,c=n-r,u=m;u[0]=a,u[1]=o,u[2]=l,u[3]=c;var h=e._fillCenter,d=b.x=Math.min(Math.max(0,h.x),1)*(l-a)+a,_=b.y=Math.min(Math.max(0,h.y),1)*(c-o)+o;p[0].x=p[3].x=a,p[1].x=p[2].x=l,p[0].y=p[1].y=o,p[2].y=p[3].y=c,d!==u[D.length=0]&&(D[0]=[3,0]),d!==u[2]&&(D[2]=[1,2]),_!==u[1]&&(D[1]=[0,1]),_!==u[3]&&(D[3]=[2,3])}(e),a=(t=u)._texture.width,o=t._texture.height,l=t._rect,c=v,t._rotated?(i=l.x/a,n=(l.x+l.height)/a,s=l.y/o,r=(l.y+l.width)/o,c[0]=c[2]=i,c[4]=c[6]=n,c[3]=c[7]=r,c[1]=c[5]=s):(i=l.x/a,n=(l.x+l.width)/a,s=l.y/o,r=(l.y+l.height)/o,c[0]=c[4]=i,c[2]=c[6]=n,c[1]=c[3]=r,c[5]=c[7]=s),E(m[0],m[2],m[1],m[3],b,d,g),E(m[0],m[2],m[1],m[3],b,d+_,y),this.updateVerts(d,_),this.fillVerts(e),e._vertsDirty=!1}x.length=0},updateVerts:function(e,t){for(var i=e+t,n=0,s=0;s<4;++s){var r=D[s];if(r)if(f<=t)x.length=n+15,u(x,n,b,p[r[0]],p[r[1]]),n+=15;else{var a=c(b,p[r[0]]),o=c(b,p[r[1]]);o<a&&(o+=f),a-=f,o-=f;for(var l=0;l<3;++l)i<=a||(e<=a?(x.length=n+15,u(x,n,b,p[r[0]],i<=o?y[s]:p[r[1]]),n+=15):o<=e||(o<=i?(x.length=n+15,u(x,n,b,g[s],p[r[1]])):(x.length=n+15,u(x,n,b,g[s],y[s])),n+=15)),a+=f,o+=f}}},fillVerts:function(e){var t=e.node._color._val,i=e._renderHandle,n=x.length/5,s=5*n*4,r=2*n,a=!1;i.flexBuffer||(i.flexBuffer=new cc.FlexBuffer(528),a=!0);var o=i.flexBuffer.buffer,l=i.vDatas[0];if(a||!l||l.length!=n){for(var c=new Float32Array(o,0,s/4),u=new Uint16Array(o,s,r/2),h=0;h<n;h++)u[h]=h;i.updateMesh(0,c,u)}for(var d=i.vDatas[0],_=i.uintVDatas[0],f=0,p=0;p<n;p++)d[f]=x[f],d[f+1]=x[f+1],d[f+2]=x[f+2],d[f+3]=x[f+3],_[f+4]=t,f+=5},updateColor:function(e,t){var i=e._renderHandle.uintVDatas[0];if(i){t=((4278190080&i[4])>>>0|16777215&t)>>>0;for(var n=i.length,s=4;s<n;s+=5)i[s]=t}}}},{}],12:[function(e,t,i){"use strict";cc.Sprite._assembler.simple={useModel:!1,createData:function(e){var t,i,n=e._renderHandle;return 0===n.meshCount&&(t=new Float32Array(20),(i=new Uint16Array(6))[0]=0,i[1]=1,i[2]=2,i[3]=1,i[4]=3,i[5]=2,n.updateMesh(0,t,i)),n},updateRenderData:function(e){var t=e._spriteFrame;t&&(e._material._texture!==t._texture&&e._activateMaterial(),e._renderHandle.updateMaterial(0,e._material)),t&&e._vertsDirty&&(this.updateVerts(e),e._vertsDirty=!1)},updateColor:function(e,t){var i=e._renderHandle.uintVDatas[0];i&&(t=((4278190080&i[4])>>>0|16777215&t)>>>0,i[4]=t,i[9]=t,i[14]=t,i[19]=t)},updateVerts:function(e){var t,i,n,s,r,a,o,l,c,u,h,d,_,f=e._renderHandle,p=e.node,m=e.spriteFrame,v=p._color._val,g=f.vDatas[0],y=f.uintVDatas[0],b=p.width,D=p.height,x=p.anchorX*b,E=p.anchorY*D;_=e.trim?(u=-x,h=-E,d=b-x,D-E):(t=m._originalSize.width,i=m._originalSize.height,n=m._rect.width,s=m._rect.height,a=b/t,o=D/i,l=(r=m._offset).x+(t-n)/2,c=r.x-(t-n)/2,u=l*a-x,h=(r.y+(i-s)/2)*o-E,d=b+c*a-x,D+(r.y-(i-s)/2)*o-E),v=(4278190080&y[4]|(16777215&v)>>>0)>>>0;var C=m.uv;g[0]=u,g[1]=h,g[2]=C[0],g[3]=C[1],g[5]=d,g[6]=h,g[7]=C[2],g[8]=C[3],g[10]=u,g[11]=_,g[12]=C[4],g[13]=C[5],g[15]=d,g[16]=_,g[17]=C[6],g[18]=C[7],y[4]=v,y[9]=v,y[14]=v,y[19]=v}}},{}],13:[function(e,t,i){"use strict";var w=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}];cc.Sprite._assembler.sliced={useModel:!1,createData:function(e){var t=e._renderHandle;if(0===t.meshCount){for(var i=new Float32Array(80),n=new Uint16Array(54),s=0,r=0;r<3;++r)for(var a=0;a<3;++a){var o=4*r+a;n[s++]=o,n[s++]=o+1,n[s++]=o+4,n[s++]=o+1,n[s++]=o+5,n[s++]=o+4}t.updateMesh(0,i,n)}return t},updateRenderData:function(e){var t=e.spriteFrame;t&&(e._material._texture!==t._texture&&e._activateMaterial(),e._renderHandle.updateMaterial(0,e._material)),t&&e._vertsDirty&&(this.updateVerts(e),e._vertsDirty=!1)},updateColor:function(e,t){var i=e._renderHandle.uintVDatas[0];if(i){t=((4278190080&i[4])>>>0|16777215&t)>>>0;for(var n=i.length,s=4;s<n;s+=5)i[s]=t}},updateVerts:function(e){var t=e._renderHandle,i=t.vDatas[0],n=t.uintVDatas[0],s=e.node,r=s._color._val,a=s.width,o=s.height,l=s.anchorX*a,c=s.anchorY*o,u=e.spriteFrame,h=u.insetLeft,d=u.insetRight,_=u.insetTop,f=u.insetBottom,p=a-h-d,m=o-_-f,v=a/(h+d),g=o/(_+f),v=isNaN(v)||1<v?1:v,g=isNaN(g)||1<g?1:g,p=p<0?0:p,m=m<0?0:m;w[0].x=-l,w[0].y=-c,w[1].x=h*v-l,w[1].y=f*g-c,w[2].x=w[1].x+p,w[2].y=w[1].y+m,w[3].x=a-l,w[3].y=o-c,r=(4278190080&n[4]|(16777215&r)>>>0)>>>0;for(var y=e.spriteFrame.uvSliced,b=0;b<4;++b)for(var D=w[b],x=0;x<4;++x){var E=4*b+x,C=y[E],T=w[x],A=5*E;i[A]=T.x,i[1+A]=D.y,i[2+A]=C.u,i[3+A]=C.v,n[4+A]=r}}}},{}],14:[function(e,t,i){"use strict";var y=0;cc.Sprite._assembler.tiled={useModel:!1,vertexOffset:5,uvOffset:2,colorOffset:4,createData:function(e){return e._renderHandle},updateRenderData:function(e){var t=e._spriteFrame,i=e.node,n=e._renderHandle,s=Math.abs(i.width),r=Math.abs(i.height),a=t._rect,o=s/a.width,l=r/a.height,c=Math.ceil(l)*Math.ceil(o),u=4*c*5*4,h=6*c*2,d=u+h,_=!1,_=n.flexBuffer?n.flexBuffer.reserve(d):(n.flexBuffer=new cc.FlexBuffer(d),!0),f=n.flexBuffer.buffer;if(_||y!=c){y=c;for(var p=new Float32Array(f,0,u/4),m=new Uint16Array(f,u,h/2),v=0,g=0;v<m.length;v+=6,g+=4)m[v]=g,m[v+1]=g+1,m[v+2]=g+2,m[v+3]=g+1,m[v+4]=g+3,m[v+5]=g+2;n.updateMesh(0,p,m)}t&&(e._material._texture!==t._texture&&e._activateMaterial(),e._renderHandle.updateMaterial(0,e._material)),t&&e._vertsDirty&&(this.updateVerts(e),e._vertsDirty=!1)},updateVerts:function(e){for(var t,i,n,s,r,a,o=e._renderHandle,l=e.node,c=l._color._val,u=o.vDatas[0],h=o.uintVDatas[0],d=l.width,_=l.height,f=l.anchorX*d,p=l.anchorY*_,m=e.spriteFrame,v=m._rotated,g=m.uv,y=m._rect,b=Math.abs(l.width),D=Math.abs(l.height),x=y.width,E=y.height,C=b/x,T=D/E,A=Math.ceil(T),w=Math.ceil(C),S=this.vertexOffset,M=this.uvOffset,P=this.colorOffset,F=S,R=2*S,k=3*S,O=4*S,L=0,N=0,j=A;N<j;++N){i=Math.min(1,T-N);for(var I=0,V=w;I<V;++I){t=Math.min(1,C-I),n=Math.min(x*I,b)-f,s=Math.min(E*N,D)-p,r=Math.min(x*(I+1),b)-f,a=Math.min(E*(N+1),D)-p,u[L]=n,u[L+1]=s,u[L+S]=r,u[L+S+1]=s,u[L+R]=n,u[L+R+1]=a,u[L+k]=r,u[L+k+1]=a;var B=L+M,U=B+1;v?(u[B]=g[0],u[U]=g[1],u[B+F]=g[0],u[U+F]=g[1]+(g[7]-g[1])*t,u[B+R]=g[0]+(g[6]-g[0])*i,u[U+R]=g[1],u[B+k]=u[B+R],u[U+k]=u[U+F]):(u[B]=g[0],u[U]=g[1],u[B+F]=g[0]+(g[6]-g[0])*t,u[U+F]=g[1],u[B+R]=g[0],u[U+R]=g[1]+(g[7]-g[1])*i,u[B+k]=u[B+F],u[U+k]=u[U+R]),h[L+P]=c,h[L+P+F]=c,h[L+P+R]=c,h[L+P+k]=c,L+=O}}},updateColor:function(e,t){var i=e._renderHandle.uintVDatas[0];if(i){t=((4278190080&i[4])>>>0|16777215&t)>>>0;for(var n=i.length,s=4;s<n;s+=5)i[s]=t}}}},{}],15:[function(e,t,i){"use strict";var n=e("./fs-utils"),s=n.getUserDataPath,r=n.readJsonSync,o=n.makeDirSync,a=n.writeFileSync,c=n.copyFile,u=n.downloadFile,l=n.writeFile,h=n.deleteFile,d=n.rmdirSync,_=n.unzip,f=!1,p=null,m=!1,v=[],g=[],y=!1,b=/the maximum size of the file storage/,D=0,x=/^\w+:\/\/.*/,E={cacheDir:"gamecaches",cachedFileName:"cacheList.json",cacheEnabled:!0,autoClear:!0,cacheInterval:500,deleteInterval:500,writeFileInterval:2e3,outOfStorage:!1,tempFiles:null,cachedFiles:null,cacheQueue:{},version:"1.0",getCache:function(e){return this.cachedFiles.has(e)?this.cachedFiles.get(e).url:""},getTemp:function(e){return this.tempFiles.has(e)?this.tempFiles.get(e):""},init:function(){this.cacheDir=s()+"/"+this.cacheDir;var e=this.cacheDir+"/"+this.cachedFileName,t=r(e);t instanceof Error||!t.version?(t instanceof Error||d(this.cacheDir,!0),this.cachedFiles=new cc.AssetManager.Cache,o(this.cacheDir,!0),a(e,JSON.stringify({files:this.cachedFiles._map,version:this.version}),"utf8")):this.cachedFiles=new cc.AssetManager.Cache(t.files),this.tempFiles=new cc.AssetManager.Cache},updateLastTime:function(e){this.cachedFiles.has(e)&&(this.cachedFiles.get(e).lastTime=Date.now())},_write:function(){m=!(p=null),l(this.cacheDir+"/"+this.cachedFileName,JSON.stringify({files:this.cachedFiles._map,version:this.version}),"utf8",function(){m=!1;for(var e=0,t=g.length;e<t;e++)g[e]();g.length=0,g.push.apply(g,v),v.length=0})},writeCacheFile:function(e){p?e&&g.push(e):(p=setTimeout(this._write.bind(this),this.writeFileInterval),!0===m?e&&v.push(e):e&&g.push(e))},_cache:function(){var t=this;for(var i in this.cacheQueue){var e=function(e){if(f=!1,e){if(b.test(e.message))return t.outOfStorage=!0,void(t.autoClear&&t.clearLRU())}else t.cachedFiles.add(i,{bundle:a,url:l,lastTime:o}),delete t.cacheQueue[i],t.writeCacheFile();cc.js.isEmptyObject(t.cacheQueue)||(f=!0,setTimeout(t._cache.bind(t),t.cacheInterval))},n=this.cacheQueue[i],s=n.srcUrl,r=n.isCopy,a=n.cacheBundleRoot,o=Date.now().toString(),l="",l=a?"".concat(this.cacheDir,"/").concat(a,"/").concat(o).concat(D++).concat(cc.path.extname(i)):"".concat(this.cacheDir,"/").concat(o).concat(D++).concat(cc.path.extname(i));return void(r?c(s,l,e):u(s,l,null,e))}f=!1},cacheFile:function(e,t,i,n,s){!(i=void 0!==i?i:this.cacheEnabled)||this.cacheQueue[e]||this.cachedFiles.has(e)||(this.cacheQueue[e]={srcUrl:t,cacheBundleRoot:n,isCopy:s},f||(f=!0,this.outOfStorage?f=!1:setTimeout(this._cache.bind(this),this.cacheInterval)))},clearCache:function(){var t=this;d(this.cacheDir,!0),this.cachedFiles=new cc.AssetManager.Cache,o(this.cacheDir,!0);var e=this.cacheDir+"/"+this.cachedFileName;this.outOfStorage=!1,a(e,JSON.stringify({files:this.cachedFiles._map,version:this.version}),"utf8"),cc.assetManager.bundles.forEach(function(e){x.test(e.base)&&t.makeBundleFolder(e.name)})},clearLRU:function(){if(!y){y=!0;var i=[],n=this;if(this.cachedFiles.forEach(function(e,t){"internal"!==e.bundle&&(n._isZipFile(t)&&cc.assetManager.bundles.has(e.bundle)||i.push({originUrl:t,url:e.url,lastTime:e.lastTime}))}),i.sort(function(e,t){return e.lastTime-t.lastTime}),i.length=Math.floor(this.cachedFiles.count/3),0!==i.length){for(var e=0,t=i.length;e<t;e++)this.cachedFiles.remove(i[e].originUrl);this.writeCacheFile(function(){setTimeout(function e(){var t=i.pop();n._isZipFile(t.originUrl)?(d(t.url,!0),n._deleteFileCB()):h(t.url,n._deleteFileCB.bind(n)),0<i.length?setTimeout(e,n.deleteInterval):y=!1},n.deleteInterval)})}}},removeCache:function(e){var t,i;this.cachedFiles.has(e)&&(i=(t=this).cachedFiles.remove(e).url,this.writeCacheFile(function(){t._isZipFile(e)?(d(i,!0),t._deleteFileCB()):h(i,t._deleteFileCB.bind(t))}))},_deleteFileCB:function(e){e||(this.outOfStorage=!1)},makeBundleFolder:function(e){o(this.cacheDir+"/"+e,!0)},unzipAndCacheBundle:function(t,e,i,n){var s=Date.now().toString(),r="".concat(this.cacheDir,"/").concat(i,"/").concat(s).concat(D++),a=this;o(r,!0),_(e,r,function(e){return e?(d(r,!0),void(n&&n(e))):(a.cachedFiles.add(t,{bundle:i,url:r,lastTime:s}),a.writeCacheFile(),void(n&&n(null,r)))})},_isZipFile:function(e){return".zip"===e.slice(-4)}};cc.assetManager.cacheManager=t.exports=E},{"./fs-utils":16}],16:[function(e,t,i){"use strict";var o=loadRuntime(),s=o.getFileSystemManager?o.getFileSystemManager():null,l={fs:s,_subpackagesPath:"",getUserDataPath:function(){return loadRuntime().env.USER_DATA_PATH},checkFsValid:function(){return!!s||(console.warn("can not get the file system!"),!1)},deleteFile:function(e,t){s.unlink({filePath:e,success:function(){t&&t(null)},fail:function(e){console.warn("Delete file failed: "+e.errMsg),t&&t(new Error(e.errMsg))}})},downloadFile:function(e,t,i,n,s){var r={url:e,success:function(e){200===e.statusCode?s&&s(null,e.tempFilePath||e.filePath):(e.filePath&&l.deleteFile(e.filePath),console.warn("Download file failed: "+e.statusCode),s&&s(new Error(e.statusCode),null))},fail:function(e){console.warn("Download file failed: "+e.errMsg),s&&s(new Error(e.errMsg),null)}};t&&(r.filePath=t),i&&(r.header=i);var a=o.downloadFile(r);n&&a.onProgressUpdate(n)},saveFile:function(e,t,i){s.saveFile({tempFilePath:e,filePath:t,success:function(){i&&i(null)},fail:function(e){console.warn("Save file failed: "+e.errMsg),i&&i(new Error(e.errMsg))}})},copyFile:function(e,t,i){s.copyFile({srcPath:e,destPath:t,success:function(){i&&i(null)},fail:function(e){console.warn("Copy file failed: "+e.errMsg),i&&i(new Error(e.errMsg))}})},writeFile:function(e,t,i,n){s.writeFile({filePath:e,encoding:i,data:t,success:function(){n&&n(null)},fail:function(e){console.warn("Write file failed: "+e.errMsg),n&&n(new Error(e.errMsg))}})},writeFileSync:function(e,t,i){try{return s.writeFileSync(e,t,i),null}catch(e){return console.warn("Write file failed: "+e.message),new Error(e.message)}},readFile:function(e,t,i){s.readFile({filePath:e,encoding:t,success:function(e){i&&i(null,e.data)},fail:function(e){console.warn("Read file failed: "+e.errMsg),i&&i(new Error(e.errMsg),null)}})},readDir:function(e,t){s.readdir({dirPath:e,success:function(e){t&&t(null,e.files)},fail:function(e){console.warn("Read directory failed: "+e.errMsg),t&&t(new Error(e.errMsg),null)}})},readText:function(e,t){l.readFile(e,"utf8",t)},readArrayBuffer:function(e,t){l.readFile(e,"",t)},readJson:function(e,n){l.readFile(e,"utf8",function(t,e){var i=null;if(!t)try{i=JSON.parse(e)}catch(e){console.warn("Read json failed: "+e.message),t=new Error(e.message)}n&&n(t,i)})},readJsonSync:function(e){try{var t=s.readFileSync(e,"utf8");return JSON.parse(t)}catch(e){return console.warn("Read json failed: "+e),new Error(e)}},makeDirSync:function(e,t){try{return s.mkdirSync(e,t),null}catch(e){return console.warn("Make directory failed: "+e.message),new Error(e.message)}},rmdirSync:function(e,t){try{s.rmdirSync(e,t)}catch(e){return console.warn("rm directory failed: "+e.message),new Error(e.message)}},exists:function(e,t){s.access({path:e,success:function(){t&&t(!0)},fail:function(){t&&t(!1)}})},loadSubpackage:function(t,e,i){var n=o.loadSubpackage({name:t,success:function(){i&&i()},fail:function(e){console.warn("Load Subpackage failed: "+e.errMsg),i&&i(new Error("Failed to load subpackage ".concat(t,": ").concat(e.errMsg)))}});return e&&n.onProgressUpdate(e),n},unzip:function(e,t,i){s.unzip({zipFilePath:e,targetPath:t,success:function(){i&&i(null)},fail:function(e){i&&i(new Error("unzip failed: "+e.errMsg))}})}};cc.assetManager.fsUtils=window.fsUtils=t.exports=l},{}],17:[function(e,t,i){"use strict";e("./rt-feature-premut-alpha.js"),e("./rt-sys.js"),e("./rt_input.js"),e("./rt-game.js"),e("./rt-jsb.js"),e("./rt-videoplayer.js"),e("./jsb-node.js"),e("./jsb-audio.js"),e("./AssetManager.js"),e("./jsb-editbox.js"),CC_JSB&&CC_NATIVERENDERER&&(e("./scene/camera.js"),e("./scene/node-proxy.js"),e("./scene/render-flow.js"),e("./scene/node.js"),e("./scene/render-handle.js"),e("./scene/custom-render-handle.js"),e("./jsb-dragonbones.js"),e("./jsb-spine-skeleton.js"),e("./jsb-particle.js"),e("./scene/graphics-render-handle.js"),e("./scene/mask-render-handle.js"),cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){e("./assemblers/flex-buffer.js"),e("./assemblers/sprite/index.js"),e("./assemblers/sprite/simple.js"),e("./assemblers/sprite/sliced.js"),e("./assemblers/sprite/tiled.js"),e("./assemblers/sprite/bar-filled.js"),e("./assemblers/sprite/radial-filled.js"),e("./assemblers/label/index.js"),e("./assemblers/label/ttf.js"),e("./assemblers/label/bmfont.js"),cc.Graphics&&(e("./assemblers/graphics/impl.js"),e("./assemblers/graphics/index.js"),e("./assemblers/mask-assembler.js"))}))},{"./AssetManager.js":1,"./assemblers/flex-buffer.js":2,"./assemblers/graphics/impl.js":3,"./assemblers/graphics/index.js":4,"./assemblers/label/bmfont.js":5,"./assemblers/label/index.js":6,"./assemblers/label/ttf.js":7,"./assemblers/mask-assembler.js":8,"./assemblers/sprite/bar-filled.js":9,"./assemblers/sprite/index.js":10,"./assemblers/sprite/radial-filled.js":11,"./assemblers/sprite/simple.js":12,"./assemblers/sprite/sliced.js":13,"./assemblers/sprite/tiled.js":14,"./jsb-audio.js":18,"./jsb-dragonbones.js":19,"./jsb-editbox.js":20,"./jsb-node.js":21,"./jsb-particle.js":22,"./jsb-spine-skeleton.js":23,"./rt-feature-premut-alpha.js":24,"./rt-game.js":25,"./rt-jsb.js":26,"./rt-sys.js":27,"./rt-videoplayer.js":28,"./rt_input.js":29,"./scene/camera.js":30,"./scene/custom-render-handle.js":31,"./scene/graphics-render-handle.js":32,"./scene/mask-render-handle.js":33,"./scene/node-proxy.js":34,"./scene/node.js":35,"./scene/render-flow.js":36,"./scene/render-handle.js":37}],18:[function(e,t,i){"use strict";function n(e){return void 0===e?e=1:"string"==typeof e&&(e=Number.parseFloat(e)),e}var s,r,a,o,l=cc._Audio=function(e){this.src=e,this.volume=1,this.loop=!1,this.id=-1};s=l.prototype,(r=jsb.AudioEngine)&&((cc.audioEngine=r).setMaxWebAudioSize=function(){},l.State=r.AudioState,s.play=function(){r.stop(this.id);var e=this.src;this.id=r.play(e,this.loop,this.volume)},s.pause=function(){r.pause(this.id)},s.resume=function(){r.resume(this.id)},s.stop=function(){r.stop(this.id)},s.destroy=function(){},s.setLoop=function(e){this.loop=e,r.setLoop(this.id,e)},s.getLoop=function(){return this.loop},s.setVolume=function(e){return e=n(e),this.volume=e,r.setVolume(this.id,e)},s.getVolume=function(){return this.volume},s.setCurrentTime=function(e){r.setCurrentTime(this.id,e)},s.getCurrentTime=function(){return r.getCurrentTime(this.id)},s.getDuration=function(){return r.getDuration(this.id)},a={id:-1,clip:"",loop:!(s.getState=function(){return r.getState(this.id)}),volume:1},o={volume:1},r.play=function(e,t,i){var n;return"number"!=typeof i&&(i=1),"string"==typeof e?(cc.warnID(8401,"cc.audioEngine","cc.AudioClip","AudioClip","cc.AudioClip","audio"),n=e):e.loaded?n=e.nativeUrl:(e._nativeAsset=n=e.nativeUrl,e.loaded=!0),r.play2d(n,t,i)},r.playMusic=function(e,t){return r.stop(a.id),a.id=r.play(e,t,a.volume),a.loop=t,a.clip=e,a.id},r.stopMusic=function(){r.stop(a.id)},r.pauseMusic=function(){return r.pause(a.id),a.id},r.resumeMusic=function(){return r.resume(a.id),a.id},r.getMusicVolume=function(){return a.volume},r.setMusicVolume=function(e){return a.volume=n(e),r.setVolume(a.id,a.volume),e},r.isMusicPlaying=function(){return r.getState(a.id)===r.AudioState.PLAYING},r.playEffect=function(e,t){return r.play(e,t||!1,o.volume)},r.setEffectsVolume=function(e){o.volume=n(e)},r.getEffectsVolume=function(){return o.volume},r.pauseEffect=function(e){return r.pause(e)},r.pauseAllEffects=function(){var e=r.getState(a.id)===r.AudioState.PLAYING;r.pauseAll(),e&&r.resume(a.id)},r.resumeEffect=function(e){r.resume(e)},r.resumeAllEffects=function(){var e=r.getState(a.id)===r.AudioState.PAUSED;r.resumeAll(),e&&r.getState(a.id)===r.AudioState.PLAYING&&r.pause(a.id)},r.stopEffect=function(e){return r.stop(e)},r.stopAllEffects=function(){var e=r.getState(a.id)===r.AudioState.PLAYING,t=r.getCurrentTime(a.id);r.stopAll(),e&&(a.id=r.play(a.clip,a.loop),r.setCurrentTime(a.id,t))},r._break=function(){},r._restore=function(){},r._uncache=r.uncache,r.uncache=function(e){var t;if("string"==typeof e)cc.warnID(8401,"cc.audioEngine","cc.AudioClip","AudioClip","cc.AudioClip","audio"),t=e;else{if(!e)return;t=e._nativeAsset}r._uncache(t)},r._preload=r.preload,r.preload=function(e,t){cc.warn("`cc.audioEngine.preload` is deprecated, use `cc.assetManager.loadRes(url, cc.AudioClip)` instead please."),r._preload(e,t)})},{}],19:[function(e,t,i){"use strict";var s,u,h,d,n,r,a,o,l,c,_,f,p,m,v,g,y,b,D,x;void 0!==window.dragonBones&&void 0!==window.middleware&&void 0!==dragonBones.DragonBonesAtlasAsset&&(s=cc.renderer.renderEngine.SpriteMaterial,u=cc.color(0,0,255,255),h=cc.color(255,0,0,255),d=cc.color(0,255,0,255),dragonBones.EventObject.START="start",dragonBones.EventObject.LOOP_COMPLETE="loopComplete",dragonBones.EventObject.COMPLETE="complete",dragonBones.EventObject.FADE_IN="fadeIn",dragonBones.EventObject.FADE_IN_COMPLETE="fadeInComplete",dragonBones.EventObject.FADE_OUT="fadeOut",dragonBones.EventObject.FADE_OUT_COMPLETE="fadeOutComplete",dragonBones.EventObject.FRAME_EVENT="frameEvent",dragonBones.EventObject.SOUND_EVENT="soundEvent",dragonBones.DragonBones={ANGLE_TO_RADIAN:Math.PI/180,RADIAN_TO_ANGLE:180/Math.PI},dragonBones.CCFactory.prototype.createArmatureNode=function(e,t,i){var n=(n=(i=i||new cc.Node).getComponent(dragonBones.ArmatureDisplay))||i.addComponent(dragonBones.ArmatureDisplay);return i.name=t,n._armatureName=t,n._N$dragonAsset=e.dragonAsset,n._N$dragonAtlasAsset=e.dragonAtlasAsset,n._init(),n},n=dragonBones.Armature.prototype,Object.defineProperty(n,"animation",{get:function(){return this.getAnimation()}}),Object.defineProperty(n,"display",{get:function(){return this.getDisplay()}}),Object.defineProperty(n,"name",{get:function(){return this.getName()}}),n.addEventListener=function(e,t,i){this.__persistentDisplay__||(this.__persistentDisplay__=this.getDisplay()),this.__persistentDisplay__.on(e,t,i)},n.removeEventListener=function(e,t,i){this.__persistentDisplay__||(this.__persistentDisplay__=this.getDisplay()),this.__persistentDisplay__.off(e,t,i)},r=dragonBones.CCArmatureDisplay.prototype,Object.defineProperty(r,"node",{get:function(){return this}}),r.getRootNode=function(){var e=this.getRootDisplay();return e&&e._ccNode},r.convertToWorldSpace=function(e){var t=this.convertToRootSpace(e),i=this.getRootNode();return i?i.convertToWorldSpace(t):t},r.initEvent=function(){this._eventTarget||(this._eventTarget=new cc.EventTarget,this.setDBEventCallback(function(e){this._eventTarget.emit(e.type,e)}))},r.on=function(e,t,i){this.initEvent(),this._eventTarget.on(e,t,i),this.addDBEventListener(e,t)},r.off=function(e,t,i){this.initEvent(),this._eventTarget.off(e,t,i),this.removeDBEventListener(e,t)},a=dragonBones.Slot.prototype,Object.defineProperty(a,"childArmature",{get:function(){return this.getChildArmature()},set:function(e){this.setChildArmature(e)}}),Object.defineProperty(a,"display",{get:function(){return this.getDisplay()}}),Object.defineProperty(a,"name",{get:function(){return this.getName()}}),o=dragonBones.TransformObject.prototype,Object.defineProperty(o,"global",{get:function(){return this.getGlobal()}}),Object.defineProperty(o,"origin",{get:function(){return this.getOrigin()}}),Object.defineProperty(o,"offset",{get:function(){return this.getOffset()}}),l=dragonBones.DragonBonesAtlasAsset.prototype,c=0,_={},f=new WeakMap,p={},m=l.reset,l.reset=function(){m.call(this),this.recordTexture()},l.recordTexture=function(){var e;this._texture&&this._oldTexture!==this._texture&&(e=_[c]={key:c},f.set(e,this._texture),this._oldTexture=this._texture,this._texture.__textureIndex__=c,c++)},l.getTextureByIndex=function(e){var t=_[e];if(t)return f.get(t)},l.buildMaterial=function(e){this._material=this._material||new s,this._materialCache=this._materialCache||{};var t=this._material,i=this._materialCache,n=void 0;return(n=i[t._hash]?t.clone():t).useModel=!0,n.texture=e,n.useColor=!1,n.updateHash(),i[n._hash]=n},l.updateTextureAtlasData=function(e){var t,i=this._texture.url,n=p[i];if(n){t=n.index,this._textureAtlasData=e.getTextureAtlasDataByIndex(n.name,t);var s=_[n.index];if(f.set(s,this._texture),this._texture.__textureIndex__=t,this._textureAtlasData)return}else this.recordTexture();t=this._texture.__textureIndex__,this.jsbTexture=new middleware.Texture2D,this.jsbTexture.setRealTextureIndex(t),this.jsbTexture.setPixelsWide(this._texture.width),this.jsbTexture.setPixelsHigh(this._texture.height),this._textureAtlasData=e.parseTextureAtlasData(this.atlasJson,this.jsbTexture);var r=this.buildMaterial(this._texture).effect._nativeObj;this.jsbTexture.setNativeEffect(r),this.jsbTexture.setNativeTexture(this._texture.getImpl()),p[i]={name:this._textureAtlasData.name,index:t}},l.init=function(e){this._textureAtlasData?e.addTextureAtlasData(this._textureAtlasData):this.updateTextureAtlasData(e)},(v=dragonBones.DragonBonesAsset.prototype).init=function(e){var t;this._factory=e,this._dragonBonesData?this._factory.getDragonBonesData(this._dragonBonesData.name)||this._factory.addDragonBonesData(this._dragonBonesData):this.dragonBonesJson?this.initWithRawData(this.dragonBonesJson,!1):(t=cc.loader.md5Pipe?cc.loader.md5Pipe.transformURL(this.nativeUrl,!0):this.nativeUrl,this.initWithRawData(t,!0))},v.initWithRawData=function(e,t){var i=this._factory.parseDragonBonesDataOnly(e),n=this._factory.getDragonBonesData(i.name);n?this._dragonBonesData=n:(this._dragonBonesData=i,this._factory.handleTextureAtlasData(t),this._factory.addDragonBonesData(i))},dragonBones.ArmatureDisplay._assembler=void 0,g=dragonBones.ArmatureDisplay.prototype,y=cc.RenderComponent.prototype,b=cc.RenderFlow,Object.defineProperty(g,"armatureName",{get:function(){return this._armatureName},set:function(e){this._armatureName=e;var t=this.getAnimationNames(this._armatureName);(!this.animationName||t.indexOf(this.animationName)<0)&&(this.animationName=""),this._armature&&(this._armature.dispose(),this._armature=null),this._nativeDisplay=null,this._refresh()},visible:!1}),Object.defineProperty(g,"debugBones",{get:function(){return this._debugBones||!1},set:function(e){this._debugBones=e,this._initDebugDraw(),this._nativeDisplay&&this._nativeDisplay.setDebugBonesEnabled(this._debugBones)}}),Object.defineProperty(g,"premultipliedAlpha",{get:function(){return void 0!==this._premultipliedAlpha&&this._premultipliedAlpha},set:function(e){this._premultipliedAlpha=e,this._nativeDisplay&&this._nativeDisplay.setOpacityModifyRGB(this._premultipliedAlpha)}}),g._clearRenderData=function(){this._nativeDisplay=void 0},g.initNativeHandle=function(){this._assembler=void 0,this._renderHandle=new middleware.MiddlewareRenderHandle,this._renderHandle.bind(this)},g._buildArmature=function(){var e;this.dragonAsset&&this.dragonAtlasAsset&&this.armatureName?(e=this.dragonAtlasAsset._textureAtlasData.name,this._nativeDisplay=this._factory.buildArmatureDisplay(this.armatureName,this.dragonAsset._dragonBonesData.name,"",e),this._nativeDisplay?(this._nativeDisplay._ccNode=this.node,(this._nativeDisplay._comp=this)._nativeDisplay.bindNodeProxy(this.node._proxy),this._nativeDisplay.setOpacityModifyRGB(this.premultipliedAlpha),this._nativeDisplay.setDebugBonesEnabled(this.debugBones),this._armature=this._nativeDisplay.armature(),this._armature.animation.timeScale=this.timeScale,this.animationName&&this.playAnimation(this.animationName,this.playTimes)):this._clearRenderData()):this._clearRenderData()},g.update=function(){if(this._debugDraw&&this.debugBones){var e=this._nativeDisplay;if(this._debugData=this._debugData||e.getDebugData(),!this._debugData)return;var t=this._debugDraw;t.clear();var i=this._debugData,n=0;t.lineWidth=5,t.strokeColor=h,t.fillColor=u;for(var s=i[n++],r=0;r<s;r+=4){var a=i[n++],o=i[n++],l=i[n++],c=i[n++];t.moveTo(a,o),t.lineTo(l,c),t.stroke(),t.circle(a,o,2*Math.PI),t.fill(),0===r&&(t.fillColor=d)}}},g.onEnable=function(){y.onEnable.call(this),this._armature&&this._factory.add(this._armature),this.node._renderFlag&=~b.FLAG_UPDATE_RENDER_DATA,this.node._renderFlag&=~b.FLAG_RENDER,this.node._renderFlag&=~b.FLAG_CUSTOM_IA_RENDER},g.onDisable=function(){y.onDisable.call(this),this._armature&&this._factory.remove(this._armature)},D=g.onLoad,g.onLoad=function(){D&&D.call(this)},g.addEventListener=function(e,t,i){this._nativeDisplay&&this._nativeDisplay.on(e,t,i)},g.removeEventListener=function(e,t,i){this._nativeDisplay&&this._nativeDisplay.off(e,t,i)},x=g.onDestroy,g.onDestroy=function(){x.call(this),this._nativeDisplay&&(this._nativeDisplay._comp=void 0,this._nativeDisplay=void 0),this._materialCache=void 0})},{}],20:[function(e,t,i){"use strict";function n(){c.call(this),this._eventListeners={onKeyboardInput:null,onKeyboardConfirm:null,onKeyboardComplete:null}}var s,r,a,o,l,c;cc&&cc.EditBox&&(s=loadRuntime(),r=cc.EditBox,a=cc.js,o=r.KeyboardReturnType,l=null,c=r._ImplClass,a.extend(n,c),r._ImplClass=n,Object.assign(n.prototype,{init:function(e){e?this._delegate=e:cc.error("EditBox init failed")},beginEditing:function(){var e;l!==this&&(e=this._delegate,l?(l._eventListeners.onKeyboardComplete(),s.updateKeyboard&&s.updateKeyboard({value:e._string})):this._showKeyboard(),this._registerKeyboardEvent(),this._editing=!0,l=this,e.editBoxEditingDidBegan())},endEditing:function(){this._hideKeyboard();var e=this._eventListeners;e.onKeyboardComplete&&e.onKeyboardComplete()},_registerKeyboardEvent:function(){var i=this,n=this._delegate,e=this._eventListeners;e.onKeyboardInput=function(e){n._string!==e.value&&n.editBoxTextChanged(e.value)},e.onKeyboardConfirm=function(e){n.editBoxEditingReturn();var t=i._eventListeners;t.onKeyboardComplete&&t.onKeyboardComplete()},e.onKeyboardComplete=function(){i._editing=!1,l=null,i._unregisterKeyboardEvent(),n.editBoxEditingDidEnded()},s.onKeyboardInput(e.onKeyboardInput),s.onKeyboardConfirm(e.onKeyboardConfirm),s.onKeyboardComplete(e.onKeyboardComplete)},_unregisterKeyboardEvent:function(){var e=this._eventListeners;e.onKeyboardInput&&(s.offKeyboardInput(e.onKeyboardInput),e.onKeyboardInput=null),e.onKeyboardConfirm&&(s.offKeyboardConfirm(e.onKeyboardConfirm),e.onKeyboardConfirm=null),e.onKeyboardComplete&&(s.offKeyboardComplete(e.onKeyboardComplete),e.onKeyboardComplete=null)},_showKeyboard:function(){var e=this._delegate,t=e.inputMode===r.InputMode.ANY,i=e.maxLength<0?65535:e.maxLength;s.showKeyboard({defaultValue:e._string,maxLength:i,multiple:t,confirmHold:!1,confirmType:function(e){switch(e){case o.DEFAULT:case o.DONE:return"done";case o.SEND:return"send";case o.SEARCH:return"search";case o.GO:return"go";case o.NEXT:return"next"}return"done"}(e.returnType),success:function(){},fail:function(e){cc.warn(e.errMsg)}})},_hideKeyboard:function(){s.hideKeyboard({success:function(){},fail:function(e){cc.warn(e.errMsg)}})}}))},{}],21:[function(e,t,i){"use strict";new Float32Array(16);var n=new cc.Mat4;cc.Node.prototype.getWorldRTInAB=function(){return this.getWorldRT(n),n.m},cc.Node.prototype.getWorldMatrixInAB=function(){return this._updateWorldMatrix(),this._worldMatrix.m}},{}],22:[function(e,t,i){"use strict";var n,s,r,a,o,l,c;void 0===window.middleware||void 0!==(n=cc.ParticleSystem)&&(s=n.prototype,n._assembler=void 0,r=cc.renderer.renderEngine,s.initProperties=function(){for(var e in this._simulator=new middleware.ParticleSimulator,this._previewTimer=null,this._focused=!1,this._texture=null,this._renderData=null,(this._simulator.__particleSystem__=this)._simulator.setFinishedCallback(function(){this.__particleSystem__._finishedSimulation()}),this._simulator.setStopCallback(function(){this.__particleSystem__.stopSystem()}),c){this[c[e]]}var t=["gravity","sourcePos","posVar","startColor","startColorVar","endColor","endColorVar"];for(var e in t){this[t[e]]}},Object.defineProperty(s,"gravity",{get:function(){return this._gravity||(this._gravity=cc.v2(0,0)),this._gravity},set:function(e){e&&(this._gravity||(this._gravity=cc.v2(0,0)),this.gravity.x=e.x,this.gravity.y=e.y,this._simulator&&this._simulator.setGravity(e.x,e.y,0))}}),Object.defineProperty(s,"sourcePos",{get:function(){return this._sourcePos||(this._sourcePos=cc.v2(0,0)),this._sourcePos},set:function(e){e&&(this._sourcePos||(this._sourcePos=cc.v2(0,0)),this._sourcePos.x=e.x,this._sourcePos.y=e.y,this._simulator&&this._simulator.setSourcePos(e.x,e.y,0))}}),Object.defineProperty(s,"posVar",{get:function(){return this._posVar||(this._posVar=cc.v2(0,0)),this._posVar},set:function(e){e&&(this._posVar||(this._posVar=cc.v2(0,0)),this._posVar.x=e.x,this._posVar.y=e.y,this._simulator&&this._simulator.setPosVar(e.x,e.y,0))}}),Object.defineProperty(s,"startColor",{get:function(){return this._startColor||(this._startColor=cc.color(255,255,255,255)),this._startColor},set:function(e){e&&(this._startColor||(this._startColor=cc.color(255,255,255,255)),this._startColor.r=e.r,this._startColor.g=e.g,this._startColor.b=e.b,this._startColor.a=e.a,this._simulator&&this._simulator.setStartColor(e.r,e.g,e.b,e.a))}}),Object.defineProperty(s,"startColorVar",{get:function(){return this._startColorVar||(this._startColorVar=cc.color(0,0,0,0)),this._startColorVar},set:function(e){e&&(this._startColorVar||(this._startColorVar=cc.color(0,0,0,0)),this._startColorVar.r=e.r,this._startColorVar.g=e.g,this._startColorVar.b=e.b,this._startColorVar.a=e.a,this._simulator&&this._simulator.setStartColorVar(e.r,e.g,e.b,e.a))}}),Object.defineProperty(s,"endColor",{get:function(){return this._endColor||(this._endColor=cc.color(255,255,255,0)),this._endColor},set:function(e){e&&(this._endColor||(this._endColor=cc.color(255,255,255,0)),this._endColor.r=e.r,this._endColor.g=e.g,this._endColor.b=e.b,this._endColor.a=e.a,this._simulator&&this._simulator.setEndColor(e.r,e.g,e.b,e.a))}}),Object.defineProperty(s,"endColorVar",{get:function(){return this._endColorVar||(this._endColorVar=cc.color(0,0,0,0)),this._endColorVar},set:function(e){e&&(this._endColorVar||(this._endColorVar=cc.color(0,0,0,0)),this._endColorVar.r=e.r,this._endColorVar.g=e.g,this._endColorVar.b=e.b,this._endColorVar.a=e.a,this._simulator&&this._simulator.setEndColorVar(e.r,e.g,e.b,e.a))}}),Object.defineProperty(s,"particleCount",{get:function(){return this._simulator?this._simulator.getParticleCount():0}}),Object.defineProperty(s,"active",{get:function(){return!!this._simulator&&this._simulator.active()}}),s.onLoad=function(){this._simulator.bindNodeProxy(this.node._proxy)},s.update=void 0,s.initNativeHandle=function(){this._assembler=void 0,this._renderHandle=new middleware.MiddlewareRenderHandle,this._renderHandle.bind(this)},a=s.onEnable,s.onEnable=function(){a.call(this),this._simulator&&this._simulator.onEnable()},o=s.onDisable,s.onDisable=function(){o.call(this),this._simulator&&this._simulator.onDisable()},s._onTextureLoaded=function(){this._texture=this._renderSpriteFrame.getTexture(),this._simulator.updateUVs(this._renderSpriteFrame.uv),this._activateMaterial()},s._activateMaterial=function(){this._material||(this._material=new r.SpriteMaterial,this._material.useTexture=!0,this._material.useModel=!0,this._material.useColor=!1,this._simulator.setNativeEffect(this._material.effect._nativeObj)),this._texture&&this._texture.loaded?(this.markForRender(!0),this._simulator.onEnable(),this._material.texture=this._texture,this._updateMaterial(this._material)):(this._simulator.onDisable(),this.markForRender(!1),this._renderSpriteFrame&&this._applySpriteFrame())},l=s._applyFile,s._applyFile=function(){l.call(this),this._simulator.setGravity(this._gravity.x,this._gravity.y,0),this._simulator.setSourcePos(this._sourcePos.x,this._sourcePos.y,0),this._simulator.setPosVar(this._posVar.x,this._posVar.y,0),this._simulator.setStartColor(this._startColor.r,this._startColor.g,this._startColor.b,this._startColor.a),this._simulator.setStartColorVar(this._startColorVar.r,this._startColorVar.g,this._startColorVar.b,this._startColorVar.a),this._simulator.setEndColor(this._endColor.r,this._endColor.g,this._endColor.b,this._endColor.a),this._simulator.setEndColorVar(this._endColorVar.r,this._endColorVar.g,this._endColorVar.b,this._endColorVar.a)},(c=["positionType","emissionRate","totalParticles","duration","emitterMode","life","lifeVar","startSize","startSizeVar","endSize","endSizeVar","startSpin","startSpinVar","endSpin","endSpinVar","angle","angleVar","speed","speedVar","radialAccel","radialAccelVar","tangentialAccel","tangentialAccelVar","rotationIsDir","startRadius","startRadiusVar","endRadius","endRadiusVar","rotatePerS","rotatePerSVar"]).forEach(function(t){var i="_"+t;Object.defineProperty(s,t,{get:function(){return void 0===this[i]&&(this[i]=0),this[i]},set:function(e){this[i]=e,this._simulator&&(this._simulator[t]=e)}})}))},{}],23:[function(e,t,i){"use strict";var n,_,f,p,s,r,a,o,l,c;void 0!==window.sp&&void 0!==window.spine&&void 0!==window.middleware&&(n=cc.RenderFlow,_=cc.color(0,0,255,255),f=cc.color(255,0,0,255),p=cc.color(0,255,0,255),sp.ANIMATION_EVENT_TYPE={START:0,INTERRUPT:1,END:2,DISPOSE:3,COMPLETE:4,EVENT:5},(s=spine.SpineAnimation.prototype).setCompleteListener=function(e){this._compeleteListener=e,this.setCompleteListenerNative(function(e){var t=Math.floor(e.trackTime/e.animationEnd);this._compeleteListener(e,t)})},s.setAnimationListener=function(e,t){this._target=e,this._callback=t,this.setStartListener(function(e){this._target&&this._callback&&this._callback.call(this._target,this,e,sp.ANIMATION_EVENT_TYPE.START,null,0)}),this.setInterruptListener(function(e){this._target&&this._callback&&this._callback.call(this._target,this,e,sp.ANIMATION_EVENT_TYPE.INTERRUPT,null,0)}),this.setEndListener(function(e){this._target&&this._callback&&this._callback.call(this._target,this,e,sp.ANIMATION_EVENT_TYPE.END,null,0)}),this.setDisposeListener(function(e){this._target&&this._callback&&this._callback.call(this._target,this,e,sp.ANIMATION_EVENT_TYPE.DISPOSE,null,0)}),this.setCompleteListener(function(e,t){this._target&&this._callback&&this._callback.call(this._target,this,e,sp.ANIMATION_EVENT_TYPE.COMPLETE,null,t)}),this.setEventListener(function(e,t){this._target&&this._callback&&this._callback.call(this._target,this,e,sp.ANIMATION_EVENT_TYPE.EVENT,t,0)})},sp.Skeleton._assembler=void 0,r=sp.Skeleton.prototype,Object.defineProperty(r,"paused",{get:function(){return this._paused||!1},set:function(e){this._paused=e,this._skeleton&&this._skeleton.paused(e)}}),Object.defineProperty(r,"debugSlots",{get:function(){return this._debugSlots||!1},set:function(e){this._debugSlots=e,this._initDebugDraw(),this._skeleton&&this._skeleton.setDebugSlotsEnabled(this._debugSlots)}}),Object.defineProperty(r,"debugBones",{get:function(){return this._debugBones||!1},set:function(e){this._debugBones=e,this._initDebugDraw(),this._skeleton&&this._skeleton.setDebugBonesEnabled(this._debugBones)}}),Object.defineProperty(r,"premultipliedAlpha",{get:function(){return void 0===this._premultipliedAlpha||this._premultipliedAlpha},set:function(e){this._premultipliedAlpha=e,this._skeleton&&this._skeleton.setOpacityModifyRGB(this._premultipliedAlpha)}}),Object.defineProperty(r,"timeScale",{get:function(){return this._timeScale||1},set:function(e){this._timeScale=e,this._skeleton&&this._skeleton.setTimeScale(this._timeScale)}}),a=r.onLoad,r.onLoad=function(){a&&a.call(this)},r.initNativeHandle=function(){this._assembler=void 0,this._renderHandle=new middleware.MiddlewareRenderHandle,this._renderHandle.bind(this)},r.buildMaterial=function(e){this._material=this._material||new SpriteMaterial,this._materials=this._materials||{};var t=this._material,i=this._materials,n=void 0;return(n=i[t._hash]?t.clone():t).useModel=!0,n.texture=e,n.useColor=!1,n.updateHash(),i[n._hash]=n},r.setSkeletonData=function(e){if(null!=e.width&&null!=e.height&&this.node.setContentSize(e.width,e.height),e._uuid){var t=cc.loader.md5Pipe?cc.loader.md5Pipe.transformURL(e.nativeUrl,!0):e.nativeUrl,i=e.atlasText;if(i){var r=e.textures,n=e.textureNames;if(r&&0<r.length&&n&&0<n.length){for(var s={},a=0;a<r.length;++a){var o=new middleware.Texture2D,l=r[a];o.setRealTextureIndex(a),o.setPixelsWide(l.width),o.setPixelsHigh(l.height),o.setTexParamCallback(function(e,t,i,n,s){r[e].setFilters(t,i),r[e].setWrapMode(n,s)}.bind(this));var c=this.buildMaterial(l).effect._nativeObj;o.setNativeEffect(c),o.setNativeTexture(l.getImpl()),s[n[a]]=o}var u=new spine.SpineAnimation;try{spine._initSkeletonRenderer(u,t,i,s,e.scale)}catch(e){return void cc._throw(e)}this._skeleton=u,this._skeletonTextures=s,(this._skeleton._comp=this)._skeleton.setOpacityModifyRGB(this.premultipliedAlpha),this._skeleton.setDebugSlotsEnabled(this.debugSlots),this._skeleton.setDebugBonesEnabled(this.debugBones),this._skeleton.bindNodeProxy(this.node._proxy),this._startListener&&this.setStartListener(this._startListener),this._endListener&&this.setEndListener(this._endListener),this._completeListener&&this.setCompleteListener(this._completeListener),this._eventListener&&this.setEventListener(this._eventListener),this._interruptListener&&this.setInterruptListener(this._interruptListener),this._disposeListener&&this.setDisposeListener(this._disposeListener)}else cc.errorID(7507,e.name)}else cc.errorID(7508,e.name)}else cc.errorID(7504)},r.setAnimationStateData=function(e){if(this._skeleton)return this._skeleton.setAnimationStateData(e)},o=r.onEnable,r.onEnable=function(){o.call(this),this._skeleton&&this._skeleton.onEnable(),this.node._renderFlag&=~n.FLAG_UPDATE_RENDER_DATA,this.node._renderFlag&=~n.FLAG_RENDER,this.node._renderFlag&=~n.FLAG_CUSTOM_IA_RENDER},l=r.onDisable,r.onDisable=function(){l.call(this),this._skeleton&&this._skeleton.onDisable()},r.update=function(e){if(!this.paused){var t=this._skeleton;if(t){var i=this.node;if(i&&(void 0!==this.__preColor__&&i.color.equals(this.__preColor__)||(t.setColor(i.color),this.__preColor__=i.color),this.debugBones||this.debugSlots)){var n=this._debugData||this._skeleton.getDebugData();if(!n)return;var s=this._debugRenderer;s.clear();var r=0;if(this.debugSlots){s.strokeColor=_,s.lineWidth=5;for(var a=n[r++],o=0;o<a;o+=8)s.moveTo(n[r++],n[r++]),s.lineTo(n[r++],n[r++]),s.lineTo(n[r++],n[r++]),s.lineTo(n[r++],n[r++]),s.close(),s.stroke()}if(this.debugBones){s.lineWidth=5,s.strokeColor=f,s.fillColor=_;for(var l=n[r++],o=0;o<l;o+=4){var c=n[r++],u=n[r++],h=n[r++],d=n[r++];s.moveTo(c,u),s.lineTo(h,d),s.stroke(),s.circle(c,u,2*Math.PI),s.fill(),0===o&&(s.fillColor=p)}}}}}},r.updateWorldTransform=function(){this._skeleton&&this._skeleton.updateWorldTransform()},r.setToSetupPose=function(){this._skeleton&&this._skeleton.setToSetupPose()},r.setBonesToSetupPose=function(){this._skeleton&&this._skeleton.setBonesToSetupPose()},r.setSlotsToSetupPose=function(){this._skeleton&&this._skeleton.setSlotsToSetupPose()},r.findBone=function(e){return this._skeleton?this._skeleton.findBone(e):null},r.findSlot=function(e){return this._skeleton?this._skeleton.findSlot(e):null},r.setSkin=function(e){return this._skeleton?this._skeleton.setSkin(e):null},r.getAttachment=function(e,t){return this._skeleton?this._skeleton.getAttachment(e,t):null},r.setAttachment=function(e,t){this._skeleton&&this._skeleton.setAttachment(e,t)},r.getTextureAtlas=function(e){return cc.warn("sp.Skeleton getTextureAtlas not support in native"),null},r.setMix=function(e,t,i){this._skeleton&&this._skeleton.setMix(e,t,i)},r.setAnimation=function(e,t,i){return this._skeleton?this._skeleton.setAnimation(e,t,i):null},r.addAnimation=function(e,t,i,n){return this._skeleton?(n=n||0,this._skeleton.addAnimation(e,t,i,n)):null},r.findAnimation=function(e){return this._skeleton?this._skeleton.findAnimation(e):null},r.getCurrent=function(e){return this._skeleton?this._skeleton.getCurrent(e):null},r.clearTracks=function(){this._skeleton&&this._skeleton.clearTracks()},r.clearTrack=function(e){this._skeleton&&this._skeleton.clearTrack(e)},r.setStartListener=function(e){this._startListener=e,this._skeleton&&this._skeleton.setStartListener(e)},r.setInterruptListener=function(e){this._interruptListener=e,this._skeleton&&this._skeleton.setInterruptListener(e)},r.setEndListener=function(e){this._endListener=e,this._skeleton&&this._skeleton.setEndListener(e)},r.setDisposeListener=function(e){this._disposeListener=e,this._skeleton&&this._skeleton.setDisposeListener(e)},r.setCompleteListener=function(e){this._completeListener=e,this._skeleton&&this._skeleton.setCompleteListener(e)},r.setEventListener=function(e){this._eventListener=e,this._skeleton&&this._skeleton.setEventListener(e)},r.setTrackStartListener=function(e,t){this._skeleton&&this._skeleton.setTrackStartListener(e,t)},r.setTrackInterruptListener=function(e,t){this._skeleton&&this._skeleton.setTrackInterruptListener(e,t)},r.setTrackEndListener=function(e,t){this._skeleton&&this._skeleton.setTrackEndListener(e,t)},r.setTrackDisposeListener=function(e,t){this._skeleton&&this._skeleton.setTrackDisposeListener(e,t)},r.setTrackCompleteListener=function(e,t){this._skeleton&&this._skeleton.setTrackCompleteListener(e,t)},r.setTrackEventListener=function(e,t){this._skeleton&&this._skeleton.setTrackEventListener(e,t)},r.getState=function(){if(this._skeleton)return this._skeleton.getState()},r._ensureListener=function(){cc.warn("sp.Skeleton _ensureListener not need in native")},r._updateSkeletonData=function(){this.skeletonData&&(this.setSkeletonData(this.skeletonData),this.defaultSkin&&this._skeleton.setSkin(this.defaultSkin),this.animation=this.defaultAnimation)},c=r.onDestroy,r.onDestroy=function(){c.call(this),this._skeletonTextures=void 0,this._skeleton&&(this._skeleton.stopSchedule(),this._skeleton._comp=void 0,this._skeleton=void 0),this._materials=void 0})},{}],24:[function(e,t,i){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return(e=Math.round(e))<0?0:e<255?e:255}function n(){var e=loadRuntime();if("object"!=l(e))return console.error("not runtime platform"),"break";if("object"!==("undefined"==typeof cc?"undefined":l(cc)))return console.error("can not get cocos creator version"),"break";var t=cc.ENGINE_VERSION,i=+"2.0.9".replace(/[a-zA-Z]/g,function(e,t){return e.charCodeAt()}).replace(/[^\d]/g,"")<=+t.replace(/[a-zA-Z]/g,function(e,t){return e.charCodeAt()}).replace(/[^\d]/g,""),n="function"==typeof e.getFeature&&"function"==typeof e.setFeature,s="canvas.context2d.premultiply_image_data",r=!1;if(!i&&!n)return"break";if(i||(r=!0),n&&(e.setFeature(s,r),e.getFeature(s)===r))return"break";var a=Object.getOwnPropertyDescriptor(HTMLCanvasElement.prototype,"_data"),o=void 0;"object"===l(a)&&(o=a.get),delete HTMLCanvasElement.prototype._data,Object.defineProperty(HTMLCanvasElement.prototype,"_data",{get:function(){var e="function"==typeof o?o.bind(this)():this._dataInner;return null===e?null:(!0===e._premultHandled||(function(e,t){var i;if(t)for(var n=0,s=e._data.length;n<s;n+=4)0<(i=e._data[n+3]/255)&&i<255&&(e._data[n+0]=clamp(e._data[n+0]*i),e._data[n+1]=clamp(e._data[n+1]*i),e._data[n+2]=clamp(e._data[n+2]*i));else for(var r=0,a=e._data.length;r<a;r+=4)0<(i=255/e._data[r+3])&&i<255&&(e._data[r+0]=c(e._data[r+0]*i),e._data[r+1]=c(e._data[r+1]*i),e._data[r+2]=c(e._data[r+2]*i))}(e,r),e._premultHandled=!0),e)},set:function(e){this._dataInner=e}})}do{if("break"===n())break}while(0)},{}],25:[function(e,t,i){"use strict";var n=loadRuntime();cc.game.restart=function(){cc.sys.restartVM()},n.onHide(function(){cc.game.emit(cc.game.EVENT_HIDE)}),n.onShow(function(){cc.game.emit(cc.game.EVENT_SHOW)}),n.onWindowResize&&n.onWindowResize(function(){cc.game.canvas&&cc.view.setCanvasSize(window.innerWidth,window.innerHeight)})},{}],26:[function(e,t,i){"use strict";var o=loadRuntime(),l=o.getFileSystemManager();jsb.fileUtils={isFileExist:function(e){var t=!1;try{l.accessSync(e),t=!0}catch(e){}return t},getStringFromFile:function(e){var t;try{t=l.readFileSync(e,"utf8")}catch(e){}return t},getDataFromFile:function(e){var t;try{t=l.readFileSync(e)}catch(e){}return t},getWritablePath:function(){return"".concat(o.env.USER_DATA_PATH,"/")},writeToFile:function(e,t){var i=JSON.stringify(e),n=!1;try{l.writeFileSync(t,i,"utf8"),n=!0}catch(e){}return n},getValueMapFromFile:function(e){var t,i={};try{t=l.readFileSync(e,"utf8")}catch(e){}return t?i=JSON.parse(t):i}},void 0===jsb.saveImageData&&(jsb.saveImageData=function(e,t,i,n){var s=n.lastIndexOf(".");if(-1===s)return!1;var r=n.substr(s+1),a=o.saveImageTempSync({data:e,width:t,height:i,fileType:r});return""!==a&&l.saveFileSync(a,n)===n}),void 0===jsb.setPreferredFramesPerSecond&&(void 0!==o.setPreferredFramesPerSecond?jsb.setPreferredFramesPerSecond=o.setPreferredFramesPerSecond:jsb.setPreferredFramesPerSecond=function(){console.error("The jsb.setPreferredFramesPerSecond is not define!")}),jsb.AudioEngine=o.AudioEngine;var r=new WeakMap;jsb.Downloader=function(){r.set(this,{_successCb:void 0,_errorCb:void 0})},jsb.Downloader.prototype={constructor:jsb.Downloader,setOnFileTaskSuccess:function(e){r.get(this)._successCb=e},setOnTaskError:function(e){r.get(this)._errorCb=e},createDownloadFileTask:function(i,n){var s=this;o.downloadFile({url:i,filePath:n,success:function(){var e=r.get(s)._successCb;"function"==typeof e&&e({requestURL:i,storagePath:n})},fail:function(e){var t=r.get(s)._errorCb;"function"==typeof t&&t({requestURL:i,storagePath:n},e.errCode,e.statusCode,e.errMsg)},complete:function(){}})}}},{}],27:[function(e,t,i){"use strict";var n,s=cc.sys;"function"==typeof loadRuntime&&(n=loadRuntime(),s.getNetworkType=n.getNetworkType,s.getBatteryLevel=n.getBatteryLevel,s.garbageCollect=n.triggerGC),s.restartVM=function(){console.error("The restartVM is not define!")},s.isObjectValid=function(){console.error("The sys.isObjectValid is not define!")}},{}],28:[function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,m,v,g,l,n;"undefined"!=typeof loadRuntime&&(o=loadRuntime(),cc&&cc.VideoPlayer&&cc.VideoPlayer.Impl&&(m=cc.Mat4,v=new cc.Mat4,g=new cc.Mat4,l=cc.VideoPlayer.Impl,n=cc.VideoPlayer.Impl.prototype,cc.VideoPlayer.prototype._updateVideoSource=function(){var t=this,i=this._clip;this.resourceType===cc.VideoPlayer.ResourceType.REMOTE?this._impl.setURL(this.remoteURL,this._mute||0===this._volume):i&&(i._nativeAsset?this._impl.setURL(i._nativeAsset,this._mute||0===this._volume):cc.assetManager.postLoadNative(i,function(e){e?console.error(e.message,e.stack):t._impl.setURL(i._nativeAsset,t._mute||0===t._volume)}))},n._bindEvent=function(){var e=this._video,i=this;e&&(e.onPlay(function(){i._video===e&&(i._playing=!0,i._dispatchEvent(l.EventType.PLAYING))}),e.onEnded(function(){i._video===e&&(i._playing=!1,i._currentTime=i._duration,i._dispatchEvent(l.EventType.COMPLETED))}),e.onPause(function(){i._video===e&&(i._playing=!1,i._dispatchEvent(l.EventType.PAUSED))}),e.onTimeUpdate(function(e){var t=JSON.parse(e.position);if("object"===a(t))return i._duration=t.duration,void(i._currentTime=t.position);i._duration=e.duration,i._currentTime=e.position}))},n._unbindEvent=function(){var e=this._video;e&&(e.offPlay(),e.offEnded(),e.offPause(),e.offTimeUpdate())},n.setVisible=function(e){var t=this._video;t&&(t.width=e&&this._actualWidth||0,this._visible=e)},n.createDomElementIfNeeded=function(){o.createVideo||cc.warn("VideoPlayer not supported")},n.setURL=function(e,t){var i,n,s,r=this._video;r&&r.src===e||this._tx&&(this._video&&(this.destroy(),this._video=null),i="string"!=typeof e?e._audio:e,this._duration=-1,this._currentTime=-1,this._video=o.createVideo({x:this._tx,y:this._ty,width:this._width,height:this._height,src:i,objectFit:"contain",live:!1}),(r=this._video).src=i,r.muted=!0,(n=this)._loaded=!1,s=function(e){var t=JSON.parse(e.position);if("object"===a(t))return n._duration=t.duration,void(n._currentTime=t.position);n._duration=e.duration,n._currentTime=e.position},r.onPlay(function e(){r.offPlay(e),r.offTimeUpdate(s),n.enable(),n._bindEvent(),r.stop(),r.muted=!1,n._loaded=!0,n._playing=!1,n._currentTime=0,n._dispatchEvent(l.EventType.READY_TO_PLAY)}),r.onTimeUpdate(s),r.play())},n.getURL=function(){var e=this._video;return e?e.src:""},n.play=function(){var e=this._video;e&&this._visible&&!this._playing&&e.play()},n.setStayOnBottom=function(e){},n.pause=function(){var e=this._video;this._playing&&e&&e.pause()},n.resume=function(){var e=this._video;!this._playing&&e&&e.play()},n.stop=function(){var e=this._video;e&&this._visible&&(e.stop(),this._dispatchEvent(l.EventType.STOPPED),this._playing=!1)},n.setVolume=function(e){},n.seekTo=function(e){var t=this._video;t&&this._loaded&&t.seek(e)},n.isPlaying=function(){return this._playing},n.duration=function(){return this._duration},n.currentTime=function(){return this._currentTime?this._currentTime:-1},n.setKeepAspectRatioEnabled=function(e){cc.log("On wechat game is always keep the aspect ratio")},n.isKeepAspectRatioEnabled=function(){return!0},n.isFullScreenEnabled=function(){return this._fullScreenEnabled},n.setFullScreenEnabled=function(e){var t=this._video;t&&this._fullScreenEnabled!==e&&(e?t.requestFullScreen():t.exitFullScreen(),this._fullScreenEnabled=e)},n.enable=function(){this.setVisible(!0)},n.disable=function(){this.setVisible(!1)},n.destroy=function(){this.disable(),this._unbindEvent(),this.stop(),this._video&&(this._video.destroy(),this._video=void 0),o.triggerGC()},n.updateMatrix=function(e){var t,i,n,s,r,a,o,l,c,u,h,d,_,f,p;e.getWorldMatrix(v),this._m00===v.m[0]&&this._m01===v.m[1]&&this._m04===v.m[4]&&this._m05===v.m[5]&&this._m12===v.m[12]&&this._m13===v.m[13]&&this._w===e._contentSize.width&&this._h===e._contentSize.height||(this._m00=v.m[0],this._m01=v.m[1],this._m04=v.m[4],this._m05=v.m[5],this._m12=v.m[12],this._m13=v.m[13],this._w=e._contentSize.width,this._h=e._contentSize.height,cc.Camera.findCamera(e).getWorldToScreenMatrix2D(g),m.multiply(g,g,v),t=cc.view._scaleX,i=cc.view._scaleY,t/=n=cc.view._devicePixelRatio,i/=n,s=g.m[0]*t,r=g.m[5]*i,a=this._w*s,o=this._h*r,l=a*e._anchorPoint.x,c=o*e._anchorPoint.y,h=(u=cc.view._viewportRect).x/n,d=u.y/n,_=g.m[12]*t-l+h,f=g.m[13]*i-c+d,p=cc.view.getFrameSize().height,this._tx=_,this._ty=f,this._width=a,this._height=o,this._video&&(this._video.x=_,this._video.y=p-o-f,this._video.width=a,this._video.height=o),this._actualWidth=a)}))},{}],29:[function(e,t,i){"use strict";var n=loadRuntime();jsb.inputBox={onConfirm:function(e){n.onKeyboardConfirm(e)},offConfirm:function(e){n.offKeyboardConfirm(e)},onComplete:function(e){n.onKeyboardComplete(e)},offComplete:function(e){n.offKeyboardComplete(e)},onInput:function(e){n.onKeyboardInput(e)},offInput:function(e){n.offKeyboardInput(e)},show:function(e){n.showKeyboard(e)},hide:function(){n.hideKeyboard()}}},{}],30:[function(e,t,i){"use strict";var n=renderer.Camera.prototype,s=n.setNode;cc.js.mixin(n,{setNode:function(e){this._persistentNode=e,s.call(this,e)}})},{}],31:[function(e,t,i){"use strict";cc.js.mixin(renderer.CustomRenderHandle.prototype,{_ctor:function(){this._comp=null},destroy:function(){this._comp=null},bind:function(e){this._comp!==e&&e instanceof cc.RenderComponent&&(this._comp=e)._assembler&&this.setUseModel(!!e._assembler.useModel)},updateEnabled:function(e){var t,i;e?this._enabled||(this._enabled=!0,this.enable(),(t=this._comp.node)&&t._proxy.addHandle("render",this)):this._enabled&&(this._enabled=!1,this.disable(),(i=this._comp.node)&&i._proxy.removeHandle("render"))}})},{}],32:[function(e,t,i){"use strict";cc.js.mixin(renderer.GraphicsRenderHandle.prototype,{_ctor:function(){this.vDatas=[],this.uintVDatas=[],this.iDatas=[],this.effects=[],this.meshCount=0,this._material=null,this._delayed=!1,this._comp=null},destroy:function(){this._comp=null},bind:function(e){this._comp!==e&&e instanceof cc.RenderComponent&&(this._comp=e)._assembler&&this.setUseModel(!!e._assembler.useModel)},updateEnabled:function(e){var t=this._comp.node;e?(this.enable(),t&&t._proxy.addHandle("render",this)):(this.disable(),t&&t._proxy.removeHandle("render"))},reserveMeshCount:function(e){this.meshCount<e&&(this.vDatas.length=e,this.uintVDatas.length=e,this.iDatas.length=e,this.effects.length=e,this.setMeshCount(e))},updateMesh:function(e,t,i){this.reserveMeshCount(e+1),this.vDatas[e]=t,this.uintVDatas[e]=new Uint32Array(t.buffer,0,t.length),this.iDatas[e]=i,this.meshCount=this.vDatas.length,this.updateNativeMesh(e,t,i)},updateMaterial:function(e,t){this.reserveMeshCount(e+1);var i=this.effects[e],n=this.effects[e]=t?t.effect:null;n!==i&&this.updateNativeEffect(e,n?n._nativeObj:null)},updateRenderData:function(){this._comp&&this._comp._assembler&&(this._comp._assembler.updateRenderData(this._comp),this._delayed=!1)},updateIAData:function(e,t,i){this.updateIA(e,t,i)},clear:function(){this.vDatas=[],this.uintVDatas=[],this.iDatas=[],this.effects=[],this.meshCount=0,this.reset()}})},{}],33:[function(e,t,i){"use strict";cc.js.mixin(renderer.MaskRenderHandle.prototype,{setNativeRenderHandle:function(e){e&&this.setRenderSubHandle(e)},setNativeClearHandle:function(e){e&&this.setClearSubHandle(e)},useImageStencil:function(e){this.setImageStencil(e)}})},{}],34:[function(e,t,i){"use strict";cc.js.mixin(renderer.NodeProxy.prototype,{_ctor:function(){this._owner=null},bind:function(e){this._owner&&this.unbind(),(this._owner=e)&&((e._proxy=this).update3DNode(),this.updateZOrder(),this.updateCullingMask(),this.updateJSTRS(e._trs),e._parent&&e._parent._proxy&&this.updateParent(e._parent._proxy),e.on(cc.Node.EventType.SIBLING_ORDER_CHANGED,this.updateZOrder,this),e.on(cc.Node.EventType.GROUP_CHANGED,this.updateCullingMask,this))},unbind:function(){this._owner.off(cc.Node.EventType.SIBLING_ORDER_CHANGED,this.updateZOrder,this),this._owner.off(cc.Node.EventType.GROUP_CHANGED,this.updateCullingMask,this),this._owner._proxy=null,this._owner=null,this.reset()},updateParent:function(e){var t=this.getParent();t&&t.removeChild(this),e.addChild(this)},updateZOrder:function(){this.setLocalZOrder(this._owner._localZOrder)},updateCullingMask:function(){this.setCullingMask(this._owner._cullingMask)},updateOpacity:function(){this.setOpacity(this._owner.opacity)},update3DNode:function(){this.set3DNode(this._owner.is3DNode)}})},{}],35:[function(e,t,i){"use strict";var n=cc.RenderFlow,s=(n.FLAG_LOCAL_TRANSFORM,n.FLAG_COLOR),r=(n.FLAG_OPACITY,n.FLAG_UPDATE_RENDER_DATA),a=n.FLAG_CUSTOM_IA_RENDER;cc.js.getset(cc.Node.prototype,"_renderFlag",function(){return 0},function(e){var t,i;0!==e&&(i=(t=this._renderComponent)&&t._assembler,(e&r||e&a)&&i&&(i.delayUpdateRenderData?t._renderHandle.delayUpdateRenderData():i.updateRenderData(t)),e&s&&(t&&t._updateColor(),i&&i.updateColor(t,this._color._val)))}),cc.PrivateNode.prototype._posDirty=function(e){var t=this.parent;t&&(this._trs[1]=this._originPos.x-(t._anchorPoint.x-.5)*t._contentSize.width,this._trs[2]=this._originPos.y-(t._anchorPoint.y-.5)*t._contentSize.height),this.setLocalDirty(cc.Node._LocalDirtyFlag.POSITION),!0===e&&1&this._eventMask&&this.emit(cc.Node.EventType.POSITION_CHANGED)}},{}],36:[function(e,t,i){"use strict";var n=cc.RenderFlow;n.EventType={BEFORE_RENDER:"before-render"},cc.js.mixin(n,cc.EventTarget.prototype);var s=middleware.MiddlewareManager.getInstance(),r=cc.director;n.render=function(e){this.emit(this.EventType.BEFORE_RENDER),s&&s.update(r._deltaTime),this._nativeFlow.render(e._proxy)},n.init=function(e){cc.EventTarget.call(this),this._nativeFlow=e},n.FLAG_DONOTHING=0,n.FLAG_LOCAL_TRANSFORM=1,n.FLAG_WORLD_TRANSFORM=1,n.FLAG_TRANSFORM=1,n.FLAG_COLOR=8,n.FLAG_OPACITY=4,n.FLAG_UPDATE_RENDER_DATA=2,n.FLAG_RENDER=0,n.FLAG_CUSTOM_IA_RENDER=0,n.FLAG_CHILDREN=16,n.FLAG_POST_UPDATE_RENDER_DATA=32,n.FLAG_POST_RENDER=0,n.FLAG_FINAL=64},{}],37:[function(e,t,i){"use strict";var n=cc.RenderFlow,s=n.EventType.BEFORE_RENDER;cc.js.mixin(renderer.RenderHandle.prototype,{_ctor:function(){this.vDatas=[],this.uintVDatas=[],this.iDatas=[],this.effects=[],this.meshCount=0,this._material=null,this._delayed=!1,this._comp=null},destroy:function(){n.off(s,this.updateRenderData,this),this._comp=null},bind:function(e){this._comp!==e&&e instanceof cc.RenderComponent&&((this._comp=e)._assembler&&this.setUseModel(!!e._assembler.useModel),e._vertexFormat&&this.setVertexFormat(e._vertexFormat._nativeObj))},reserveMeshCount:function(e){this.meshCount<e&&(this.vDatas.length=e,this.uintVDatas.length=e,this.iDatas.length=e,this.effects.length=e,this.setMeshCount(e))},updateMesh:function(e,t,i){this.reserveMeshCount(e+1),this.vDatas[e]=t,this.uintVDatas[e]=new Uint32Array(t.buffer,0,t.length),this.iDatas[e]=i,this.meshCount=this.vDatas.length,this.updateNativeMesh(e,t,i)},updateMaterial:function(e,t){this.reserveMeshCount(e+1);var i=this.effects[e],n=this.effects[e]=t?t.effect:null;n!==i&&this.updateNativeEffect(e,n?n._nativeObj:null)},updateEnabled:function(e){var t,i;e?this._enabled||(this._enabled=!0,this.enable(),(t=this._comp.node)&&t._proxy.addHandle("render",this)):this._enabled&&(this._enabled=!1,this.disable(),(i=this._comp.node)&&i._proxy.removeHandle("render"))},delayUpdateRenderData:function(){this._comp&&(n.on(s,this.updateRenderData,this),this._delayed=!0)},updateRenderData:function(){this._comp&&this._comp._assembler&&(this._comp._assembler.updateRenderData(this._comp),this._delayed=!1)}})},{}]},{},[17]);